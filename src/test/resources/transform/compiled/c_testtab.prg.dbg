117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
128	.$81f	LDA #65
129	.$821	JSR SINGLECHROUTMAX
132	.$824	LDA #<CONST_1R
133	.$826	LDY #>CONST_1R
134	.$828	JSR COPY2_XYA_YREG
139	.$82b	JSR TAB
140	.$82e	LDA #66
141	.$830	JSR SINGLECHROUTBRKMAX
146	.$833	LINE_20:
148	.$833	LDA #65
149	.$835	JSR SINGLECHROUTMAX
152	.$838	LDA #<CONST_1R
153	.$83a	LDY #>CONST_1R
154	.$83c	JSR COPY2_XYA_YREG
159	.$83f	JSR TAB
161	.$842	LINE_30:
163	.$842	LDA #66
164	.$844	JSR SINGLECHROUTBRKMAX
169	.$847	LINE_40:
171	.$847	LDY #$ff
172	.$849	STY TMP_ZP
173	.$84b	LDA #$ff
174	.$84d	STA TMP_ZP+1
175	.$84f	JSR INTOUTBRKFAST
180	.$852	LINE_50:
182	.$852	LDX #4
183	.$854	dcloop1065_1:
184	.$854	LDA CONST_4,X
185	.$857	STA VAR_A,X
186	.$85a	DEX
187	.$85b	BPL dcloop1065_1
189	.$85d	LDA #<CONST_5
190	.$85f	LDY #>CONST_5
191	.$861	JSR REALFAC
192	.$864	LDA #<VAR_A
193	.$866	LDY #>VAR_A
194	.$868	JSR FASTFSUBMEM
199	.$86b	LDX #<VAR_A
200	.$86d	LDY #>VAR_A
201	.$86f	JSR FACMEM
205	.$872	JSR BASINT
206	.$875	JSR FACXREG
208	.$878	JSR INTOUTBRK
210	.$87b	JSR END
211	.$87e	RTS
214	.$87f	END   LDX SP_SAVE
215	.$882	TXS
222	.$883	RTS
225	.$884	START  LDA ENDSTRBUF+1
226	.$887	BNE ENDGIVEN
227	.$889	LDA BASICEND
228	.$88b	STA ENDSTRBUF
229	.$88e	LDA BASICEND+1
230	.$890	STA ENDSTRBUF+1
231	.$893	ENDGIVEN LDA #<FPSTACK
232	.$895	LDY #>FPSTACK
233	.$897	STA FPSTACKP
234	.$89a	STY FPSTACKP+1
235	.$89d	LDA #<FORSTACK
236	.$89f	LDY #>FORSTACK
237	.$8a1	STA FORSTACKP
238	.$8a4	STY FORSTACKP+1
239	.$8a7	LDA #<STRBUF
240	.$8a9	LDY #>STRBUF
241	.$8ab	STA STRBUFP
242	.$8ae	STY STRBUFP+1
243	.$8b1	STA HIGHP
244	.$8b4	STY HIGHP+1
245	.$8b7	LDA #0
246	.$8b9	STA CHLOCKFLAG
247	.$8bc	STA LASTVAR
248	.$8bf	STA LASTVAR+1
249	.$8c2	JSR INITVARS
250	.$8c5	LDA #0
251	.$8c7	STA CMD_NUM
252	.$8ca	STA CHANNEL
253	.$8cd	TAY
254	.$8ce	TAX
258	.$8cf	STA KEYNDX
264	.$8d1	JSR RESTORE
265	.$8d4	CLC
269	.$8d5	RTS
272	.$8d6	INITNARRAY
273	.$8d6	STA TMP_ZP
274	.$8d8	STY TMP_ZP+1
275	.$8da	LDY #0
276	.$8dc	TYA
277	.$8dd	NINITLOOP STA (TMP_ZP),Y
278	.$8df	INC TMP_ZP
279	.$8e1	BNE NLOOPNOV
280	.$8e3	INC TMP_ZP+1
281	.$8e5	NLOOPNOV LDX TMP2_ZP
282	.$8e7	BNE NLOOPNOV2
283	.$8e9	DEC TMP2_ZP+1
284	.$8eb	NLOOPNOV2 DEC TMP2_ZP
285	.$8ed	BNE NINITLOOP
286	.$8ef	LDX TMP2_ZP+1
287	.$8f1	BNE NINITLOOP
288	.$8f3	RTS
291	.$8f4	INITSTRARRAY
292	.$8f4	STA TMP_ZP
293	.$8f6	STY TMP_ZP+1
294	.$8f8	SINITLOOP LDY #0
295	.$8fa	LDA #<EMPTYSTR
296	.$8fc	STA (TMP_ZP),Y
297	.$8fe	LDA #>EMPTYSTR
298	.$900	INY
299	.$901	STA (TMP_ZP),Y
300	.$903	CLC
301	.$904	LDA TMP_ZP
302	.$906	ADC #2
303	.$908	STA TMP_ZP
304	.$90a	BCC SLOOPNOV1
305	.$90c	INC TMP_ZP+1
306	.$90e	SLOOPNOV1 SEC
307	.$90f	LDA TMP2_ZP
308	.$911	SBC #2
309	.$913	STA TMP2_ZP
310	.$915	BCS SLOOPNOV2
311	.$917	DEC TMP2_ZP+1
312	.$919	SLOOPNOV2 LDA TMP2_ZP
313	.$91b	BNE SINITLOOP
314	.$91d	LDA TMP2_ZP+1
315	.$91f	BNE SINITLOOP
316	.$921	RTS
319	.$922	INITSPARAMS STA TMP3_ZP
320	.$924	STY TMP3_ZP+1
321	.$926	SEC
322	.$927	SBC #2
323	.$929	STA TMP_ZP
324	.$92b	TYA
325	.$92c	SBC #0
326	.$92e	STA TMP_ZP+1
327	.$930	LDY #0
328	.$932	LDA (TMP_ZP),Y
329	.$934	STA TMP2_ZP
330	.$936	INY
331	.$937	LDA (TMP_ZP),Y
332	.$939	STA TMP2_ZP+1
333	.$93b	LDA TMP3_ZP
334	.$93d	LDY TMP3_ZP+1
335	.$93f	RTS
338	.$940	INITSTRVARS LDA #<STRINGVARS_START  
339	.$942	LDY #>STRINGVARS_START
340	.$944	CMP #<STRINGVARS_END
341	.$946	BNE INITIT1
342	.$948	CPY #>STRINGVARS_END
343	.$94a	BNE INITIT1
344	.$94c	JMP INITSA2     
345	.$94f	INITIT1  STA TMP_ZP
346	.$951	STY TMP_ZP+1
347	.$953	LDY #0
348	.$955	INITSTRLOOP LDA #<EMPTYSTR
349	.$957	STA (TMP_ZP),Y
350	.$959	INY
351	.$95a	LDA #>EMPTYSTR
352	.$95c	STA (TMP_ZP),Y
353	.$95e	DEY
354	.$95f	LDA TMP_ZP
355	.$961	CLC
356	.$962	ADC #2
357	.$964	STA TMP_ZP
358	.$966	LDA TMP_ZP+1
359	.$968	ADC #0
360	.$96a	STA TMP_ZP+1
361	.$96c	CMP #>STRINGVARS_END
362	.$96e	BNE INITSTRLOOP
363	.$970	LDA TMP_ZP
364	.$972	CMP #<STRINGVARS_END
365	.$974	BNE INITSTRLOOP
366	.$976	INITSA2  LDA #<STRINGARRAYS_START 
367	.$978	LDY #>STRINGARRAYS_START
368	.$97a	CMP #<STRINGARRAYS_END
369	.$97c	BNE ARRAYLOOP
370	.$97e	CPY #>STRINGARRAYS_END
371	.$980	BNE ARRAYLOOP
372	.$982	RTS       
373	.$983	ARRAYLOOP CLC
374	.$984	ADC #3
375	.$986	BCC ARRAYSKIP1
376	.$988	INY
377	.$989	ARRAYSKIP1 CPY #>STRINGARRAYS_END
378	.$98b	BEQ ARRAYSC
379	.$98d	BCC ARRAYSKIP2
380	.$98f	JMP ARRAYQUIT
381	.$992	ARRAYSC  CMP #<STRINGARRAYS_END
382	.$994	BCS ARRAYQUIT
383	.$996	ARRAYSKIP2 STA TMP_REG
384	.$998	STY TMP_REG+1
385	.$99a	JSR INITSPARAMS
386	.$99d	LDA TMP_REG
387	.$99f	LDY TMP_REG+1
388	.$9a1	JSR INITSTRARRAY
389	.$9a4	LDA TMP_ZP
390	.$9a6	LDY TMP_ZP+1
391	.$9a8	JMP ARRAYLOOP
392	.$9ab	ARRAYQUIT RTS
395	.$9ac	RESTORE  LDA #<DATAS
396	.$9ae	LDY #>DATAS
397	.$9b0	STA DATASP
398	.$9b3	STY DATASP+1
399	.$9b6	RTS
402	.$9b7	TAB   JSR TABSPCINIT
403	.$9ba	JSR REROUTE
404	.$9bd	LDA CMD_NUM
405	.$9c0	BEQ NORMALTAB  
406	.$9c2	CMP #3
407	.$9c4	BEQ NORMALTAB2  
408	.$9c6	JMP TABCHANNEL2
409	.$9c9	NORMALTAB2 JSR CLRCHNEW
410	.$9cc	NORMALTAB SEC
411	.$9cd	JMP TABSPC
414	.$9d0	TABSPCINIT SEC
415	.$9d1	JSR CRSRPOS
416	.$9d4	STY $09
417	.$9d6	JSR YREGFAC
418	.$9d9	JSR FACWORD
419	.$9dc	TYA
420	.$9dd	TAX
421	.$9de	RTS
424	.$9df	TABSPC     BCC DOSPC
425	.$9e1	TXA
426	.$9e2	SBC $09
427	.$9e4	BCC TABSPCQUIT
428	.$9e6	TAX
429	.$9e7	DOSPC  INX
430	.$9e8	TABSPCLOOP  DEX
431	.$9e9	BNE TABSPCRIGHT
432	.$9eb	TABSPCQUIT RTS
433	.$9ec	TABSPCRIGHT JSR CRSRRIGHT
434	.$9ef	JMP TABSPCLOOP
437	.$9f2	SAVEPOINTERS
438	.$9f2	LDA TMP_ZP   
439	.$9f4	STA STORE1
440	.$9f7	LDA TMP_ZP+1
441	.$9f9	STA STORE1+1
442	.$9fc	LDA TMP2_ZP
443	.$9fe	STA STORE2
444	.$a01	LDA TMP2_ZP+1
445	.$a03	STA STORE2+1
446	.$a06	LDA TMP3_ZP
447	.$a08	STA STORE3
448	.$a0b	LDA TMP3_ZP+1
449	.$a0d	STA STORE3+1
450	.$a10	RTS
453	.$a11	RESTOREPOINTERS
454	.$a11	LDA STORE3+1  
455	.$a14	STA TMP3_ZP+1
456	.$a16	LDA STORE3
457	.$a19	STA TMP3_ZP
458	.$a1b	LDA STORE2+1
459	.$a1e	STA TMP2_ZP+1
460	.$a20	LDA STORE2
461	.$a23	STA TMP2_ZP
462	.$a25	LDA STORE1+1
463	.$a28	STA TMP_ZP+1
464	.$a2a	LDA STORE1
465	.$a2d	STA TMP_ZP
466	.$a2f	RTS
473	.$a30	COMPACTMAX
474	.$a30	LDA #$FF
475	.$a32	LDY #$0
476	.$a34	JMP COMPACTF
479	.$a37	COMPACT
480	.$a37	LDY #0
481	.$a39	GCBUFNE  LDA (TMP_ZP),Y  
482	.$a3b	COMPACTF STA TMP4_REG  
483	.$a3e	LDY STRBUFP+1  
484	.$a41	STY TMP4_REG+1  
485	.$a44	INY     
486	.$a45	BEQ ENDMEM   
487	.$a47	CPY ENDSTRBUF+1  
488	.$a4a	BCC RGCEXIT   
489	.$a4c	ENDMEM  LDA STRBUFP
490	.$a4f	CLC
491	.$a50	ADC TMP4_REG
492	.$a53	STA TMP4_REG
493	.$a56	BCC RGCNOOV1
494	.$a58	INC TMP4_REG+1
495	.$a5b	RGCNOOV1 CLC
496	.$a5c	LDA TMP4_REG
497	.$a5f	ADC #3
498	.$a61	STA TMP4_REG
499	.$a64	BCC RGCNOOV2
500	.$a66	INC TMP4_REG+1
501	.$a69	RGCNOOV2 LDA TMP4_REG+1  
502	.$a6c	CMP ENDSTRBUF+1
503	.$a6f	BEQ RGCLOW1
504	.$a71	BCS GCEXECOMP  
505	.$a73	JMP RGCEXIT
506	.$a76	RGCLOW1  LDA TMP4_REG
507	.$a79	CMP ENDSTRBUF
508	.$a7c	BCS GCEXECOMP  
509	.$a7e	RGCEXIT  RTS     
510	.$a7f	GCEXECOMP LDA STRBUFP
511	.$a82	STA STORE4
512	.$a85	LDA STRBUFP+1
513	.$a88	STA STORE4+1
514	.$a8b	JSR GCEXE
515	.$a8e	JMP CHECKMEMORY
518	.$a91	GCEXE  JSR SAVEPOINTERS
519	.$a94	LDA #0
520	.$a96	STA LASTVAR
521	.$a99	STA LASTVAR+1  
522	.$a9c	LDA #<STRBUF
523	.$a9e	STA TMP_ZP
524	.$aa0	STA GCSTART
525	.$aa3	LDA #>STRBUF
526	.$aa5	STA TMP_ZP+1  
527	.$aa7	STA GCSTART+1
528	.$aaa	GCLOOP  LDY #0
529	.$aac	LDA TMP_ZP
530	.$aae	STA GCWORK
531	.$ab1	LDA TMP_ZP+1
532	.$ab3	STA GCWORK+1  
533	.$ab6	LDA (TMP_ZP),Y
534	.$ab8	STA GCLEN   
535	.$abb	INC TMP_ZP
536	.$abd	BNE GCLOOPNOOV
537	.$abf	INC TMP_ZP+1
538	.$ac1	GCLOOPNOOV LDA TMP_ZP
539	.$ac3	CLC
540	.$ac4	ADC GCLEN
541	.$ac7	STA TMP_ZP
542	.$ac9	BCC GCLOOPNOOV2
543	.$acb	INC TMP_ZP+1  
544	.$acd	GCLOOPNOOV2 LDY #0
545	.$acf	LDA (TMP_ZP),Y
546	.$ad1	STA TMP2_ZP
547	.$ad3	INY
548	.$ad4	LDA (TMP_ZP),Y
549	.$ad6	STA TMP2_ZP+1  
550	.$ad8	LDA TMP_ZP
551	.$ada	CLC
552	.$adb	ADC #2
553	.$add	STA TMP_ZP
554	.$adf	BCC GCLOOPNOOV3
555	.$ae1	INC TMP_ZP+1  
556	.$ae3	GCLOOPNOOV3 LDY #0
557	.$ae5	LDA (TMP2_ZP),Y
558	.$ae7	CMP GCWORK
559	.$aea	BNE GCKLOOP
560	.$aec	INY
561	.$aed	LDA (TMP2_ZP),Y
562	.$aef	CMP GCWORK+1
563	.$af2	BEQ MEMFREE
564	.$af4	GCKLOOP  LDA TMP_ZP+1  
565	.$af6	CMP HIGHP+1
566	.$af9	BEQ GCHECKLOW
567	.$afb	BCC GCLOOP
568	.$afd	JMP GCDONE
569	.$b00	GCHECKLOW LDA TMP_ZP
570	.$b02	CMP HIGHP
571	.$b05	BCS GCDONE
572	.$b07	JMP GCLOOP
573	.$b0a	MEMFREE  LDA GCSTART   
574	.$b0d	CMP GCWORK   
575	.$b10	BNE COPYDOWN
576	.$b12	LDA GCSTART+1
577	.$b15	CMP GCWORK+1
578	.$b18	BNE COPYDOWN
579	.$b1a	LDA TMP_ZP   
580	.$b1c	STA GCSTART
581	.$b1f	LDA TMP_ZP+1
582	.$b21	STA GCSTART+1
583	.$b24	JMP GCKLOOP   
584	.$b27	COPYDOWN LDA GCSTART   
585	.$b2a	STA TMP_REG
586	.$b2c	LDA GCSTART+1
587	.$b2f	STA TMP_REG+1  
588	.$b31	LDA GCWORK
589	.$b34	STA TMP2_REG
590	.$b37	LDA GCWORK+1
591	.$b3a	STA TMP2_REG+1  
592	.$b3d	LDA TMP_ZP
593	.$b3f	SEC
594	.$b40	SBC GCWORK
595	.$b43	STA TMP3_REG
596	.$b46	LDA TMP_ZP+1
597	.$b48	SBC GCWORK+1
598	.$b4b	STA TMP3_REG+1  
599	.$b4e	LDA GCSTART
600	.$b51	CLC
601	.$b52	ADC TMP3_REG
602	.$b55	STA GCSTART
603	.$b58	LDA GCSTART+1
604	.$b5b	ADC TMP3_REG+1
605	.$b5e	STA GCSTART+1  
606	.$b61	JSR QUICKCOPY  
607	.$b64	LDY #0
608	.$b66	LDA TMP_REG
609	.$b68	STA (TMP2_ZP),Y
610	.$b6a	INY
611	.$b6b	LDA TMP_REG+1
612	.$b6d	STA (TMP2_ZP),Y  
613	.$b6f	JMP GCKLOOP
614	.$b72	GCDONE  LDA GCSTART
615	.$b75	STA HIGHP
616	.$b78	STA STRBUFP
617	.$b7b	LDA GCSTART+1
618	.$b7e	STA HIGHP+1
619	.$b81	STA STRBUFP+1  
620	.$b84	GCSKIP  JSR RESTOREPOINTERS
621	.$b87	RTS     
624	.$b88	CHECKMEMORY
625	.$b88	LDA STRBUFP+1  
626	.$b8b	CMP STORE4+1  
627	.$b8e	BCC STILLFITSCM  
631	.$b90	BEQ CHECKMEMLOWCM
632	.$b92	JMP OUTOFMEMORY  
633	.$b95	CHECKMEMLOWCM
634	.$b95	LDA STRBUFP   
635	.$b98	CMP STORE4
636	.$b9b	BCC STILLFITSCM
637	.$b9d	JMP OUTOFMEMORY  
638	.$ba0	STILLFITSCM RTS
641	.$ba1	QUICKCOPY LDA TMP_REG  
642	.$ba3	STA TMEM+1
643	.$ba6	LDA TMP_REG+1
644	.$ba8	STA TMEM+2
645	.$bab	LDA TMP2_REG
646	.$bae	STA SMEM+1
647	.$bb1	LDA TMP2_REG+1
648	.$bb4	STA SMEM+2
649	.$bb7	LDY #$0
650	.$bb9	LDX TMP3_REG
651	.$bbc	BNE QCLOOP
652	.$bbe	LDA TMP3_REG+1
653	.$bc1	BEQ QCEXIT  
654	.$bc3	QCLOOP
655	.$bc3	SMEM  LDA $0000,Y
656	.$bc6	TMEM  STA $0000,Y
657	.$bc9	INY
658	.$bca	BNE YNOOV
659	.$bcc	INC TMEM+2
660	.$bcf	INC SMEM+2
661	.$bd2	YNOOV  DEX
662	.$bd3	BNE QCLOOP
663	.$bd5	LDA TMP3_REG+1
664	.$bd8	BEQ QCEXIT
665	.$bda	DEC TMP3_REG+1
666	.$bdd	JMP QCLOOP
667	.$be0	QCEXIT  RTS
670	.$be1	REROUTE  LDA CMD_NUM  
671	.$be4	BEQ REROUTECMD
672	.$be6	TAX
673	.$be7	STA CHANNEL
674	.$bea	JMP CHKOUT
675	.$bed	REROUTECMD RTS
678	.$bee	RESETROUTE LDA CMD_NUM  
679	.$bf1	BEQ RESETROUTECMD
680	.$bf3	JMP CLRCHNEW
681	.$bf6	RESETROUTECMD
682	.$bf6	RTS
685	.$bf7	INTOUTBRK   JMP REALOUTBRK
688	.$bfa	INTOUTBRKFAST
689	.$bfa	JSR REROUTE
690	.$bfd	JSR INTOUTFASTZ
691	.$c00	LDA #$0D
692	.$c02	JSR CHROUT
693	.$c05	JMP RESETROUTE
696	.$c08	INTOUTFASTZ LDX #32    
697	.$c0a	LDA TMP_ZP+1
698	.$c0c	BPL INTISPOS
699	.$c0e	CLC
700	.$c0f	LDA TMP_ZP
701	.$c11	EOR #$FF
702	.$c13	ADC #1
703	.$c15	STA TMP_ZP
704	.$c17	LDA TMP_ZP+1
705	.$c19	EOR #$FF
706	.$c1b	ADC #0
707	.$c1d	STA TMP_ZP+1
708	.$c1f	LDX #45    
709	.$c21	INTISPOS
710	.$c21	TXA
711	.$c22	JSR CHROUT
712	.$c25	JSR CONVPOSINT
713	.$c28	LDA NUMFLAG
714	.$c2b	BNE ALLINTOUTDONE
715	.$c2d	LDA #48
716	.$c2f	JSR CHROUT
717	.$c32	ALLINTOUTDONE
718	.$c32	RTS
721	.$c33	NUMBEROUT
722	.$c33	BEQ NUMZERO
723	.$c35	ORA #$30
724	.$c37	STA NUMFLAG
725	.$c3a	JMP CHROUT
726	.$c3d	NUMZERO
727	.$c3d	LDX NUMFLAG
728	.$c40	BEQ STILLZERO
729	.$c42	ORA #$30
730	.$c44	JMP CHROUT
731	.$c47	STILLZERO
732	.$c47	RTS
735	.$c48	CONVPOSINT
736	.$c48	JSR INT2BCD
737	.$c4b	LDX #0
738	.$c4d	STX NUMFLAG
739	.$c50	AND #$0F
740	.$c52	JSR NUMBEROUT
741	.$c55	LDA BCD+1
742	.$c58	LSR
743	.$c59	LSR
744	.$c5a	LSR
745	.$c5b	LSR
746	.$c5c	JSR NUMBEROUT
747	.$c5f	LDA BCD+1
748	.$c62	AND #$0F
749	.$c64	TAY
750	.$c65	JSR NUMBEROUT
751	.$c68	LDA BCD
752	.$c6b	LSR
753	.$c6c	LSR
754	.$c6d	LSR
755	.$c6e	LSR
756	.$c6f	JSR NUMBEROUT
757	.$c72	LDA BCD
758	.$c75	AND #$0F
759	.$c77	JSR NUMBEROUT
760	.$c7a	RTS
763	.$c7b	INT2BCD
764	.$c7b	SED
765	.$c7c	LDA #0
766	.$c7e	STA BCD
767	.$c81	STA BCD+1
768	.$c84	STA BCD+2
769	.$c87	ASL TMP_ZP
770	.$c89	ROL TMP_ZP+1
771	.$c8b	LDA BCD
772	.$c8e	ADC BCD
773	.$c91	STA BCD
774	.$c94	ASL TMP_ZP
775	.$c96	ROL TMP_ZP+1
776	.$c98	ADC BCD
777	.$c9b	STA BCD
778	.$c9e	ASL TMP_ZP
779	.$ca0	ROL TMP_ZP+1
780	.$ca2	ADC BCD
781	.$ca5	STA BCD
782	.$ca8	ASL TMP_ZP
783	.$caa	ROL TMP_ZP+1
784	.$cac	ADC BCD
785	.$caf	STA BCD
786	.$cb2	ASL TMP_ZP
787	.$cb4	ROL TMP_ZP+1
788	.$cb6	ADC BCD
789	.$cb9	STA BCD
790	.$cbc	ASL TMP_ZP
791	.$cbe	ROL TMP_ZP+1
792	.$cc0	ADC BCD
793	.$cc3	STA BCD
794	.$cc6	LDX #7
795	.$cc8	BCDBIT1
796	.$cc8	ASL TMP_ZP
797	.$cca	ROL TMP_ZP+1
798	.$ccc	LDA BCD
799	.$ccf	ADC BCD
800	.$cd2	STA BCD
801	.$cd5	LDA BCD+1
802	.$cd8	ADC BCD+1
803	.$cdb	STA BCD+1
804	.$cde	DEX
805	.$cdf	BNE BCDBIT1
806	.$ce1	LDX #3
807	.$ce3	BCDBIT2
808	.$ce3	ASL TMP_ZP
809	.$ce5	ROL TMP_ZP+1
810	.$ce7	LDA BCD
811	.$cea	ADC BCD
812	.$ced	STA BCD
813	.$cf0	LDA BCD+1
814	.$cf3	ADC BCD+1
815	.$cf6	STA BCD+1
816	.$cf9	LDA BCD+2
817	.$cfc	ADC BCD+2
818	.$cff	STA BCD+2
819	.$d02	DEX
820	.$d03	BNE BCDBIT2
821	.$d05	CLD
822	.$d06	RTS
823	.$d07	BCD
824	.$d07	.WORD 0 0
825	.$d0b	NUMFLAG
826	.$d0b	.BYTE 0
829	.$d0c	REALOUTFAST JSR FACINT
830	.$d0f	STA TMP_ZP+1
831	.$d11	STY TMP_ZP
832	.$d13	JMP INTOUTFASTZ
835	.$d16	CHECKFORFASTOUT
836	.$d16	JSR REROUTE
837	.$d19	JSR XREGFAC
838	.$d1c	LDA FACEXP
839	.$d1e	CMP #$90
840	.$d20	BCS REALOUTINT
841	.$d22	CMP #$81
842	.$d24	BCC REALOUTINT
843	.$d26	MAYBEREALOUTFAST
844	.$d26	LDA FACEXP+3
845	.$d28	BNE REALOUTINT
846	.$d2a	LDA FACEXP+4
847	.$d2c	BNE REALOUTINT
848	.$d2e	LDA FACEXP
849	.$d30	SEC
850	.$d31	SBC #129
851	.$d33	ASL
852	.$d34	TAX
853	.$d35	LDA FACEXP+1
854	.$d37	AND MANTMASK,X
855	.$d3a	BNE REALOUTINT
856	.$d3c	INX
857	.$d3d	LDA FACEXP+2
858	.$d3f	AND MANTMASK,X
859	.$d42	BNE REALOUTINT
860	.$d44	JMP REALOUTFAST
861	.$d47	REALOUTINT LDY #0
862	.$d49	JSR FACSTR
863	.$d4c	LDY #0
864	.$d4e	LDA LOFBUF,Y
865	.$d51	STRLOOPRO JSR CHROUT
866	.$d54	INY
867	.$d55	LDA LOFBUF,Y
868	.$d58	BNE STRLOOPRO
869	.$d5a	RTS
870	.$d5b	MANTMASK
871	.$d5b	.BYTE 127 255 63 255 31 255 15 255 7 255 3 255 1 255 0 255 0 127 0 63 0 31 0 15 0 7 0 3 0 1
874	.$d79	REALOUTBRK  LDA X_REG
875	.$d7b	BNE RNOTNULLBRK
876	.$d7d	JMP PRINTNULLBRK
877	.$d80	RNOTNULLBRK JSR CHECKFORFASTOUT
878	.$d83	LDA #$0D
879	.$d85	JSR CHROUT
880	.$d88	JMP RESETROUTE
883	.$d8b	PRINTNULLBRK
884	.$d8b	JSR REROUTE
885	.$d8e	LDA #$20
886	.$d90	JSR CHROUT
887	.$d93	LDA #$30
888	.$d95	JSR CHROUT
889	.$d98	LDA #$0D
890	.$d9a	JSR CHROUT
891	.$d9d	JMP RESETROUTE
894	.$da0	SINGLECHROUTBRKMAX
895	.$da0	JSR SINGLECHROUTBRK
896	.$da3	JMP COMPACTMAX
899	.$da6	SINGLECHROUTBRK
900	.$da6	STA TMP_ZP
901	.$da8	JSR REROUTE
902	.$dab	LDA TMP_ZP
903	.$dad	JSR CHROUT
904	.$db0	LDA #$0D
905	.$db2	JSR CHROUT
906	.$db5	JMP RESETROUTE
909	.$db8	SINGLECHROUTMAX
910	.$db8	JSR SINGLECHROUT
911	.$dbb	JMP COMPACTMAX
914	.$dbe	SINGLECHROUT
915	.$dbe	STA TMP_ZP
916	.$dc0	JSR REROUTE
917	.$dc3	LDA TMP_ZP
918	.$dc5	JSR CHROUT
919	.$dc8	JMP RESETROUTE
922	.$dcb	COPY2_XYA_YREG
923	.$dcb	STA TMP3_ZP
924	.$dcd	STY TMP3_ZP+1
925	.$dcf	COPY2_XY_YREG
926	.$dcf	LDX #<Y_REG  
927	.$dd1	LDY #0
928	.$dd3	LDA (TMP3_ZP),Y
929	.$dd5	STA Y_REG
930	.$dd8	INY
931	.$dd9	LDA (TMP3_ZP),Y
932	.$ddb	STA Y_REG+1
933	.$dde	INY
934	.$ddf	LDA (TMP3_ZP),Y
935	.$de1	STA Y_REG+2
936	.$de4	INY
937	.$de5	LDA (TMP3_ZP),Y
938	.$de7	STA Y_REG+3
939	.$dea	INY
940	.$deb	LDA (TMP3_ZP),Y
941	.$ded	STA Y_REG+4
942	.$df0	RTS
946	.$df1	FACWORD
947	.$df1	LDA FACEXP   
948	.$df3	BNE DOFACWORD
949	.$df5	STA FACSGN   
950	.$df7	DOFACWORD:
951	.$df7	JMP XFACWORD
955	.$dfa	INITOUTCHANNEL
956	.$dfa	LDA CHLOCKFLAG
957	.$dfd	BEQ INITOUT2
958	.$dff	CMP #$FF
959	.$e01	BNE SKIPINITCH
960	.$e03	INITOUT2
961	.$e03	LDA #<C_REG
962	.$e05	LDY #>C_REG
963	.$e07	JSR REALFAC
964	.$e0a	JSR FACWORD
965	.$e0d	TYA
966	.$e0e	TAX
967	.$e0f	CPX CMD_NUM
968	.$e12	BNE CMDNEQUAL
969	.$e14	LDY #0
970	.$e16	STY CMD_NUM   
971	.$e19	CMDNEQUAL STA CHANNEL
972	.$e1c	STA CHLOCKFLAG
973	.$e1f	JMP CHKOUT
974	.$e22	SKIPINITCH
975	.$e22	RTS
978	.$e23	CLRCHNEW
979	.$e23	LDA CHLOCKFLAG
980	.$e26	BNE SKIPCLRCH
981	.$e28	JMP CLRCH
982	.$e2b	SKIPCLRCH
983	.$e2b	RTS
986	.$e2c	TABCHANNEL
987	.$e2c	JSR INITOUTCHANNEL
988	.$e2f	TABCHANNELINT
989	.$e2f	LDA CHANNEL
990	.$e32	CMP #3  
991	.$e34	BEQ TABSCREEN
992	.$e36	TABCHANNEL2 LDA IOCHANNEL
993	.$e38	STA STORE1
994	.$e3b	LDA #1
995	.$e3d	STA IOCHANNEL  
996	.$e3f	JSR YREGFAC
997	.$e42	JSR FACWORD
998	.$e45	TYA
999	.$e46	TAX
1000	.$e47	JMP EXITCHANNEL
1001	.$e4a	TABSCREEN
1002	.$e4a	JSR CLRCHNEW
1003	.$e4d	JMP TAB
1006	.$e50	EXITCHANNEL CLC
1007	.$e51	JSR TABSPC
1008	.$e54	JSR CLRCHNEW
1009	.$e57	LDA STORE1
1010	.$e5a	STA IOCHANNEL
1011	.$e5c	RTS
1014	.$e5d	OUTOFMEMORY
1018	.$e5d	LDX #$10
1019	.$e5f	JMP ERRALL
1022	.$e62	ILLEGALQUANTITY
1026	.$e62	JMP ERRIQ
1029	.$e65	FACXREG  LDA FACLO
1030	.$e67	STA X_REG+4
1031	.$e69	LDA FACMO
1032	.$e6b	STA X_REG+3
1033	.$e6d	LDA FACMOH
1034	.$e6f	STA X_REG+2
1035	.$e71	LDA FACSGN
1036	.$e73	ORA #$7F
1037	.$e75	AND FACHO
1038	.$e77	STA X_REG+1
1039	.$e79	LDA FACEXP
1040	.$e7b	STA X_REG
1041	.$e7d	LDA #0   
1042	.$e7f	STA FACOV
1043	.$e81	RTS
1046	.$e82	XREGFAC  LDA X_REG+4
1047	.$e84	STA FACLO
1048	.$e86	LDA X_REG+3
1049	.$e88	STA FACMO
1050	.$e8a	LDA X_REG+2
1051	.$e8c	STA FACMOH
1052	.$e8e	LDA X_REG+1
1053	.$e90	STA FACSGN
1054	.$e92	ORA #$80
1055	.$e94	STA FACHO
1056	.$e96	LDA X_REG
1057	.$e98	STA FACEXP
1058	.$e9a	LDA #0
1059	.$e9c	STA FACOV
1060	.$e9e	RTS
1063	.$e9f	YREGFAC  LDA Y_REG+4
1064	.$ea2	STA FACLO
1065	.$ea4	LDA Y_REG+3
1066	.$ea7	STA FACMO
1067	.$ea9	LDA Y_REG+2
1068	.$eac	STA FACMOH
1069	.$eae	LDA Y_REG+1
1070	.$eb1	STA FACSGN
1071	.$eb3	ORA #$80
1072	.$eb5	STA FACHO
1073	.$eb7	LDA Y_REG
1074	.$eba	STA FACEXP
1075	.$ebc	LDA #0
1076	.$ebe	STA FACOV
1077	.$ec0	RTS
1191	.$ec1	FASTFSUBMEM
1192	.$ec1	JSR MEMARG
1193	.$ec4	FASTFSUBARG
1194	.$ec4	LDA FACSGN
1195	.$ec6	EOR #$FF
1196	.$ec8	STA FACSGN
1197	.$eca	EOR ARGSGN
1198	.$ecc	STA ARISGN
1199	.$ece	LDA FACEXP
1200	.$ed0	JMP FASTFADDARG
1203	.$ed3	FASTFADDMEM
1204	.$ed3	JSR MEMARG
1205	.$ed6	FASTFADDARG
1206	.$ed6	BNE FADDRET2     
1207	.$ed8	JMP ARGFAC
1208	.$edb	FADDRET2 LDA ARGEXP
1209	.$edd	BNE FADDRET1     
1210	.$edf	RTS
1211	.$ee0	FADDRET1 SEC
1212	.$ee1	SBC FACEXP
1213	.$ee3	BEQ FFADD_EXPEQ     
1214	.$ee5	BCC FFADD_SHFARG1   
1218	.$ee7	LDY ARGEXP
1219	.$ee9	STY FACEXP
1220	.$eeb	LDY ARGSGN
1221	.$eed	STY FACSGN
1222	.$eef	LDX #0
1223	.$ef1	STX OLDOV        
1224	.$ef3	LDX #FAC         
1226	.$ef5	SEC
1227	.$ef6	SBC #$08
1228	.$ef8	BMI FFADD_SHFFAC2
1230	.$efa	FFADD_SHFFAC1
1231	.$efa	LDY FACLO        
1232	.$efc	STY FACOV
1233	.$efe	LDY FACMO        
1234	.$f00	STY FACMO+1
1235	.$f02	LDY FACMOH       
1236	.$f04	STY FACMOH+1
1237	.$f06	LDY FACHO        
1238	.$f08	STY FACHO+1
1239	.$f0a	LDY #0
1240	.$f0c	STY FACHO        
1241	.$f0e	SBC #$08         
1242	.$f10	BPL FFADD_SHFFAC1   
1243	.$f12	FFADD_SHFFAC2
1244	.$f12	ADC #$08         
1245	.$f14	BEQ FFADD_SHFFAC4   
1246	.$f16	TAY
1247	.$f17	LDA FACOV
1248	.$f19	FFADD_SHFFAC3
1249	.$f19	LSR FACHO        
1250	.$f1b	ROR FACMOH       
1251	.$f1d	ROR FACMO        
1252	.$f1f	ROR FACLO        
1253	.$f21	ROR              
1254	.$f22	DEY
1255	.$f23	BNE FFADD_SHFFAC3
1256	.$f25	JMP FFADD_MANADD2   
1257	.$f28	FFADD_SHFFAC4
1258	.$f28	LDA FACOV        
1259	.$f2a	JMP FFADD_MANADD2
1260	.$f2d	FFADD_EXPEQ
1261	.$f2d	LDX FACOV
1262	.$f2f	STX OLDOV
1265	.$f31	JMP FFADD_MANADD1
1266	.$f34	FFADD_SHFARG2
1267	.$f34	LDA FACOV        
1268	.$f36	JMP FFADD_MANADD1
1269	.$f39	FFADD_SHFARG1
1270	.$f39	LDX FACOV
1271	.$f3b	STX OLDOV        
1272	.$f3d	LDX #$00         
1275	.$f3f	ADC #$08
1276	.$f41	BPL FFADD_SHFARG6   
1277	.$f43	FFADD_SHFARG3
1278	.$f43	LDX ARGLO        
1279	.$f45	LDY ARGMO        
1280	.$f47	STY ARGMO+1
1281	.$f49	LDY ARGMOH       
1282	.$f4b	STY ARGMOH+1
1283	.$f4d	LDY ARGHO        
1284	.$f4f	STY ARGHO+1
1285	.$f51	LDY #0
1286	.$f53	STY ARGHO        
1287	.$f55	FFADD_SHFARG4
1288	.$f55	ADC #$08
1289	.$f57	BMI FFADD_SHFARG3
1290	.$f59	BEQ FFADD_SHFARG3
1291	.$f5b	FFADD_SHFARG6
1292	.$f5b	SBC #$08
1293	.$f5d	BEQ FFADD_SHFARG2   
1294	.$f5f	TAY
1295	.$f60	TXA              
1296	.$f61	FFADD_SHFARG5
1297	.$f61	LSR ARGHO
1298	.$f63	ROR ARGMOH
1299	.$f65	ROR ARGMO
1300	.$f67	ROR ARGLO
1301	.$f69	ROR           
1302	.$f6a	INY
1303	.$f6b	BNE FFADD_SHFARG5
1304	.$f6d	FFADD_MANADD1
1305	.$f6d	LDX #ARGEXP      
1306	.$f6f	FFADD_MANADD2
1307	.$f6f	BIT ARISGN
1308	.$f71	BMI FFADD_MANSUB1   
1309	.$f73	CLC
1310	.$f74	ADC OLDOV
1311	.$f76	STA FACOV
1312	.$f78	LDA FACLO
1313	.$f7a	ADC ARGLO
1314	.$f7c	STA FACLO
1315	.$f7e	LDA FACMO
1316	.$f80	ADC ARGMO
1317	.$f82	STA FACMO
1318	.$f84	LDA FACMOH
1319	.$f86	ADC ARGMOH
1320	.$f88	STA FACMOH
1321	.$f8a	LDA FACHO
1322	.$f8c	ADC ARGHO
1323	.$f8e	STA FACHO
1324	.$f90	BCC FFADD_RNDRTS
1325	.$f92	INC FACEXP
1326	.$f94	BEQ FFADD_OVERR
1328	.$f96	ROR FACHO
1329	.$f98	ROR FACMOH
1330	.$f9a	ROR FACMO
1331	.$f9c	ROR FACLO
1332	.$f9e	ROR FACOV
1333	.$fa0	FFADD_RNDRTS
1334	.$fa0	RTS
1335	.$fa1	FFADD_OVERR
1336	.$fa1	JMP ILLEGALQUANTITY
1337	.$fa4	FFADD_MANSUB1
1338	.$fa4	LDY #FACEXP
1339	.$fa6	CPX #ARGEXP
1340	.$fa8	BEQ FFADD_MANSUB2
1341	.$faa	LDY #ARGEXP
1342	.$fac	FFADD_MANSUB2
1343	.$fac	SEC              
1344	.$fad	EOR #$FF
1345	.$faf	ADC OLDOV
1346	.$fb1	STA FACOV
1347	.$fb3	LDA 4,Y
1348	.$fb6	SBC 4,X
1349	.$fb8	STA FACLO
1350	.$fba	LDA 3,Y
1351	.$fbd	SBC 3,X
1352	.$fbf	STA FACMO
1353	.$fc1	LDA 2,Y
1354	.$fc4	SBC 2,X
1355	.$fc6	STA FACMOH
1356	.$fc8	LDA 1,Y
1357	.$fcb	SBC 1,X
1358	.$fcd	STA FACHO
1359	.$fcf	BCS FCNORMAL
1360	.$fd1	LDA FACSGN
1361	.$fd3	EOR #$FF
1362	.$fd5	STA FACSGN
1363	.$fd7	LDA FACHO
1364	.$fd9	EOR #$FF
1365	.$fdb	STA FACHO
1366	.$fdd	LDA FACMOH
1367	.$fdf	EOR #$FF
1368	.$fe1	STA FACMOH
1369	.$fe3	LDA FACMO
1370	.$fe5	EOR #$FF
1371	.$fe7	STA FACMO
1372	.$fe9	LDA FACLO
1373	.$feb	EOR #$FF
1374	.$fed	STA FACLO
1375	.$fef	LDA FACOV
1376	.$ff1	EOR #$FF
1377	.$ff3	CLC
1378	.$ff4	ADC #1
1379	.$ff6	STA FACOV
1380	.$ff8	BNE FCNORMAL
1381	.$ffa	INC FACLO
1382	.$ffc	BNE FCNORMAL
1383	.$ffe	INC FACMO
1384	.$1000	BNE FCNORMAL
1385	.$1002	INC FACMOH
1386	.$1004	BNE FCNORMAL
1387	.$1006	INC FACHO
1388	.$1008	FCNORMAL   BIT FACHO
1389	.$100a	BMI FFADD_RET       
1390	.$100c	LDA #0           
1391	.$100e	CLC
1392	.$100f	FFADD_NORM3
1393	.$100f	LDX FACHO
1394	.$1011	BNE FFADD_NORM1
1395	.$1013	LDX FACHO+1
1396	.$1015	STX FACHO
1397	.$1017	LDX FACMOH+1
1398	.$1019	STX FACMOH
1399	.$101b	LDX FACMO+1
1400	.$101d	STX FACMO
1401	.$101f	LDX FACOV
1402	.$1021	STX FACLO
1403	.$1023	LDX #0
1404	.$1025	STX FACOV
1405	.$1027	ADC #$08
1406	.$1029	CMP #$20
1407	.$102b	BNE FFADD_NORM3
1408	.$102d	JMP FFADD_ZEROFAC
1409	.$1030	FFADD_NORM2
1410	.$1030	CLC
1411	.$1031	ADC #1
1412	.$1033	ASL FACOV
1413	.$1035	ROL FACLO
1414	.$1037	ROL FACMO
1415	.$1039	ROL FACMOH
1416	.$103b	ROL FACHO
1417	.$103d	FFADD_NORM1
1418	.$103d	BPL FFADD_NORM2     
1419	.$103f	SEC
1420	.$1040	SBC FACEXP
1421	.$1042	BCS FFADD_ZEROFAC
1422	.$1044	EOR #$FF
1423	.$1046	CLC
1424	.$1047	ADC #1
1425	.$1049	STA FACEXP
1426	.$104b	FFADD_RET   RTS
1427	.$104c	FFADD_ZEROFAC
1428	.$104c	LDX #0
1429	.$104e	STX FACEXP
1430	.$1050	STX FACSGN
1431	.$1052	RTS
1434	.$1053	INITVARS
1435	.$1053	JSR INITSTRVARS
1436	.$1056	LDA #0
1437	.$1058	LDY #4
1438	.$105a	REALINITLOOP0:
1439	.$105a	STA VAR_A,Y
1440	.$105d	DEY
1441	.$105e	BMI REALLOOPEXIT0
1442	.$1060	JMP REALINITLOOP0
1443	.$1063	REALLOOPEXIT0:
1444	.$1063	RTS
1448	.$1064	CONSTANTS
1454	.$1064	CONST_1R .REAL 5.0
1463	.$1069	CONST_4 .REAL -1.0
1466	.$106e	CONST_5 .REAL 0.1
1469	.$1073	DATAS
1470	.$1073	.BYTE $FF
1472	.$1074	CONSTANTS_END
1475	.$1074	VARIABLES
1477	.$1074	VAR_A .REAL 0.0
1478	.$1079	STRINGVARS_START
1480	.$1079	VAR_TI$ .WORD EMPTYSTR
1481	.$107b	STRINGVARS_END
1482	.$107b	STRINGARRAYS_START
1483	.$107b	STRINGARRAYS_END
1484	.$107b	VARIABLES_END
1486	.$107b	Y_REG .REAL 0.0
1487	.$1080	C_REG .REAL 0.0
1488	.$1085	D_REG .REAL 0.0
1489	.$108a	E_REG .REAL 0.0
1490	.$108f	F_REG .REAL 0.0
1491	.$1094	A_REG .WORD 0
1492	.$1096	B_REG .WORD 0
1493	.$1098	CMD_NUM .BYTE 0
1494	.$1099	CHANNEL .BYTE 0
1495	.$109a	SP_SAVE .BYTE 0
1496	.$109b	TMP2_REG .WORD 0
1497	.$109d	TMP3_REG .WORD 0
1498	.$109f	TMP4_REG .WORD 0
1499	.$10a1	AS_TMP .WORD 0
1500	.$10a3	BPOINTER_TMP .WORD 0
1501	.$10a5	BASICTEXTP .BYTE 0
1502	.$10a6	STORE1 .WORD 0
1503	.$10a8	STORE2 .WORD 0
1504	.$10aa	STORE3 .WORD 0
1505	.$10ac	STORE4 .WORD 0
1506	.$10ae	GCSTART .WORD 0
1507	.$10b0	GCLEN .WORD 0
1508	.$10b2	GCWORK .WORD 0
1509	.$10b4	INPUTLENGTH .BYTE 0
1510	.$10b5	TMP_FREG .REAL 0
1511	.$10ba	TMP2_FREG .REAL 0
1512	.$10bf	TMP_FLAG .BYTE 0
1513	.$10c0	INT_FLAG .BYTE 0
1514	.$10c1	REAL_CONST_ONE .REAL 1.0
1515	.$10c6	REAL_CONST_ZERO .REAL 0.0
1516	.$10cb	REAL_CONST_MINUS_ONE .REAL -1.0
1517	.$10d0	CHLOCKFLAG .BYTE 0
1518	.$10d1	EMPTYSTR .BYTE 0
1519	.$10d2	FPSTACKP .WORD FPSTACK
1520	.$10d4	FORSTACKP .WORD FORSTACK
1521	.$10d6	DATASP .WORD DATAS
1522	.$10d8	LASTVAR .WORD 0
1523	.$10da	LASTVARP .WORD 0
1524	.$10dc	HIGHP .WORD STRBUF
1525	.$10de	STRBUFP .WORD STRBUF
1526	.$10e0	ENDSTRBUF .WORD 0
1527	.$10e2	INPUTQUEUEP .BYTE 0
1528	.$10e3	PROGRAMEND
1529	.$10e3	INPUTQUEUE .ARRAY $0F
1530	.$10f2	FPSTACK .ARRAY 100
1531	.$1156	FORSTACK .ARRAY 340
1532	.$12aa	STRBUF .BYTE 0
