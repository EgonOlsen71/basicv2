PROGRAMSTART:
JSR START
0:
10:
NOP
MOV A,#{clr}{white}{STRING}
JSR STROUT
JSR LINEBREAK
NOP
MOV B,#000000{STRING}
MOV TI${STRING},B
NOP
MOV Y,#99{INTEGER}
MOV B{REAL},Y
NOP
MOV Y,#1{INTEGER}
PUSH Y
NOP
MOV Y,#-1.0{REAL}
PUSH Y
MOV A,(B{REAL})
JSR INITFOR
20:
NOP
JSR GOSUB
JSR 100
30:
NOP
JSR COMPACTMAX
MOV B,# of beer on the wall{STRING}
MOV A,T${STRING}
JSR CONCAT
JSR COPYSTR
MOV T${STRING},A
40:
NOP
MOV A,T${STRING}
JSR STROUT
NOP
MOV A,#, {STRING}
JSR STROUT
NOP
MOV A,T${STRING}
JSR STROUT
JSR LINEBREAK
50:
NOP
MOV A,#take one down and pass it around, {STRING}
JSR STROUT
JSR LINEBREAK
60:
NOP
MOV Y,#1{INTEGER}
MOV X,B{REAL}
SUB X,Y
MOV Y,#0{INTEGER}
LTEQ X,Y
CMP X,#0{REAL}
JNE NSKIP0
JMP SKIP0
NSKIP0:
NOP
MOV A,#no more bottles of beer on the wall{STRING}
JSR STROUT
JSR LINEBREAK
JMP 80
NOP
SKIP0:
70:
NOP
JSR GOSUB
JSR 200
NOP
MOV A,# of beer on the wall{STRING}
JSR STROUT
JSR LINEBREAK
80:
NOP
JSR LINEBREAK
NOP
MOV A,#0{INTEGER}
JSR NEXT
CMP A,#0{INTEGER}
JE ($JUMP)
91:
NOP
MOV A,#go to the store and buy some more, 99 bottles of beer on the wall{STRING}
JSR STROUT
JSR LINEBREAK
92:
NOP
MOV X,TI{REAL}
JSR REALOUT
JSR LINEBREAK
NOP
JSR END
RTS
100:
NOP
JSR COMPACTMAX
MOV B,# bottle{STRING}
CHGCTX #0
PUSH B
MOV Y,B{REAL}
CHGCTX #1
JSR STR
POP B
JSR CONCAT
JSR COPYSTR
MOV T${STRING},A
NOP
MOV Y,#1{INTEGER}
MOV X,B{REAL}
GT X,Y
CMP X,#0{REAL}
JNE NSKIP1
JMP SKIP1
NSKIP1:
NOP
JSR COMPACTMAX
MOV B,#s{STRING}
MOV A,T${STRING}
JSR CONCAT
JSR COPYSTR
MOV T${STRING},A
NOP
SKIP1:
110:
NOP
JMP RETURN
200:
NOP
MOV Y,#1{INTEGER}
MOV X,B{REAL}
SUB X,Y
MOV A{REAL},X
NOP
JSR COMPACTMAX
MOV B,# bottle{STRING}
CHGCTX #0
PUSH B
MOV Y,A{REAL}
CHGCTX #1
JSR STR
POP B
JSR CONCAT
JSR STROUT
210:
NOP
MOV Y,#1{INTEGER}
MOV X,A{REAL}
GT X,Y
CMP X,#0{REAL}
JNE NSKIP2
JMP SKIP2
NSKIP2:
NOP
JSR COMPACTMAX
MOV Y,#83{INTEGER}
CHGCTX #1
JSR CHR
JSR STROUT
NOP
SKIP2:
220:
NOP
JMP RETURN
NOP
JSR END
RTS
