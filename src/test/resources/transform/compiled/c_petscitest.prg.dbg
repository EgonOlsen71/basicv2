117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
128	.$81f	LDA #<CONST_0
129	.$821	LDY #>CONST_0
130	.$823	JSR STROUTBRKWL
134	.$826	LINE_20:
136	.$826	LDA #<CONST_1
137	.$828	LDY #>CONST_1
138	.$82a	JSR STROUTBRKWL
141	.$82d	JSR END
142	.$830	RTS
145	.$831	END   LDX SP_SAVE
146	.$834	TXS
153	.$835	RTS
156	.$836	START  LDA ENDSTRBUF+1
157	.$839	BNE ENDGIVEN
158	.$83b	LDA BASICEND
159	.$83d	STA ENDSTRBUF
160	.$840	LDA BASICEND+1
161	.$842	STA ENDSTRBUF+1
162	.$845	ENDGIVEN LDA #<FPSTACK
163	.$847	LDY #>FPSTACK
164	.$849	STA FPSTACKP
165	.$84c	STY FPSTACKP+1
166	.$84f	LDA #<FORSTACK
167	.$851	LDY #>FORSTACK
168	.$853	STA FORSTACKP
169	.$856	STY FORSTACKP+1
170	.$859	LDA #<STRBUF
171	.$85b	LDY #>STRBUF
172	.$85d	STA STRBUFP
173	.$860	STY STRBUFP+1
174	.$863	STA HIGHP
175	.$866	STY HIGHP+1
176	.$869	LDA #0
177	.$86b	STA CHLOCKFLAG
178	.$86e	STA LASTVAR
179	.$871	STA LASTVAR+1
180	.$874	JSR INITVARS
181	.$877	LDA #0
182	.$879	STA CMD_NUM
183	.$87c	STA CHANNEL
184	.$87f	TAY
185	.$880	TAX
189	.$881	STA KEYNDX
195	.$883	JSR RESTORE
196	.$886	CLC
200	.$887	RTS
203	.$888	INITNARRAY
204	.$888	STA TMP_ZP
205	.$88a	STY TMP_ZP+1
206	.$88c	LDY #0
207	.$88e	TYA
208	.$88f	NINITLOOP STA (TMP_ZP),Y
209	.$891	INC TMP_ZP
210	.$893	BNE NLOOPNOV
211	.$895	INC TMP_ZP+1
212	.$897	NLOOPNOV LDX TMP2_ZP
213	.$899	BNE NLOOPNOV2
214	.$89b	DEC TMP2_ZP+1
215	.$89d	NLOOPNOV2 DEC TMP2_ZP
216	.$89f	BNE NINITLOOP
217	.$8a1	LDX TMP2_ZP+1
218	.$8a3	BNE NINITLOOP
219	.$8a5	RTS
222	.$8a6	INITSTRARRAY
223	.$8a6	STA TMP_ZP
224	.$8a8	STY TMP_ZP+1
225	.$8aa	SINITLOOP LDY #0
226	.$8ac	LDA #<EMPTYSTR
227	.$8ae	STA (TMP_ZP),Y
228	.$8b0	LDA #>EMPTYSTR
229	.$8b2	INY
230	.$8b3	STA (TMP_ZP),Y
231	.$8b5	CLC
232	.$8b6	LDA TMP_ZP
233	.$8b8	ADC #2
234	.$8ba	STA TMP_ZP
235	.$8bc	BCC SLOOPNOV1
236	.$8be	INC TMP_ZP+1
237	.$8c0	SLOOPNOV1 SEC
238	.$8c1	LDA TMP2_ZP
239	.$8c3	SBC #2
240	.$8c5	STA TMP2_ZP
241	.$8c7	BCS SLOOPNOV2
242	.$8c9	DEC TMP2_ZP+1
243	.$8cb	SLOOPNOV2 LDA TMP2_ZP
244	.$8cd	BNE SINITLOOP
245	.$8cf	LDA TMP2_ZP+1
246	.$8d1	BNE SINITLOOP
247	.$8d3	RTS
250	.$8d4	INITSPARAMS STA TMP3_ZP
251	.$8d6	STY TMP3_ZP+1
252	.$8d8	SEC
253	.$8d9	SBC #2
254	.$8db	STA TMP_ZP
255	.$8dd	TYA
256	.$8de	SBC #0
257	.$8e0	STA TMP_ZP+1
258	.$8e2	LDY #0
259	.$8e4	LDA (TMP_ZP),Y
260	.$8e6	STA TMP2_ZP
261	.$8e8	INY
262	.$8e9	LDA (TMP_ZP),Y
263	.$8eb	STA TMP2_ZP+1
264	.$8ed	LDA TMP3_ZP
265	.$8ef	LDY TMP3_ZP+1
266	.$8f1	RTS
269	.$8f2	INITSTRVARS LDA #<STRINGVARS_START  
270	.$8f4	LDY #>STRINGVARS_START
271	.$8f6	CMP #<STRINGVARS_END
272	.$8f8	BNE INITIT1
273	.$8fa	CPY #>STRINGVARS_END
274	.$8fc	BNE INITIT1
275	.$8fe	JMP INITSA2     
276	.$901	INITIT1  STA TMP_ZP
277	.$903	STY TMP_ZP+1
278	.$905	LDY #0
279	.$907	INITSTRLOOP LDA #<EMPTYSTR
280	.$909	STA (TMP_ZP),Y
281	.$90b	INY
282	.$90c	LDA #>EMPTYSTR
283	.$90e	STA (TMP_ZP),Y
284	.$910	DEY
285	.$911	LDA TMP_ZP
286	.$913	CLC
287	.$914	ADC #2
288	.$916	STA TMP_ZP
289	.$918	LDA TMP_ZP+1
290	.$91a	ADC #0
291	.$91c	STA TMP_ZP+1
292	.$91e	CMP #>STRINGVARS_END
293	.$920	BNE INITSTRLOOP
294	.$922	LDA TMP_ZP
295	.$924	CMP #<STRINGVARS_END
296	.$926	BNE INITSTRLOOP
297	.$928	INITSA2  LDA #<STRINGARRAYS_START 
298	.$92a	LDY #>STRINGARRAYS_START
299	.$92c	CMP #<STRINGARRAYS_END
300	.$92e	BNE ARRAYLOOP
301	.$930	CPY #>STRINGARRAYS_END
302	.$932	BNE ARRAYLOOP
303	.$934	RTS       
304	.$935	ARRAYLOOP CLC
305	.$936	ADC #3
306	.$938	BCC ARRAYSKIP1
307	.$93a	INY
308	.$93b	ARRAYSKIP1 CPY #>STRINGARRAYS_END
309	.$93d	BEQ ARRAYSC
310	.$93f	BCC ARRAYSKIP2
311	.$941	JMP ARRAYQUIT
312	.$944	ARRAYSC  CMP #<STRINGARRAYS_END
313	.$946	BCS ARRAYQUIT
314	.$948	ARRAYSKIP2 STA TMP_REG
315	.$94a	STY TMP_REG+1
316	.$94c	JSR INITSPARAMS
317	.$94f	LDA TMP_REG
318	.$951	LDY TMP_REG+1
319	.$953	JSR INITSTRARRAY
320	.$956	LDA TMP_ZP
321	.$958	LDY TMP_ZP+1
322	.$95a	JMP ARRAYLOOP
323	.$95d	ARRAYQUIT RTS
326	.$95e	RESTORE  LDA #<DATAS
327	.$960	LDY #>DATAS
328	.$962	STA DATASP
329	.$965	STY DATASP+1
330	.$968	RTS
333	.$969	REROUTE  LDA CMD_NUM  
334	.$96c	BEQ REROUTECMD
335	.$96e	TAX
336	.$96f	STA CHANNEL
337	.$972	JMP CHKOUT
338	.$975	REROUTECMD RTS
341	.$976	RESETROUTE LDA CMD_NUM  
342	.$979	BEQ RESETROUTECMD
343	.$97b	JMP CLRCHNEW
344	.$97e	RESETROUTECMD
345	.$97e	RTS
348	.$97f	STROUTBRKWL STA A_REG
349	.$982	STY A_REG+1
350	.$985	STROUTBRK JSR REROUTE
351	.$988	LDA A_REG
352	.$98b	STA INDEX1
353	.$98d	LDA A_REG+1
354	.$990	STA INDEX1+1
355	.$992	LDY #0
356	.$994	LDA (INDEX1),Y
357	.$996	TAX
358	.$997	INC INDEX1
359	.$999	BNE PRINTSTR2
360	.$99b	INC INDEX1+1
361	.$99d	PRINTSTR2 JSR PRINTSTRS
362	.$9a0	LDA HIGHP   
363	.$9a3	STA STRBUFP
364	.$9a6	LDA HIGHP+1
365	.$9a9	STA STRBUFP+1
366	.$9ac	LDA #$0D
367	.$9ae	JSR CHROUT
368	.$9b1	JMP RESETROUTE  
371	.$9b4	CLRCHNEW
372	.$9b4	LDA CHLOCKFLAG
373	.$9b7	BNE SKIPCLRCH
374	.$9b9	JMP CLRCH
375	.$9bc	SKIPCLRCH
376	.$9bc	RTS
490	.$9bd	INITVARS
491	.$9bd	JSR INITSTRVARS
492	.$9c0	LDA #0
493	.$9c2	RTS
497	.$9c3	CONSTANTS
499	.$9c3	CONST_0 .BYTE 6
500	.$9c4	.STRG "{cm-2}"
502	.$9c5	CONST_1 .BYTE 6
503	.$9c6	.STRG "{cm-*}"
506	.$9c7	DATAS
507	.$9c7	.BYTE $FF
509	.$9c8	CONSTANTS_END
512	.$9c8	VARIABLES
513	.$9c8	STRINGVARS_START
515	.$9c8	VAR_TI$ .WORD EMPTYSTR
516	.$9ca	STRINGVARS_END
517	.$9ca	STRINGARRAYS_START
518	.$9ca	STRINGARRAYS_END
519	.$9ca	VARIABLES_END
521	.$9ca	Y_REG .REAL 0.0
522	.$9cf	C_REG .REAL 0.0
523	.$9d4	D_REG .REAL 0.0
524	.$9d9	E_REG .REAL 0.0
525	.$9de	F_REG .REAL 0.0
526	.$9e3	A_REG .WORD 0
527	.$9e5	B_REG .WORD 0
528	.$9e7	CMD_NUM .BYTE 0
529	.$9e8	CHANNEL .BYTE 0
530	.$9e9	SP_SAVE .BYTE 0
531	.$9ea	TMP2_REG .WORD 0
532	.$9ec	TMP3_REG .WORD 0
533	.$9ee	TMP4_REG .WORD 0
534	.$9f0	AS_TMP .WORD 0
535	.$9f2	BPOINTER_TMP .WORD 0
536	.$9f4	BASICTEXTP .BYTE 0
537	.$9f5	STORE1 .WORD 0
538	.$9f7	STORE2 .WORD 0
539	.$9f9	STORE3 .WORD 0
540	.$9fb	STORE4 .WORD 0
541	.$9fd	GCSTART .WORD 0
542	.$9ff	GCLEN .WORD 0
543	.$a01	GCWORK .WORD 0
544	.$a03	INPUTLENGTH .BYTE 0
545	.$a04	TMP_FREG .REAL 0
546	.$a09	TMP2_FREG .REAL 0
547	.$a0e	TMP_FLAG .BYTE 0
548	.$a0f	INT_FLAG .BYTE 0
549	.$a10	REAL_CONST_ONE .REAL 1.0
550	.$a15	REAL_CONST_ZERO .REAL 0.0
551	.$a1a	REAL_CONST_MINUS_ONE .REAL -1.0
552	.$a1f	CHLOCKFLAG .BYTE 0
553	.$a20	EMPTYSTR .BYTE 0
554	.$a21	FPSTACKP .WORD FPSTACK
555	.$a23	FORSTACKP .WORD FORSTACK
556	.$a25	DATASP .WORD DATAS
557	.$a27	LASTVAR .WORD 0
558	.$a29	LASTVARP .WORD 0
559	.$a2b	HIGHP .WORD STRBUF
560	.$a2d	STRBUFP .WORD STRBUF
561	.$a2f	ENDSTRBUF .WORD 0
562	.$a31	INPUTQUEUEP .BYTE 0
563	.$a32	PROGRAMEND
564	.$a32	INPUTQUEUE .ARRAY $0F
565	.$a41	FPSTACK .ARRAY 100
566	.$aa5	FORSTACK .ARRAY 340
567	.$bf9	STRBUF .BYTE 0
