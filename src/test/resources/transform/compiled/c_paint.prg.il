PROGRAMSTART:
JSR START
0:
10:
NOP
MOV A,#{clear}{STRING}
JSR STROUT
JSR LINEBREAK
20:
NOP
MOVB 53280,#0{INTEGER}
NOP
MOVB 53281,#1{INTEGER}
30:
NOP
MOV Y,#0{INTEGER}
MOV P{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV C{REAL},Y
NOP
MOV Y,#32{INTEGER}
MOV SA{REAL},Y
NOP
MOV Y,C{REAL}
MOV CO{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV BL{REAL},Y
40:
NOP
JSR GOSUB
JSR 1000
50:
NOP
JSR GETSTR
MOV A${STRING},A
NOP
MOV B,#{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP0
JMP SKIP0
NSKIP0:
JSR GOSUB
JSR 3000
NOP
SKIP0:
52:
NOP
MOV B,#{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP1
JMP SKIP1
NSKIP1:
JMP 40
NOP
SKIP1:
55:
NOP
JSR GOSUB
JSR 1010
60:
NOP
MOV B,#w{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP2
JMP SKIP2
NSKIP2:
NOP
MOV Y,#40{INTEGER}
MOV X,P{REAL}
SUB X,Y
MOV Y,#0{INTEGER}
GTEQ X,Y
CMP X,#0{REAL}
JNE NSKIP3
JMP SKIP3
NSKIP3:
NOP
MOV Y,#40{INTEGER}
MOV X,P{REAL}
SUB X,Y
MOV P{REAL},X
NOP
SKIP3:
NOP
SKIP2:
70:
NOP
MOV B,#s{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP4
JMP SKIP4
NSKIP4:
NOP
MOV Y,#40{INTEGER}
MOV X,P{REAL}
ADD X,Y
MOV Y,#999{INTEGER}
LTEQ X,Y
CMP X,#0{REAL}
JNE NSKIP5
JMP SKIP5
NSKIP5:
NOP
MOV Y,#40{INTEGER}
MOV X,P{REAL}
ADD X,Y
MOV P{REAL},X
NOP
SKIP5:
NOP
SKIP4:
80:
NOP
MOV B,#a{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP6
JMP SKIP6
NSKIP6:
NOP
MOV Y,#1{INTEGER}
MOV X,P{REAL}
SUB X,Y
MOV Y,#0{INTEGER}
GTEQ X,Y
CMP X,#0{REAL}
JNE NSKIP7
JMP SKIP7
NSKIP7:
NOP
MOV Y,#1{INTEGER}
MOV X,P{REAL}
SUB X,Y
MOV P{REAL},X
NOP
SKIP7:
NOP
SKIP6:
90:
NOP
MOV B,#d{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP8
JMP SKIP8
NSKIP8:
NOP
MOV Y,#1{INTEGER}
MOV X,P{REAL}
ADD X,Y
MOV Y,#999{INTEGER}
LTEQ X,Y
CMP X,#0{REAL}
JNE NSKIP9
JMP SKIP9
NSKIP9:
NOP
MOV Y,#1{INTEGER}
MOV X,P{REAL}
ADD X,Y
MOV P{REAL},X
NOP
SKIP9:
NOP
SKIP8:
100:
NOP
MOV B,#9{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SLT
PUSH X
CHGCTX #1
MOV B,#0{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SGT
POP Y
AND X,Y
CMP X,#0{REAL}
JNE NSKIP10
JMP SKIP10
NSKIP10:
NOP
MOV B,A${STRING}
JSR VAL
MOV Y,#1{INTEGER}
SUB X,Y
MOV C{REAL},X
MOVB 53280,X
NOP
SKIP10:
110:
NOP
JSR COMPACTMAX
MOV Y,#13{INTEGER}
CHGCTX #1
JSR CHR
MOV B,A
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP11
JMP SKIP11
NSKIP11:
JSR GOSUB
JSR 2000
NOP
SKIP11:
120:
NOP
JSR COMPACTMAX
MOV Y,#135{INTEGER}
CHGCTX #1
JSR CHR
MOV B,A
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP12
JMP SKIP12
NSKIP12:
JSR GOSUB
JSR 4000
NOP
SKIP12:
130:
NOP
JSR COMPACTMAX
MOV Y,#136{INTEGER}
CHGCTX #1
JSR CHR
MOV B,A
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP13
JMP SKIP13
NSKIP13:
JSR GOSUB
JSR 5000
NOP
SKIP13:
140:
NOP
MOV B,#{clear}{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP14
JMP SKIP14
NSKIP14:
NOP
MOV A,#{clear}{STRING}
JSR STROUT
JSR LINEBREAK
NOP
SKIP14:
900:
NOP
JMP 40
1000:
NOP
MOV Y,#0{INTEGER}
MOV X,BL{REAL}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP15
JMP SKIP15
NSKIP15:
NOP
MOV Y,P{REAL}
MOV X,#1024{INTEGER}
ADD X,Y
MOV Y,X
MOVB X,(Y)
MOV SA{REAL},X
NOP
MOV Y,P{REAL}
MOV X,#55296{INTEGER}
ADD X,Y
MOV Y,X
MOVB X,(Y)
MOV CO{REAL},X
NOP
MOV Y,#1{INTEGER}
MOV BL{REAL},Y
JMP 1050
NOP
SKIP15:
1010:
NOP
MOV Y,P{REAL}
MOV X,#1024{INTEGER}
ADD X,Y
PUSH X
MOV X,SA{REAL}
POP Y
MOVB (Y),X
NOP
MOV Y,P{REAL}
MOV X,#55296{INTEGER}
ADD X,Y
PUSH X
MOV X,CO{REAL}
POP Y
MOVB (Y),X
NOP
MOV Y,#0{INTEGER}
MOV BL{REAL},Y
NOP
JMP RETURN
1050:
NOP
MOV Y,P{REAL}
MOV X,#1024{INTEGER}
ADD X,Y
MOV Y,X
MOVB (Y),#160{INTEGER}
NOP
MOV Y,P{REAL}
MOV X,#55296{INTEGER}
ADD X,Y
PUSH X
MOV Y,#0{INTEGER}
RND X,Y
MOV A,#4{INTEGER}
SHL X,A
POP Y
MOVB (Y),X
NOP
JMP RETURN
2000:
NOP
MOV Y,P{REAL}
MOV X,#1024{INTEGER}
ADD X,Y
MOV Y,X
MOVB (Y),#160{INTEGER}
NOP
MOV Y,P{REAL}
MOV X,#55296{INTEGER}
ADD X,Y
PUSH X
MOV X,C{REAL}
POP Y
MOVB (Y),X
2010:
NOP
MOV Y,#0{INTEGER}
MOV BL{REAL},Y
NOP
JSR GOSUB
JSR 1000
2020:
NOP
JMP RETURN
3000:
NOP
MOVB X,56320
MOV J{REAL},X
3010:
NOP
MOV Y,#127{INTEGER}
MOV X,J{REAL}
AND X,Y
MOV Y,#127{INTEGER}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP16
JMP SKIP16
NSKIP16:
JMP RETURN
NOP
SKIP16:
3020:
NOP
MOV Y,#1{INTEGER}
MOV X,J{REAL}
AND X,Y
MOV Y,#0{INTEGER}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP17
JMP SKIP17
NSKIP17:
NOP
MOV B,#w{STRING}
MOV A${STRING},B
JMP RETURN
NOP
SKIP17:
3030:
NOP
MOV Y,#2{INTEGER}
MOV X,J{REAL}
AND X,Y
MOV Y,#0{INTEGER}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP18
JMP SKIP18
NSKIP18:
NOP
MOV B,#s{STRING}
MOV A${STRING},B
JMP RETURN
NOP
SKIP18:
3040:
NOP
MOV Y,#4{INTEGER}
MOV X,J{REAL}
AND X,Y
MOV Y,#0{INTEGER}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP19
JMP SKIP19
NSKIP19:
NOP
MOV B,#a{STRING}
MOV A${STRING},B
JMP RETURN
NOP
SKIP19:
3050:
NOP
MOV Y,#8{INTEGER}
MOV X,J{REAL}
AND X,Y
MOV Y,#0{INTEGER}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP20
JMP SKIP20
NSKIP20:
NOP
MOV B,#d{STRING}
MOV A${STRING},B
JMP RETURN
NOP
SKIP20:
3060:
NOP
MOV Y,#16{INTEGER}
MOV X,J{REAL}
AND X,Y
MOV Y,#0{INTEGER}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP21
JMP SKIP21
NSKIP21:
NOP
JSR COMPACTMAX
MOV Y,#13{INTEGER}
CHGCTX #1
JSR CHR
JSR COPYSTR
MOV A${STRING},A
NOP
SKIP21:
3070:
NOP
JMP RETURN
4000:
NOP
JSR GOSUB
JSR 40000
4010:
NOP
MOV A,#{home}{black}{STRING}
JSR STROUT
4020:
NOP
INPUT0:
JSR CLEARQUEUE
JSR COMPACTMAX
MOV A,#speichername{STRING}
JSR STROUT
JSR QMARKOUT1
JSR INPUTSTR
JSR INPUTLENGTHCHECK
JE EMPTYINPUTSKIP1
MOV N${STRING},A
EMPTYINPUTSKIP1:
JSR QUEUESIZE
CMP X,#0{REAL}
JE INPUTCHECK0
JSR EXTRAIGNORED
INPUTCHECK0:
4030:
NOP
JSR GOSUB
JSR 40100
4035:
NOP
MOV B,#{STRING}
MOV A,N${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP22
JMP SKIP22
NSKIP22:
JMP RETURN
NOP
SKIP22:
4040:
NOP
MOV Y,#2{INTEGER}
PUSH Y
MOV Y,#8{INTEGER}
PUSH Y
MOV Y,#2{INTEGER}
PUSH Y
JSR COMPACTMAX
MOV B,N${STRING}
MOV A,#@:{STRING}
JSR CONCAT
MOV B,#,s,w{STRING}
JSR CONCAT
MOV G,A
POP D
POP C
POP X
MOV Y,#4{INTEGER}
JSR OPEN
4050:
NOP
MOV Y,#0{INTEGER}
MOV I{REAL},Y
NOP
MOV Y,#999{INTEGER}
PUSH Y
NOP
MOV Y,#1{INTEGER}
PUSH Y
MOV A,(I{REAL})
JSR INITFOR
4060:
NOP
JSR LOCKCHANNEL
MOV Y,#2{INTEGER}
PUSH Y
NOP
JSR COMPACTMAX
MOV Y,I{REAL}
MOV X,#1024{INTEGER}
ADD X,Y
MOV Y,X
MOVB X,(Y)
MOV Y,X
CHGCTX #1
JSR CHR
POP C
JSR STROUTCHANNEL
JSR UNLOCKCHANNEL
4070:
NOP
JSR LOCKCHANNEL
MOV Y,#2{INTEGER}
PUSH Y
NOP
JSR COMPACTMAX
MOV Y,I{REAL}
MOV X,#55296{INTEGER}
ADD X,Y
MOV Y,X
MOVB X,(Y)
MOV Y,X
CHGCTX #1
JSR CHR
POP C
JSR STROUTCHANNEL
JSR UNLOCKCHANNEL
4080:
NOP
MOV A,#0{INTEGER}
JSR NEXT
CMP A,#0{INTEGER}
JE ($JUMP)
4090:
NOP
MOV X,#2{INTEGER}
JSR CLOSE
4100:
NOP
JMP RETURN
5000:
NOP
JSR GOSUB
JSR 40000
5010:
NOP
MOV A,#{home}{black}{STRING}
JSR STROUT
5020:
NOP
INPUT1:
JSR CLEARQUEUE
JSR COMPACTMAX
MOV A,#dateiname{STRING}
JSR STROUT
JSR QMARKOUT1
JSR INPUTSTR
JSR INPUTLENGTHCHECK
JE EMPTYINPUTSKIP2
MOV N${STRING},A
EMPTYINPUTSKIP2:
JSR QUEUESIZE
CMP X,#0{REAL}
JE INPUTCHECK1
JSR EXTRAIGNORED
INPUTCHECK1:
5030:
NOP
JSR GOSUB
JSR 40100
5035:
NOP
MOV B,#{STRING}
MOV A,N${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP23
JMP SKIP23
NSKIP23:
JMP RETURN
NOP
SKIP23:
5040:
NOP
MOV Y,#2{INTEGER}
PUSH Y
MOV Y,#8{INTEGER}
PUSH Y
MOV Y,#2{INTEGER}
PUSH Y
JSR COMPACTMAX
MOV B,#,s,r{STRING}
MOV A,N${STRING}
JSR CONCAT
MOV G,A
POP D
POP C
POP X
MOV Y,#4{INTEGER}
JSR OPEN
5050:
NOP
MOV Y,#0{INTEGER}
MOV I{REAL},Y
NOP
MOV Y,#999{INTEGER}
PUSH Y
NOP
MOV Y,#1{INTEGER}
PUSH Y
MOV A,(I{REAL})
JSR INITFOR
5060:
NOP
MOV Y,I{REAL}
MOV X,#1024{INTEGER}
ADD X,Y
MOV Y,X
MOVB (Y),#0{INTEGER}
5070:
NOP
MOV C,#2{INTEGER}
JSR GETSTRCHANNEL
MOV C${STRING},A
NOP
MOV C,#2{INTEGER}
JSR GETSTRCHANNEL
MOV FA${STRING},A
5080:
NOP
MOV Y,I{REAL}
MOV X,#1024{INTEGER}
ADD X,Y
PUSH X
MOV B,C${STRING}
CHGCTX #0
JSR ASC
POP Y
MOVB (Y),X
5090:
NOP
MOV Y,I{REAL}
MOV X,#55296{INTEGER}
ADD X,Y
PUSH X
JSR COMPACTMAX
MOV Y,#0{INTEGER}
CHGCTX #1
JSR CHR
MOV B,A
MOV A,FA${STRING}
JSR CONCAT
MOV B,A
CHGCTX #0
JSR ASC
POP Y
MOVB (Y),X
5100:
NOP
MOV A,#0{INTEGER}
JSR NEXT
CMP A,#0{INTEGER}
JE ($JUMP)
5110:
NOP
MOV X,#2{INTEGER}
JSR CLOSE
5120:
NOP
JMP RETURN
40000:
NOP
MOV Y,#0{INTEGER}
MOV I{REAL},Y
NOP
MOV Y,#80{INTEGER}
PUSH Y
NOP
MOV Y,#1{INTEGER}
PUSH Y
MOV A,(I{REAL})
JSR INITFOR
NOP
MOV Y,I{REAL}
MOV X,#49152{INTEGER}
ADD X,Y
PUSH X
MOV Y,I{REAL}
MOV X,#1024{INTEGER}
ADD X,Y
MOV Y,X
MOVB X,(Y)
POP Y
MOVB (Y),X
NOP
MOV Y,I{REAL}
MOV X,#49252{INTEGER}
ADD X,Y
PUSH X
MOV Y,I{REAL}
MOV X,#55296{INTEGER}
ADD X,Y
MOV Y,X
MOVB X,(Y)
POP Y
MOVB (Y),X
NOP
MOV A,#0{INTEGER}
JSR NEXT
CMP A,#0{INTEGER}
JE ($JUMP)
40010:
NOP
JMP RETURN
40100:
NOP
MOV Y,#0{INTEGER}
MOV I{REAL},Y
NOP
MOV Y,#80{INTEGER}
PUSH Y
NOP
MOV Y,#1{INTEGER}
PUSH Y
MOV A,(I{REAL})
JSR INITFOR
NOP
MOV Y,I{REAL}
MOV X,#1024{INTEGER}
ADD X,Y
PUSH X
MOV Y,I{REAL}
MOV X,#49152{INTEGER}
ADD X,Y
MOV Y,X
MOVB X,(Y)
POP Y
MOVB (Y),X
NOP
MOV Y,I{REAL}
MOV X,#55296{INTEGER}
ADD X,Y
PUSH X
MOV Y,I{REAL}
MOV X,#49252{INTEGER}
ADD X,Y
MOV Y,X
MOVB X,(Y)
POP Y
MOVB (Y),X
NOP
MOV A,#0{INTEGER}
JSR NEXT
CMP A,#0{INTEGER}
JE ($JUMP)
40110:
NOP
JMP RETURN
NOP
JSR END
RTS
