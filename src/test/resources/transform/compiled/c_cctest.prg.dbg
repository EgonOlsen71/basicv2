117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
128	.$81f	LDA #147
129	.$821	JSR SINGLECHROUTBRKMAX
134	.$824	LINE_20:
136	.$824	LDA #<CONST_1
137	.$826	LDY #>CONST_1
138	.$828	JSR STROUTBRKWL
142	.$82b	LINE_30:
144	.$82b	LDA #<CONST_2
145	.$82d	LDY #>CONST_2
146	.$82f	JSR STROUTBRKWL
149	.$832	JSR END
150	.$835	RTS
153	.$836	END   LDX SP_SAVE
154	.$839	TXS
161	.$83a	RTS
164	.$83b	START  LDA ENDSTRBUF+1
165	.$83e	BNE ENDGIVEN
166	.$840	LDA BASICEND
167	.$842	STA ENDSTRBUF
168	.$845	LDA BASICEND+1
169	.$847	STA ENDSTRBUF+1
170	.$84a	ENDGIVEN LDA #<FPSTACK
171	.$84c	LDY #>FPSTACK
172	.$84e	STA FPSTACKP
173	.$851	STY FPSTACKP+1
174	.$854	LDA #<FORSTACK
175	.$856	LDY #>FORSTACK
176	.$858	STA FORSTACKP
177	.$85b	STY FORSTACKP+1
178	.$85e	LDA #<STRBUF
179	.$860	LDY #>STRBUF
180	.$862	STA STRBUFP
181	.$865	STY STRBUFP+1
182	.$868	STA HIGHP
183	.$86b	STY HIGHP+1
184	.$86e	LDA #0
185	.$870	STA CHLOCKFLAG
186	.$873	STA LASTVAR
187	.$876	STA LASTVAR+1
188	.$879	JSR INITVARS
189	.$87c	LDA #0
190	.$87e	STA CMD_NUM
191	.$881	STA CHANNEL
192	.$884	TAY
193	.$885	TAX
197	.$886	STA KEYNDX
203	.$888	JSR RESTORE
204	.$88b	CLC
208	.$88c	RTS
211	.$88d	INITNARRAY
212	.$88d	STA TMP_ZP
213	.$88f	STY TMP_ZP+1
214	.$891	LDY #0
215	.$893	TYA
216	.$894	NINITLOOP STA (TMP_ZP),Y
217	.$896	INC TMP_ZP
218	.$898	BNE NLOOPNOV
219	.$89a	INC TMP_ZP+1
220	.$89c	NLOOPNOV LDX TMP2_ZP
221	.$89e	BNE NLOOPNOV2
222	.$8a0	DEC TMP2_ZP+1
223	.$8a2	NLOOPNOV2 DEC TMP2_ZP
224	.$8a4	BNE NINITLOOP
225	.$8a6	LDX TMP2_ZP+1
226	.$8a8	BNE NINITLOOP
227	.$8aa	RTS
230	.$8ab	INITSTRARRAY
231	.$8ab	STA TMP_ZP
232	.$8ad	STY TMP_ZP+1
233	.$8af	SINITLOOP LDY #0
234	.$8b1	LDA #<EMPTYSTR
235	.$8b3	STA (TMP_ZP),Y
236	.$8b5	LDA #>EMPTYSTR
237	.$8b7	INY
238	.$8b8	STA (TMP_ZP),Y
239	.$8ba	CLC
240	.$8bb	LDA TMP_ZP
241	.$8bd	ADC #2
242	.$8bf	STA TMP_ZP
243	.$8c1	BCC SLOOPNOV1
244	.$8c3	INC TMP_ZP+1
245	.$8c5	SLOOPNOV1 SEC
246	.$8c6	LDA TMP2_ZP
247	.$8c8	SBC #2
248	.$8ca	STA TMP2_ZP
249	.$8cc	BCS SLOOPNOV2
250	.$8ce	DEC TMP2_ZP+1
251	.$8d0	SLOOPNOV2 LDA TMP2_ZP
252	.$8d2	BNE SINITLOOP
253	.$8d4	LDA TMP2_ZP+1
254	.$8d6	BNE SINITLOOP
255	.$8d8	RTS
258	.$8d9	INITSPARAMS STA TMP3_ZP
259	.$8db	STY TMP3_ZP+1
260	.$8dd	SEC
261	.$8de	SBC #2
262	.$8e0	STA TMP_ZP
263	.$8e2	TYA
264	.$8e3	SBC #0
265	.$8e5	STA TMP_ZP+1
266	.$8e7	LDY #0
267	.$8e9	LDA (TMP_ZP),Y
268	.$8eb	STA TMP2_ZP
269	.$8ed	INY
270	.$8ee	LDA (TMP_ZP),Y
271	.$8f0	STA TMP2_ZP+1
272	.$8f2	LDA TMP3_ZP
273	.$8f4	LDY TMP3_ZP+1
274	.$8f6	RTS
277	.$8f7	INITSTRVARS LDA #<STRINGVARS_START  
278	.$8f9	LDY #>STRINGVARS_START
279	.$8fb	CMP #<STRINGVARS_END
280	.$8fd	BNE INITIT1
281	.$8ff	CPY #>STRINGVARS_END
282	.$901	BNE INITIT1
283	.$903	JMP INITSA2     
284	.$906	INITIT1  STA TMP_ZP
285	.$908	STY TMP_ZP+1
286	.$90a	LDY #0
287	.$90c	INITSTRLOOP LDA #<EMPTYSTR
288	.$90e	STA (TMP_ZP),Y
289	.$910	INY
290	.$911	LDA #>EMPTYSTR
291	.$913	STA (TMP_ZP),Y
292	.$915	DEY
293	.$916	LDA TMP_ZP
294	.$918	CLC
295	.$919	ADC #2
296	.$91b	STA TMP_ZP
297	.$91d	LDA TMP_ZP+1
298	.$91f	ADC #0
299	.$921	STA TMP_ZP+1
300	.$923	CMP #>STRINGVARS_END
301	.$925	BNE INITSTRLOOP
302	.$927	LDA TMP_ZP
303	.$929	CMP #<STRINGVARS_END
304	.$92b	BNE INITSTRLOOP
305	.$92d	INITSA2  LDA #<STRINGARRAYS_START 
306	.$92f	LDY #>STRINGARRAYS_START
307	.$931	CMP #<STRINGARRAYS_END
308	.$933	BNE ARRAYLOOP
309	.$935	CPY #>STRINGARRAYS_END
310	.$937	BNE ARRAYLOOP
311	.$939	RTS       
312	.$93a	ARRAYLOOP CLC
313	.$93b	ADC #3
314	.$93d	BCC ARRAYSKIP1
315	.$93f	INY
316	.$940	ARRAYSKIP1 CPY #>STRINGARRAYS_END
317	.$942	BEQ ARRAYSC
318	.$944	BCC ARRAYSKIP2
319	.$946	JMP ARRAYQUIT
320	.$949	ARRAYSC  CMP #<STRINGARRAYS_END
321	.$94b	BCS ARRAYQUIT
322	.$94d	ARRAYSKIP2 STA TMP_REG
323	.$94f	STY TMP_REG+1
324	.$951	JSR INITSPARAMS
325	.$954	LDA TMP_REG
326	.$956	LDY TMP_REG+1
327	.$958	JSR INITSTRARRAY
328	.$95b	LDA TMP_ZP
329	.$95d	LDY TMP_ZP+1
330	.$95f	JMP ARRAYLOOP
331	.$962	ARRAYQUIT RTS
334	.$963	RESTORE  LDA #<DATAS
335	.$965	LDY #>DATAS
336	.$967	STA DATASP
337	.$96a	STY DATASP+1
338	.$96d	RTS
341	.$96e	SAVEPOINTERS
342	.$96e	LDA TMP_ZP   
343	.$970	STA STORE1
344	.$973	LDA TMP_ZP+1
345	.$975	STA STORE1+1
346	.$978	LDA TMP2_ZP
347	.$97a	STA STORE2
348	.$97d	LDA TMP2_ZP+1
349	.$97f	STA STORE2+1
350	.$982	LDA TMP3_ZP
351	.$984	STA STORE3
352	.$987	LDA TMP3_ZP+1
353	.$989	STA STORE3+1
354	.$98c	RTS
357	.$98d	RESTOREPOINTERS
358	.$98d	LDA STORE3+1  
359	.$990	STA TMP3_ZP+1
360	.$992	LDA STORE3
361	.$995	STA TMP3_ZP
362	.$997	LDA STORE2+1
363	.$99a	STA TMP2_ZP+1
364	.$99c	LDA STORE2
365	.$99f	STA TMP2_ZP
366	.$9a1	LDA STORE1+1
367	.$9a4	STA TMP_ZP+1
368	.$9a6	LDA STORE1
369	.$9a9	STA TMP_ZP
370	.$9ab	RTS
377	.$9ac	COMPACTMAX
378	.$9ac	LDA #$FF
379	.$9ae	LDY #$0
380	.$9b0	JMP COMPACTF
383	.$9b3	COMPACT
384	.$9b3	LDY #0
385	.$9b5	GCBUFNE  LDA (TMP_ZP),Y  
386	.$9b7	COMPACTF STA TMP4_REG  
387	.$9ba	LDY STRBUFP+1  
388	.$9bd	STY TMP4_REG+1  
389	.$9c0	INY     
390	.$9c1	BEQ ENDMEM   
391	.$9c3	CPY ENDSTRBUF+1  
392	.$9c6	BCC RGCEXIT   
393	.$9c8	ENDMEM  LDA STRBUFP
394	.$9cb	CLC
395	.$9cc	ADC TMP4_REG
396	.$9cf	STA TMP4_REG
397	.$9d2	BCC RGCNOOV1
398	.$9d4	INC TMP4_REG+1
399	.$9d7	RGCNOOV1 CLC
400	.$9d8	LDA TMP4_REG
401	.$9db	ADC #3
402	.$9dd	STA TMP4_REG
403	.$9e0	BCC RGCNOOV2
404	.$9e2	INC TMP4_REG+1
405	.$9e5	RGCNOOV2 LDA TMP4_REG+1  
406	.$9e8	CMP ENDSTRBUF+1
407	.$9eb	BEQ RGCLOW1
408	.$9ed	BCS GCEXECOMP  
409	.$9ef	JMP RGCEXIT
410	.$9f2	RGCLOW1  LDA TMP4_REG
411	.$9f5	CMP ENDSTRBUF
412	.$9f8	BCS GCEXECOMP  
413	.$9fa	RGCEXIT  RTS     
414	.$9fb	GCEXECOMP LDA STRBUFP
415	.$9fe	STA STORE4
416	.$a01	LDA STRBUFP+1
417	.$a04	STA STORE4+1
418	.$a07	JSR GCEXE
419	.$a0a	JMP CHECKMEMORY
422	.$a0d	GCEXE  JSR SAVEPOINTERS
423	.$a10	LDA #0
424	.$a12	STA LASTVAR
425	.$a15	STA LASTVAR+1  
426	.$a18	LDA #<STRBUF
427	.$a1a	STA TMP_ZP
428	.$a1c	STA GCSTART
429	.$a1f	LDA #>STRBUF
430	.$a21	STA TMP_ZP+1  
431	.$a23	STA GCSTART+1
432	.$a26	GCLOOP  LDY #0
433	.$a28	LDA TMP_ZP
434	.$a2a	STA GCWORK
435	.$a2d	LDA TMP_ZP+1
436	.$a2f	STA GCWORK+1  
437	.$a32	LDA (TMP_ZP),Y
438	.$a34	STA GCLEN   
439	.$a37	INC TMP_ZP
440	.$a39	BNE GCLOOPNOOV
441	.$a3b	INC TMP_ZP+1
442	.$a3d	GCLOOPNOOV LDA TMP_ZP
443	.$a3f	CLC
444	.$a40	ADC GCLEN
445	.$a43	STA TMP_ZP
446	.$a45	BCC GCLOOPNOOV2
447	.$a47	INC TMP_ZP+1  
448	.$a49	GCLOOPNOOV2 LDY #0
449	.$a4b	LDA (TMP_ZP),Y
450	.$a4d	STA TMP2_ZP
451	.$a4f	INY
452	.$a50	LDA (TMP_ZP),Y
453	.$a52	STA TMP2_ZP+1  
454	.$a54	LDA TMP_ZP
455	.$a56	CLC
456	.$a57	ADC #2
457	.$a59	STA TMP_ZP
458	.$a5b	BCC GCLOOPNOOV3
459	.$a5d	INC TMP_ZP+1  
460	.$a5f	GCLOOPNOOV3 LDY #0
461	.$a61	LDA (TMP2_ZP),Y
462	.$a63	CMP GCWORK
463	.$a66	BNE GCKLOOP
464	.$a68	INY
465	.$a69	LDA (TMP2_ZP),Y
466	.$a6b	CMP GCWORK+1
467	.$a6e	BEQ MEMFREE
468	.$a70	GCKLOOP  LDA TMP_ZP+1  
469	.$a72	CMP HIGHP+1
470	.$a75	BEQ GCHECKLOW
471	.$a77	BCC GCLOOP
472	.$a79	JMP GCDONE
473	.$a7c	GCHECKLOW LDA TMP_ZP
474	.$a7e	CMP HIGHP
475	.$a81	BCS GCDONE
476	.$a83	JMP GCLOOP
477	.$a86	MEMFREE  LDA GCSTART   
478	.$a89	CMP GCWORK   
479	.$a8c	BNE COPYDOWN
480	.$a8e	LDA GCSTART+1
481	.$a91	CMP GCWORK+1
482	.$a94	BNE COPYDOWN
483	.$a96	LDA TMP_ZP   
484	.$a98	STA GCSTART
485	.$a9b	LDA TMP_ZP+1
486	.$a9d	STA GCSTART+1
487	.$aa0	JMP GCKLOOP   
488	.$aa3	COPYDOWN LDA GCSTART   
489	.$aa6	STA TMP_REG
490	.$aa8	LDA GCSTART+1
491	.$aab	STA TMP_REG+1  
492	.$aad	LDA GCWORK
493	.$ab0	STA TMP2_REG
494	.$ab3	LDA GCWORK+1
495	.$ab6	STA TMP2_REG+1  
496	.$ab9	LDA TMP_ZP
497	.$abb	SEC
498	.$abc	SBC GCWORK
499	.$abf	STA TMP3_REG
500	.$ac2	LDA TMP_ZP+1
501	.$ac4	SBC GCWORK+1
502	.$ac7	STA TMP3_REG+1  
503	.$aca	LDA GCSTART
504	.$acd	CLC
505	.$ace	ADC TMP3_REG
506	.$ad1	STA GCSTART
507	.$ad4	LDA GCSTART+1
508	.$ad7	ADC TMP3_REG+1
509	.$ada	STA GCSTART+1  
510	.$add	JSR QUICKCOPY  
511	.$ae0	LDY #0
512	.$ae2	LDA TMP_REG
513	.$ae4	STA (TMP2_ZP),Y
514	.$ae6	INY
515	.$ae7	LDA TMP_REG+1
516	.$ae9	STA (TMP2_ZP),Y  
517	.$aeb	JMP GCKLOOP
518	.$aee	GCDONE  LDA GCSTART
519	.$af1	STA HIGHP
520	.$af4	STA STRBUFP
521	.$af7	LDA GCSTART+1
522	.$afa	STA HIGHP+1
523	.$afd	STA STRBUFP+1  
524	.$b00	GCSKIP  JSR RESTOREPOINTERS
525	.$b03	RTS     
528	.$b04	CHECKMEMORY
529	.$b04	LDA STRBUFP+1  
530	.$b07	CMP STORE4+1  
531	.$b0a	BCC STILLFITSCM  
535	.$b0c	BEQ CHECKMEMLOWCM
536	.$b0e	JMP OUTOFMEMORY  
537	.$b11	CHECKMEMLOWCM
538	.$b11	LDA STRBUFP   
539	.$b14	CMP STORE4
540	.$b17	BCC STILLFITSCM
541	.$b19	JMP OUTOFMEMORY  
542	.$b1c	STILLFITSCM RTS
545	.$b1d	QUICKCOPY LDA TMP_REG  
546	.$b1f	STA TMEM+1
547	.$b22	LDA TMP_REG+1
548	.$b24	STA TMEM+2
549	.$b27	LDA TMP2_REG
550	.$b2a	STA SMEM+1
551	.$b2d	LDA TMP2_REG+1
552	.$b30	STA SMEM+2
553	.$b33	LDY #$0
554	.$b35	LDX TMP3_REG
555	.$b38	BNE QCLOOP
556	.$b3a	LDA TMP3_REG+1
557	.$b3d	BEQ QCEXIT  
558	.$b3f	QCLOOP
559	.$b3f	SMEM  LDA $0000,Y
560	.$b42	TMEM  STA $0000,Y
561	.$b45	INY
562	.$b46	BNE YNOOV
563	.$b48	INC TMEM+2
564	.$b4b	INC SMEM+2
565	.$b4e	YNOOV  DEX
566	.$b4f	BNE QCLOOP
567	.$b51	LDA TMP3_REG+1
568	.$b54	BEQ QCEXIT
569	.$b56	DEC TMP3_REG+1
570	.$b59	JMP QCLOOP
571	.$b5c	QCEXIT  RTS
574	.$b5d	REROUTE  LDA CMD_NUM  
575	.$b60	BEQ REROUTECMD
576	.$b62	TAX
577	.$b63	STA CHANNEL
578	.$b66	JMP CHKOUT
579	.$b69	REROUTECMD RTS
582	.$b6a	RESETROUTE LDA CMD_NUM  
583	.$b6d	BEQ RESETROUTECMD
584	.$b6f	JMP CLRCHNEW
585	.$b72	RESETROUTECMD
586	.$b72	RTS
589	.$b73	SINGLECHROUTBRKMAX
590	.$b73	JSR SINGLECHROUTBRK
591	.$b76	JMP COMPACTMAX
594	.$b79	SINGLECHROUTBRK
595	.$b79	STA TMP_ZP
596	.$b7b	JSR REROUTE
597	.$b7e	LDA TMP_ZP
598	.$b80	JSR CHROUT
599	.$b83	LDA #$0D
600	.$b85	JSR CHROUT
601	.$b88	JMP RESETROUTE
604	.$b8b	STROUTBRKWL STA A_REG
605	.$b8e	STY A_REG+1
606	.$b91	STROUTBRK JSR REROUTE
607	.$b94	LDA A_REG
608	.$b97	STA INDEX1
609	.$b99	LDA A_REG+1
610	.$b9c	STA INDEX1+1
611	.$b9e	LDY #0
612	.$ba0	LDA (INDEX1),Y
613	.$ba2	TAX
614	.$ba3	INC INDEX1
615	.$ba5	BNE PRINTSTR2
616	.$ba7	INC INDEX1+1
617	.$ba9	PRINTSTR2 JSR PRINTSTRS
618	.$bac	LDA HIGHP   
619	.$baf	STA STRBUFP
620	.$bb2	LDA HIGHP+1
621	.$bb5	STA STRBUFP+1
622	.$bb8	LDA #$0D
623	.$bba	JSR CHROUT
624	.$bbd	JMP RESETROUTE  
627	.$bc0	CLRCHNEW
628	.$bc0	LDA CHLOCKFLAG
629	.$bc3	BNE SKIPCLRCH
630	.$bc5	JMP CLRCH
631	.$bc8	SKIPCLRCH
632	.$bc8	RTS
635	.$bc9	OUTOFMEMORY
639	.$bc9	LDX #$10
640	.$bcb	JMP ERRALL
754	.$bce	INITVARS
755	.$bce	JSR INITSTRVARS
756	.$bd1	LDA #0
757	.$bd3	RTS
761	.$bd4	CONSTANTS
766	.$bd4	CONST_1 .BYTE 13
767	.$bd5	.STRG "{10*down}yeah"
769	.$be3	CONST_2 .BYTE 9
770	.$be4	.STRG "{5down}no"
773	.$beb	DATAS
774	.$beb	.BYTE $FF
776	.$bec	CONSTANTS_END
779	.$bec	VARIABLES
780	.$bec	STRINGVARS_START
782	.$bec	VAR_TI$ .WORD EMPTYSTR
783	.$bee	STRINGVARS_END
784	.$bee	STRINGARRAYS_START
785	.$bee	STRINGARRAYS_END
786	.$bee	VARIABLES_END
788	.$bee	Y_REG .REAL 0.0
789	.$bf3	C_REG .REAL 0.0
790	.$bf8	D_REG .REAL 0.0
791	.$bfd	E_REG .REAL 0.0
792	.$c02	F_REG .REAL 0.0
793	.$c07	A_REG .WORD 0
794	.$c09	B_REG .WORD 0
795	.$c0b	CMD_NUM .BYTE 0
796	.$c0c	CHANNEL .BYTE 0
797	.$c0d	SP_SAVE .BYTE 0
798	.$c0e	TMP2_REG .WORD 0
799	.$c10	TMP3_REG .WORD 0
800	.$c12	TMP4_REG .WORD 0
801	.$c14	AS_TMP .WORD 0
802	.$c16	BPOINTER_TMP .WORD 0
803	.$c18	BASICTEXTP .BYTE 0
804	.$c19	STORE1 .WORD 0
805	.$c1b	STORE2 .WORD 0
806	.$c1d	STORE3 .WORD 0
807	.$c1f	STORE4 .WORD 0
808	.$c21	GCSTART .WORD 0
809	.$c23	GCLEN .WORD 0
810	.$c25	GCWORK .WORD 0
811	.$c27	INPUTLENGTH .BYTE 0
812	.$c28	TMP_FREG .REAL 0
813	.$c2d	TMP2_FREG .REAL 0
814	.$c32	TMP_FLAG .BYTE 0
815	.$c33	INT_FLAG .BYTE 0
816	.$c34	REAL_CONST_ONE .REAL 1.0
817	.$c39	REAL_CONST_ZERO .REAL 0.0
818	.$c3e	REAL_CONST_MINUS_ONE .REAL -1.0
819	.$c43	CHLOCKFLAG .BYTE 0
820	.$c44	EMPTYSTR .BYTE 0
821	.$c45	FPSTACKP .WORD FPSTACK
822	.$c47	FORSTACKP .WORD FORSTACK
823	.$c49	DATASP .WORD DATAS
824	.$c4b	LASTVAR .WORD 0
825	.$c4d	LASTVARP .WORD 0
826	.$c4f	HIGHP .WORD STRBUF
827	.$c51	STRBUFP .WORD STRBUF
828	.$c53	ENDSTRBUF .WORD 0
829	.$c55	INPUTQUEUEP .BYTE 0
830	.$c56	PROGRAMEND
831	.$c56	INPUTQUEUE .ARRAY $0F
832	.$c65	FPSTACK .ARRAY 100
833	.$cc9	FORSTACK .ARRAY 340
834	.$e1d	STRBUF .BYTE 0
