PROGRAMSTART:
JSR START
0:
10:
20:
NOP
JSR GOSUB
JSR 10000
30:
NOP
MOV Y,#7{INTEGER}
MOV X{REAL},Y
NOP
MOV Y,#8{INTEGER}
MOV Y{REAL},Y
NOP
MOV B,#welcome to cbmbasic snake!{STRING}
MOV T${STRING},B
NOP
JSR GOSUB
JSR 20000
40:
NOP
MOV Y,#15{INTEGER}
MOV X{REAL},Y
NOP
MOV Y,#10{INTEGER}
MOV Y{REAL},Y
NOP
MOV B,#controls:{STRING}
MOV T${STRING},B
NOP
JSR GOSUB
JSR 20000
50:
NOP
MOVB 1523,#137{INTEGER}
NOP
MOVB 1562,#138{INTEGER}
NOP
MOVB 1564,#140{INTEGER}
NOP
MOVB 1603,#139{INTEGER}
60:
NOP
MOV Y,#14{INTEGER}
MOV X{REAL},Y
NOP
MOV Y,#16{INTEGER}
MOV Y{REAL},Y
NOP
MOV B,#press a key{STRING}
MOV T${STRING},B
NOP
JSR GOSUB
JSR 20000
70:
NOP
JSR GETSTR
MOV A${STRING},A
NOP
MOV B,#{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP0
JMP SKIP0
NSKIP0:
JMP 70
NOP
SKIP0:
100:
NOP
JSR GOSUB
JSR 10000
110:
NOP
MOV Y,#4{INTEGER}
MOV SL{REAL},Y
NOP
MOV Y,#19{INTEGER}
MOV HX{REAL},Y
NOP
MOV Y,#10{INTEGER}
MOV HY{REAL},Y
NOP
MOV Y,#1{INTEGER}
MOV DX{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV DY{REAL},Y
120:
NOP
MOV Y,#16{INTEGER}
MOV SD{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV HI{REAL},Y
130:
NOP
MOV Y,#0{INTEGER}
MOV I{REAL},Y
NOP
MOV Y,SL{REAL}
PUSH Y
NOP
MOV Y,#1{INTEGER}
PUSH Y
MOV A,(I{REAL})
JSR INITFOR
NOP
MOV Y,I{REAL}
PUSH Y
NOP
MOV Y,I{REAL}
MOV X,#415{INTEGER}
ADD X,Y
MOV Y,X
POP X
MOV G,SP[]{REAL}
JSR ARRAYSTORE
NOP
MOV Y,I{REAL}
MOV X,#1439{INTEGER}
ADD X,Y
MOV Y,X
MOVB (Y),#209{INTEGER}
NOP
MOV A,#0{INTEGER}
JSR NEXT
CMP A,#0{INTEGER}
JE ($JUMP)
140:
NOP
JSR GOSUB
JSR 3000
150:
NOP
JSR GOSUB
JSR 2000
160:
NOP
MOV Y,#1{INTEGER}
MOV X,HI{REAL}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP1
JMP SKIP1
NSKIP1:
JSR GOSUB
JSR 1000
NOP
SKIP1:
170:
NOP
JMP 100
1000:
NOP
MOV Y,#16{INTEGER}
MOV X{REAL},Y
NOP
MOV Y,#10{INTEGER}
MOV Y{REAL},Y
NOP
MOV B,#game over{STRING}
MOV T${STRING},B
NOP
JSR GOSUB
JSR 20000
1010:
NOP
MOV Y,#15{INTEGER}
MOV X{REAL},Y
NOP
MOV Y,#11{INTEGER}
MOV Y{REAL},Y
NOP
MOV B,#press a key{STRING}
MOV T${STRING},B
NOP
JSR GOSUB
JSR 20000
1020:
NOP
JSR GETSTR
MOV A${STRING},A
NOP
MOV B,#{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP2
JMP SKIP2
NSKIP2:
JMP 1020
NOP
SKIP2:
1030:
NOP
JMP RETURN
2000:
NOP
MOV X,#0{INTEGER}
MOV G,SP[]{REAL}
CHGCTX #0
JSR ARRAYACCESS
MOV Y,#1024{INTEGER}
ADD X,Y
MOV Y,X
MOVB (Y),#32{INTEGER}
2010:
NOP
JSR GOSUB
JSR 2800
2020:
NOP
MOV Y,#0{INTEGER}
MOV I{REAL},Y
NOP
MOV Y,#1{INTEGER}
MOV X,SL{REAL}
SUB X,Y
PUSH X
NOP
MOV Y,#1{INTEGER}
PUSH Y
MOV A,(I{REAL})
JSR INITFOR
NOP
MOV Y,I{REAL}
PUSH Y
NOP
MOV Y,#1{INTEGER}
MOV X,I{REAL}
ADD X,Y
MOV G,SP[]{REAL}
CHGCTX #0
JSR ARRAYACCESS
MOV Y,X
POP X
MOV G,SP[]{REAL}
JSR ARRAYSTORE
NOP
MOV A,#0{INTEGER}
JSR NEXT
CMP A,#0{INTEGER}
JE ($JUMP)
2030:
NOP
MOV Y,DX{REAL}
MOV X,HX{REAL}
ADD X,Y
MOV HX{REAL},X
2040:
NOP
MOV Y,DY{REAL}
MOV X,HY{REAL}
ADD X,Y
MOV HY{REAL},X
2050:
NOP
MOV Y,SL{REAL}
PUSH Y
NOP
MOV Y,HY{REAL}
MOV A,#5{INTEGER}
MOV X,Y
SHL X,A
MOV A,#3{INTEGER}
SHL Y,A
ADD X,Y
MOV Y,HX{REAL}
ADD X,Y
MOV Y,X
POP X
MOV G,SP[]{REAL}
JSR ARRAYSTORE
2060:
NOP
JSR GOSUB
JSR 3200
2070:
NOP
MOV Y,#1{INTEGER}
MOV X,HI{REAL}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP3
JMP SKIP3
NSKIP3:
JMP RETURN
NOP
SKIP3:
2080:
NOP
JSR GOSUB
JSR 3300
2090:
NOP
MOV Y,#1{INTEGER}
MOV I{REAL},Y
NOP
MOV Y,SD{REAL}
PUSH Y
NOP
MOV Y,#1{INTEGER}
PUSH Y
MOV A,(I{REAL})
JSR INITFOR
NOP
JSR GOSUB
JSR 2500
NOP
MOV A,#0{INTEGER}
JSR NEXT
CMP A,#0{INTEGER}
JE ($JUMP)
2100:
NOP
JSR GOSUB
JSR 2600
2110:
NOP
JMP 2000
2500:
NOP
MOVB X,53266
MOV Y,#200{INTEGER}
LT X,Y
CMP X,#0{REAL}
JNE NSKIP4
JMP SKIP4
NSKIP4:
JMP 2500
NOP
SKIP4:
2510:
NOP
JMP RETURN
2600:
NOP
MOV X,SL{REAL}
MOV G,SP[]{REAL}
CHGCTX #0
JSR ARRAYACCESS
MOV Y,#1024{INTEGER}
ADD X,Y
MOV Y,X
MOVB (Y),#209{INTEGER}
NOP
JMP RETURN
2800:
NOP
JSR GETSTR
MOV A${STRING},A
NOP
MOV B,#{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP5
JMP SKIP5
NSKIP5:
JMP RETURN
NOP
SKIP5:
2810:
NOP
MOV B,#i{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP6
JMP SKIP6
NSKIP6:
JMP 2850
NOP
SKIP6:
2820:
NOP
MOV B,#j{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP7
JMP SKIP7
NSKIP7:
JMP 2900
NOP
SKIP7:
2830:
NOP
MOV B,#k{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP8
JMP SKIP8
NSKIP8:
JMP 2950
NOP
SKIP8:
2840:
NOP
MOV B,#l{STRING}
MOV A,A${STRING}
CHGCTX #0
JSR SEQ
CMP X,#0{REAL}
JNE NSKIP9
JMP SKIP9
NSKIP9:
JMP 2970
NOP
SKIP9:
2845:
NOP
JMP RETURN
2850:
NOP
MOV Y,#1{INTEGER}
MOV X,DY{REAL}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP10
JMP SKIP10
NSKIP10:
JMP RETURN
NOP
SKIP10:
2860:
NOP
MOV Y,#0{INTEGER}
MOV DX{REAL},Y
NOP
MOV Y,#-1.0{REAL}
MOV DY{REAL},Y
NOP
JMP RETURN
2900:
NOP
MOV Y,#1{INTEGER}
MOV X,DX{REAL}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP11
JMP SKIP11
NSKIP11:
JMP RETURN
NOP
SKIP11:
2910:
NOP
MOV Y,#-1.0{REAL}
MOV DX{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV DY{REAL},Y
NOP
JMP RETURN
2950:
NOP
MOV Y,#-1.0{REAL}
MOV X,DY{REAL}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP12
JMP SKIP12
NSKIP12:
JMP RETURN
NOP
SKIP12:
2960:
NOP
MOV Y,#0{INTEGER}
MOV DX{REAL},Y
NOP
MOV Y,#1{INTEGER}
MOV DY{REAL},Y
NOP
JMP RETURN
2970:
NOP
MOV Y,#-1.0{REAL}
MOV X,DX{REAL}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP13
JMP SKIP13
NSKIP13:
JMP RETURN
NOP
SKIP13:
2980:
NOP
MOV Y,#1{INTEGER}
MOV DX{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV DY{REAL},Y
NOP
JMP RETURN
3000:
NOP
MOV Y,#0{INTEGER}
RND X,Y
MOV Y,#1000{INTEGER}
MUL X,Y
MOV FL{REAL},X
3010:
NOP
MOV Y,#0{INTEGER}
MOV X,FL{REAL}
LT X,Y
CMP X,#0{REAL}
JNE NSKIP14
JMP SKIP14
NSKIP14:
NOP
MOV X,FL{REAL}
MOV Y,#-1.0{REAL}
MUL X,Y
MOV FL{REAL},X
NOP
SKIP14:
3020:
NOP
MOV Y,#999{INTEGER}
MOV X,FL{REAL}
GT X,Y
CMP X,#0{REAL}
JNE NSKIP15
JMP SKIP15
NSKIP15:
JMP 3000
NOP
SKIP15:
3030:
NOP
MOV Y,FL{REAL}
MOV X,#1024{INTEGER}
ADD X,Y
MOV Y,X
MOVB X,(Y)
MOV Y,#32{INTEGER}
NEQ X,Y
CMP X,#0{REAL}
JNE NSKIP16
JMP SKIP16
NSKIP16:
JMP 3000
NOP
SKIP16:
3040:
NOP
MOV Y,FL{REAL}
MOV X,#1024{INTEGER}
ADD X,Y
MOV Y,X
MOVB (Y),#42{INTEGER}
NOP
JMP RETURN
3200:
NOP
MOV Y,#40{INTEGER}
MOV X,HX{REAL}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP17
JMP SKIP17
NSKIP17:
NOP
MOV Y,#1{INTEGER}
MOV HI{REAL},Y
NOP
SKIP17:
3210:
NOP
MOV Y,#-1.0{REAL}
MOV X,HX{REAL}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP18
JMP SKIP18
NSKIP18:
NOP
MOV Y,#1{INTEGER}
MOV HI{REAL},Y
NOP
SKIP18:
3220:
NOP
MOV Y,#0{INTEGER}
MOV X,HY{REAL}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP19
JMP SKIP19
NSKIP19:
NOP
MOV Y,#1{INTEGER}
MOV HI{REAL},Y
NOP
SKIP19:
3230:
NOP
MOV Y,#25{INTEGER}
MOV X,HY{REAL}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP20
JMP SKIP20
NSKIP20:
NOP
MOV Y,#1{INTEGER}
MOV HI{REAL},Y
NOP
SKIP20:
3240:
NOP
MOV Y,HY{REAL}
MOV A,#5{INTEGER}
MOV X,Y
SHL X,A
MOV A,#3{INTEGER}
SHL Y,A
ADD X,Y
PUSH X
MOV Y,HX{REAL}
MOV X,#1024{INTEGER}
ADD X,Y
POP Y
ADD X,Y
MOV Y,X
MOVB X,(Y)
MOV Y,#209{INTEGER}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP21
JMP SKIP21
NSKIP21:
NOP
MOV Y,#1{INTEGER}
MOV HI{REAL},Y
NOP
SKIP21:
3250:
NOP
JMP RETURN
3300:
NOP
MOV Y,HY{REAL}
MOV A,#5{INTEGER}
MOV X,Y
SHL X,A
MOV A,#3{INTEGER}
SHL Y,A
ADD X,Y
PUSH X
MOV Y,HX{REAL}
MOV X,#1024{INTEGER}
ADD X,Y
POP Y
ADD X,Y
MOV Y,X
MOVB X,(Y)
MOV Y,#32{INTEGER}
EQ X,Y
CMP X,#0{REAL}
JNE NSKIP22
JMP SKIP22
NSKIP22:
JMP RETURN
NOP
SKIP22:
3310:
NOP
MOV Y,#1{INTEGER}
MOV X,SL{REAL}
ADD X,Y
MOV SL{REAL},X
NOP
MOV Y,SL{REAL}
PUSH Y
NOP
MOV Y,HY{REAL}
MOV A,#5{INTEGER}
MOV X,Y
SHL X,A
MOV A,#3{INTEGER}
SHL Y,A
ADD X,Y
MOV Y,HX{REAL}
ADD X,Y
MOV Y,X
POP X
MOV G,SP[]{REAL}
JSR ARRAYSTORE
3320:
NOP
MOV Y,#7{INTEGER}
MOV X{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV Y{REAL},Y
NOP
MOV B,#    {STRING}
MOV T${STRING},B
NOP
JSR GOSUB
JSR 20000
3330:
NOP
MOV Y,#7{INTEGER}
MOV X{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV Y{REAL},Y
NOP
JSR COMPACTMAX
MOV Y,SL{REAL}
CHGCTX #1
JSR STR
JSR COPYSTR
MOV T${STRING},A
NOP
JSR GOSUB
JSR 20000
3332:
NOP
MOV Y,#1031{INTEGER}
MOV A,#128{INTEGER}
JSR PEEKBYTEADD
MOVB 1031,X
3340:
NOP
MOV Y,#1032{INTEGER}
MOV A,#128{INTEGER}
JSR PEEKBYTEADD
MOVB 1032,X
NOP
MOV Y,#1033{INTEGER}
MOV A,#128{INTEGER}
JSR PEEKBYTEADD
MOVB 1033,X
NOP
MOV Y,#1034{INTEGER}
MOV A,#128{INTEGER}
JSR PEEKBYTEADD
MOVB 1034,X
3350:
NOP
MOV A,#4{INTEGER}
MOV X,SL{REAL}
SHR X,A
MOV Y,X
MOV X,#16{INTEGER}
SUB X,Y
MOV SD{REAL},X
3360:
NOP
MOV Y,#37{INTEGER}
MOV X{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV Y{REAL},Y
NOP
MOV B,#   {STRING}
MOV T${STRING},B
NOP
JSR GOSUB
JSR 20000
3370:
NOP
MOV Y,#37{INTEGER}
MOV X{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV Y{REAL},Y
NOP
JSR COMPACTMAX
MOV Y,SD{REAL}
MOV X,#17{INTEGER}
SUB X,Y
MOV Y,X
INT X,Y
MOV Y,X
CHGCTX #1
JSR STR
JSR COPYSTR
MOV T${STRING},A
NOP
JSR GOSUB
JSR 20000
3380:
NOP
MOV Y,#1061{INTEGER}
MOV A,#128{INTEGER}
JSR PEEKBYTEADD
MOVB 1061,X
NOP
MOV Y,#1062{INTEGER}
MOV A,#128{INTEGER}
JSR PEEKBYTEADD
MOVB 1062,X
NOP
MOV Y,#1063{INTEGER}
MOV A,#128{INTEGER}
JSR PEEKBYTEADD
MOVB 1063,X
3390:
NOP
JSR GOSUB
JSR 3000
3400:
NOP
JMP RETURN
10000:
NOP
MOVB 53280,#5{INTEGER}
10010:
NOP
MOVB 53281,#0{INTEGER}
NOP
MOVB 646,#5{INTEGER}
10020:
NOP
MOV Y,#1024{INTEGER}
MOV I{REAL},Y
MOV Y,#2023{INTEGER}
PUSH Y
MOV Y,#1{INTEGER}
PUSH Y
MOV A,(I{REAL})
MOV X,#32{INTEGER}
JSR FASTFOR
CMP A,#0{INTEGER}
JE ($JUMP)
10025:
NOP
MOV Y,#55296{INTEGER}
MOV I{REAL},Y
MOV Y,#56295{INTEGER}
PUSH Y
MOV Y,#1{INTEGER}
PUSH Y
MOV A,(I{REAL})
MOV X,#5{INTEGER}
JSR FASTFOR
CMP A,#0{INTEGER}
JE ($JUMP)
10030:
NOP
MOV Y,#0{INTEGER}
MOV X{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV Y{REAL},Y
NOP
MOV B,#length: 4     cbmbasic snake   speed: 1{STRING}
MOV T${STRING},B
NOP
JSR GOSUB
JSR 20000
10040:
NOP
MOV Y,#1024{INTEGER}
MOV I{REAL},Y
NOP
MOV Y,#1063{INTEGER}
PUSH Y
NOP
MOV Y,#1{INTEGER}
PUSH Y
MOV A,(I{REAL})
JSR INITFOR
NOP
MOV Y,I{REAL}
PUSH Y
MOV Y,I{REAL}
MOV A,#128{INTEGER}
JSR PEEKBYTEADD
POP Y
MOVB (Y),X
NOP
MOV A,(I{})
JSR NEXT
CMP A,#0{INTEGER}
JE ($JUMP)
10050:
NOP
JMP RETURN
20000:
NOP
MOVB 780,#0{INTEGER}
NOP
MOV X,Y{REAL}
MOVB 781,X
NOP
MOV X,X{REAL}
MOVB 782,X
NOP
JSR $fff0
NOP
MOV A,T${STRING}
JSR STROUT
JSR LINEBREAK
NOP
JMP RETURN
NOP
JSR END
RTS
