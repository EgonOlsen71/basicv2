117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_100:
128	.$81f	LDA #<CONST_0
129	.$821	LDY #>CONST_0
130	.$823	JSR STROUTWL
132	.$826	LDA #<CONST_1
133	.$828	LDY #>CONST_1
134	.$82a	STA TMP_ZP
135	.$82c	STY TMP_ZP+1
137	.$82e	JSR WRITETID
139	.$831	LINE_110:
141	.$831	LDA #0
142	.$833	STA VAR_J
143	.$836	STA VAR_J+1
144	.$839	STA VAR_J+2
145	.$83c	STA VAR_J+3
146	.$83f	STA VAR_J+4
148	.$842	LDA #<CONST_3R
149	.$844	LDY #>CONST_3R
150	.$846	JSR REALFACPUSH
152	.$849	LDA #<CONST_4R
153	.$84b	LDY #>CONST_4R
154	.$84d	JSR REALFACPUSH
156	.$850	LDA #<VAR_J
157	.$852	LDY #>VAR_J
158	.$854	STA A_REG
159	.$857	STY A_REG+1
160	.$85a	LDA #<FORLOOP0
161	.$85c	STA JUMP_TARGET
162	.$85e	LDA #>FORLOOP0
163	.$860	STA JUMP_TARGET+1
164	.$862	JSR INITFOR
165	.$865	FORLOOP0:
166	.$865	LDX #4
167	.$867	dcloop401_1:
168	.$867	LDA CONST_5R,X
169	.$86a	STA VAR_I,X
170	.$86d	DEX
171	.$86e	BPL dcloop401_1
173	.$870	LDA #<CONST_6R
174	.$872	LDY #>CONST_6R
175	.$874	JSR REALFACPUSH
177	.$877	LDA #<CONST_4R
178	.$879	LDY #>CONST_4R
179	.$87b	JSR REALFACPUSH
181	.$87e	LDA #<VAR_I
182	.$880	LDY #>VAR_I
183	.$882	STA A_REG
184	.$885	STY A_REG+1
185	.$888	LDA #<FORLOOP1
186	.$88a	STA JUMP_TARGET
187	.$88c	LDA #>FORLOOP1
188	.$88e	STA JUMP_TARGET+1
189	.$890	JSR INITFOR
190	.$893	FORLOOP1:
191	.$893	LDA #<VAR_I
192	.$895	LDY #>VAR_I
193	.$897	JSR REALFACPUSH
195	.$89a	LDA #<VAR_I
196	.$89c	LDY #>VAR_I
197	.$89e	JSR COPY2_XYA_YREG
201	.$8a1	LDY #1
202	.$8a3	LDA #0
203	.$8a5	STY A_REG
204	.$8a8	STA A_REG+1
205	.$8ab	LDY #255
206	.$8ad	LDA #0
207	.$8af	STY B_REG
208	.$8b2	STA B_REG+1
209	.$8b5	JSR PEEKBYTEADDANDFAST
210	.$8b8	JSR POPREAL
211	.$8bb	JSR FACWORD
212	.$8be	STY MOVBSELF1+1
213	.$8c1	STA MOVBSELF1+2
214	.$8c4	LDY A_REG
215	.$8c7	MOVBSELF1:
216	.$8c7	STY $FFFF
218	.$8ca	LDA #0
219	.$8cc	STA A_REG
220	.$8cf	STA A_REG+1
221	.$8d2	JSR NEXT
223	.$8d5	LDA A_REG
224	.$8d8	BNE RBEQ_0
225	.$8da	JMP (JUMP_TARGET)
227	.$8dd	RBEQ_0:
228	.$8dd	LDA #0
229	.$8df	STA A_REG
230	.$8e2	STA A_REG+1
231	.$8e5	JSR NEXT
233	.$8e8	LDA A_REG
234	.$8eb	BNE RBEQ_1
235	.$8ed	JMP (JUMP_TARGET)
237	.$8f0	RBEQ_1:
239	.$8f0	LINE_120:
241	.$8f0	JSR COMPACTMAX
242	.$8f3	LDA #<CONST_7R
243	.$8f5	LDY #>CONST_7R
244	.$8f7	JSR COPY2_XYA_YREG
249	.$8fa	SEI
250	.$8fb	LDY TIMEADDR
251	.$8fd	LDX TIMEADDR+1
252	.$8ff	LDA TIMEADDR+2
253	.$901	CLI
255	.$902	SEC
256	.$903	JSR COPYTIME
257	.$906	JSR GETTIME
258	.$909	LDX #<VAR_TI
259	.$90b	LDY #>VAR_TI
260	.$90d	JSR FACMEM
261	.$910	LDA #<VAR_TI
262	.$912	LDY #>VAR_TI
263	.$914	JSR COPY2_XYA_XREG
267	.$917	JSR YREGFAC
269	.$91a	LDA #<X_REG
270	.$91c	LDY #>X_REG
272	.$91e	JSR FACDIV
277	.$921	JSR BASINT
278	.$924	JSR FACXREG
280	.$927	JSR COPY_XREG2YREG
285	.$92a	JSR STR
287	.$92d	LDA A_REG
288	.$930	LDY A_REG+1
289	.$933	STA TMP_ZP
290	.$935	STY TMP_ZP+1
291	.$937	LDA #<VAR_T$
292	.$939	LDY #>VAR_T$
293	.$93b	JSR COPYSTRING
294	.$93e	LDA VAR_T$
295	.$941	LDY VAR_T$+1
296	.$944	STA B_REG
297	.$947	STY B_REG+1
299	.$94a	JSR LEN
300	.$94d	JSR XREGFAC
302	.$950	LDX #<VAR_T
303	.$952	LDY #>VAR_T
305	.$954	JSR FACMEM
307	.$957	LINE_130:
309	.$957	JSR COMPACTMAX
310	.$95a	JSR ONETOFAC
312	.$95d	LDA #<VAR_T
313	.$95f	LDY #>VAR_T
314	.$961	JSR FASTFSUBMEM
319	.$964	LDX #<C_REG
320	.$966	LDY #>C_REG
322	.$968	JSR FACMEM
324	.$96b	LDA VAR_T$
325	.$96e	LDY VAR_T$+1
326	.$971	STA B_REG
327	.$974	STY B_REG+1
328	.$977	JSR RIGHT
330	.$97a	LDA A_REG
331	.$97d	LDY A_REG+1
332	.$980	STA TMP_ZP
333	.$982	STY TMP_ZP+1
334	.$984	LDA #<VAR_T$
335	.$986	LDY #>VAR_T$
336	.$988	JSR COPYSTRING
337	.$98b	JSR COMPACTMAX
338	.$98e	LDA #<CONST_8
339	.$990	LDY #>CONST_8
340	.$992	STA TMP_ZP
341	.$994	STY TMP_ZP+1
342	.$996	JSR PUSHINT
344	.$999	LDA #<CONST_9R
345	.$99b	LDY #>CONST_9R
346	.$99d	JSR COPY2_XYA_CREG
351	.$9a0	JSR READTID
352	.$9a3	LDA VAR_TI$
353	.$9a6	LDY VAR_TI$+1
354	.$9a9	STA B_REG
355	.$9ac	STY B_REG+1
356	.$9af	JSR LEFT
357	.$9b2	JSR POPINT2B
359	.$9b5	JSR CONCAT
361	.$9b8	LDA A_REG
362	.$9bb	LDY A_REG+1
363	.$9be	STA TMP_ZP
364	.$9c0	STY TMP_ZP+1
365	.$9c2	LDA #<VAR_H$
366	.$9c4	LDY #>VAR_H$
367	.$9c6	JSR COPYSTRING
369	.$9c9	LINE_140:
371	.$9c9	JSR COMPACTMAX
372	.$9cc	LDA #<CONST_8
373	.$9ce	LDY #>CONST_8
374	.$9d0	STA TMP_ZP
375	.$9d2	STY TMP_ZP+1
376	.$9d4	JSR PUSHINT
378	.$9d7	LDA #<CONST_10R
379	.$9d9	LDY #>CONST_10R
380	.$9db	JSR COPY2_XYA_CREG
384	.$9de	LDA #<CONST_9R
385	.$9e0	LDY #>CONST_9R
386	.$9e2	STY TMP3_ZP+1
387	.$9e4	LDX #<D_REG
388	.$9e6	LDY #>D_REG
389	.$9e8	JSR COPY2_XYA
393	.$9eb	JSR READTID
394	.$9ee	LDA VAR_TI$
395	.$9f1	LDY VAR_TI$+1
396	.$9f4	STA B_REG
397	.$9f7	STY B_REG+1
398	.$9fa	JSR MID
399	.$9fd	JSR POPINT2B
401	.$a00	JSR CONCAT
403	.$a03	LDA A_REG
404	.$a06	LDY A_REG+1
405	.$a09	STA TMP_ZP
406	.$a0b	STY TMP_ZP+1
407	.$a0d	LDA #<VAR_M$
408	.$a0f	LDY #>VAR_M$
409	.$a11	JSR COPYSTRING
410	.$a14	JSR COMPACTMAX
411	.$a17	LDA #<CONST_9R
412	.$a19	LDY #>CONST_9R
413	.$a1b	JSR COPY2_XYA_CREG
418	.$a1e	JSR READTID
419	.$a21	LDA VAR_TI$
420	.$a24	LDY VAR_TI$+1
421	.$a27	STA B_REG
422	.$a2a	STY B_REG+1
423	.$a2d	JSR RIGHT
425	.$a30	LDA A_REG
426	.$a33	LDY A_REG+1
427	.$a36	STA TMP_ZP
428	.$a38	STY TMP_ZP+1
429	.$a3a	LDA #<VAR_S$
430	.$a3c	LDY #>VAR_S$
431	.$a3e	JSR COPYSTRING
433	.$a41	LINE_150:
435	.$a41	LDA VAR_H$
436	.$a44	LDY VAR_H$+1
437	.$a47	JSR STROUTWL
439	.$a4a	LDA VAR_M$
440	.$a4d	LDY VAR_M$+1
441	.$a50	JSR STROUTWL
443	.$a53	LDA VAR_S$
444	.$a56	LDY VAR_S$+1
445	.$a59	JSR STROUTWL
447	.$a5c	LDA #<CONST_11
448	.$a5e	LDY #>CONST_11
449	.$a60	JSR STROUTWL
451	.$a63	LDA VAR_T$
452	.$a66	LDY VAR_T$+1
453	.$a69	JSR STROUTWL
455	.$a6c	LDA #<CONST_12
456	.$a6e	LDY #>CONST_12
457	.$a70	JSR STROUTBRKWL
460	.$a73	JSR END
461	.$a76	RTS
464	.$a77	END   LDX SP_SAVE
465	.$a7a	TXS
472	.$a7b	RTS
475	.$a7c	START  LDA ENDSTRBUF+1
476	.$a7f	BNE ENDGIVEN
477	.$a81	LDA BASICEND
478	.$a83	STA ENDSTRBUF
479	.$a86	LDA BASICEND+1
480	.$a88	STA ENDSTRBUF+1
481	.$a8b	ENDGIVEN LDA #<FPSTACK
482	.$a8d	LDY #>FPSTACK
483	.$a8f	STA FPSTACKP
484	.$a92	STY FPSTACKP+1
485	.$a95	LDA #<FORSTACK
486	.$a97	LDY #>FORSTACK
487	.$a99	STA FORSTACKP
488	.$a9c	STY FORSTACKP+1
489	.$a9f	LDA #<STRBUF
490	.$aa1	LDY #>STRBUF
491	.$aa3	STA STRBUFP
492	.$aa6	STY STRBUFP+1
493	.$aa9	STA HIGHP
494	.$aac	STY HIGHP+1
495	.$aaf	LDA #0
496	.$ab1	STA CHLOCKFLAG
497	.$ab4	STA LASTVAR
498	.$ab7	STA LASTVAR+1
499	.$aba	JSR INITVARS
500	.$abd	LDA #0
501	.$abf	STA CMD_NUM
502	.$ac2	STA CHANNEL
503	.$ac5	TAY
504	.$ac6	TAX
508	.$ac7	STA KEYNDX
514	.$ac9	JSR RESTORE
515	.$acc	CLC
519	.$acd	RTS
522	.$ace	INITNARRAY
523	.$ace	STA TMP_ZP
524	.$ad0	STY TMP_ZP+1
525	.$ad2	LDY #0
526	.$ad4	TYA
527	.$ad5	NINITLOOP STA (TMP_ZP),Y
528	.$ad7	INC TMP_ZP
529	.$ad9	BNE NLOOPNOV
530	.$adb	INC TMP_ZP+1
531	.$add	NLOOPNOV LDX TMP2_ZP
532	.$adf	BNE NLOOPNOV2
533	.$ae1	DEC TMP2_ZP+1
534	.$ae3	NLOOPNOV2 DEC TMP2_ZP
535	.$ae5	BNE NINITLOOP
536	.$ae7	LDX TMP2_ZP+1
537	.$ae9	BNE NINITLOOP
538	.$aeb	RTS
541	.$aec	INITSTRARRAY
542	.$aec	STA TMP_ZP
543	.$aee	STY TMP_ZP+1
544	.$af0	SINITLOOP LDY #0
545	.$af2	LDA #<EMPTYSTR
546	.$af4	STA (TMP_ZP),Y
547	.$af6	LDA #>EMPTYSTR
548	.$af8	INY
549	.$af9	STA (TMP_ZP),Y
550	.$afb	CLC
551	.$afc	LDA TMP_ZP
552	.$afe	ADC #2
553	.$b00	STA TMP_ZP
554	.$b02	BCC SLOOPNOV1
555	.$b04	INC TMP_ZP+1
556	.$b06	SLOOPNOV1 SEC
557	.$b07	LDA TMP2_ZP
558	.$b09	SBC #2
559	.$b0b	STA TMP2_ZP
560	.$b0d	BCS SLOOPNOV2
561	.$b0f	DEC TMP2_ZP+1
562	.$b11	SLOOPNOV2 LDA TMP2_ZP
563	.$b13	BNE SINITLOOP
564	.$b15	LDA TMP2_ZP+1
565	.$b17	BNE SINITLOOP
566	.$b19	RTS
569	.$b1a	INITSPARAMS STA TMP3_ZP
570	.$b1c	STY TMP3_ZP+1
571	.$b1e	SEC
572	.$b1f	SBC #2
573	.$b21	STA TMP_ZP
574	.$b23	TYA
575	.$b24	SBC #0
576	.$b26	STA TMP_ZP+1
577	.$b28	LDY #0
578	.$b2a	LDA (TMP_ZP),Y
579	.$b2c	STA TMP2_ZP
580	.$b2e	INY
581	.$b2f	LDA (TMP_ZP),Y
582	.$b31	STA TMP2_ZP+1
583	.$b33	LDA TMP3_ZP
584	.$b35	LDY TMP3_ZP+1
585	.$b37	RTS
588	.$b38	INITSTRVARS LDA #<STRINGVARS_START  
589	.$b3a	LDY #>STRINGVARS_START
590	.$b3c	CMP #<STRINGVARS_END
591	.$b3e	BNE INITIT1
592	.$b40	CPY #>STRINGVARS_END
593	.$b42	BNE INITIT1
594	.$b44	JMP INITSA2     
595	.$b47	INITIT1  STA TMP_ZP
596	.$b49	STY TMP_ZP+1
597	.$b4b	LDY #0
598	.$b4d	INITSTRLOOP LDA #<EMPTYSTR
599	.$b4f	STA (TMP_ZP),Y
600	.$b51	INY
601	.$b52	LDA #>EMPTYSTR
602	.$b54	STA (TMP_ZP),Y
603	.$b56	DEY
604	.$b57	LDA TMP_ZP
605	.$b59	CLC
606	.$b5a	ADC #2
607	.$b5c	STA TMP_ZP
608	.$b5e	LDA TMP_ZP+1
609	.$b60	ADC #0
610	.$b62	STA TMP_ZP+1
611	.$b64	CMP #>STRINGVARS_END
612	.$b66	BNE INITSTRLOOP
613	.$b68	LDA TMP_ZP
614	.$b6a	CMP #<STRINGVARS_END
615	.$b6c	BNE INITSTRLOOP
616	.$b6e	INITSA2  LDA #<STRINGARRAYS_START 
617	.$b70	LDY #>STRINGARRAYS_START
618	.$b72	CMP #<STRINGARRAYS_END
619	.$b74	BNE ARRAYLOOP
620	.$b76	CPY #>STRINGARRAYS_END
621	.$b78	BNE ARRAYLOOP
622	.$b7a	RTS       
623	.$b7b	ARRAYLOOP CLC
624	.$b7c	ADC #3
625	.$b7e	BCC ARRAYSKIP1
626	.$b80	INY
627	.$b81	ARRAYSKIP1 CPY #>STRINGARRAYS_END
628	.$b83	BEQ ARRAYSC
629	.$b85	BCC ARRAYSKIP2
630	.$b87	JMP ARRAYQUIT
631	.$b8a	ARRAYSC  CMP #<STRINGARRAYS_END
632	.$b8c	BCS ARRAYQUIT
633	.$b8e	ARRAYSKIP2 STA TMP_REG
634	.$b90	STY TMP_REG+1
635	.$b92	JSR INITSPARAMS
636	.$b95	LDA TMP_REG
637	.$b97	LDY TMP_REG+1
638	.$b99	JSR INITSTRARRAY
639	.$b9c	LDA TMP_ZP
640	.$b9e	LDY TMP_ZP+1
641	.$ba0	JMP ARRAYLOOP
642	.$ba3	ARRAYQUIT RTS
645	.$ba4	RESTORE  LDA #<DATAS
646	.$ba6	LDY #>DATAS
647	.$ba8	STA DATASP
648	.$bab	STY DATASP+1
649	.$bae	RTS
652	.$baf	MID   LDA #<D_REG
653	.$bb1	LDY #>D_REG
654	.$bb3	JSR REALFAC
655	.$bb6	JSR SGNFAC
656	.$bb9	ROL
657	.$bba	BCC MIDLENGTH  
658	.$bbc	MIDNEGC  JSR STRFUNCINT  
659	.$bbf	LDA TMP_REG   
660	.$bc1	STA TMP_REG+1
661	.$bc3	BNE MIDOK2
662	.$bc5	JMP ILLEGALQUANTITY 
663	.$bc8	MIDOK2  DEC TMP_REG+1  
664	.$bca	LDA (TMP_ZP),Y
665	.$bcc	SEC
666	.$bcd	SBC TMP_REG+1
667	.$bcf	STA TMP_REG   
668	.$bd1	BCS MIDNOV2
669	.$bd3	STY TMP_REG   
670	.$bd5	JMP MIDNOV2
671	.$bd8	MIDLENGTH JSR FACWORD
672	.$bdb	MIDCONST STY TMP2_REG  
673	.$bde	JSR STRFUNCINT
674	.$be1	LDA TMP_REG   
675	.$be3	BNE MIDOK
676	.$be5	JMP ILLEGALQUANTITY 
677	.$be8	MIDOK  LDX TMP2_REG
678	.$beb	STX TMP_REG   
679	.$bed	STA TMP_REG+1
680	.$bef	DEC TMP_REG+1  
681	.$bf1	MIDNOV
682	.$bf1	MIDNOV2  LDA TMP_REG+1  
683	.$bf3	CLC
684	.$bf4	ADC TMP_REG   
685	.$bf6	BCS MIDCLAMP
686	.$bf8	CMP (TMP_ZP),Y
687	.$bfa	BCS MIDCLAMP
688	.$bfc	MIDCOPY  JMP STRFUNC
689	.$bff	MIDCLAMP LDA (TMP_ZP),Y  
690	.$c01	SEC
691	.$c02	SBC TMP_REG+1
692	.$c04	STA TMP_REG
693	.$c06	BCS MIDCOPY
694	.$c08	STY TMP_REG
695	.$c0a	JMP MIDCOPY
698	.$c0d	RIGHT  JSR STRFUNCINT
699	.$c10	RIGHT2  LDA (TMP_ZP),Y
700	.$c12	TAX
701	.$c13	CMP TMP_REG   
702	.$c15	BCS RIGHTBELOW
703	.$c17	STA TMP_REG   
704	.$c19	RIGHTBELOW TXA
705	.$c1a	SEC
706	.$c1b	SBC TMP_REG
707	.$c1d	BCS RIGHTNOV
708	.$c1f	LDA #0
709	.$c21	RIGHTNOV STA TMP_REG+1
710	.$c23	JMP STRFUNC
713	.$c26	LEFT  JSR STRFUNCINT
714	.$c29	LEFT2  STY TMP_REG+1  
715	.$c2b	LDA (TMP_ZP),Y
716	.$c2d	CMP TMP_REG   
717	.$c2f	BCS LEFTBELOW
718	.$c31	STA TMP_REG   
719	.$c33	LEFTBELOW JMP STRFUNC
722	.$c36	STRFUNCINT  LDA B_REG   
723	.$c39	STA TMP_ZP
724	.$c3b	LDA B_REG+1
725	.$c3e	STA TMP_ZP+1
726	.$c40	LDA #<C_REG
727	.$c42	LDY #>C_REG
728	.$c44	JSR REALFAC
729	.$c47	JSR FACWORD
730	.$c4a	STY TMP_REG   
731	.$c4c	LDY #0
732	.$c4e	RTS
739	.$c4f	STRFUNC  LDA TMP_REG+1
740	.$c51	BEQ STARTATZERO
741	.$c53	LDA TMP_ZP
742	.$c55	CLC
743	.$c56	ADC TMP_REG+1
744	.$c58	STA TMP_ZP
745	.$c5a	BCC STARTATZERO
746	.$c5c	INC TMP_ZP+1
747	.$c5e	STARTATZERO LDY #0
748	.$c60	LDA (TMP_ZP),Y
749	.$c62	PHA     
750	.$c63	LDA TMP_REG
751	.$c65	BNE STRFUNCNZ
752	.$c67	LDA #<EMPTYSTR
753	.$c69	STA A_REG
754	.$c6c	LDA #>EMPTYSTR
755	.$c6e	STA A_REG+1
756	.$c71	PLA     
759	.$c72	JMP EXITSTRFUNC
760	.$c75	STRFUNCNZ STA (TMP_ZP),Y
761	.$c77	LDA #<A_REG
762	.$c79	LDY #>A_REG
763	.$c7b	STA TMP2_ZP
764	.$c7d	STY TMP2_ZP+1
765	.$c7f	LDX TMP_REG   
766	.$c81	JSR COPYONLY
767	.$c84	PLA
768	.$c85	LDY #0
769	.$c87	STA (TMP_ZP),Y  
770	.$c89	EXITSTRFUNC RTS
773	.$c8a	CONCAT  LDA A_REG
774	.$c8d	STA TMP_ZP
775	.$c8f	LDA A_REG+1
776	.$c92	STA TMP_ZP+1
777	.$c94	LDA STRBUFP  
778	.$c97	STA A_REG
779	.$c9a	STA TMP3_ZP
780	.$c9c	LDA STRBUFP+1
781	.$c9f	STA A_REG+1
782	.$ca2	STA TMP3_ZP+1
783	.$ca4	LDY #0
784	.$ca6	LDA (TMP_ZP),Y
785	.$ca8	TAX
786	.$ca9	LDA B_REG
787	.$cac	STA TMP2_ZP
788	.$cae	LDA B_REG+1
789	.$cb1	STA TMP2_ZP+1
790	.$cb3	TXA
791	.$cb4	CLC
792	.$cb5	ADC (TMP2_ZP),Y
793	.$cb7	BCC CCSTRFITS
794	.$cb9	JMP STRINGTOOLONG
795	.$cbc	CCSTRFITS STA (TMP3_ZP),Y
796	.$cbe	INC TMP3_ZP
797	.$cc0	BNE CCNOOV2
798	.$cc2	INC TMP3_ZP+1
799	.$cc4	CCNOOV2  CLC
800	.$cc5	ADC STRBUFP
801	.$cc8	PHP
802	.$cc9	CLC
803	.$cca	ADC #3
804	.$ccc	STA STRBUFP
805	.$ccf	BCC CCNOCS1
806	.$cd1	INC STRBUFP+1
807	.$cd4	CCNOCS1  PLP
808	.$cd5	BCC CCSTRFITS2
809	.$cd7	INC STRBUFP+1
810	.$cda	CCSTRFITS2 JSR COPY2CONCAT  
811	.$cdd	LDA B_REG   
812	.$ce0	STA TMP_ZP
813	.$ce2	LDA B_REG+1
814	.$ce5	STA TMP_ZP+1
815	.$ce7	JMP COPY2CONCAT  
818	.$cea	COPY2CONCAT LDY #0
819	.$cec	LDA (TMP_ZP),Y
820	.$cee	BEQ NOC2C   
821	.$cf0	STA TMP2_ZP
822	.$cf2	INC TMP_ZP
823	.$cf4	BNE COPY2LOOP
824	.$cf6	INC TMP_ZP+1
825	.$cf8	COPY2LOOP LDA (TMP_ZP),Y
826	.$cfa	STA (TMP3_ZP),Y
827	.$cfc	INY
828	.$cfd	CPY TMP2_ZP
829	.$cff	BNE COPY2LOOP
830	.$d01	TYA
831	.$d02	CLC
832	.$d03	ADC TMP3_ZP   
833	.$d05	STA TMP3_ZP
834	.$d07	BCC NOC2C
835	.$d09	INC TMP3_ZP+1
836	.$d0b	NOC2C  RTS
839	.$d0c	STR   JSR YREGFAC
840	.$d0f	STRINT  LDY #1
841	.$d11	JSR FACSTR
842	.$d14	LDY #0
843	.$d16	STY TMP_ZP+1
844	.$d18	LDA #LOFBUF
845	.$d1a	STA TMP_ZP
846	.$d1c	DEY
847	.$d1d	STRLOOP  INY
848	.$d1e	LDA LOFBUFH,Y
849	.$d21	BNE STRLOOP
850	.$d23	STY LOFBUF
851	.$d25	TYA
852	.$d26	TAX   
853	.$d27	LDA #<A_REG
854	.$d29	LDY #>A_REG
855	.$d2b	STA TMP2_ZP
856	.$d2d	STY TMP2_ZP+1
857	.$d2f	JMP COPYONLY
860	.$d32	LEN   LDA B_REG
861	.$d35	STA TMP_ZP
862	.$d37	LDA B_REG+1
863	.$d3a	STA TMP_ZP+1
864	.$d3c	LDY #0
865	.$d3e	LDA (TMP_ZP),Y
866	.$d40	STA TMP2_ZP  
867	.$d42	BEQ ZEROLEN
868	.$d44	TAY
869	.$d45	LDA #0
870	.$d47	JSR INTFAC
871	.$d4a	JMP FACXREG 
872	.$d4d	ZEROLEN  JMP ZEROSET
875	.$d50	WRITETID LDY #0
876	.$d52	LDA (TMP_ZP),Y
877	.$d54	CMP #$6
878	.$d56	BEQ FORMATOK
879	.$d58	JMP ILLEGALQUANTITY
880	.$d5b	FORMATOK INC TMP_ZP
881	.$d5d	BNE WRITE2
882	.$d5f	INC TMP_ZP+1
883	.$d61	WRITE2  LDA TMP_ZP
884	.$d63	STA INDEX1
885	.$d65	LDA TMP_ZP+1
886	.$d67	STA INDEX1+1
888	.$d69	JMP WRITETIS
895	.$d6c	READTID  LDA $FE
896	.$d6e	PHA
898	.$d6f	STA FACOV
899	.$d71	JSR TI2FAC
900	.$d74	LDY #0
901	.$d76	STY LOWDS+1
902	.$d78	DEY
903	.$d79	STY FACOV+1
904	.$d7b	LDY #$06
905	.$d7d	STY LOWDS
906	.$d7f	LDY #$24
907	.$d81	JSR GETTI
912	.$d84	LDA #$FE
913	.$d86	STA TMP_ZP
914	.$d88	LDA #0
915	.$d8a	STA TMP_ZP+1
916	.$d8c	LDA #$6
917	.$d8e	SEI    
918	.$d8f	STA $FE
919	.$d91	LDA #<VAR_TI$
920	.$d93	LDY #>VAR_TI$
921	.$d95	JSR COPYSTRING
922	.$d98	PLA
923	.$d99	STA $FE
924	.$d9b	CLI
925	.$d9c	RTS
928	.$d9d	SAVEPOINTERS
929	.$d9d	LDA TMP_ZP   
930	.$d9f	STA STORE1
931	.$da2	LDA TMP_ZP+1
932	.$da4	STA STORE1+1
933	.$da7	LDA TMP2_ZP
934	.$da9	STA STORE2
935	.$dac	LDA TMP2_ZP+1
936	.$dae	STA STORE2+1
937	.$db1	LDA TMP3_ZP
938	.$db3	STA STORE3
939	.$db6	LDA TMP3_ZP+1
940	.$db8	STA STORE3+1
941	.$dbb	RTS
944	.$dbc	RESTOREPOINTERS
945	.$dbc	LDA STORE3+1  
946	.$dbf	STA TMP3_ZP+1
947	.$dc1	LDA STORE3
948	.$dc4	STA TMP3_ZP
949	.$dc6	LDA STORE2+1
950	.$dc9	STA TMP2_ZP+1
951	.$dcb	LDA STORE2
952	.$dce	STA TMP2_ZP
953	.$dd0	LDA STORE1+1
954	.$dd3	STA TMP_ZP+1
955	.$dd5	LDA STORE1
956	.$dd8	STA TMP_ZP
957	.$dda	RTS
964	.$ddb	COMPACTMAX
965	.$ddb	LDA #$FF
966	.$ddd	LDY #$0
967	.$ddf	JMP COMPACTF
970	.$de2	COMPACT
971	.$de2	LDY #0
972	.$de4	GCBUFNE  LDA (TMP_ZP),Y  
973	.$de6	COMPACTF STA TMP4_REG  
974	.$de9	LDY STRBUFP+1  
975	.$dec	STY TMP4_REG+1  
976	.$def	INY     
977	.$df0	BEQ ENDMEM   
978	.$df2	CPY ENDSTRBUF+1  
979	.$df5	BCC RGCEXIT   
980	.$df7	ENDMEM  LDA STRBUFP
981	.$dfa	CLC
982	.$dfb	ADC TMP4_REG
983	.$dfe	STA TMP4_REG
984	.$e01	BCC RGCNOOV1
985	.$e03	INC TMP4_REG+1
986	.$e06	RGCNOOV1 CLC
987	.$e07	LDA TMP4_REG
988	.$e0a	ADC #3
989	.$e0c	STA TMP4_REG
990	.$e0f	BCC RGCNOOV2
991	.$e11	INC TMP4_REG+1
992	.$e14	RGCNOOV2 LDA TMP4_REG+1  
993	.$e17	CMP ENDSTRBUF+1
994	.$e1a	BEQ RGCLOW1
995	.$e1c	BCS GCEXECOMP  
996	.$e1e	JMP RGCEXIT
997	.$e21	RGCLOW1  LDA TMP4_REG
998	.$e24	CMP ENDSTRBUF
999	.$e27	BCS GCEXECOMP  
1000	.$e29	RGCEXIT  RTS     
1001	.$e2a	GCEXECOMP LDA STRBUFP
1002	.$e2d	STA STORE4
1003	.$e30	LDA STRBUFP+1
1004	.$e33	STA STORE4+1
1005	.$e36	JSR GCEXE
1006	.$e39	JMP CHECKMEMORY
1009	.$e3c	GCEXE  JSR SAVEPOINTERS
1010	.$e3f	LDA #0
1011	.$e41	STA LASTVAR
1012	.$e44	STA LASTVAR+1  
1013	.$e47	LDA #<STRBUF
1014	.$e49	STA TMP_ZP
1015	.$e4b	STA GCSTART
1016	.$e4e	LDA #>STRBUF
1017	.$e50	STA TMP_ZP+1  
1018	.$e52	STA GCSTART+1
1019	.$e55	GCLOOP  LDY #0
1020	.$e57	LDA TMP_ZP
1021	.$e59	STA GCWORK
1022	.$e5c	LDA TMP_ZP+1
1023	.$e5e	STA GCWORK+1  
1024	.$e61	LDA (TMP_ZP),Y
1025	.$e63	STA GCLEN   
1026	.$e66	INC TMP_ZP
1027	.$e68	BNE GCLOOPNOOV
1028	.$e6a	INC TMP_ZP+1
1029	.$e6c	GCLOOPNOOV LDA TMP_ZP
1030	.$e6e	CLC
1031	.$e6f	ADC GCLEN
1032	.$e72	STA TMP_ZP
1033	.$e74	BCC GCLOOPNOOV2
1034	.$e76	INC TMP_ZP+1  
1035	.$e78	GCLOOPNOOV2 LDY #0
1036	.$e7a	LDA (TMP_ZP),Y
1037	.$e7c	STA TMP2_ZP
1038	.$e7e	INY
1039	.$e7f	LDA (TMP_ZP),Y
1040	.$e81	STA TMP2_ZP+1  
1041	.$e83	LDA TMP_ZP
1042	.$e85	CLC
1043	.$e86	ADC #2
1044	.$e88	STA TMP_ZP
1045	.$e8a	BCC GCLOOPNOOV3
1046	.$e8c	INC TMP_ZP+1  
1047	.$e8e	GCLOOPNOOV3 LDY #0
1048	.$e90	LDA (TMP2_ZP),Y
1049	.$e92	CMP GCWORK
1050	.$e95	BNE GCKLOOP
1051	.$e97	INY
1052	.$e98	LDA (TMP2_ZP),Y
1053	.$e9a	CMP GCWORK+1
1054	.$e9d	BEQ MEMFREE
1055	.$e9f	GCKLOOP  LDA TMP_ZP+1  
1056	.$ea1	CMP HIGHP+1
1057	.$ea4	BEQ GCHECKLOW
1058	.$ea6	BCC GCLOOP
1059	.$ea8	JMP GCDONE
1060	.$eab	GCHECKLOW LDA TMP_ZP
1061	.$ead	CMP HIGHP
1062	.$eb0	BCS GCDONE
1063	.$eb2	JMP GCLOOP
1064	.$eb5	MEMFREE  LDA GCSTART   
1065	.$eb8	CMP GCWORK   
1066	.$ebb	BNE COPYDOWN
1067	.$ebd	LDA GCSTART+1
1068	.$ec0	CMP GCWORK+1
1069	.$ec3	BNE COPYDOWN
1070	.$ec5	LDA TMP_ZP   
1071	.$ec7	STA GCSTART
1072	.$eca	LDA TMP_ZP+1
1073	.$ecc	STA GCSTART+1
1074	.$ecf	JMP GCKLOOP   
1075	.$ed2	COPYDOWN LDA GCSTART   
1076	.$ed5	STA TMP_REG
1077	.$ed7	LDA GCSTART+1
1078	.$eda	STA TMP_REG+1  
1079	.$edc	LDA GCWORK
1080	.$edf	STA TMP2_REG
1081	.$ee2	LDA GCWORK+1
1082	.$ee5	STA TMP2_REG+1  
1083	.$ee8	LDA TMP_ZP
1084	.$eea	SEC
1085	.$eeb	SBC GCWORK
1086	.$eee	STA TMP3_REG
1087	.$ef1	LDA TMP_ZP+1
1088	.$ef3	SBC GCWORK+1
1089	.$ef6	STA TMP3_REG+1  
1090	.$ef9	LDA GCSTART
1091	.$efc	CLC
1092	.$efd	ADC TMP3_REG
1093	.$f00	STA GCSTART
1094	.$f03	LDA GCSTART+1
1095	.$f06	ADC TMP3_REG+1
1096	.$f09	STA GCSTART+1  
1097	.$f0c	JSR QUICKCOPY  
1098	.$f0f	LDY #0
1099	.$f11	LDA TMP_REG
1100	.$f13	STA (TMP2_ZP),Y
1101	.$f15	INY
1102	.$f16	LDA TMP_REG+1
1103	.$f18	STA (TMP2_ZP),Y  
1104	.$f1a	JMP GCKLOOP
1105	.$f1d	GCDONE  LDA GCSTART
1106	.$f20	STA HIGHP
1107	.$f23	STA STRBUFP
1108	.$f26	LDA GCSTART+1
1109	.$f29	STA HIGHP+1
1110	.$f2c	STA STRBUFP+1  
1111	.$f2f	GCSKIP  JSR RESTOREPOINTERS
1112	.$f32	RTS     
1115	.$f33	CHECKMEMORY
1116	.$f33	LDA STRBUFP+1  
1117	.$f36	CMP STORE4+1  
1118	.$f39	BCC STILLFITSCM  
1122	.$f3b	BEQ CHECKMEMLOWCM
1123	.$f3d	JMP OUTOFMEMORY  
1124	.$f40	CHECKMEMLOWCM
1125	.$f40	LDA STRBUFP   
1126	.$f43	CMP STORE4
1127	.$f46	BCC STILLFITSCM
1128	.$f48	JMP OUTOFMEMORY  
1129	.$f4b	STILLFITSCM RTS
1132	.$f4c	QUICKCOPY LDA TMP_REG  
1133	.$f4e	STA TMEM+1
1134	.$f51	LDA TMP_REG+1
1135	.$f53	STA TMEM+2
1136	.$f56	LDA TMP2_REG
1137	.$f59	STA SMEM+1
1138	.$f5c	LDA TMP2_REG+1
1139	.$f5f	STA SMEM+2
1140	.$f62	LDY #$0
1141	.$f64	LDX TMP3_REG
1142	.$f67	BNE QCLOOP
1143	.$f69	LDA TMP3_REG+1
1144	.$f6c	BEQ QCEXIT  
1145	.$f6e	QCLOOP
1146	.$f6e	SMEM  LDA $0000,Y
1147	.$f71	TMEM  STA $0000,Y
1148	.$f74	INY
1149	.$f75	BNE YNOOV
1150	.$f77	INC TMEM+2
1151	.$f7a	INC SMEM+2
1152	.$f7d	YNOOV  DEX
1153	.$f7e	BNE QCLOOP
1154	.$f80	LDA TMP3_REG+1
1155	.$f83	BEQ QCEXIT
1156	.$f85	DEC TMP3_REG+1
1157	.$f88	JMP QCLOOP
1158	.$f8b	QCEXIT  RTS
1161	.$f8c	COPYSTRING STA TMP2_ZP
1162	.$f8e	STY TMP2_ZP+1
1163	.$f90	CPY TMP_ZP+1
1164	.$f92	BNE CONTCOPY
1165	.$f94	LDA TMP2_ZP
1166	.$f96	CMP TMP_ZP
1167	.$f98	BNE CONTCOPY
1168	.$f9a	RTS     
1169	.$f9b	CONTCOPY JSR COMPACT   
1170	.$f9e	LDY #0
1171	.$fa0	STY TMP_FLAG
1172	.$fa3	LDA (TMP_ZP),Y
1173	.$fa5	BNE NOTEMPTYSTR
1174	.$fa7	LDA #<EMPTYSTR  
1175	.$fa9	STA TMP_ZP
1176	.$fab	LDA #>EMPTYSTR
1177	.$fad	STA TMP_ZP+1
1178	.$faf	JMP ISCONST
1179	.$fb2	NOTEMPTYSTR TAX     
1180	.$fb3	LDA (TMP2_ZP),Y
1181	.$fb5	STA TMP3_ZP
1182	.$fb7	INY
1183	.$fb8	LDA (TMP2_ZP),Y
1184	.$fba	STA TMP3_ZP+1
1185	.$fbc	DEY
1186	.$fbd	LDA TMP_ZP+1  
1187	.$fbf	CMP #>CONSTANTS_END
1188	.$fc1	BEQ CHECKLOW1
1189	.$fc3	BCS INVAR
1190	.$fc5	JMP CHECKNEXT
1191	.$fc8	CHECKLOW1 LDA TMP_ZP
1192	.$fca	CMP #<CONSTANTS_END
1193	.$fcc	BCS INVAR
1194	.$fce	CHECKNEXT LDA TMP_ZP+1  
1195	.$fd0	CMP #>CONSTANTS
1196	.$fd2	BEQ CHECKLOW3
1197	.$fd4	BCC INVAR
1198	.$fd6	JMP ISCONST
1199	.$fd9	CHECKLOW3 LDA TMP_ZP
1200	.$fdb	CMP #<CONSTANTS
1201	.$fdd	BCC INVAR   
1202	.$fdf	ISCONST  JSR CHECKLASTVAR 
1203	.$fe2	LDA TMP_ZP
1204	.$fe4	STA (TMP2_ZP),Y  
1205	.$fe6	INY
1206	.$fe7	LDA TMP_ZP+1
1207	.$fe9	STA (TMP2_ZP),Y
1208	.$feb	LDA HIGHP   
1209	.$fee	STA STRBUFP
1210	.$ff1	LDA HIGHP+1
1211	.$ff4	STA STRBUFP+1
1212	.$ff7	RTS
1213	.$ff8	INVAR  INY
1214	.$ff9	LDA (TMP2_ZP),Y  
1215	.$ffb	CMP #>CONSTANTS_END
1216	.$ffd	BEQ CHECKLOW2
1217	.$fff	BCS INVAR2
1218	.$1001	JMP PUPDATEPTR
1219	.$1004	CHECKLOW2 DEY
1220	.$1005	LDA (TMP2_ZP),Y
1221	.$1007	CMP #<CONSTANTS_END
1222	.$1009	BCS INVAR2
1223	.$100b	JMP PUPDATEPTR
1224	.$100e	INVAR2  LDY #0   
1225	.$1010	LDA (TMP3_ZP),Y
1226	.$1012	STA TMP_REG
1227	.$1014	TXA
1228	.$1015	CMP TMP_REG  
1229	.$1017	BEQ UPDATEHP2 
1232	.$1019	PUPDATEPTR JSR CHECKLASTVAR
1233	.$101c	LDY #1   
1234	.$101e	STY TMP_FLAG 
1235	.$1021	JMP UPDATEPTR 
1236	.$1024	UPDATEHP2 LDA HIGHP  
1237	.$1027	STA STRBUFP
1238	.$102a	LDA HIGHP+1
1239	.$102d	STA STRBUFP+1
1240	.$1030	JMP STRFITS
1241	.$1033	COPYONLY LDY #0
1242	.$1035	STY TMP_FLAG
1243	.$1038	JMP CHECKMEM
1244	.$103b	ALTCOPY  JMP COPYSTRING2
1245	.$103e	UPDATEPTR LDA TMP_ZP+1 
1246	.$1040	CMP HIGHP+1  
1247	.$1043	BEQ CHECKXT1
1248	.$1045	BCS ALTCOPY
1249	.$1047	JMP CHECKMEM
1250	.$104a	CHECKXT1 LDA TMP_ZP
1251	.$104c	CMP HIGHP
1252	.$104f	BCS ALTCOPY
1253	.$1051	CHECKMEM
1254	.$1051	MEMOK  LDY #0
1255	.$1053	LDA STRBUFP  
1256	.$1056	STA (TMP2_ZP),Y 
1257	.$1058	STA TMP3_ZP
1258	.$105a	LDA STRBUFP+1
1259	.$105d	INY
1260	.$105e	STA (TMP2_ZP),Y
1261	.$1060	STA TMP3_ZP+1
1262	.$1062	TXA
1263	.$1063	CLC
1264	.$1064	ADC STRBUFP
1265	.$1067	PHP
1266	.$1068	CLC
1267	.$1069	ADC #3
1268	.$106b	STA STRBUFP
1269	.$106e	BCC NOCS1
1270	.$1070	INC STRBUFP+1
1271	.$1073	NOCS1  PLP
1272	.$1074	BCC STRFITS
1273	.$1076	INC STRBUFP+1
1274	.$1079	STRFITS  LDY TMP_FLAG 
1275	.$107c	BEQ NOHPUPDATE 
1276	.$107e	LDA HIGHP+1
1277	.$1081	CMP STRBUFP+1
1278	.$1084	BCC UPDATEHIGHP
1279	.$1086	BEQ CHECKNEXTHP
1280	.$1088	JMP NOHPUPDATE
1281	.$108b	CHECKNEXTHP LDA HIGHP
1282	.$108e	CMP STRBUFP
1283	.$1091	BCC UPDATEHIGHP
1284	.$1093	JMP NOHPUPDATE
1285	.$1096	UPDATEHIGHP LDA STRBUFP
1286	.$1099	STA HIGHP
1287	.$109c	LDA STRBUFP+1
1288	.$109f	STA HIGHP+1  
1289	.$10a2	JSR REMEMBERLASTVAR
1290	.$10a5	JSR STOREVARREF
1291	.$10a8	NOHPUPDATE LDY #0
1292	.$10aa	LDA (TMP_ZP),Y 
1293	.$10ac	STA (TMP3_ZP),Y
1294	.$10ae	TAY    
1295	.$10af	BEQ EXITCOPY 
1296	.$10b1	LOOP  LDA (TMP_ZP),Y 
1297	.$10b3	STA (TMP3_ZP),Y
1298	.$10b5	DEY
1299	.$10b6	BNE LOOP
1300	.$10b8	EXITCOPY RTS
1305	.$10b9	COPYSTRING2 LDY #0
1306	.$10bb	LDA (TMP_ZP),Y
1307	.$10bd	STA TMP_REG
1308	.$10bf	TAX
1309	.$10c0	LDA HIGHP
1310	.$10c3	STA TMP3_ZP
1311	.$10c5	STA (TMP2_ZP),Y
1312	.$10c7	LDA HIGHP+1
1313	.$10ca	STA TMP3_ZP+1
1314	.$10cc	INY
1315	.$10cd	STA (TMP2_ZP),Y
1316	.$10cf	JSR REMEMBERLASTVAR
1319	.$10d2	LDA TMP_ZP
1320	.$10d4	CMP TMP3_ZP
1321	.$10d6	BNE DOLOOP
1322	.$10d8	LDA TMP_ZP+1
1323	.$10da	CMP TMP3_ZP+1
1324	.$10dc	BEQ SKIPCP2
1325	.$10de	DOLOOP  DEY
1326	.$10df	TXA
1327	.$10e0	STA (TMP3_ZP),Y
1328	.$10e2	INY
1329	.$10e3	ASLOOP  LDA (TMP_ZP),Y
1330	.$10e5	STA (TMP3_ZP),Y
1331	.$10e7	INY
1332	.$10e8	DEX
1333	.$10e9	BNE ASLOOP
1334	.$10eb	SKIPCP2  LDA HIGHP
1335	.$10ee	CLC
1336	.$10ef	ADC TMP_REG
1337	.$10f1	PHP
1338	.$10f2	CLC
1339	.$10f3	ADC #3
1340	.$10f5	STA HIGHP
1341	.$10f8	STA STRBUFP
1342	.$10fb	BCC SKIPLOWAS1
1343	.$10fd	INC HIGHP+1
1344	.$1100	SKIPLOWAS1 PLP
1345	.$1101	BCC SKIPLOWAS2
1346	.$1103	INC HIGHP+1
1347	.$1106	SKIPLOWAS2 LDA HIGHP+1
1348	.$1109	STA STRBUFP+1
1349	.$110c	JSR STOREVARREF
1350	.$110f	RTS
1354	.$1110	CHECKLASTVAR
1355	.$1110	LDA TMP2_ZP
1356	.$1112	CMP LASTVAR
1357	.$1115	BNE NOTSAMEVAR
1358	.$1117	LDA TMP2_ZP+1
1359	.$1119	CMP LASTVAR+1
1360	.$111c	BNE NOTSAMEVAR
1361	.$111e	LDA LASTVARP   
1362	.$1121	STA HIGHP
1363	.$1124	STA STRBUFP
1364	.$1127	LDA LASTVARP+1
1365	.$112a	STA HIGHP+1
1366	.$112d	STA STRBUFP+1
1367	.$1130	NOTSAMEVAR RTS
1371	.$1131	REMEMBERLASTVAR
1372	.$1131	LDA TMP2_ZP
1373	.$1133	STA LASTVAR
1374	.$1136	LDA TMP2_ZP+1
1375	.$1138	STA LASTVAR+1
1376	.$113b	LDA TMP3_ZP
1377	.$113d	STA LASTVARP
1378	.$1140	LDA TMP3_ZP+1
1379	.$1142	STA LASTVARP+1 
1380	.$1145	RTS
1385	.$1146	STOREVARREF
1386	.$1146	TYA
1387	.$1147	PHA    
1388	.$1148	LDA TMP_ZP
1389	.$114a	PHA
1390	.$114b	LDA TMP_ZP+1
1391	.$114d	PHA
1392	.$114e	LDA HIGHP+1
1393	.$1151	STA TMP_ZP+1
1394	.$1153	LDA HIGHP
1395	.$1156	SEC
1396	.$1157	SBC #2
1397	.$1159	STA TMP_ZP
1398	.$115b	BCS RLVNOOV
1399	.$115d	DEC TMP_ZP+1
1400	.$115f	RLVNOOV  LDA TMP2_ZP
1401	.$1161	LDY #0
1402	.$1163	STA (TMP_ZP),Y
1403	.$1165	LDA TMP2_ZP+1
1404	.$1167	INY
1405	.$1168	STA (TMP_ZP),Y 
1406	.$116a	PLA
1407	.$116b	STA TMP_ZP+1
1408	.$116d	PLA
1409	.$116e	STA TMP_ZP  
1410	.$1170	PLA
1411	.$1171	TAY    
1412	.$1172	RTS
1415	.$1173	REROUTE  LDA CMD_NUM  
1416	.$1176	BEQ REROUTECMD
1417	.$1178	TAX
1418	.$1179	STA CHANNEL
1419	.$117c	JMP CHKOUT
1420	.$117f	REROUTECMD RTS
1423	.$1180	RESETROUTE LDA CMD_NUM  
1424	.$1183	BEQ RESETROUTECMD
1425	.$1185	JMP CLRCHNEW
1426	.$1188	RESETROUTECMD
1427	.$1188	RTS
1430	.$1189	STROUTWL STA A_REG
1431	.$118c	STY A_REG+1
1432	.$118f	STROUT  JSR REROUTE
1433	.$1192	LDA A_REG
1434	.$1195	STA INDEX1
1435	.$1197	LDA A_REG+1
1436	.$119a	STA INDEX1+1
1437	.$119c	LDY #0
1438	.$119e	LDA (INDEX1),Y
1439	.$11a0	TAX
1440	.$11a1	INC INDEX1
1441	.$11a3	BNE PRINTSTR
1442	.$11a5	INC INDEX1+1
1443	.$11a7	PRINTSTR JSR PRINTSTRS
1444	.$11aa	LDA HIGHP   
1445	.$11ad	STA STRBUFP
1446	.$11b0	LDA HIGHP+1
1447	.$11b3	STA STRBUFP+1
1448	.$11b6	JSR RESETROUTE
1449	.$11b9	RTS
1452	.$11ba	STROUTBRKWL STA A_REG
1453	.$11bd	STY A_REG+1
1454	.$11c0	STROUTBRK JSR REROUTE
1455	.$11c3	LDA A_REG
1456	.$11c6	STA INDEX1
1457	.$11c8	LDA A_REG+1
1458	.$11cb	STA INDEX1+1
1459	.$11cd	LDY #0
1460	.$11cf	LDA (INDEX1),Y
1461	.$11d1	TAX
1462	.$11d2	INC INDEX1
1463	.$11d4	BNE PRINTSTR2
1464	.$11d6	INC INDEX1+1
1465	.$11d8	PRINTSTR2 JSR PRINTSTRS
1466	.$11db	LDA HIGHP   
1467	.$11de	STA STRBUFP
1468	.$11e1	LDA HIGHP+1
1469	.$11e4	STA STRBUFP+1
1470	.$11e7	LDA #$0D
1471	.$11e9	JSR CHROUT
1472	.$11ec	JMP RESETROUTE  
1475	.$11ef	ADJUSTSTACK LDA FORSTACKP 
1476	.$11f2	STA TMP_ZP
1477	.$11f4	LDA FORSTACKP+1
1478	.$11f7	STA TMP_ZP+1
1479	.$11f9	ADSEARCHFOR LDA TMP_ZP
1480	.$11fb	CMP #<FORSTACK
1481	.$11fd	BNE ADJUST2
1482	.$11ff	LDA TMP_ZP+1
1483	.$1201	CMP #>FORSTACK
1484	.$1203	BNE ADJUST2
1485	.$1205	RTS    
1486	.$1206	ADJUST2  LDA TMP_ZP
1487	.$1208	SEC
1488	.$1209	SBC #2
1489	.$120b	STA TMP_ZP
1490	.$120d	BCS ADNOPV1N1
1491	.$120f	DEC TMP_ZP+1
1492	.$1211	ADNOPV1N1 LDY #0
1493	.$1213	LDA (TMP_ZP),Y
1494	.$1215	BNE ADNOGOSUB
1495	.$1217	RTS    
1496	.$1218	ADNOGOSUB
1497	.$1218	INY
1498	.$1219	LDA TMP_ZP
1499	.$121b	SEC
1500	.$121c	SBC (TMP_ZP),Y
1501	.$121e	STA TMP_ZP
1502	.$1220	BCS ADNOPV1N2
1503	.$1222	DEC TMP_ZP+1
1504	.$1224	ADNOPV1N2 DEY
1505	.$1225	LDA A_REG
1506	.$1228	ADCMPFOR CMP (TMP_ZP),Y
1507	.$122a	BNE ADSEARCHFOR
1508	.$122c	LDA A_REG+1
1509	.$122f	INY
1510	.$1230	CMP (TMP_ZP),Y
1511	.$1232	BEQ ADFOUNDFOR
1512	.$1234	JMP ADSEARCHFOR
1513	.$1237	ADLOW0  LDX A_REG+1
1514	.$123a	BEQ ADFOUNDFOR
1515	.$123c	BNE ADCMPFOR
1516	.$123e	ADFOUNDFOR LDA TMP_ZP  
1517	.$1240	STA FORSTACKP
1518	.$1243	LDA TMP_ZP+1
1519	.$1245	STA FORSTACKP+1
1520	.$1248	RTS
1523	.$1249	INITFOR  JSR ADJUSTSTACK
1524	.$124c	LDA FORSTACKP
1525	.$124f	STA TMP_ZP
1526	.$1251	LDA FORSTACKP+1
1527	.$1254	STA TMP_ZP+1
1528	.$1256	LDY #0
1529	.$1258	LDA A_REG
1530	.$125b	STA (TMP_ZP),Y
1531	.$125d	INY
1532	.$125e	LDA A_REG+1
1533	.$1261	STA (TMP_ZP),Y
1534	.$1263	INY
1535	.$1264	LDA JUMP_TARGET
1536	.$1266	STA (TMP_ZP),Y
1537	.$1268	INY
1538	.$1269	LDA JUMP_TARGET+1
1539	.$126b	STA (TMP_ZP),Y
1540	.$126d	INY
1541	.$126e	STY TMP3_ZP
1542	.$1270	JSR INCTMPZP
1543	.$1273	JSR POPREAL
1544	.$1276	LDX TMP_ZP
1545	.$1278	LDY TMP_ZP+1
1547	.$127a	JSR FACMEM
1548	.$127d	JSR SGNFAC
1549	.$1280	STA TMP_FLAG
1550	.$1283	LDY #5
1551	.$1285	STY TMP3_ZP
1552	.$1287	JSR INCTMPZP
1553	.$128a	JSR POPREAL
1554	.$128d	LDX TMP_ZP
1555	.$128f	LDY TMP_ZP+1
1557	.$1291	JSR FACMEM
1558	.$1294	LDY #5
1559	.$1296	STY TMP3_ZP
1560	.$1298	JSR INCTMPZP
1561	.$129b	LDY #0
1562	.$129d	LDA TMP_FLAG
1563	.$12a0	STA (TMP_ZP),Y
1564	.$12a2	INY
1565	.$12a3	LDA #1
1566	.$12a5	STA (TMP_ZP),Y
1567	.$12a7	INY
1568	.$12a8	LDA #15
1569	.$12aa	STA (TMP_ZP),Y
1570	.$12ac	LDY #3
1571	.$12ae	STY TMP3_ZP
1572	.$12b0	JSR INCTMPZP
1573	.$12b3	LDA TMP_ZP
1574	.$12b5	STA FORSTACKP
1575	.$12b8	LDA TMP_ZP+1
1576	.$12ba	STA FORSTACKP+1
1577	.$12bd	RTS
1580	.$12be	NEXT  LDA FORSTACKP
1581	.$12c1	STA TMP_ZP
1582	.$12c3	LDA FORSTACKP+1
1583	.$12c6	STA TMP_ZP+1
1584	.$12c8	SEARCHFOR LDA TMP_ZP+1
1585	.$12ca	STA TMP3_REG+1
1586	.$12cd	LDA TMP_ZP
1587	.$12cf	STA TMP3_REG
1588	.$12d2	SEC
1589	.$12d3	SBC #2
1590	.$12d5	STA TMP_ZP
1591	.$12d7	BCS NOPV1N1
1592	.$12d9	DEC TMP_ZP+1
1593	.$12db	NOPV1N1  LDY #0
1594	.$12dd	LDA (TMP_ZP),Y
1595	.$12df	BNE NOGOSUB
1596	.$12e1	JMP NEXTWOFOR
1597	.$12e4	NOGOSUB
1598	.$12e4	INY
1599	.$12e5	LDA TMP_ZP
1600	.$12e7	SEC
1601	.$12e8	SBC (TMP_ZP),Y
1602	.$12ea	STA TMP_ZP
1603	.$12ec	BCS NOPV1N2
1604	.$12ee	DEC TMP_ZP+1
1605	.$12f0	NOPV1N2  DEY
1606	.$12f1	LDA A_REG
1607	.$12f4	BEQ LOW0
1608	.$12f6	CMPFOR  CMP (TMP_ZP),Y
1609	.$12f8	BNE SEARCHFOR
1610	.$12fa	LDA A_REG+1
1611	.$12fd	INY
1612	.$12fe	CMP (TMP_ZP),Y
1613	.$1300	BEQ FOUNDFOR
1614	.$1302	JMP SEARCHFOR
1615	.$1305	LOW0  LDX A_REG+1
1616	.$1308	BEQ FOUNDFOR
1617	.$130a	BNE CMPFOR
1618	.$130c	FOUNDFOR LDA TMP_ZP
1619	.$130e	STA TMP2_REG
1620	.$1311	LDA TMP_ZP+1
1621	.$1313	STA TMP2_REG+1
1622	.$1316	VARREAL
1623	.$1316	LDY #0
1624	.$1318	STY A_REG+1 
1625	.$131b	LDA (TMP_ZP),Y
1626	.$131d	TAX
1627	.$131e	INY
1628	.$131f	LDA (TMP_ZP),Y
1629	.$1321	TAY
1630	.$1322	TXA
1631	.$1323	JSR REALFAC
1632	.$1326	CALCNEXT LDA TMP_ZP
1633	.$1328	CLC
1634	.$1329	ADC #4
1635	.$132b	STA TMP_ZP
1636	.$132d	BCC NOPV2IN
1637	.$132f	INC TMP_ZP+1
1638	.$1331	NOPV2IN  STA TMP_REG
1639	.$1333	LDY TMP_ZP+1
1640	.$1335	STY TMP_REG+1
1641	.$1337	JSR FASTFADDMEM
1643	.$133a	LDA TMP2_REG
1644	.$133d	STA TMP_ZP
1645	.$133f	LDA TMP2_REG+1
1646	.$1342	STA TMP_ZP+1
1647	.$1344	STOREREAL
1648	.$1344	LDY #0
1649	.$1346	LDA (TMP_ZP),Y
1650	.$1348	TAX
1651	.$1349	INY
1652	.$134a	LDA (TMP_ZP),Y
1653	.$134c	TAY
1654	.$134d	JSR FACMEM 
1655	.$1350	CMPFORXX LDA #5
1656	.$1352	STA TMP3_ZP
1657	.$1354	LDA TMP_REG
1658	.$1356	CLC
1659	.$1357	ADC #5
1660	.$1359	STA TMP_REG
1661	.$135b	BCC NOPV3
1662	.$135d	INC TMP_REG+1
1663	.$135f	NOPV3  LDY TMP_REG+1
1664	.$1361	JSR CMPFAC  
1665	.$1364	BEQ LOOPING
1666	.$1366	PHA
1667	.$1367	LDY #14
1668	.$1369	LDA (TMP_ZP),Y
1669	.$136b	BEQ STEPZERO
1670	.$136d	ROL
1671	.$136e	BCC STEPPOS
1672	.$1370	STEPNEG  PLA
1673	.$1371	ROL
1674	.$1372	BCC LOOPING
1675	.$1374	BCS EXITLOOP
1676	.$1376	STEPPOS  PLA
1677	.$1377	ROL
1678	.$1378	BCC EXITLOOP
1679	.$137a	LOOPING  LDA TMP3_REG
1680	.$137d	STA FORSTACKP
1681	.$1380	LDA TMP3_REG+1
1682	.$1383	STA FORSTACKP+1
1683	.$1386	LDA TMP2_REG
1684	.$1389	CLC
1685	.$138a	ADC #2
1686	.$138c	STA TMP2_REG
1687	.$138f	BCC NOPV4IN
1688	.$1391	INC TMP2_REG+1
1689	.$1394	NOPV4IN  LDY #0
1690	.$1396	STY A_REG
1691	.$1399	STA TMP_ZP
1692	.$139b	LDA TMP2_REG+1
1693	.$139e	STA TMP_ZP+1
1694	.$13a0	LDA (TMP_ZP),Y
1695	.$13a2	STA JUMP_TARGET
1696	.$13a4	INY
1697	.$13a5	LDA (TMP_ZP),Y
1698	.$13a7	STA JUMP_TARGET+1
1699	.$13a9	RTS
1700	.$13aa	STEPZERO PLA
1701	.$13ab	JMP LOOPING
1702	.$13ae	EXITLOOP LDA TMP2_REG
1703	.$13b1	STA FORSTACKP
1704	.$13b4	LDA TMP2_REG+1
1705	.$13b7	STA FORSTACKP+1
1706	.$13ba	LDA #1
1707	.$13bc	STA A_REG
1708	.$13bf	RTS
1711	.$13c0	ZEROSET  LDA #0
1712	.$13c2	STA X_REG
1713	.$13c4	STA X_REG+1
1714	.$13c6	STA X_REG+2
1715	.$13c8	STA X_REG+3
1716	.$13ca	STA X_REG+4
1717	.$13cc	RTS
1720	.$13cd	PUSHINT  LDX FPSTACKP
1721	.$13d0	STX TMP2_ZP
1722	.$13d2	LDX FPSTACKP+1
1723	.$13d5	STX TMP2_ZP+1
1724	.$13d7	LDA TMP_ZP
1725	.$13d9	LDY #0
1726	.$13db	STA (TMP2_ZP),Y
1727	.$13dd	LDA TMP_ZP+1
1728	.$13df	INY
1729	.$13e0	STA (TMP2_ZP),Y
1730	.$13e2	LDA TMP2_ZP
1731	.$13e4	CLC
1732	.$13e5	ADC #2
1733	.$13e7	STA FPSTACKP
1734	.$13ea	LDA TMP2_ZP+1
1735	.$13ec	ADC #0
1736	.$13ee	STA FPSTACKP+1
1737	.$13f1	RTS
1740	.$13f2	POPINT2B LDA FPSTACKP
1741	.$13f5	SEC
1742	.$13f6	SBC #2
1743	.$13f8	STA FPSTACKP
1744	.$13fb	LDA FPSTACKP+1
1745	.$13fe	SBC #0
1746	.$1400	STA FPSTACKP+1
1747	.$1403	LDX FPSTACKP
1748	.$1406	STX TMP2_ZP
1749	.$1408	LDX FPSTACKP+1
1750	.$140b	STX TMP2_ZP+1
1751	.$140d	LDY #0
1752	.$140f	LDA (TMP2_ZP),Y
1753	.$1411	STA B_REG
1754	.$1414	INY
1755	.$1415	LDA (TMP2_ZP),Y
1756	.$1417	STA B_REG+1
1757	.$141a	RTS
1760	.$141b	REALFACPUSH STA TMP_ZP
1761	.$141d	STY TMP_ZP+1
1762	.$141f	LDX FPSTACKP
1763	.$1422	LDY FPSTACKP+1
1764	.$1425	STX TMP2_ZP
1765	.$1427	STY TMP2_ZP+1
1766	.$1429	LDY #0
1767	.$142b	LDA (TMP_ZP),Y
1768	.$142d	STA (TMP2_ZP),Y
1769	.$142f	INY
1770	.$1430	LDA (TMP_ZP),Y
1771	.$1432	STA (TMP2_ZP),Y
1772	.$1434	INY
1773	.$1435	LDA (TMP_ZP),Y
1774	.$1437	STA (TMP2_ZP),Y
1775	.$1439	INY
1776	.$143a	LDA (TMP_ZP),Y
1777	.$143c	STA (TMP2_ZP),Y
1778	.$143e	INY
1779	.$143f	LDA (TMP_ZP),Y
1780	.$1441	STA (TMP2_ZP),Y
1781	.$1443	TXA    
1782	.$1444	CLC
1783	.$1445	ADC #5
1784	.$1447	STA FPSTACKP
1785	.$144a	BCC NOPVRFPXX
1786	.$144c	INC FPSTACKP+1
1787	.$144f	NOPVRFPXX RTS
1790	.$1450	POPREAL  LDA FPSTACKP
1791	.$1453	SEC
1792	.$1454	SBC #5
1793	.$1456	STA FPSTACKP
1794	.$1459	BCS NOPVPR
1795	.$145b	DEC FPSTACKP+1
1796	.$145e	NOPVPR  LDA FPSTACKP
1797	.$1461	LDY FPSTACKP+1
1798	.$1464	JMP REALFAC
1801	.$1467	INCTMPZP LDA TMP_ZP
1802	.$1469	CLC
1803	.$146a	ADC TMP3_ZP
1804	.$146c	STA TMP_ZP
1805	.$146e	BCC NOPV2
1806	.$1470	INC TMP_ZP+1
1807	.$1472	NOPV2  RTS
1810	.$1473	COPY2_XYA STA TMP3_ZP
1811	.$1475	COPY2_XY STX TMP_ZP
1812	.$1477	STY TMP_ZP+1
1813	.$1479	COPY3_XY LDY #0
1814	.$147b	LDA (TMP3_ZP),Y
1815	.$147d	STA (TMP_ZP),Y
1816	.$147f	INY
1817	.$1480	LDA (TMP3_ZP),Y
1818	.$1482	STA (TMP_ZP),Y
1819	.$1484	INY
1820	.$1485	LDA (TMP3_ZP),Y
1821	.$1487	STA (TMP_ZP),Y
1822	.$1489	INY
1823	.$148a	LDA (TMP3_ZP),Y
1824	.$148c	STA (TMP_ZP),Y
1825	.$148e	INY
1826	.$148f	LDA (TMP3_ZP),Y
1827	.$1491	STA (TMP_ZP),Y
1828	.$1493	RTS
1831	.$1494	COPY2_XYA_XREG
1832	.$1494	STA TMP3_ZP
1833	.$1496	STY TMP3_ZP+1
1834	.$1498	COPY2_XY_XREG
1835	.$1498	LDX #<X_REG  
1836	.$149a	LDY #0
1837	.$149c	LDA (TMP3_ZP),Y
1838	.$149e	STA X_REG
1839	.$14a0	INY
1840	.$14a1	LDA (TMP3_ZP),Y
1841	.$14a3	STA X_REG+1
1842	.$14a5	INY
1843	.$14a6	LDA (TMP3_ZP),Y
1844	.$14a8	STA X_REG+2
1845	.$14aa	INY
1846	.$14ab	LDA (TMP3_ZP),Y
1847	.$14ad	STA X_REG+3
1848	.$14af	INY
1849	.$14b0	LDA (TMP3_ZP),Y
1850	.$14b2	STA X_REG+4
1851	.$14b4	RTS
1854	.$14b5	COPY2_XYA_CREG
1855	.$14b5	STA TMP3_ZP
1856	.$14b7	STY TMP3_ZP+1
1857	.$14b9	COPY2_XY_CREG
1858	.$14b9	LDX #<C_REG  
1859	.$14bb	LDY #0
1860	.$14bd	LDA (TMP3_ZP),Y
1861	.$14bf	STA C_REG
1862	.$14c2	INY
1863	.$14c3	LDA (TMP3_ZP),Y
1864	.$14c5	STA C_REG+1
1865	.$14c8	INY
1866	.$14c9	LDA (TMP3_ZP),Y
1867	.$14cb	STA C_REG+2
1868	.$14ce	INY
1869	.$14cf	LDA (TMP3_ZP),Y
1870	.$14d1	STA C_REG+3
1871	.$14d4	INY
1872	.$14d5	LDA (TMP3_ZP),Y
1873	.$14d7	STA C_REG+4
1874	.$14da	RTS
1877	.$14db	COPY2_XYA_YREG
1878	.$14db	STA TMP3_ZP
1879	.$14dd	STY TMP3_ZP+1
1880	.$14df	COPY2_XY_YREG
1881	.$14df	LDX #<Y_REG  
1882	.$14e1	LDY #0
1883	.$14e3	LDA (TMP3_ZP),Y
1884	.$14e5	STA Y_REG
1885	.$14e8	INY
1886	.$14e9	LDA (TMP3_ZP),Y
1887	.$14eb	STA Y_REG+1
1888	.$14ee	INY
1889	.$14ef	LDA (TMP3_ZP),Y
1890	.$14f1	STA Y_REG+2
1891	.$14f4	INY
1892	.$14f5	LDA (TMP3_ZP),Y
1893	.$14f7	STA Y_REG+3
1894	.$14fa	INY
1895	.$14fb	LDA (TMP3_ZP),Y
1896	.$14fd	STA Y_REG+4
1897	.$1500	RTS
1900	.$1501	COPY_XREG2YREG
1901	.$1501	LDA X_REG
1902	.$1503	STA Y_REG
1903	.$1506	LDA X_REG+1
1904	.$1508	STA Y_REG+1
1905	.$150b	LDA X_REG+2
1906	.$150d	STA Y_REG+2
1907	.$1510	LDA X_REG+3
1908	.$1512	STA Y_REG+3
1909	.$1515	LDA X_REG+4
1910	.$1517	STA Y_REG+4
1911	.$151a	RTS
1914	.$151b	PEEKBYTEADDANDFAST
1915	.$151b	JSR PEEKBYTEADDSUB
1916	.$151e	TYA
1917	.$151f	AND B_REG
1918	.$1522	STA A_REG
1919	.$1525	RTS
1922	.$1526	PEEKBYTEADDSUB
1923	.$1526	JSR PEEKBYTESUB
1924	.$1529	TYA
1925	.$152a	CLC
1926	.$152b	ADC A_REG
1927	.$152e	BCC PBNOOV
1928	.$1530	INX
1929	.$1531	PBNOOV  TAY
1930	.$1532	TXA
1931	.$1533	RTS
1934	.$1534	PEEKBYTESUB
1935	.$1534	JSR YREGFAC
1936	.$1537	JSR FACWORD
1937	.$153a	PEEKBYTESUBINT
1938	.$153a	STY PEEKBYTE+1
1939	.$153d	STA PEEKBYTE+2
1940	.$1540	PEEKBYTE
1941	.$1540	LDY $FFFF
1942	.$1543	LDX #0
1943	.$1545	RTS
1947	.$1546	FACWORD
1948	.$1546	LDA FACEXP   
1949	.$1548	BNE DOFACWORD
1950	.$154a	STA FACSGN   
1951	.$154c	DOFACWORD:
1952	.$154c	JMP XFACWORD
1956	.$154f	ONETOFAC    LDX #129
1957	.$1551	STX FAC
1958	.$1553	DEX
1959	.$1554	STX FAC+1
1960	.$1556	LDX #0
1961	.$1558	STX FAC+2
1962	.$155a	STX FAC+3
1963	.$155c	STX FAC+4
1964	.$155e	STX FAC+5
1965	.$1560	STX FAC+15
1966	.$1562	RTS
1969	.$1563	CLRCHNEW
1970	.$1563	LDA CHLOCKFLAG
1971	.$1566	BNE SKIPCLRCH
1972	.$1568	JMP CLRCH
1973	.$156b	SKIPCLRCH
1974	.$156b	RTS
1977	.$156c	NEXTWOFOR
1981	.$156c	LDX #$0A
1982	.$156e	JMP ERRALL
1985	.$1571	OUTOFMEMORY
1989	.$1571	LDX #$10
1990	.$1573	JMP ERRALL
1993	.$1576	STRINGTOOLONG
1997	.$1576	LDX #$17
1998	.$1578	JMP ERRALL
2001	.$157b	ILLEGALQUANTITY
2005	.$157b	JMP ERRIQ
2008	.$157e	FACXREG  LDA FACLO
2009	.$1580	STA X_REG+4
2010	.$1582	LDA FACMO
2011	.$1584	STA X_REG+3
2012	.$1586	LDA FACMOH
2013	.$1588	STA X_REG+2
2014	.$158a	LDA FACSGN
2015	.$158c	ORA #$7F
2016	.$158e	AND FACHO
2017	.$1590	STA X_REG+1
2018	.$1592	LDA FACEXP
2019	.$1594	STA X_REG
2020	.$1596	LDA #0   
2021	.$1598	STA FACOV
2022	.$159a	RTS
2025	.$159b	XREGFAC  LDA X_REG+4
2026	.$159d	STA FACLO
2027	.$159f	LDA X_REG+3
2028	.$15a1	STA FACMO
2029	.$15a3	LDA X_REG+2
2030	.$15a5	STA FACMOH
2031	.$15a7	LDA X_REG+1
2032	.$15a9	STA FACSGN
2033	.$15ab	ORA #$80
2034	.$15ad	STA FACHO
2035	.$15af	LDA X_REG
2036	.$15b1	STA FACEXP
2037	.$15b3	LDA #0
2038	.$15b5	STA FACOV
2039	.$15b7	RTS
2042	.$15b8	YREGFAC  LDA Y_REG+4
2043	.$15bb	STA FACLO
2044	.$15bd	LDA Y_REG+3
2045	.$15c0	STA FACMO
2046	.$15c2	LDA Y_REG+2
2047	.$15c5	STA FACMOH
2048	.$15c7	LDA Y_REG+1
2049	.$15ca	STA FACSGN
2050	.$15cc	ORA #$80
2051	.$15ce	STA FACHO
2052	.$15d0	LDA Y_REG
2053	.$15d3	STA FACEXP
2054	.$15d5	LDA #0
2055	.$15d7	STA FACOV
2056	.$15d9	RTS
2170	.$15da	FASTFSUBMEM
2171	.$15da	JSR MEMARG
2172	.$15dd	FASTFSUBARG
2173	.$15dd	LDA FACSGN
2174	.$15df	EOR #$FF
2175	.$15e1	STA FACSGN
2176	.$15e3	EOR ARGSGN
2177	.$15e5	STA ARISGN
2178	.$15e7	LDA FACEXP
2179	.$15e9	JMP FASTFADDARG
2182	.$15ec	FASTFADDMEM
2183	.$15ec	JSR MEMARG
2184	.$15ef	FASTFADDARG
2185	.$15ef	BNE FADDRET2     
2186	.$15f1	JMP ARGFAC
2187	.$15f4	FADDRET2 LDA ARGEXP
2188	.$15f6	BNE FADDRET1     
2189	.$15f8	RTS
2190	.$15f9	FADDRET1 SEC
2191	.$15fa	SBC FACEXP
2192	.$15fc	BEQ FFADD_EXPEQ     
2193	.$15fe	BCC FFADD_SHFARG1   
2197	.$1600	LDY ARGEXP
2198	.$1602	STY FACEXP
2199	.$1604	LDY ARGSGN
2200	.$1606	STY FACSGN
2201	.$1608	LDX #0
2202	.$160a	STX OLDOV        
2203	.$160c	LDX #FAC         
2205	.$160e	SEC
2206	.$160f	SBC #$08
2207	.$1611	BMI FFADD_SHFFAC2
2209	.$1613	FFADD_SHFFAC1
2210	.$1613	LDY FACLO        
2211	.$1615	STY FACOV
2212	.$1617	LDY FACMO        
2213	.$1619	STY FACMO+1
2214	.$161b	LDY FACMOH       
2215	.$161d	STY FACMOH+1
2216	.$161f	LDY FACHO        
2217	.$1621	STY FACHO+1
2218	.$1623	LDY #0
2219	.$1625	STY FACHO        
2220	.$1627	SBC #$08         
2221	.$1629	BPL FFADD_SHFFAC1   
2222	.$162b	FFADD_SHFFAC2
2223	.$162b	ADC #$08         
2224	.$162d	BEQ FFADD_SHFFAC4   
2225	.$162f	TAY
2226	.$1630	LDA FACOV
2227	.$1632	FFADD_SHFFAC3
2228	.$1632	LSR FACHO        
2229	.$1634	ROR FACMOH       
2230	.$1636	ROR FACMO        
2231	.$1638	ROR FACLO        
2232	.$163a	ROR              
2233	.$163b	DEY
2234	.$163c	BNE FFADD_SHFFAC3
2235	.$163e	JMP FFADD_MANADD2   
2236	.$1641	FFADD_SHFFAC4
2237	.$1641	LDA FACOV        
2238	.$1643	JMP FFADD_MANADD2
2239	.$1646	FFADD_EXPEQ
2240	.$1646	LDX FACOV
2241	.$1648	STX OLDOV
2244	.$164a	JMP FFADD_MANADD1
2245	.$164d	FFADD_SHFARG2
2246	.$164d	LDA FACOV        
2247	.$164f	JMP FFADD_MANADD1
2248	.$1652	FFADD_SHFARG1
2249	.$1652	LDX FACOV
2250	.$1654	STX OLDOV        
2251	.$1656	LDX #$00         
2254	.$1658	ADC #$08
2255	.$165a	BPL FFADD_SHFARG6   
2256	.$165c	FFADD_SHFARG3
2257	.$165c	LDX ARGLO        
2258	.$165e	LDY ARGMO        
2259	.$1660	STY ARGMO+1
2260	.$1662	LDY ARGMOH       
2261	.$1664	STY ARGMOH+1
2262	.$1666	LDY ARGHO        
2263	.$1668	STY ARGHO+1
2264	.$166a	LDY #0
2265	.$166c	STY ARGHO        
2266	.$166e	FFADD_SHFARG4
2267	.$166e	ADC #$08
2268	.$1670	BMI FFADD_SHFARG3
2269	.$1672	BEQ FFADD_SHFARG3
2270	.$1674	FFADD_SHFARG6
2271	.$1674	SBC #$08
2272	.$1676	BEQ FFADD_SHFARG2   
2273	.$1678	TAY
2274	.$1679	TXA              
2275	.$167a	FFADD_SHFARG5
2276	.$167a	LSR ARGHO
2277	.$167c	ROR ARGMOH
2278	.$167e	ROR ARGMO
2279	.$1680	ROR ARGLO
2280	.$1682	ROR           
2281	.$1683	INY
2282	.$1684	BNE FFADD_SHFARG5
2283	.$1686	FFADD_MANADD1
2284	.$1686	LDX #ARGEXP      
2285	.$1688	FFADD_MANADD2
2286	.$1688	BIT ARISGN
2287	.$168a	BMI FFADD_MANSUB1   
2288	.$168c	CLC
2289	.$168d	ADC OLDOV
2290	.$168f	STA FACOV
2291	.$1691	LDA FACLO
2292	.$1693	ADC ARGLO
2293	.$1695	STA FACLO
2294	.$1697	LDA FACMO
2295	.$1699	ADC ARGMO
2296	.$169b	STA FACMO
2297	.$169d	LDA FACMOH
2298	.$169f	ADC ARGMOH
2299	.$16a1	STA FACMOH
2300	.$16a3	LDA FACHO
2301	.$16a5	ADC ARGHO
2302	.$16a7	STA FACHO
2303	.$16a9	BCC FFADD_RNDRTS
2304	.$16ab	INC FACEXP
2305	.$16ad	BEQ FFADD_OVERR
2307	.$16af	ROR FACHO
2308	.$16b1	ROR FACMOH
2309	.$16b3	ROR FACMO
2310	.$16b5	ROR FACLO
2311	.$16b7	ROR FACOV
2312	.$16b9	FFADD_RNDRTS
2313	.$16b9	RTS
2314	.$16ba	FFADD_OVERR
2315	.$16ba	JMP ILLEGALQUANTITY
2316	.$16bd	FFADD_MANSUB1
2317	.$16bd	LDY #FACEXP
2318	.$16bf	CPX #ARGEXP
2319	.$16c1	BEQ FFADD_MANSUB2
2320	.$16c3	LDY #ARGEXP
2321	.$16c5	FFADD_MANSUB2
2322	.$16c5	SEC              
2323	.$16c6	EOR #$FF
2324	.$16c8	ADC OLDOV
2325	.$16ca	STA FACOV
2326	.$16cc	LDA 4,Y
2327	.$16cf	SBC 4,X
2328	.$16d1	STA FACLO
2329	.$16d3	LDA 3,Y
2330	.$16d6	SBC 3,X
2331	.$16d8	STA FACMO
2332	.$16da	LDA 2,Y
2333	.$16dd	SBC 2,X
2334	.$16df	STA FACMOH
2335	.$16e1	LDA 1,Y
2336	.$16e4	SBC 1,X
2337	.$16e6	STA FACHO
2338	.$16e8	BCS FCNORMAL
2339	.$16ea	LDA FACSGN
2340	.$16ec	EOR #$FF
2341	.$16ee	STA FACSGN
2342	.$16f0	LDA FACHO
2343	.$16f2	EOR #$FF
2344	.$16f4	STA FACHO
2345	.$16f6	LDA FACMOH
2346	.$16f8	EOR #$FF
2347	.$16fa	STA FACMOH
2348	.$16fc	LDA FACMO
2349	.$16fe	EOR #$FF
2350	.$1700	STA FACMO
2351	.$1702	LDA FACLO
2352	.$1704	EOR #$FF
2353	.$1706	STA FACLO
2354	.$1708	LDA FACOV
2355	.$170a	EOR #$FF
2356	.$170c	CLC
2357	.$170d	ADC #1
2358	.$170f	STA FACOV
2359	.$1711	BNE FCNORMAL
2360	.$1713	INC FACLO
2361	.$1715	BNE FCNORMAL
2362	.$1717	INC FACMO
2363	.$1719	BNE FCNORMAL
2364	.$171b	INC FACMOH
2365	.$171d	BNE FCNORMAL
2366	.$171f	INC FACHO
2367	.$1721	FCNORMAL   BIT FACHO
2368	.$1723	BMI FFADD_RET       
2369	.$1725	LDA #0           
2370	.$1727	CLC
2371	.$1728	FFADD_NORM3
2372	.$1728	LDX FACHO
2373	.$172a	BNE FFADD_NORM1
2374	.$172c	LDX FACHO+1
2375	.$172e	STX FACHO
2376	.$1730	LDX FACMOH+1
2377	.$1732	STX FACMOH
2378	.$1734	LDX FACMO+1
2379	.$1736	STX FACMO
2380	.$1738	LDX FACOV
2381	.$173a	STX FACLO
2382	.$173c	LDX #0
2383	.$173e	STX FACOV
2384	.$1740	ADC #$08
2385	.$1742	CMP #$20
2386	.$1744	BNE FFADD_NORM3
2387	.$1746	JMP FFADD_ZEROFAC
2388	.$1749	FFADD_NORM2
2389	.$1749	CLC
2390	.$174a	ADC #1
2391	.$174c	ASL FACOV
2392	.$174e	ROL FACLO
2393	.$1750	ROL FACMO
2394	.$1752	ROL FACMOH
2395	.$1754	ROL FACHO
2396	.$1756	FFADD_NORM1
2397	.$1756	BPL FFADD_NORM2     
2398	.$1758	SEC
2399	.$1759	SBC FACEXP
2400	.$175b	BCS FFADD_ZEROFAC
2401	.$175d	EOR #$FF
2402	.$175f	CLC
2403	.$1760	ADC #1
2404	.$1762	STA FACEXP
2405	.$1764	FFADD_RET   RTS
2406	.$1765	FFADD_ZEROFAC
2407	.$1765	LDX #0
2408	.$1767	STX FACEXP
2409	.$1769	STX FACSGN
2410	.$176b	RTS
2413	.$176c	INITVARS
2414	.$176c	JSR INITSTRVARS
2415	.$176f	LDA #0
2416	.$1771	LDY #4
2417	.$1773	REALINITLOOP0:
2418	.$1773	STA VAR_J,Y
2419	.$1776	STA VAR_I,Y
2420	.$1779	STA VAR_TI,Y
2421	.$177c	STA VAR_T,Y
2422	.$177f	DEY
2423	.$1780	BMI REALLOOPEXIT0
2424	.$1782	JMP REALINITLOOP0
2425	.$1785	REALLOOPEXIT0:
2426	.$1785	RTS
2430	.$1786	CONSTANTS
2432	.$1786	CONST_0 .BYTE 12
2433	.$1787	.STRG "basic test: "
2435	.$1793	CONST_1 .BYTE 6
2436	.$1794	.STRG "000000"
2442	.$179a	CONST_3R .REAL 255.0
2445	.$179f	CONST_4R .REAL 1.0
2448	.$17a4	CONST_5R .REAL 1024.0
2451	.$17a9	CONST_6R .REAL 2023.0
2454	.$17ae	CONST_7R .REAL 60.0
2456	.$17b3	CONST_8 .BYTE 1
2457	.$17b4	.STRG ":"
2460	.$17b5	CONST_9R .REAL 2.0
2463	.$17ba	CONST_10R .REAL 3.0
2465	.$17bf	CONST_11 .BYTE 2
2466	.$17c0	.STRG " ("
2468	.$17c2	CONST_12 .BYTE 9
2469	.$17c3	.STRG " seconds)"
2472	.$17cc	DATAS
2473	.$17cc	.BYTE $FF
2475	.$17cd	CONSTANTS_END
2478	.$17cd	VARIABLES
2480	.$17cd	VAR_J .REAL 0.0
2482	.$17d2	VAR_I .REAL 0.0
2484	.$17d7	VAR_TI .REAL 0.0
2486	.$17dc	VAR_T .REAL 0.0
2487	.$17e1	STRINGVARS_START
2489	.$17e1	VAR_TI$ .WORD EMPTYSTR
2491	.$17e3	VAR_T$ .WORD EMPTYSTR
2493	.$17e5	VAR_H$ .WORD EMPTYSTR
2495	.$17e7	VAR_M$ .WORD EMPTYSTR
2497	.$17e9	VAR_S$ .WORD EMPTYSTR
2498	.$17eb	STRINGVARS_END
2499	.$17eb	STRINGARRAYS_START
2500	.$17eb	STRINGARRAYS_END
2501	.$17eb	VARIABLES_END
2503	.$17eb	Y_REG .REAL 0.0
2504	.$17f0	C_REG .REAL 0.0
2505	.$17f5	D_REG .REAL 0.0
2506	.$17fa	E_REG .REAL 0.0
2507	.$17ff	F_REG .REAL 0.0
2508	.$1804	A_REG .WORD 0
2509	.$1806	B_REG .WORD 0
2510	.$1808	CMD_NUM .BYTE 0
2511	.$1809	CHANNEL .BYTE 0
2512	.$180a	SP_SAVE .BYTE 0
2513	.$180b	TMP2_REG .WORD 0
2514	.$180d	TMP3_REG .WORD 0
2515	.$180f	TMP4_REG .WORD 0
2516	.$1811	AS_TMP .WORD 0
2517	.$1813	BPOINTER_TMP .WORD 0
2518	.$1815	BASICTEXTP .BYTE 0
2519	.$1816	STORE1 .WORD 0
2520	.$1818	STORE2 .WORD 0
2521	.$181a	STORE3 .WORD 0
2522	.$181c	STORE4 .WORD 0
2523	.$181e	GCSTART .WORD 0
2524	.$1820	GCLEN .WORD 0
2525	.$1822	GCWORK .WORD 0
2526	.$1824	INPUTLENGTH .BYTE 0
2527	.$1825	TMP_FREG .REAL 0
2528	.$182a	TMP2_FREG .REAL 0
2529	.$182f	TMP_FLAG .BYTE 0
2530	.$1830	INT_FLAG .BYTE 0
2531	.$1831	REAL_CONST_ONE .REAL 1.0
2532	.$1836	REAL_CONST_ZERO .REAL 0.0
2533	.$183b	REAL_CONST_MINUS_ONE .REAL -1.0
2534	.$1840	CHLOCKFLAG .BYTE 0
2535	.$1841	EMPTYSTR .BYTE 0
2536	.$1842	FPSTACKP .WORD FPSTACK
2537	.$1844	FORSTACKP .WORD FORSTACK
2538	.$1846	DATASP .WORD DATAS
2539	.$1848	LASTVAR .WORD 0
2540	.$184a	LASTVARP .WORD 0
2541	.$184c	HIGHP .WORD STRBUF
2542	.$184e	STRBUFP .WORD STRBUF
2543	.$1850	ENDSTRBUF .WORD 0
2544	.$1852	INPUTQUEUEP .BYTE 0
2545	.$1853	PROGRAMEND
2546	.$1853	INPUTQUEUE .ARRAY $0F
2547	.$1862	FPSTACK .ARRAY 100
2548	.$18c6	FORSTACK .ARRAY 340
2549	.$1a1a	STRBUF .BYTE 0
