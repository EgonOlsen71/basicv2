117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
128	.$81f	LDA #<CONST_0
129	.$821	LDY #>CONST_0
130	.$823	JSR STROUTBRKWL
133	.$826	LDA #<CONST_1
134	.$828	LDY #>CONST_1
135	.$82a	STA TMP_ZP
136	.$82c	STY TMP_ZP+1
138	.$82e	JSR WRITETID
139	.$831	LDX #4
140	.$833	dcloop235_1:
141	.$833	LDA CONST_2R,X
142	.$836	STA VAR_B,X
143	.$839	DEX
144	.$83a	BPL dcloop235_1
146	.$83c	LDA #<CONST_3R
147	.$83e	LDY #>CONST_3R
148	.$840	JSR REALFACPUSH
150	.$843	LDA #<CONST_4
151	.$845	LDY #>CONST_4
152	.$847	JSR REALFACPUSH
154	.$84a	LDA #<VAR_B
155	.$84c	LDY #>VAR_B
156	.$84e	STA A_REG
157	.$851	STY A_REG+1
158	.$854	LDA #<FORLOOP0
159	.$856	STA JUMP_TARGET
160	.$858	LDA #>FORLOOP0
161	.$85a	STA JUMP_TARGET+1
162	.$85c	JSR INITFOR
163	.$85f	FORLOOP0:
165	.$85f	LINE_20:
167	.$85f	JSR GOSUB
168	.$862	JSR LINE_100
170	.$865	LINE_30:
172	.$865	JSR COMPACTMAX
173	.$868	LDA #<CONST_5
174	.$86a	LDY #>CONST_5
175	.$86c	STA B_REG
176	.$86f	STY B_REG+1
177	.$872	LDA VAR_T$
178	.$875	LDY VAR_T$+1
179	.$878	STA A_REG
180	.$87b	STY A_REG+1
181	.$87e	JSR CONCAT
183	.$881	LDA A_REG
184	.$884	LDY A_REG+1
185	.$887	STA TMP_ZP
186	.$889	STY TMP_ZP+1
187	.$88b	LDA #<VAR_T$
188	.$88d	LDY #>VAR_T$
189	.$88f	JSR COPYSTRING
191	.$892	LINE_40:
193	.$892	LDA VAR_T$
194	.$895	LDY VAR_T$+1
195	.$898	JSR STROUTWL
197	.$89b	LDA #<CONST_6
198	.$89d	LDY #>CONST_6
199	.$89f	JSR STROUTWL
201	.$8a2	LDA VAR_T$
202	.$8a5	LDY VAR_T$+1
203	.$8a8	JSR STROUTBRKWL
207	.$8ab	LINE_50:
209	.$8ab	LDA #<CONST_7
210	.$8ad	LDY #>CONST_7
211	.$8af	JSR STROUTBRKWL
215	.$8b2	LINE_60:
217	.$8b2	JSR ONETOFAC
219	.$8b5	LDA #<VAR_B
220	.$8b7	LDY #>VAR_B
221	.$8b9	JSR FASTFSUBMEM
225	.$8bc	JSR FACXREG
227	.$8bf	LDA #<CONST_8R
228	.$8c1	LDY #>CONST_8R
229	.$8c3	JSR REALFAC
232	.$8c6	LDA #<X_REG
233	.$8c8	LDY #>X_REG
235	.$8ca	JSR CMPFAC
236	.$8cd	BCC LTEQ_LTEQ0
237	.$8cf	BEQ LTEQ_LTEQ0
238	.$8d1	LDA #0
239	.$8d3	JMP LTEQ_SKIP0
240	.$8d6	LTEQ_LTEQ0:
241	.$8d6	LDA #$1
242	.$8d8	LTEQ_SKIP0:
243	.$8d8	COMP_SKP0:
244	.$8d8	BEQ LINE_SKIP3
247	.$8da	LINE_NSKIP3:
249	.$8da	LDA #<CONST_9
250	.$8dc	LDY #>CONST_9
251	.$8de	JSR STROUTBRKWL
254	.$8e1	JMP LINE_80
256	.$8e4	LINE_SKIP3:
259	.$8e4	LINE_70:
261	.$8e4	JSR GOSUB
262	.$8e7	JSR LINE_200
263	.$8ea	LDA #<CONST_5
264	.$8ec	LDY #>CONST_5
265	.$8ee	JSR STROUTBRKWL
269	.$8f1	LINE_80:
271	.$8f1	JSR LINEBREAK
272	.$8f4	LDA #0
273	.$8f6	STA A_REG
274	.$8f9	STA A_REG+1
275	.$8fc	JSR NEXT
277	.$8ff	LDA A_REG
278	.$902	BNE RBEQ_0
279	.$904	JMP (JUMP_TARGET)
281	.$907	RBEQ_0:
283	.$907	LINE_91:
285	.$907	LDA #<CONST_10
286	.$909	LDY #>CONST_10
287	.$90b	JSR STROUTBRKWL
291	.$90e	LINE_92:
294	.$90e	SEI
295	.$90f	LDY TIMEADDR
296	.$911	LDX TIMEADDR+1
297	.$913	LDA TIMEADDR+2
298	.$915	CLI
300	.$916	SEC
301	.$917	JSR COPYTIME
302	.$91a	JSR GETTIME
303	.$91d	LDX #<VAR_TI
304	.$91f	LDY #>VAR_TI
305	.$921	JSR FACMEM
306	.$924	LDA #<VAR_TI
307	.$926	LDY #>VAR_TI
308	.$928	JSR COPY2_XYA_XREG
312	.$92b	JSR REALOUTBRK
314	.$92e	JSR END
315	.$931	RTS
317	.$932	LINE_100:
319	.$932	JSR COMPACTMAX
320	.$935	LDA #<CONST_11
321	.$937	LDY #>CONST_11
322	.$939	STA TMP_ZP
323	.$93b	STY TMP_ZP+1
324	.$93d	JSR PUSHINT
326	.$940	LDA #<VAR_B
327	.$942	LDY #>VAR_B
328	.$944	JSR COPY2_XYA_YREG
333	.$947	JSR STR
334	.$94a	JSR POPINT2B
336	.$94d	JSR CONCAT
338	.$950	LDA A_REG
339	.$953	LDY A_REG+1
340	.$956	STA TMP_ZP
341	.$958	STY TMP_ZP+1
342	.$95a	LDA #<VAR_T$
343	.$95c	LDY #>VAR_T$
344	.$95e	JSR COPYSTRING
345	.$961	JSR ONETOFAC
347	.$964	LDA #<VAR_B
348	.$966	LDY #>VAR_B
349	.$968	JSR CMPFAC
351	.$96b	ROL
352	.$96c	BCS GT_GT1
353	.$96e	LDA #0
354	.$970	JMP GT_SKIP1
355	.$973	GT_GT1:
356	.$973	LDA #$1
357	.$975	GT_SKIP1:
358	.$975	COMP_SKP2:
359	.$975	BEQ LINE_SKIP4
362	.$977	LINE_NSKIP4:
364	.$977	JSR COMPACTMAX
365	.$97a	LDA #<CONST_12
366	.$97c	LDY #>CONST_12
367	.$97e	STA B_REG
368	.$981	STY B_REG+1
369	.$984	LDA VAR_T$
370	.$987	LDY VAR_T$+1
371	.$98a	STA A_REG
372	.$98d	STY A_REG+1
373	.$990	JSR CONCAT
375	.$993	LDA A_REG
376	.$996	LDY A_REG+1
377	.$999	STA TMP_ZP
378	.$99b	STY TMP_ZP+1
379	.$99d	LDA #<VAR_T$
380	.$99f	LDY #>VAR_T$
381	.$9a1	JSR COPYSTRING
383	.$9a4	LINE_SKIP4:
386	.$9a4	LINE_110:
388	.$9a4	JMP RETURN
390	.$9a7	LINE_200:
392	.$9a7	JSR ONETOFAC
394	.$9aa	LDA #<VAR_B
395	.$9ac	LDY #>VAR_B
396	.$9ae	JSR FASTFSUBMEM
401	.$9b1	LDX #<VAR_A
402	.$9b3	LDY #>VAR_A
404	.$9b5	JSR FACMEM
405	.$9b8	JSR COMPACTMAX
406	.$9bb	LDA #<CONST_11
407	.$9bd	LDY #>CONST_11
408	.$9bf	STA TMP_ZP
409	.$9c1	STY TMP_ZP+1
410	.$9c3	JSR PUSHINT
412	.$9c6	LDA #<VAR_A
413	.$9c8	LDY #>VAR_A
414	.$9ca	JSR COPY2_XYA_YREG
419	.$9cd	JSR STR
420	.$9d0	JSR POPINT2B
422	.$9d3	JSR CONCAT
423	.$9d6	JSR STROUT
425	.$9d9	LINE_210:
427	.$9d9	JSR ONETOFAC
429	.$9dc	LDA #<VAR_A
430	.$9de	LDY #>VAR_A
431	.$9e0	JSR CMPFAC
433	.$9e3	ROL
434	.$9e4	BCS GT_GT2
435	.$9e6	LDA #0
436	.$9e8	JMP GT_SKIP2
437	.$9eb	GT_GT2:
438	.$9eb	LDA #$1
439	.$9ed	GT_SKIP2:
440	.$9ed	COMP_SKP3:
441	.$9ed	BEQ LINE_SKIP5
444	.$9ef	LINE_NSKIP5:
446	.$9ef	LDA #83
447	.$9f1	JSR SINGLECHROUTMAX
451	.$9f4	LINE_SKIP5:
454	.$9f4	LINE_220:
456	.$9f4	JMP RETURN
457	.$9f7	JSR END
458	.$9fa	RTS
461	.$9fb	END   LDX SP_SAVE
462	.$9fe	TXS
469	.$9ff	RTS
472	.$a00	START  LDA ENDSTRBUF+1
473	.$a03	BNE ENDGIVEN
474	.$a05	LDA BASICEND
475	.$a07	STA ENDSTRBUF
476	.$a0a	LDA BASICEND+1
477	.$a0c	STA ENDSTRBUF+1
478	.$a0f	ENDGIVEN LDA #<FPSTACK
479	.$a11	LDY #>FPSTACK
480	.$a13	STA FPSTACKP
481	.$a16	STY FPSTACKP+1
482	.$a19	LDA #<FORSTACK
483	.$a1b	LDY #>FORSTACK
484	.$a1d	STA FORSTACKP
485	.$a20	STY FORSTACKP+1
486	.$a23	LDA #<STRBUF
487	.$a25	LDY #>STRBUF
488	.$a27	STA STRBUFP
489	.$a2a	STY STRBUFP+1
490	.$a2d	STA HIGHP
491	.$a30	STY HIGHP+1
492	.$a33	LDA #0
493	.$a35	STA CHLOCKFLAG
494	.$a38	STA LASTVAR
495	.$a3b	STA LASTVAR+1
496	.$a3e	JSR INITVARS
497	.$a41	LDA #0
498	.$a43	STA CMD_NUM
499	.$a46	STA CHANNEL
500	.$a49	TAY
501	.$a4a	TAX
505	.$a4b	STA KEYNDX
511	.$a4d	JSR RESTORE
512	.$a50	CLC
516	.$a51	RTS
519	.$a52	INITNARRAY
520	.$a52	STA TMP_ZP
521	.$a54	STY TMP_ZP+1
522	.$a56	LDY #0
523	.$a58	TYA
524	.$a59	NINITLOOP STA (TMP_ZP),Y
525	.$a5b	INC TMP_ZP
526	.$a5d	BNE NLOOPNOV
527	.$a5f	INC TMP_ZP+1
528	.$a61	NLOOPNOV LDX TMP2_ZP
529	.$a63	BNE NLOOPNOV2
530	.$a65	DEC TMP2_ZP+1
531	.$a67	NLOOPNOV2 DEC TMP2_ZP
532	.$a69	BNE NINITLOOP
533	.$a6b	LDX TMP2_ZP+1
534	.$a6d	BNE NINITLOOP
535	.$a6f	RTS
538	.$a70	INITSTRARRAY
539	.$a70	STA TMP_ZP
540	.$a72	STY TMP_ZP+1
541	.$a74	SINITLOOP LDY #0
542	.$a76	LDA #<EMPTYSTR
543	.$a78	STA (TMP_ZP),Y
544	.$a7a	LDA #>EMPTYSTR
545	.$a7c	INY
546	.$a7d	STA (TMP_ZP),Y
547	.$a7f	CLC
548	.$a80	LDA TMP_ZP
549	.$a82	ADC #2
550	.$a84	STA TMP_ZP
551	.$a86	BCC SLOOPNOV1
552	.$a88	INC TMP_ZP+1
553	.$a8a	SLOOPNOV1 SEC
554	.$a8b	LDA TMP2_ZP
555	.$a8d	SBC #2
556	.$a8f	STA TMP2_ZP
557	.$a91	BCS SLOOPNOV2
558	.$a93	DEC TMP2_ZP+1
559	.$a95	SLOOPNOV2 LDA TMP2_ZP
560	.$a97	BNE SINITLOOP
561	.$a99	LDA TMP2_ZP+1
562	.$a9b	BNE SINITLOOP
563	.$a9d	RTS
566	.$a9e	INITSPARAMS STA TMP3_ZP
567	.$aa0	STY TMP3_ZP+1
568	.$aa2	SEC
569	.$aa3	SBC #2
570	.$aa5	STA TMP_ZP
571	.$aa7	TYA
572	.$aa8	SBC #0
573	.$aaa	STA TMP_ZP+1
574	.$aac	LDY #0
575	.$aae	LDA (TMP_ZP),Y
576	.$ab0	STA TMP2_ZP
577	.$ab2	INY
578	.$ab3	LDA (TMP_ZP),Y
579	.$ab5	STA TMP2_ZP+1
580	.$ab7	LDA TMP3_ZP
581	.$ab9	LDY TMP3_ZP+1
582	.$abb	RTS
585	.$abc	INITSTRVARS LDA #<STRINGVARS_START  
586	.$abe	LDY #>STRINGVARS_START
587	.$ac0	CMP #<STRINGVARS_END
588	.$ac2	BNE INITIT1
589	.$ac4	CPY #>STRINGVARS_END
590	.$ac6	BNE INITIT1
591	.$ac8	JMP INITSA2     
592	.$acb	INITIT1  STA TMP_ZP
593	.$acd	STY TMP_ZP+1
594	.$acf	LDY #0
595	.$ad1	INITSTRLOOP LDA #<EMPTYSTR
596	.$ad3	STA (TMP_ZP),Y
597	.$ad5	INY
598	.$ad6	LDA #>EMPTYSTR
599	.$ad8	STA (TMP_ZP),Y
600	.$ada	DEY
601	.$adb	LDA TMP_ZP
602	.$add	CLC
603	.$ade	ADC #2
604	.$ae0	STA TMP_ZP
605	.$ae2	LDA TMP_ZP+1
606	.$ae4	ADC #0
607	.$ae6	STA TMP_ZP+1
608	.$ae8	CMP #>STRINGVARS_END
609	.$aea	BNE INITSTRLOOP
610	.$aec	LDA TMP_ZP
611	.$aee	CMP #<STRINGVARS_END
612	.$af0	BNE INITSTRLOOP
613	.$af2	INITSA2  LDA #<STRINGARRAYS_START 
614	.$af4	LDY #>STRINGARRAYS_START
615	.$af6	CMP #<STRINGARRAYS_END
616	.$af8	BNE ARRAYLOOP
617	.$afa	CPY #>STRINGARRAYS_END
618	.$afc	BNE ARRAYLOOP
619	.$afe	RTS       
620	.$aff	ARRAYLOOP CLC
621	.$b00	ADC #3
622	.$b02	BCC ARRAYSKIP1
623	.$b04	INY
624	.$b05	ARRAYSKIP1 CPY #>STRINGARRAYS_END
625	.$b07	BEQ ARRAYSC
626	.$b09	BCC ARRAYSKIP2
627	.$b0b	JMP ARRAYQUIT
628	.$b0e	ARRAYSC  CMP #<STRINGARRAYS_END
629	.$b10	BCS ARRAYQUIT
630	.$b12	ARRAYSKIP2 STA TMP_REG
631	.$b14	STY TMP_REG+1
632	.$b16	JSR INITSPARAMS
633	.$b19	LDA TMP_REG
634	.$b1b	LDY TMP_REG+1
635	.$b1d	JSR INITSTRARRAY
636	.$b20	LDA TMP_ZP
637	.$b22	LDY TMP_ZP+1
638	.$b24	JMP ARRAYLOOP
639	.$b27	ARRAYQUIT RTS
642	.$b28	RESTORE  LDA #<DATAS
643	.$b2a	LDY #>DATAS
644	.$b2c	STA DATASP
645	.$b2f	STY DATASP+1
646	.$b32	RTS
649	.$b33	CONCAT  LDA A_REG
650	.$b36	STA TMP_ZP
651	.$b38	LDA A_REG+1
652	.$b3b	STA TMP_ZP+1
653	.$b3d	LDA STRBUFP  
654	.$b40	STA A_REG
655	.$b43	STA TMP3_ZP
656	.$b45	LDA STRBUFP+1
657	.$b48	STA A_REG+1
658	.$b4b	STA TMP3_ZP+1
659	.$b4d	LDY #0
660	.$b4f	LDA (TMP_ZP),Y
661	.$b51	TAX
662	.$b52	LDA B_REG
663	.$b55	STA TMP2_ZP
664	.$b57	LDA B_REG+1
665	.$b5a	STA TMP2_ZP+1
666	.$b5c	TXA
667	.$b5d	CLC
668	.$b5e	ADC (TMP2_ZP),Y
669	.$b60	BCC CCSTRFITS
670	.$b62	JMP STRINGTOOLONG
671	.$b65	CCSTRFITS STA (TMP3_ZP),Y
672	.$b67	INC TMP3_ZP
673	.$b69	BNE CCNOOV2
674	.$b6b	INC TMP3_ZP+1
675	.$b6d	CCNOOV2  CLC
676	.$b6e	ADC STRBUFP
677	.$b71	PHP
678	.$b72	CLC
679	.$b73	ADC #3
680	.$b75	STA STRBUFP
681	.$b78	BCC CCNOCS1
682	.$b7a	INC STRBUFP+1
683	.$b7d	CCNOCS1  PLP
684	.$b7e	BCC CCSTRFITS2
685	.$b80	INC STRBUFP+1
686	.$b83	CCSTRFITS2 JSR COPY2CONCAT  
687	.$b86	LDA B_REG   
688	.$b89	STA TMP_ZP
689	.$b8b	LDA B_REG+1
690	.$b8e	STA TMP_ZP+1
691	.$b90	JMP COPY2CONCAT  
694	.$b93	COPY2CONCAT LDY #0
695	.$b95	LDA (TMP_ZP),Y
696	.$b97	BEQ NOC2C   
697	.$b99	STA TMP2_ZP
698	.$b9b	INC TMP_ZP
699	.$b9d	BNE COPY2LOOP
700	.$b9f	INC TMP_ZP+1
701	.$ba1	COPY2LOOP LDA (TMP_ZP),Y
702	.$ba3	STA (TMP3_ZP),Y
703	.$ba5	INY
704	.$ba6	CPY TMP2_ZP
705	.$ba8	BNE COPY2LOOP
706	.$baa	TYA
707	.$bab	CLC
708	.$bac	ADC TMP3_ZP   
709	.$bae	STA TMP3_ZP
710	.$bb0	BCC NOC2C
711	.$bb2	INC TMP3_ZP+1
712	.$bb4	NOC2C  RTS
715	.$bb5	STR   JSR YREGFAC
716	.$bb8	STRINT  LDY #1
717	.$bba	JSR FACSTR
718	.$bbd	LDY #0
719	.$bbf	STY TMP_ZP+1
720	.$bc1	LDA #LOFBUF
721	.$bc3	STA TMP_ZP
722	.$bc5	DEY
723	.$bc6	STRLOOP  INY
724	.$bc7	LDA LOFBUFH,Y
725	.$bca	BNE STRLOOP
726	.$bcc	STY LOFBUF
727	.$bce	TYA
728	.$bcf	TAX   
729	.$bd0	LDA #<A_REG
730	.$bd2	LDY #>A_REG
731	.$bd4	STA TMP2_ZP
732	.$bd6	STY TMP2_ZP+1
733	.$bd8	JMP COPYONLY
736	.$bdb	WRITETID LDY #0
737	.$bdd	LDA (TMP_ZP),Y
738	.$bdf	CMP #$6
739	.$be1	BEQ FORMATOK
740	.$be3	JMP ILLEGALQUANTITY
741	.$be6	FORMATOK INC TMP_ZP
742	.$be8	BNE WRITE2
743	.$bea	INC TMP_ZP+1
744	.$bec	WRITE2  LDA TMP_ZP
745	.$bee	STA INDEX1
746	.$bf0	LDA TMP_ZP+1
747	.$bf2	STA INDEX1+1
749	.$bf4	JMP WRITETIS
756	.$bf7	SAVEPOINTERS
757	.$bf7	LDA TMP_ZP   
758	.$bf9	STA STORE1
759	.$bfc	LDA TMP_ZP+1
760	.$bfe	STA STORE1+1
761	.$c01	LDA TMP2_ZP
762	.$c03	STA STORE2
763	.$c06	LDA TMP2_ZP+1
764	.$c08	STA STORE2+1
765	.$c0b	LDA TMP3_ZP
766	.$c0d	STA STORE3
767	.$c10	LDA TMP3_ZP+1
768	.$c12	STA STORE3+1
769	.$c15	RTS
772	.$c16	RESTOREPOINTERS
773	.$c16	LDA STORE3+1  
774	.$c19	STA TMP3_ZP+1
775	.$c1b	LDA STORE3
776	.$c1e	STA TMP3_ZP
777	.$c20	LDA STORE2+1
778	.$c23	STA TMP2_ZP+1
779	.$c25	LDA STORE2
780	.$c28	STA TMP2_ZP
781	.$c2a	LDA STORE1+1
782	.$c2d	STA TMP_ZP+1
783	.$c2f	LDA STORE1
784	.$c32	STA TMP_ZP
785	.$c34	RTS
792	.$c35	COMPACTMAX
793	.$c35	LDA #$FF
794	.$c37	LDY #$0
795	.$c39	JMP COMPACTF
798	.$c3c	COMPACT
799	.$c3c	LDY #0
800	.$c3e	GCBUFNE  LDA (TMP_ZP),Y  
801	.$c40	COMPACTF STA TMP4_REG  
802	.$c43	LDY STRBUFP+1  
803	.$c46	STY TMP4_REG+1  
804	.$c49	INY     
805	.$c4a	BEQ ENDMEM   
806	.$c4c	CPY ENDSTRBUF+1  
807	.$c4f	BCC RGCEXIT   
808	.$c51	ENDMEM  LDA STRBUFP
809	.$c54	CLC
810	.$c55	ADC TMP4_REG
811	.$c58	STA TMP4_REG
812	.$c5b	BCC RGCNOOV1
813	.$c5d	INC TMP4_REG+1
814	.$c60	RGCNOOV1 CLC
815	.$c61	LDA TMP4_REG
816	.$c64	ADC #3
817	.$c66	STA TMP4_REG
818	.$c69	BCC RGCNOOV2
819	.$c6b	INC TMP4_REG+1
820	.$c6e	RGCNOOV2 LDA TMP4_REG+1  
821	.$c71	CMP ENDSTRBUF+1
822	.$c74	BEQ RGCLOW1
823	.$c76	BCS GCEXECOMP  
824	.$c78	JMP RGCEXIT
825	.$c7b	RGCLOW1  LDA TMP4_REG
826	.$c7e	CMP ENDSTRBUF
827	.$c81	BCS GCEXECOMP  
828	.$c83	RGCEXIT  RTS     
829	.$c84	GCEXECOMP LDA STRBUFP
830	.$c87	STA STORE4
831	.$c8a	LDA STRBUFP+1
832	.$c8d	STA STORE4+1
833	.$c90	JSR GCEXE
834	.$c93	JMP CHECKMEMORY
837	.$c96	GCEXE  JSR SAVEPOINTERS
838	.$c99	LDA #0
839	.$c9b	STA LASTVAR
840	.$c9e	STA LASTVAR+1  
841	.$ca1	LDA #<STRBUF
842	.$ca3	STA TMP_ZP
843	.$ca5	STA GCSTART
844	.$ca8	LDA #>STRBUF
845	.$caa	STA TMP_ZP+1  
846	.$cac	STA GCSTART+1
847	.$caf	GCLOOP  LDY #0
848	.$cb1	LDA TMP_ZP
849	.$cb3	STA GCWORK
850	.$cb6	LDA TMP_ZP+1
851	.$cb8	STA GCWORK+1  
852	.$cbb	LDA (TMP_ZP),Y
853	.$cbd	STA GCLEN   
854	.$cc0	INC TMP_ZP
855	.$cc2	BNE GCLOOPNOOV
856	.$cc4	INC TMP_ZP+1
857	.$cc6	GCLOOPNOOV LDA TMP_ZP
858	.$cc8	CLC
859	.$cc9	ADC GCLEN
860	.$ccc	STA TMP_ZP
861	.$cce	BCC GCLOOPNOOV2
862	.$cd0	INC TMP_ZP+1  
863	.$cd2	GCLOOPNOOV2 LDY #0
864	.$cd4	LDA (TMP_ZP),Y
865	.$cd6	STA TMP2_ZP
866	.$cd8	INY
867	.$cd9	LDA (TMP_ZP),Y
868	.$cdb	STA TMP2_ZP+1  
869	.$cdd	LDA TMP_ZP
870	.$cdf	CLC
871	.$ce0	ADC #2
872	.$ce2	STA TMP_ZP
873	.$ce4	BCC GCLOOPNOOV3
874	.$ce6	INC TMP_ZP+1  
875	.$ce8	GCLOOPNOOV3 LDY #0
876	.$cea	LDA (TMP2_ZP),Y
877	.$cec	CMP GCWORK
878	.$cef	BNE GCKLOOP
879	.$cf1	INY
880	.$cf2	LDA (TMP2_ZP),Y
881	.$cf4	CMP GCWORK+1
882	.$cf7	BEQ MEMFREE
883	.$cf9	GCKLOOP  LDA TMP_ZP+1  
884	.$cfb	CMP HIGHP+1
885	.$cfe	BEQ GCHECKLOW
886	.$d00	BCC GCLOOP
887	.$d02	JMP GCDONE
888	.$d05	GCHECKLOW LDA TMP_ZP
889	.$d07	CMP HIGHP
890	.$d0a	BCS GCDONE
891	.$d0c	JMP GCLOOP
892	.$d0f	MEMFREE  LDA GCSTART   
893	.$d12	CMP GCWORK   
894	.$d15	BNE COPYDOWN
895	.$d17	LDA GCSTART+1
896	.$d1a	CMP GCWORK+1
897	.$d1d	BNE COPYDOWN
898	.$d1f	LDA TMP_ZP   
899	.$d21	STA GCSTART
900	.$d24	LDA TMP_ZP+1
901	.$d26	STA GCSTART+1
902	.$d29	JMP GCKLOOP   
903	.$d2c	COPYDOWN LDA GCSTART   
904	.$d2f	STA TMP_REG
905	.$d31	LDA GCSTART+1
906	.$d34	STA TMP_REG+1  
907	.$d36	LDA GCWORK
908	.$d39	STA TMP2_REG
909	.$d3c	LDA GCWORK+1
910	.$d3f	STA TMP2_REG+1  
911	.$d42	LDA TMP_ZP
912	.$d44	SEC
913	.$d45	SBC GCWORK
914	.$d48	STA TMP3_REG
915	.$d4b	LDA TMP_ZP+1
916	.$d4d	SBC GCWORK+1
917	.$d50	STA TMP3_REG+1  
918	.$d53	LDA GCSTART
919	.$d56	CLC
920	.$d57	ADC TMP3_REG
921	.$d5a	STA GCSTART
922	.$d5d	LDA GCSTART+1
923	.$d60	ADC TMP3_REG+1
924	.$d63	STA GCSTART+1  
925	.$d66	JSR QUICKCOPY  
926	.$d69	LDY #0
927	.$d6b	LDA TMP_REG
928	.$d6d	STA (TMP2_ZP),Y
929	.$d6f	INY
930	.$d70	LDA TMP_REG+1
931	.$d72	STA (TMP2_ZP),Y  
932	.$d74	JMP GCKLOOP
933	.$d77	GCDONE  LDA GCSTART
934	.$d7a	STA HIGHP
935	.$d7d	STA STRBUFP
936	.$d80	LDA GCSTART+1
937	.$d83	STA HIGHP+1
938	.$d86	STA STRBUFP+1  
939	.$d89	GCSKIP  JSR RESTOREPOINTERS
940	.$d8c	RTS     
943	.$d8d	CHECKMEMORY
944	.$d8d	LDA STRBUFP+1  
945	.$d90	CMP STORE4+1  
946	.$d93	BCC STILLFITSCM  
950	.$d95	BEQ CHECKMEMLOWCM
951	.$d97	JMP OUTOFMEMORY  
952	.$d9a	CHECKMEMLOWCM
953	.$d9a	LDA STRBUFP   
954	.$d9d	CMP STORE4
955	.$da0	BCC STILLFITSCM
956	.$da2	JMP OUTOFMEMORY  
957	.$da5	STILLFITSCM RTS
960	.$da6	QUICKCOPY LDA TMP_REG  
961	.$da8	STA TMEM+1
962	.$dab	LDA TMP_REG+1
963	.$dad	STA TMEM+2
964	.$db0	LDA TMP2_REG
965	.$db3	STA SMEM+1
966	.$db6	LDA TMP2_REG+1
967	.$db9	STA SMEM+2
968	.$dbc	LDY #$0
969	.$dbe	LDX TMP3_REG
970	.$dc1	BNE QCLOOP
971	.$dc3	LDA TMP3_REG+1
972	.$dc6	BEQ QCEXIT  
973	.$dc8	QCLOOP
974	.$dc8	SMEM  LDA $0000,Y
975	.$dcb	TMEM  STA $0000,Y
976	.$dce	INY
977	.$dcf	BNE YNOOV
978	.$dd1	INC TMEM+2
979	.$dd4	INC SMEM+2
980	.$dd7	YNOOV  DEX
981	.$dd8	BNE QCLOOP
982	.$dda	LDA TMP3_REG+1
983	.$ddd	BEQ QCEXIT
984	.$ddf	DEC TMP3_REG+1
985	.$de2	JMP QCLOOP
986	.$de5	QCEXIT  RTS
989	.$de6	COPYSTRING STA TMP2_ZP
990	.$de8	STY TMP2_ZP+1
991	.$dea	CPY TMP_ZP+1
992	.$dec	BNE CONTCOPY
993	.$dee	LDA TMP2_ZP
994	.$df0	CMP TMP_ZP
995	.$df2	BNE CONTCOPY
996	.$df4	RTS     
997	.$df5	CONTCOPY JSR COMPACT   
998	.$df8	LDY #0
999	.$dfa	STY TMP_FLAG
1000	.$dfd	LDA (TMP_ZP),Y
1001	.$dff	BNE NOTEMPTYSTR
1002	.$e01	LDA #<EMPTYSTR  
1003	.$e03	STA TMP_ZP
1004	.$e05	LDA #>EMPTYSTR
1005	.$e07	STA TMP_ZP+1
1006	.$e09	JMP ISCONST
1007	.$e0c	NOTEMPTYSTR TAX     
1008	.$e0d	LDA (TMP2_ZP),Y
1009	.$e0f	STA TMP3_ZP
1010	.$e11	INY
1011	.$e12	LDA (TMP2_ZP),Y
1012	.$e14	STA TMP3_ZP+1
1013	.$e16	DEY
1014	.$e17	LDA TMP_ZP+1  
1015	.$e19	CMP #>CONSTANTS_END
1016	.$e1b	BEQ CHECKLOW1
1017	.$e1d	BCS INVAR
1018	.$e1f	JMP CHECKNEXT
1019	.$e22	CHECKLOW1 LDA TMP_ZP
1020	.$e24	CMP #<CONSTANTS_END
1021	.$e26	BCS INVAR
1022	.$e28	CHECKNEXT LDA TMP_ZP+1  
1023	.$e2a	CMP #>CONSTANTS
1024	.$e2c	BEQ CHECKLOW3
1025	.$e2e	BCC INVAR
1026	.$e30	JMP ISCONST
1027	.$e33	CHECKLOW3 LDA TMP_ZP
1028	.$e35	CMP #<CONSTANTS
1029	.$e37	BCC INVAR   
1030	.$e39	ISCONST  JSR CHECKLASTVAR 
1031	.$e3c	LDA TMP_ZP
1032	.$e3e	STA (TMP2_ZP),Y  
1033	.$e40	INY
1034	.$e41	LDA TMP_ZP+1
1035	.$e43	STA (TMP2_ZP),Y
1036	.$e45	LDA HIGHP   
1037	.$e48	STA STRBUFP
1038	.$e4b	LDA HIGHP+1
1039	.$e4e	STA STRBUFP+1
1040	.$e51	RTS
1041	.$e52	INVAR  INY
1042	.$e53	LDA (TMP2_ZP),Y  
1043	.$e55	CMP #>CONSTANTS_END
1044	.$e57	BEQ CHECKLOW2
1045	.$e59	BCS INVAR2
1046	.$e5b	JMP PUPDATEPTR
1047	.$e5e	CHECKLOW2 DEY
1048	.$e5f	LDA (TMP2_ZP),Y
1049	.$e61	CMP #<CONSTANTS_END
1050	.$e63	BCS INVAR2
1051	.$e65	JMP PUPDATEPTR
1052	.$e68	INVAR2  LDY #0   
1053	.$e6a	LDA (TMP3_ZP),Y
1054	.$e6c	STA TMP_REG
1055	.$e6e	TXA
1056	.$e6f	CMP TMP_REG  
1057	.$e71	BEQ UPDATEHP2 
1060	.$e73	PUPDATEPTR JSR CHECKLASTVAR
1061	.$e76	LDY #1   
1062	.$e78	STY TMP_FLAG 
1063	.$e7b	JMP UPDATEPTR 
1064	.$e7e	UPDATEHP2 LDA HIGHP  
1065	.$e81	STA STRBUFP
1066	.$e84	LDA HIGHP+1
1067	.$e87	STA STRBUFP+1
1068	.$e8a	JMP STRFITS
1069	.$e8d	COPYONLY LDY #0
1070	.$e8f	STY TMP_FLAG
1071	.$e92	JMP CHECKMEM
1072	.$e95	ALTCOPY  JMP COPYSTRING2
1073	.$e98	UPDATEPTR LDA TMP_ZP+1 
1074	.$e9a	CMP HIGHP+1  
1075	.$e9d	BEQ CHECKXT1
1076	.$e9f	BCS ALTCOPY
1077	.$ea1	JMP CHECKMEM
1078	.$ea4	CHECKXT1 LDA TMP_ZP
1079	.$ea6	CMP HIGHP
1080	.$ea9	BCS ALTCOPY
1081	.$eab	CHECKMEM
1082	.$eab	MEMOK  LDY #0
1083	.$ead	LDA STRBUFP  
1084	.$eb0	STA (TMP2_ZP),Y 
1085	.$eb2	STA TMP3_ZP
1086	.$eb4	LDA STRBUFP+1
1087	.$eb7	INY
1088	.$eb8	STA (TMP2_ZP),Y
1089	.$eba	STA TMP3_ZP+1
1090	.$ebc	TXA
1091	.$ebd	CLC
1092	.$ebe	ADC STRBUFP
1093	.$ec1	PHP
1094	.$ec2	CLC
1095	.$ec3	ADC #3
1096	.$ec5	STA STRBUFP
1097	.$ec8	BCC NOCS1
1098	.$eca	INC STRBUFP+1
1099	.$ecd	NOCS1  PLP
1100	.$ece	BCC STRFITS
1101	.$ed0	INC STRBUFP+1
1102	.$ed3	STRFITS  LDY TMP_FLAG 
1103	.$ed6	BEQ NOHPUPDATE 
1104	.$ed8	LDA HIGHP+1
1105	.$edb	CMP STRBUFP+1
1106	.$ede	BCC UPDATEHIGHP
1107	.$ee0	BEQ CHECKNEXTHP
1108	.$ee2	JMP NOHPUPDATE
1109	.$ee5	CHECKNEXTHP LDA HIGHP
1110	.$ee8	CMP STRBUFP
1111	.$eeb	BCC UPDATEHIGHP
1112	.$eed	JMP NOHPUPDATE
1113	.$ef0	UPDATEHIGHP LDA STRBUFP
1114	.$ef3	STA HIGHP
1115	.$ef6	LDA STRBUFP+1
1116	.$ef9	STA HIGHP+1  
1117	.$efc	JSR REMEMBERLASTVAR
1118	.$eff	JSR STOREVARREF
1119	.$f02	NOHPUPDATE LDY #0
1120	.$f04	LDA (TMP_ZP),Y 
1121	.$f06	STA (TMP3_ZP),Y
1122	.$f08	TAY    
1123	.$f09	BEQ EXITCOPY 
1124	.$f0b	LOOP  LDA (TMP_ZP),Y 
1125	.$f0d	STA (TMP3_ZP),Y
1126	.$f0f	DEY
1127	.$f10	BNE LOOP
1128	.$f12	EXITCOPY RTS
1133	.$f13	COPYSTRING2 LDY #0
1134	.$f15	LDA (TMP_ZP),Y
1135	.$f17	STA TMP_REG
1136	.$f19	TAX
1137	.$f1a	LDA HIGHP
1138	.$f1d	STA TMP3_ZP
1139	.$f1f	STA (TMP2_ZP),Y
1140	.$f21	LDA HIGHP+1
1141	.$f24	STA TMP3_ZP+1
1142	.$f26	INY
1143	.$f27	STA (TMP2_ZP),Y
1144	.$f29	JSR REMEMBERLASTVAR
1147	.$f2c	LDA TMP_ZP
1148	.$f2e	CMP TMP3_ZP
1149	.$f30	BNE DOLOOP
1150	.$f32	LDA TMP_ZP+1
1151	.$f34	CMP TMP3_ZP+1
1152	.$f36	BEQ SKIPCP2
1153	.$f38	DOLOOP  DEY
1154	.$f39	TXA
1155	.$f3a	STA (TMP3_ZP),Y
1156	.$f3c	INY
1157	.$f3d	ASLOOP  LDA (TMP_ZP),Y
1158	.$f3f	STA (TMP3_ZP),Y
1159	.$f41	INY
1160	.$f42	DEX
1161	.$f43	BNE ASLOOP
1162	.$f45	SKIPCP2  LDA HIGHP
1163	.$f48	CLC
1164	.$f49	ADC TMP_REG
1165	.$f4b	PHP
1166	.$f4c	CLC
1167	.$f4d	ADC #3
1168	.$f4f	STA HIGHP
1169	.$f52	STA STRBUFP
1170	.$f55	BCC SKIPLOWAS1
1171	.$f57	INC HIGHP+1
1172	.$f5a	SKIPLOWAS1 PLP
1173	.$f5b	BCC SKIPLOWAS2
1174	.$f5d	INC HIGHP+1
1175	.$f60	SKIPLOWAS2 LDA HIGHP+1
1176	.$f63	STA STRBUFP+1
1177	.$f66	JSR STOREVARREF
1178	.$f69	RTS
1182	.$f6a	CHECKLASTVAR
1183	.$f6a	LDA TMP2_ZP
1184	.$f6c	CMP LASTVAR
1185	.$f6f	BNE NOTSAMEVAR
1186	.$f71	LDA TMP2_ZP+1
1187	.$f73	CMP LASTVAR+1
1188	.$f76	BNE NOTSAMEVAR
1189	.$f78	LDA LASTVARP   
1190	.$f7b	STA HIGHP
1191	.$f7e	STA STRBUFP
1192	.$f81	LDA LASTVARP+1
1193	.$f84	STA HIGHP+1
1194	.$f87	STA STRBUFP+1
1195	.$f8a	NOTSAMEVAR RTS
1199	.$f8b	REMEMBERLASTVAR
1200	.$f8b	LDA TMP2_ZP
1201	.$f8d	STA LASTVAR
1202	.$f90	LDA TMP2_ZP+1
1203	.$f92	STA LASTVAR+1
1204	.$f95	LDA TMP3_ZP
1205	.$f97	STA LASTVARP
1206	.$f9a	LDA TMP3_ZP+1
1207	.$f9c	STA LASTVARP+1 
1208	.$f9f	RTS
1213	.$fa0	STOREVARREF
1214	.$fa0	TYA
1215	.$fa1	PHA    
1216	.$fa2	LDA TMP_ZP
1217	.$fa4	PHA
1218	.$fa5	LDA TMP_ZP+1
1219	.$fa7	PHA
1220	.$fa8	LDA HIGHP+1
1221	.$fab	STA TMP_ZP+1
1222	.$fad	LDA HIGHP
1223	.$fb0	SEC
1224	.$fb1	SBC #2
1225	.$fb3	STA TMP_ZP
1226	.$fb5	BCS RLVNOOV
1227	.$fb7	DEC TMP_ZP+1
1228	.$fb9	RLVNOOV  LDA TMP2_ZP
1229	.$fbb	LDY #0
1230	.$fbd	STA (TMP_ZP),Y
1231	.$fbf	LDA TMP2_ZP+1
1232	.$fc1	INY
1233	.$fc2	STA (TMP_ZP),Y 
1234	.$fc4	PLA
1235	.$fc5	STA TMP_ZP+1
1236	.$fc7	PLA
1237	.$fc8	STA TMP_ZP  
1238	.$fca	PLA
1239	.$fcb	TAY    
1240	.$fcc	RTS
1243	.$fcd	REROUTE  LDA CMD_NUM  
1244	.$fd0	BEQ REROUTECMD
1245	.$fd2	TAX
1246	.$fd3	STA CHANNEL
1247	.$fd6	JMP CHKOUT
1248	.$fd9	REROUTECMD RTS
1251	.$fda	RESETROUTE LDA CMD_NUM  
1252	.$fdd	BEQ RESETROUTECMD
1253	.$fdf	JMP CLRCHNEW
1254	.$fe2	RESETROUTECMD
1255	.$fe2	RTS
1258	.$fe3	INTOUTFASTZ LDX #32    
1259	.$fe5	LDA TMP_ZP+1
1260	.$fe7	BPL INTISPOS
1261	.$fe9	CLC
1262	.$fea	LDA TMP_ZP
1263	.$fec	EOR #$FF
1264	.$fee	ADC #1
1265	.$ff0	STA TMP_ZP
1266	.$ff2	LDA TMP_ZP+1
1267	.$ff4	EOR #$FF
1268	.$ff6	ADC #0
1269	.$ff8	STA TMP_ZP+1
1270	.$ffa	LDX #45    
1271	.$ffc	INTISPOS
1272	.$ffc	TXA
1273	.$ffd	JSR CHROUT
1274	.$1000	JSR CONVPOSINT
1275	.$1003	LDA NUMFLAG
1276	.$1006	BNE ALLINTOUTDONE
1277	.$1008	LDA #48
1278	.$100a	JSR CHROUT
1279	.$100d	ALLINTOUTDONE
1280	.$100d	RTS
1283	.$100e	NUMBEROUT
1284	.$100e	BEQ NUMZERO
1285	.$1010	ORA #$30
1286	.$1012	STA NUMFLAG
1287	.$1015	JMP CHROUT
1288	.$1018	NUMZERO
1289	.$1018	LDX NUMFLAG
1290	.$101b	BEQ STILLZERO
1291	.$101d	ORA #$30
1292	.$101f	JMP CHROUT
1293	.$1022	STILLZERO
1294	.$1022	RTS
1297	.$1023	CONVPOSINT
1298	.$1023	JSR INT2BCD
1299	.$1026	LDX #0
1300	.$1028	STX NUMFLAG
1301	.$102b	AND #$0F
1302	.$102d	JSR NUMBEROUT
1303	.$1030	LDA BCD+1
1304	.$1033	LSR
1305	.$1034	LSR
1306	.$1035	LSR
1307	.$1036	LSR
1308	.$1037	JSR NUMBEROUT
1309	.$103a	LDA BCD+1
1310	.$103d	AND #$0F
1311	.$103f	TAY
1312	.$1040	JSR NUMBEROUT
1313	.$1043	LDA BCD
1314	.$1046	LSR
1315	.$1047	LSR
1316	.$1048	LSR
1317	.$1049	LSR
1318	.$104a	JSR NUMBEROUT
1319	.$104d	LDA BCD
1320	.$1050	AND #$0F
1321	.$1052	JSR NUMBEROUT
1322	.$1055	RTS
1325	.$1056	INT2BCD
1326	.$1056	SED
1327	.$1057	LDA #0
1328	.$1059	STA BCD
1329	.$105c	STA BCD+1
1330	.$105f	STA BCD+2
1331	.$1062	ASL TMP_ZP
1332	.$1064	ROL TMP_ZP+1
1333	.$1066	LDA BCD
1334	.$1069	ADC BCD
1335	.$106c	STA BCD
1336	.$106f	ASL TMP_ZP
1337	.$1071	ROL TMP_ZP+1
1338	.$1073	ADC BCD
1339	.$1076	STA BCD
1340	.$1079	ASL TMP_ZP
1341	.$107b	ROL TMP_ZP+1
1342	.$107d	ADC BCD
1343	.$1080	STA BCD
1344	.$1083	ASL TMP_ZP
1345	.$1085	ROL TMP_ZP+1
1346	.$1087	ADC BCD
1347	.$108a	STA BCD
1348	.$108d	ASL TMP_ZP
1349	.$108f	ROL TMP_ZP+1
1350	.$1091	ADC BCD
1351	.$1094	STA BCD
1352	.$1097	ASL TMP_ZP
1353	.$1099	ROL TMP_ZP+1
1354	.$109b	ADC BCD
1355	.$109e	STA BCD
1356	.$10a1	LDX #7
1357	.$10a3	BCDBIT1
1358	.$10a3	ASL TMP_ZP
1359	.$10a5	ROL TMP_ZP+1
1360	.$10a7	LDA BCD
1361	.$10aa	ADC BCD
1362	.$10ad	STA BCD
1363	.$10b0	LDA BCD+1
1364	.$10b3	ADC BCD+1
1365	.$10b6	STA BCD+1
1366	.$10b9	DEX
1367	.$10ba	BNE BCDBIT1
1368	.$10bc	LDX #3
1369	.$10be	BCDBIT2
1370	.$10be	ASL TMP_ZP
1371	.$10c0	ROL TMP_ZP+1
1372	.$10c2	LDA BCD
1373	.$10c5	ADC BCD
1374	.$10c8	STA BCD
1375	.$10cb	LDA BCD+1
1376	.$10ce	ADC BCD+1
1377	.$10d1	STA BCD+1
1378	.$10d4	LDA BCD+2
1379	.$10d7	ADC BCD+2
1380	.$10da	STA BCD+2
1381	.$10dd	DEX
1382	.$10de	BNE BCDBIT2
1383	.$10e0	CLD
1384	.$10e1	RTS
1385	.$10e2	BCD
1386	.$10e2	.WORD 0 0
1387	.$10e6	NUMFLAG
1388	.$10e6	.BYTE 0
1391	.$10e7	REALOUTFAST JSR FACINT
1392	.$10ea	STA TMP_ZP+1
1393	.$10ec	STY TMP_ZP
1394	.$10ee	JMP INTOUTFASTZ
1397	.$10f1	CHECKFORFASTOUT
1398	.$10f1	JSR REROUTE
1399	.$10f4	JSR XREGFAC
1400	.$10f7	LDA FACEXP
1401	.$10f9	CMP #$90
1402	.$10fb	BCS REALOUTINT
1403	.$10fd	CMP #$81
1404	.$10ff	BCC REALOUTINT
1405	.$1101	MAYBEREALOUTFAST
1406	.$1101	LDA FACEXP+3
1407	.$1103	BNE REALOUTINT
1408	.$1105	LDA FACEXP+4
1409	.$1107	BNE REALOUTINT
1410	.$1109	LDA FACEXP
1411	.$110b	SEC
1412	.$110c	SBC #129
1413	.$110e	ASL
1414	.$110f	TAX
1415	.$1110	LDA FACEXP+1
1416	.$1112	AND MANTMASK,X
1417	.$1115	BNE REALOUTINT
1418	.$1117	INX
1419	.$1118	LDA FACEXP+2
1420	.$111a	AND MANTMASK,X
1421	.$111d	BNE REALOUTINT
1422	.$111f	JMP REALOUTFAST
1423	.$1122	REALOUTINT LDY #0
1424	.$1124	JSR FACSTR
1425	.$1127	LDY #0
1426	.$1129	LDA LOFBUF,Y
1427	.$112c	STRLOOPRO JSR CHROUT
1428	.$112f	INY
1429	.$1130	LDA LOFBUF,Y
1430	.$1133	BNE STRLOOPRO
1431	.$1135	RTS
1432	.$1136	MANTMASK
1433	.$1136	.BYTE 127 255 63 255 31 255 15 255 7 255 3 255 1 255 0 255 0 127 0 63 0 31 0 15 0 7 0 3 0 1
1436	.$1154	REALOUTBRK  LDA X_REG
1437	.$1156	BNE RNOTNULLBRK
1438	.$1158	JMP PRINTNULLBRK
1439	.$115b	RNOTNULLBRK JSR CHECKFORFASTOUT
1440	.$115e	LDA #$0D
1441	.$1160	JSR CHROUT
1442	.$1163	JMP RESETROUTE
1445	.$1166	LINEBREAK JSR REROUTE
1446	.$1169	LDA #$0D
1447	.$116b	JSR CHROUT
1448	.$116e	JMP RESETROUTE
1451	.$1171	PRINTNULLBRK
1452	.$1171	JSR REROUTE
1453	.$1174	LDA #$20
1454	.$1176	JSR CHROUT
1455	.$1179	LDA #$30
1456	.$117b	JSR CHROUT
1457	.$117e	LDA #$0D
1458	.$1180	JSR CHROUT
1459	.$1183	JMP RESETROUTE
1462	.$1186	STROUTWL STA A_REG
1463	.$1189	STY A_REG+1
1464	.$118c	STROUT  JSR REROUTE
1465	.$118f	LDA A_REG
1466	.$1192	STA INDEX1
1467	.$1194	LDA A_REG+1
1468	.$1197	STA INDEX1+1
1469	.$1199	LDY #0
1470	.$119b	LDA (INDEX1),Y
1471	.$119d	TAX
1472	.$119e	INC INDEX1
1473	.$11a0	BNE PRINTSTR
1474	.$11a2	INC INDEX1+1
1475	.$11a4	PRINTSTR JSR PRINTSTRS
1476	.$11a7	LDA HIGHP   
1477	.$11aa	STA STRBUFP
1478	.$11ad	LDA HIGHP+1
1479	.$11b0	STA STRBUFP+1
1480	.$11b3	JSR RESETROUTE
1481	.$11b6	RTS
1484	.$11b7	SINGLECHROUTMAX
1485	.$11b7	JSR SINGLECHROUT
1486	.$11ba	JMP COMPACTMAX
1489	.$11bd	SINGLECHROUT
1490	.$11bd	STA TMP_ZP
1491	.$11bf	JSR REROUTE
1492	.$11c2	LDA TMP_ZP
1493	.$11c4	JSR CHROUT
1494	.$11c7	JMP RESETROUTE
1497	.$11ca	STROUTBRKWL STA A_REG
1498	.$11cd	STY A_REG+1
1499	.$11d0	STROUTBRK JSR REROUTE
1500	.$11d3	LDA A_REG
1501	.$11d6	STA INDEX1
1502	.$11d8	LDA A_REG+1
1503	.$11db	STA INDEX1+1
1504	.$11dd	LDY #0
1505	.$11df	LDA (INDEX1),Y
1506	.$11e1	TAX
1507	.$11e2	INC INDEX1
1508	.$11e4	BNE PRINTSTR2
1509	.$11e6	INC INDEX1+1
1510	.$11e8	PRINTSTR2 JSR PRINTSTRS
1511	.$11eb	LDA HIGHP   
1512	.$11ee	STA STRBUFP
1513	.$11f1	LDA HIGHP+1
1514	.$11f4	STA STRBUFP+1
1515	.$11f7	LDA #$0D
1516	.$11f9	JSR CHROUT
1517	.$11fc	JMP RESETROUTE  
1520	.$11ff	ADJUSTSTACK LDA FORSTACKP 
1521	.$1202	STA TMP_ZP
1522	.$1204	LDA FORSTACKP+1
1523	.$1207	STA TMP_ZP+1
1524	.$1209	ADSEARCHFOR LDA TMP_ZP
1525	.$120b	CMP #<FORSTACK
1526	.$120d	BNE ADJUST2
1527	.$120f	LDA TMP_ZP+1
1528	.$1211	CMP #>FORSTACK
1529	.$1213	BNE ADJUST2
1530	.$1215	RTS    
1531	.$1216	ADJUST2  LDA TMP_ZP
1532	.$1218	SEC
1533	.$1219	SBC #2
1534	.$121b	STA TMP_ZP
1535	.$121d	BCS ADNOPV1N1
1536	.$121f	DEC TMP_ZP+1
1537	.$1221	ADNOPV1N1 LDY #0
1538	.$1223	LDA (TMP_ZP),Y
1539	.$1225	BNE ADNOGOSUB
1540	.$1227	RTS    
1541	.$1228	ADNOGOSUB
1542	.$1228	INY
1543	.$1229	LDA TMP_ZP
1544	.$122b	SEC
1545	.$122c	SBC (TMP_ZP),Y
1546	.$122e	STA TMP_ZP
1547	.$1230	BCS ADNOPV1N2
1548	.$1232	DEC TMP_ZP+1
1549	.$1234	ADNOPV1N2 DEY
1550	.$1235	LDA A_REG
1551	.$1238	ADCMPFOR CMP (TMP_ZP),Y
1552	.$123a	BNE ADSEARCHFOR
1553	.$123c	LDA A_REG+1
1554	.$123f	INY
1555	.$1240	CMP (TMP_ZP),Y
1556	.$1242	BEQ ADFOUNDFOR
1557	.$1244	JMP ADSEARCHFOR
1558	.$1247	ADLOW0  LDX A_REG+1
1559	.$124a	BEQ ADFOUNDFOR
1560	.$124c	BNE ADCMPFOR
1561	.$124e	ADFOUNDFOR LDA TMP_ZP  
1562	.$1250	STA FORSTACKP
1563	.$1253	LDA TMP_ZP+1
1564	.$1255	STA FORSTACKP+1
1565	.$1258	RTS
1568	.$1259	INITFOR  JSR ADJUSTSTACK
1569	.$125c	LDA FORSTACKP
1570	.$125f	STA TMP_ZP
1571	.$1261	LDA FORSTACKP+1
1572	.$1264	STA TMP_ZP+1
1573	.$1266	LDY #0
1574	.$1268	LDA A_REG
1575	.$126b	STA (TMP_ZP),Y
1576	.$126d	INY
1577	.$126e	LDA A_REG+1
1578	.$1271	STA (TMP_ZP),Y
1579	.$1273	INY
1580	.$1274	LDA JUMP_TARGET
1581	.$1276	STA (TMP_ZP),Y
1582	.$1278	INY
1583	.$1279	LDA JUMP_TARGET+1
1584	.$127b	STA (TMP_ZP),Y
1585	.$127d	INY
1586	.$127e	STY TMP3_ZP
1587	.$1280	JSR INCTMPZP
1588	.$1283	JSR POPREAL
1589	.$1286	LDX TMP_ZP
1590	.$1288	LDY TMP_ZP+1
1592	.$128a	JSR FACMEM
1593	.$128d	JSR SGNFAC
1594	.$1290	STA TMP_FLAG
1595	.$1293	LDY #5
1596	.$1295	STY TMP3_ZP
1597	.$1297	JSR INCTMPZP
1598	.$129a	JSR POPREAL
1599	.$129d	LDX TMP_ZP
1600	.$129f	LDY TMP_ZP+1
1602	.$12a1	JSR FACMEM
1603	.$12a4	LDY #5
1604	.$12a6	STY TMP3_ZP
1605	.$12a8	JSR INCTMPZP
1606	.$12ab	LDY #0
1607	.$12ad	LDA TMP_FLAG
1608	.$12b0	STA (TMP_ZP),Y
1609	.$12b2	INY
1610	.$12b3	LDA #1
1611	.$12b5	STA (TMP_ZP),Y
1612	.$12b7	INY
1613	.$12b8	LDA #15
1614	.$12ba	STA (TMP_ZP),Y
1615	.$12bc	LDY #3
1616	.$12be	STY TMP3_ZP
1617	.$12c0	JSR INCTMPZP
1618	.$12c3	LDA TMP_ZP
1619	.$12c5	STA FORSTACKP
1620	.$12c8	LDA TMP_ZP+1
1621	.$12ca	STA FORSTACKP+1
1622	.$12cd	RTS
1625	.$12ce	NEXT  LDA FORSTACKP
1626	.$12d1	STA TMP_ZP
1627	.$12d3	LDA FORSTACKP+1
1628	.$12d6	STA TMP_ZP+1
1629	.$12d8	SEARCHFOR LDA TMP_ZP+1
1630	.$12da	STA TMP3_REG+1
1631	.$12dd	LDA TMP_ZP
1632	.$12df	STA TMP3_REG
1633	.$12e2	SEC
1634	.$12e3	SBC #2
1635	.$12e5	STA TMP_ZP
1636	.$12e7	BCS NOPV1N1
1637	.$12e9	DEC TMP_ZP+1
1638	.$12eb	NOPV1N1  LDY #0
1639	.$12ed	LDA (TMP_ZP),Y
1640	.$12ef	BNE NOGOSUB
1641	.$12f1	JMP NEXTWOFOR
1642	.$12f4	NOGOSUB
1643	.$12f4	INY
1644	.$12f5	LDA TMP_ZP
1645	.$12f7	SEC
1646	.$12f8	SBC (TMP_ZP),Y
1647	.$12fa	STA TMP_ZP
1648	.$12fc	BCS NOPV1N2
1649	.$12fe	DEC TMP_ZP+1
1650	.$1300	NOPV1N2  DEY
1651	.$1301	LDA A_REG
1652	.$1304	BEQ LOW0
1653	.$1306	CMPFOR  CMP (TMP_ZP),Y
1654	.$1308	BNE SEARCHFOR
1655	.$130a	LDA A_REG+1
1656	.$130d	INY
1657	.$130e	CMP (TMP_ZP),Y
1658	.$1310	BEQ FOUNDFOR
1659	.$1312	JMP SEARCHFOR
1660	.$1315	LOW0  LDX A_REG+1
1661	.$1318	BEQ FOUNDFOR
1662	.$131a	BNE CMPFOR
1663	.$131c	FOUNDFOR LDA TMP_ZP
1664	.$131e	STA TMP2_REG
1665	.$1321	LDA TMP_ZP+1
1666	.$1323	STA TMP2_REG+1
1667	.$1326	VARREAL
1668	.$1326	LDY #0
1669	.$1328	STY A_REG+1 
1670	.$132b	LDA (TMP_ZP),Y
1671	.$132d	TAX
1672	.$132e	INY
1673	.$132f	LDA (TMP_ZP),Y
1674	.$1331	TAY
1675	.$1332	TXA
1676	.$1333	JSR REALFAC
1677	.$1336	CALCNEXT LDA TMP_ZP
1678	.$1338	CLC
1679	.$1339	ADC #4
1680	.$133b	STA TMP_ZP
1681	.$133d	BCC NOPV2IN
1682	.$133f	INC TMP_ZP+1
1683	.$1341	NOPV2IN  STA TMP_REG
1684	.$1343	LDY TMP_ZP+1
1685	.$1345	STY TMP_REG+1
1686	.$1347	JSR FASTFADDMEM
1688	.$134a	LDA TMP2_REG
1689	.$134d	STA TMP_ZP
1690	.$134f	LDA TMP2_REG+1
1691	.$1352	STA TMP_ZP+1
1692	.$1354	STOREREAL
1693	.$1354	LDY #0
1694	.$1356	LDA (TMP_ZP),Y
1695	.$1358	TAX
1696	.$1359	INY
1697	.$135a	LDA (TMP_ZP),Y
1698	.$135c	TAY
1699	.$135d	JSR FACMEM 
1700	.$1360	CMPFORXX LDA #5
1701	.$1362	STA TMP3_ZP
1702	.$1364	LDA TMP_REG
1703	.$1366	CLC
1704	.$1367	ADC #5
1705	.$1369	STA TMP_REG
1706	.$136b	BCC NOPV3
1707	.$136d	INC TMP_REG+1
1708	.$136f	NOPV3  LDY TMP_REG+1
1709	.$1371	JSR CMPFAC  
1710	.$1374	BEQ LOOPING
1711	.$1376	PHA
1712	.$1377	LDY #14
1713	.$1379	LDA (TMP_ZP),Y
1714	.$137b	BEQ STEPZERO
1715	.$137d	ROL
1716	.$137e	BCC STEPPOS
1717	.$1380	STEPNEG  PLA
1718	.$1381	ROL
1719	.$1382	BCC LOOPING
1720	.$1384	BCS EXITLOOP
1721	.$1386	STEPPOS  PLA
1722	.$1387	ROL
1723	.$1388	BCC EXITLOOP
1724	.$138a	LOOPING  LDA TMP3_REG
1725	.$138d	STA FORSTACKP
1726	.$1390	LDA TMP3_REG+1
1727	.$1393	STA FORSTACKP+1
1728	.$1396	LDA TMP2_REG
1729	.$1399	CLC
1730	.$139a	ADC #2
1731	.$139c	STA TMP2_REG
1732	.$139f	BCC NOPV4IN
1733	.$13a1	INC TMP2_REG+1
1734	.$13a4	NOPV4IN  LDY #0
1735	.$13a6	STY A_REG
1736	.$13a9	STA TMP_ZP
1737	.$13ab	LDA TMP2_REG+1
1738	.$13ae	STA TMP_ZP+1
1739	.$13b0	LDA (TMP_ZP),Y
1740	.$13b2	STA JUMP_TARGET
1741	.$13b4	INY
1742	.$13b5	LDA (TMP_ZP),Y
1743	.$13b7	STA JUMP_TARGET+1
1744	.$13b9	RTS
1745	.$13ba	STEPZERO PLA
1746	.$13bb	JMP LOOPING
1747	.$13be	EXITLOOP LDA TMP2_REG
1748	.$13c1	STA FORSTACKP
1749	.$13c4	LDA TMP2_REG+1
1750	.$13c7	STA FORSTACKP+1
1751	.$13ca	LDA #1
1752	.$13cc	STA A_REG
1753	.$13cf	RTS
1756	.$13d0	RETURN  LDA FORSTACKP
1757	.$13d3	STA TMP_ZP
1758	.$13d5	LDA FORSTACKP+1
1759	.$13d8	STA TMP_ZP+1
1760	.$13da	SEARCHGOSUB LDA TMP_ZP
1761	.$13dc	SEC
1762	.$13dd	SBC #2
1763	.$13df	STA TMP_ZP
1764	.$13e1	BCS NOPV1SG
1765	.$13e3	DEC TMP_ZP+1
1766	.$13e5	NOPV1SG  LDY #0
1767	.$13e7	LDA (TMP_ZP),Y
1768	.$13e9	BEQ FOUNDGOSUB
1769	.$13eb	INY
1770	.$13ec	LDA (TMP_ZP),Y
1771	.$13ee	STA TMP3_ZP
1772	.$13f0	LDA TMP_ZP
1773	.$13f2	SEC
1774	.$13f3	SBC (TMP_ZP),Y
1775	.$13f5	STA TMP_ZP
1776	.$13f7	BCS NOPV1GS
1777	.$13f9	DEC TMP_ZP+1
1778	.$13fb	NOPV1GS  JMP SEARCHGOSUB
1779	.$13fe	FOUNDGOSUB
1780	.$13fe	LDA TMP_ZP
1781	.$1400	STA FORSTACKP
1782	.$1403	LDA TMP_ZP+1
1783	.$1405	STA FORSTACKP+1
1784	.$1408	RTS
1787	.$1409	GOSUB  LDA FORSTACKP
1788	.$140c	STA TMP_ZP
1789	.$140e	LDA FORSTACKP+1
1790	.$1411	STA TMP_ZP+1
1791	.$1413	LDY #0
1792	.$1415	TYA
1793	.$1416	STA (TMP_ZP),Y
1794	.$1418	INY
1795	.$1419	STA (TMP_ZP),Y
1796	.$141b	INY
1797	.$141c	TYA
1798	.$141d	CLC
1799	.$141e	ADC TMP_ZP
1800	.$1420	STA FORSTACKP
1801	.$1423	BCC GOSUBNOOV
1802	.$1425	INC FORSTACKP+1
1803	.$1428	GOSUBNOOV RTS
1806	.$1429	PUSHINT  LDX FPSTACKP
1807	.$142c	STX TMP2_ZP
1808	.$142e	LDX FPSTACKP+1
1809	.$1431	STX TMP2_ZP+1
1810	.$1433	LDA TMP_ZP
1811	.$1435	LDY #0
1812	.$1437	STA (TMP2_ZP),Y
1813	.$1439	LDA TMP_ZP+1
1814	.$143b	INY
1815	.$143c	STA (TMP2_ZP),Y
1816	.$143e	LDA TMP2_ZP
1817	.$1440	CLC
1818	.$1441	ADC #2
1819	.$1443	STA FPSTACKP
1820	.$1446	LDA TMP2_ZP+1
1821	.$1448	ADC #0
1822	.$144a	STA FPSTACKP+1
1823	.$144d	RTS
1826	.$144e	POPINT2B LDA FPSTACKP
1827	.$1451	SEC
1828	.$1452	SBC #2
1829	.$1454	STA FPSTACKP
1830	.$1457	LDA FPSTACKP+1
1831	.$145a	SBC #0
1832	.$145c	STA FPSTACKP+1
1833	.$145f	LDX FPSTACKP
1834	.$1462	STX TMP2_ZP
1835	.$1464	LDX FPSTACKP+1
1836	.$1467	STX TMP2_ZP+1
1837	.$1469	LDY #0
1838	.$146b	LDA (TMP2_ZP),Y
1839	.$146d	STA B_REG
1840	.$1470	INY
1841	.$1471	LDA (TMP2_ZP),Y
1842	.$1473	STA B_REG+1
1843	.$1476	RTS
1846	.$1477	REALFACPUSH STA TMP_ZP
1847	.$1479	STY TMP_ZP+1
1848	.$147b	LDX FPSTACKP
1849	.$147e	LDY FPSTACKP+1
1850	.$1481	STX TMP2_ZP
1851	.$1483	STY TMP2_ZP+1
1852	.$1485	LDY #0
1853	.$1487	LDA (TMP_ZP),Y
1854	.$1489	STA (TMP2_ZP),Y
1855	.$148b	INY
1856	.$148c	LDA (TMP_ZP),Y
1857	.$148e	STA (TMP2_ZP),Y
1858	.$1490	INY
1859	.$1491	LDA (TMP_ZP),Y
1860	.$1493	STA (TMP2_ZP),Y
1861	.$1495	INY
1862	.$1496	LDA (TMP_ZP),Y
1863	.$1498	STA (TMP2_ZP),Y
1864	.$149a	INY
1865	.$149b	LDA (TMP_ZP),Y
1866	.$149d	STA (TMP2_ZP),Y
1867	.$149f	TXA    
1868	.$14a0	CLC
1869	.$14a1	ADC #5
1870	.$14a3	STA FPSTACKP
1871	.$14a6	BCC NOPVRFPXX
1872	.$14a8	INC FPSTACKP+1
1873	.$14ab	NOPVRFPXX RTS
1876	.$14ac	POPREAL  LDA FPSTACKP
1877	.$14af	SEC
1878	.$14b0	SBC #5
1879	.$14b2	STA FPSTACKP
1880	.$14b5	BCS NOPVPR
1881	.$14b7	DEC FPSTACKP+1
1882	.$14ba	NOPVPR  LDA FPSTACKP
1883	.$14bd	LDY FPSTACKP+1
1884	.$14c0	JMP REALFAC
1887	.$14c3	INCTMPZP LDA TMP_ZP
1888	.$14c5	CLC
1889	.$14c6	ADC TMP3_ZP
1890	.$14c8	STA TMP_ZP
1891	.$14ca	BCC NOPV2
1892	.$14cc	INC TMP_ZP+1
1893	.$14ce	NOPV2  RTS
1896	.$14cf	COPY2_XYA_XREG
1897	.$14cf	STA TMP3_ZP
1898	.$14d1	STY TMP3_ZP+1
1899	.$14d3	COPY2_XY_XREG
1900	.$14d3	LDX #<X_REG  
1901	.$14d5	LDY #0
1902	.$14d7	LDA (TMP3_ZP),Y
1903	.$14d9	STA X_REG
1904	.$14db	INY
1905	.$14dc	LDA (TMP3_ZP),Y
1906	.$14de	STA X_REG+1
1907	.$14e0	INY
1908	.$14e1	LDA (TMP3_ZP),Y
1909	.$14e3	STA X_REG+2
1910	.$14e5	INY
1911	.$14e6	LDA (TMP3_ZP),Y
1912	.$14e8	STA X_REG+3
1913	.$14ea	INY
1914	.$14eb	LDA (TMP3_ZP),Y
1915	.$14ed	STA X_REG+4
1916	.$14ef	RTS
1919	.$14f0	COPY2_XYA_YREG
1920	.$14f0	STA TMP3_ZP
1921	.$14f2	STY TMP3_ZP+1
1922	.$14f4	COPY2_XY_YREG
1923	.$14f4	LDX #<Y_REG  
1924	.$14f6	LDY #0
1925	.$14f8	LDA (TMP3_ZP),Y
1926	.$14fa	STA Y_REG
1927	.$14fd	INY
1928	.$14fe	LDA (TMP3_ZP),Y
1929	.$1500	STA Y_REG+1
1930	.$1503	INY
1931	.$1504	LDA (TMP3_ZP),Y
1932	.$1506	STA Y_REG+2
1933	.$1509	INY
1934	.$150a	LDA (TMP3_ZP),Y
1935	.$150c	STA Y_REG+3
1936	.$150f	INY
1937	.$1510	LDA (TMP3_ZP),Y
1938	.$1512	STA Y_REG+4
1939	.$1515	RTS
1942	.$1516	ONETOFAC    LDX #129
1943	.$1518	STX FAC
1944	.$151a	DEX
1945	.$151b	STX FAC+1
1946	.$151d	LDX #0
1947	.$151f	STX FAC+2
1948	.$1521	STX FAC+3
1949	.$1523	STX FAC+4
1950	.$1525	STX FAC+5
1951	.$1527	STX FAC+15
1952	.$1529	RTS
1955	.$152a	CLRCHNEW
1956	.$152a	LDA CHLOCKFLAG
1957	.$152d	BNE SKIPCLRCH
1958	.$152f	JMP CLRCH
1959	.$1532	SKIPCLRCH
1960	.$1532	RTS
1963	.$1533	NEXTWOFOR
1967	.$1533	LDX #$0A
1968	.$1535	JMP ERRALL
1971	.$1538	OUTOFMEMORY
1975	.$1538	LDX #$10
1976	.$153a	JMP ERRALL
1979	.$153d	STRINGTOOLONG
1983	.$153d	LDX #$17
1984	.$153f	JMP ERRALL
1987	.$1542	ILLEGALQUANTITY
1991	.$1542	JMP ERRIQ
1994	.$1545	FACXREG  LDA FACLO
1995	.$1547	STA X_REG+4
1996	.$1549	LDA FACMO
1997	.$154b	STA X_REG+3
1998	.$154d	LDA FACMOH
1999	.$154f	STA X_REG+2
2000	.$1551	LDA FACSGN
2001	.$1553	ORA #$7F
2002	.$1555	AND FACHO
2003	.$1557	STA X_REG+1
2004	.$1559	LDA FACEXP
2005	.$155b	STA X_REG
2006	.$155d	LDA #0   
2007	.$155f	STA FACOV
2008	.$1561	RTS
2011	.$1562	XREGFAC  LDA X_REG+4
2012	.$1564	STA FACLO
2013	.$1566	LDA X_REG+3
2014	.$1568	STA FACMO
2015	.$156a	LDA X_REG+2
2016	.$156c	STA FACMOH
2017	.$156e	LDA X_REG+1
2018	.$1570	STA FACSGN
2019	.$1572	ORA #$80
2020	.$1574	STA FACHO
2021	.$1576	LDA X_REG
2022	.$1578	STA FACEXP
2023	.$157a	LDA #0
2024	.$157c	STA FACOV
2025	.$157e	RTS
2028	.$157f	YREGFAC  LDA Y_REG+4
2029	.$1582	STA FACLO
2030	.$1584	LDA Y_REG+3
2031	.$1587	STA FACMO
2032	.$1589	LDA Y_REG+2
2033	.$158c	STA FACMOH
2034	.$158e	LDA Y_REG+1
2035	.$1591	STA FACSGN
2036	.$1593	ORA #$80
2037	.$1595	STA FACHO
2038	.$1597	LDA Y_REG
2039	.$159a	STA FACEXP
2040	.$159c	LDA #0
2041	.$159e	STA FACOV
2042	.$15a0	RTS
2156	.$15a1	FASTFSUBMEM
2157	.$15a1	JSR MEMARG
2158	.$15a4	FASTFSUBARG
2159	.$15a4	LDA FACSGN
2160	.$15a6	EOR #$FF
2161	.$15a8	STA FACSGN
2162	.$15aa	EOR ARGSGN
2163	.$15ac	STA ARISGN
2164	.$15ae	LDA FACEXP
2165	.$15b0	JMP FASTFADDARG
2168	.$15b3	FASTFADDMEM
2169	.$15b3	JSR MEMARG
2170	.$15b6	FASTFADDARG
2171	.$15b6	BNE FADDRET2     
2172	.$15b8	JMP ARGFAC
2173	.$15bb	FADDRET2 LDA ARGEXP
2174	.$15bd	BNE FADDRET1     
2175	.$15bf	RTS
2176	.$15c0	FADDRET1 SEC
2177	.$15c1	SBC FACEXP
2178	.$15c3	BEQ FFADD_EXPEQ     
2179	.$15c5	BCC FFADD_SHFARG1   
2183	.$15c7	LDY ARGEXP
2184	.$15c9	STY FACEXP
2185	.$15cb	LDY ARGSGN
2186	.$15cd	STY FACSGN
2187	.$15cf	LDX #0
2188	.$15d1	STX OLDOV        
2189	.$15d3	LDX #FAC         
2191	.$15d5	SEC
2192	.$15d6	SBC #$08
2193	.$15d8	BMI FFADD_SHFFAC2
2195	.$15da	FFADD_SHFFAC1
2196	.$15da	LDY FACLO        
2197	.$15dc	STY FACOV
2198	.$15de	LDY FACMO        
2199	.$15e0	STY FACMO+1
2200	.$15e2	LDY FACMOH       
2201	.$15e4	STY FACMOH+1
2202	.$15e6	LDY FACHO        
2203	.$15e8	STY FACHO+1
2204	.$15ea	LDY #0
2205	.$15ec	STY FACHO        
2206	.$15ee	SBC #$08         
2207	.$15f0	BPL FFADD_SHFFAC1   
2208	.$15f2	FFADD_SHFFAC2
2209	.$15f2	ADC #$08         
2210	.$15f4	BEQ FFADD_SHFFAC4   
2211	.$15f6	TAY
2212	.$15f7	LDA FACOV
2213	.$15f9	FFADD_SHFFAC3
2214	.$15f9	LSR FACHO        
2215	.$15fb	ROR FACMOH       
2216	.$15fd	ROR FACMO        
2217	.$15ff	ROR FACLO        
2218	.$1601	ROR              
2219	.$1602	DEY
2220	.$1603	BNE FFADD_SHFFAC3
2221	.$1605	JMP FFADD_MANADD2   
2222	.$1608	FFADD_SHFFAC4
2223	.$1608	LDA FACOV        
2224	.$160a	JMP FFADD_MANADD2
2225	.$160d	FFADD_EXPEQ
2226	.$160d	LDX FACOV
2227	.$160f	STX OLDOV
2230	.$1611	JMP FFADD_MANADD1
2231	.$1614	FFADD_SHFARG2
2232	.$1614	LDA FACOV        
2233	.$1616	JMP FFADD_MANADD1
2234	.$1619	FFADD_SHFARG1
2235	.$1619	LDX FACOV
2236	.$161b	STX OLDOV        
2237	.$161d	LDX #$00         
2240	.$161f	ADC #$08
2241	.$1621	BPL FFADD_SHFARG6   
2242	.$1623	FFADD_SHFARG3
2243	.$1623	LDX ARGLO        
2244	.$1625	LDY ARGMO        
2245	.$1627	STY ARGMO+1
2246	.$1629	LDY ARGMOH       
2247	.$162b	STY ARGMOH+1
2248	.$162d	LDY ARGHO        
2249	.$162f	STY ARGHO+1
2250	.$1631	LDY #0
2251	.$1633	STY ARGHO        
2252	.$1635	FFADD_SHFARG4
2253	.$1635	ADC #$08
2254	.$1637	BMI FFADD_SHFARG3
2255	.$1639	BEQ FFADD_SHFARG3
2256	.$163b	FFADD_SHFARG6
2257	.$163b	SBC #$08
2258	.$163d	BEQ FFADD_SHFARG2   
2259	.$163f	TAY
2260	.$1640	TXA              
2261	.$1641	FFADD_SHFARG5
2262	.$1641	LSR ARGHO
2263	.$1643	ROR ARGMOH
2264	.$1645	ROR ARGMO
2265	.$1647	ROR ARGLO
2266	.$1649	ROR           
2267	.$164a	INY
2268	.$164b	BNE FFADD_SHFARG5
2269	.$164d	FFADD_MANADD1
2270	.$164d	LDX #ARGEXP      
2271	.$164f	FFADD_MANADD2
2272	.$164f	BIT ARISGN
2273	.$1651	BMI FFADD_MANSUB1   
2274	.$1653	CLC
2275	.$1654	ADC OLDOV
2276	.$1656	STA FACOV
2277	.$1658	LDA FACLO
2278	.$165a	ADC ARGLO
2279	.$165c	STA FACLO
2280	.$165e	LDA FACMO
2281	.$1660	ADC ARGMO
2282	.$1662	STA FACMO
2283	.$1664	LDA FACMOH
2284	.$1666	ADC ARGMOH
2285	.$1668	STA FACMOH
2286	.$166a	LDA FACHO
2287	.$166c	ADC ARGHO
2288	.$166e	STA FACHO
2289	.$1670	BCC FFADD_RNDRTS
2290	.$1672	INC FACEXP
2291	.$1674	BEQ FFADD_OVERR
2293	.$1676	ROR FACHO
2294	.$1678	ROR FACMOH
2295	.$167a	ROR FACMO
2296	.$167c	ROR FACLO
2297	.$167e	ROR FACOV
2298	.$1680	FFADD_RNDRTS
2299	.$1680	RTS
2300	.$1681	FFADD_OVERR
2301	.$1681	JMP ILLEGALQUANTITY
2302	.$1684	FFADD_MANSUB1
2303	.$1684	LDY #FACEXP
2304	.$1686	CPX #ARGEXP
2305	.$1688	BEQ FFADD_MANSUB2
2306	.$168a	LDY #ARGEXP
2307	.$168c	FFADD_MANSUB2
2308	.$168c	SEC              
2309	.$168d	EOR #$FF
2310	.$168f	ADC OLDOV
2311	.$1691	STA FACOV
2312	.$1693	LDA 4,Y
2313	.$1696	SBC 4,X
2314	.$1698	STA FACLO
2315	.$169a	LDA 3,Y
2316	.$169d	SBC 3,X
2317	.$169f	STA FACMO
2318	.$16a1	LDA 2,Y
2319	.$16a4	SBC 2,X
2320	.$16a6	STA FACMOH
2321	.$16a8	LDA 1,Y
2322	.$16ab	SBC 1,X
2323	.$16ad	STA FACHO
2324	.$16af	BCS FCNORMAL
2325	.$16b1	LDA FACSGN
2326	.$16b3	EOR #$FF
2327	.$16b5	STA FACSGN
2328	.$16b7	LDA FACHO
2329	.$16b9	EOR #$FF
2330	.$16bb	STA FACHO
2331	.$16bd	LDA FACMOH
2332	.$16bf	EOR #$FF
2333	.$16c1	STA FACMOH
2334	.$16c3	LDA FACMO
2335	.$16c5	EOR #$FF
2336	.$16c7	STA FACMO
2337	.$16c9	LDA FACLO
2338	.$16cb	EOR #$FF
2339	.$16cd	STA FACLO
2340	.$16cf	LDA FACOV
2341	.$16d1	EOR #$FF
2342	.$16d3	CLC
2343	.$16d4	ADC #1
2344	.$16d6	STA FACOV
2345	.$16d8	BNE FCNORMAL
2346	.$16da	INC FACLO
2347	.$16dc	BNE FCNORMAL
2348	.$16de	INC FACMO
2349	.$16e0	BNE FCNORMAL
2350	.$16e2	INC FACMOH
2351	.$16e4	BNE FCNORMAL
2352	.$16e6	INC FACHO
2353	.$16e8	FCNORMAL   BIT FACHO
2354	.$16ea	BMI FFADD_RET       
2355	.$16ec	LDA #0           
2356	.$16ee	CLC
2357	.$16ef	FFADD_NORM3
2358	.$16ef	LDX FACHO
2359	.$16f1	BNE FFADD_NORM1
2360	.$16f3	LDX FACHO+1
2361	.$16f5	STX FACHO
2362	.$16f7	LDX FACMOH+1
2363	.$16f9	STX FACMOH
2364	.$16fb	LDX FACMO+1
2365	.$16fd	STX FACMO
2366	.$16ff	LDX FACOV
2367	.$1701	STX FACLO
2368	.$1703	LDX #0
2369	.$1705	STX FACOV
2370	.$1707	ADC #$08
2371	.$1709	CMP #$20
2372	.$170b	BNE FFADD_NORM3
2373	.$170d	JMP FFADD_ZEROFAC
2374	.$1710	FFADD_NORM2
2375	.$1710	CLC
2376	.$1711	ADC #1
2377	.$1713	ASL FACOV
2378	.$1715	ROL FACLO
2379	.$1717	ROL FACMO
2380	.$1719	ROL FACMOH
2381	.$171b	ROL FACHO
2382	.$171d	FFADD_NORM1
2383	.$171d	BPL FFADD_NORM2     
2384	.$171f	SEC
2385	.$1720	SBC FACEXP
2386	.$1722	BCS FFADD_ZEROFAC
2387	.$1724	EOR #$FF
2388	.$1726	CLC
2389	.$1727	ADC #1
2390	.$1729	STA FACEXP
2391	.$172b	FFADD_RET   RTS
2392	.$172c	FFADD_ZEROFAC
2393	.$172c	LDX #0
2394	.$172e	STX FACEXP
2395	.$1730	STX FACSGN
2396	.$1732	RTS
2399	.$1733	INITVARS
2400	.$1733	JSR INITSTRVARS
2401	.$1736	LDA #0
2402	.$1738	LDY #4
2403	.$173a	REALINITLOOP0:
2404	.$173a	STA VAR_B,Y
2405	.$173d	STA VAR_TI,Y
2406	.$1740	STA VAR_A,Y
2407	.$1743	DEY
2408	.$1744	BMI REALLOOPEXIT0
2409	.$1746	JMP REALINITLOOP0
2410	.$1749	REALLOOPEXIT0:
2411	.$1749	RTS
2415	.$174a	CONSTANTS
2417	.$174a	CONST_0 .BYTE 12
2418	.$174b	.STRG "{clr}{white}"
2420	.$174d	CONST_1 .BYTE 6
2421	.$174e	.STRG "000000"
2424	.$1754	CONST_2R .REAL 99.0
2427	.$1759	CONST_3R .REAL 1.0
2430	.$175e	CONST_4 .REAL -1.0
2432	.$1763	CONST_5 .BYTE 20
2433	.$1764	.STRG " of beer on the wall"
2435	.$1778	CONST_6 .BYTE 2
2436	.$1779	.STRG ", "
2438	.$177b	CONST_7 .BYTE 34
2439	.$177c	.STRG "take one down and pass it around, "
2442	.$179e	CONST_8R .REAL 0.0
2444	.$17a3	CONST_9 .BYTE 35
2445	.$17a4	.STRG "no more bottles of beer on the wall"
2447	.$17c7	CONST_10 .BYTE 65
2448	.$17c8	.STRG "go to the store and buy some more, 99 bottles of beer on the wall"
2450	.$1809	CONST_11 .BYTE 7
2451	.$180a	.STRG " bottle"
2453	.$1811	CONST_12 .BYTE 1
2454	.$1812	.STRG "s"
2460	.$1813	DATAS
2461	.$1813	.BYTE $FF
2463	.$1814	CONSTANTS_END
2466	.$1814	VARIABLES
2468	.$1814	VAR_B .REAL 0.0
2470	.$1819	VAR_TI .REAL 0.0
2472	.$181e	VAR_A .REAL 0.0
2473	.$1823	STRINGVARS_START
2475	.$1823	VAR_TI$ .WORD EMPTYSTR
2477	.$1825	VAR_T$ .WORD EMPTYSTR
2478	.$1827	STRINGVARS_END
2479	.$1827	STRINGARRAYS_START
2480	.$1827	STRINGARRAYS_END
2481	.$1827	VARIABLES_END
2483	.$1827	Y_REG .REAL 0.0
2484	.$182c	C_REG .REAL 0.0
2485	.$1831	D_REG .REAL 0.0
2486	.$1836	E_REG .REAL 0.0
2487	.$183b	F_REG .REAL 0.0
2488	.$1840	A_REG .WORD 0
2489	.$1842	B_REG .WORD 0
2490	.$1844	CMD_NUM .BYTE 0
2491	.$1845	CHANNEL .BYTE 0
2492	.$1846	SP_SAVE .BYTE 0
2493	.$1847	TMP2_REG .WORD 0
2494	.$1849	TMP3_REG .WORD 0
2495	.$184b	TMP4_REG .WORD 0
2496	.$184d	AS_TMP .WORD 0
2497	.$184f	BPOINTER_TMP .WORD 0
2498	.$1851	BASICTEXTP .BYTE 0
2499	.$1852	STORE1 .WORD 0
2500	.$1854	STORE2 .WORD 0
2501	.$1856	STORE3 .WORD 0
2502	.$1858	STORE4 .WORD 0
2503	.$185a	GCSTART .WORD 0
2504	.$185c	GCLEN .WORD 0
2505	.$185e	GCWORK .WORD 0
2506	.$1860	INPUTLENGTH .BYTE 0
2507	.$1861	TMP_FREG .REAL 0
2508	.$1866	TMP2_FREG .REAL 0
2509	.$186b	TMP_FLAG .BYTE 0
2510	.$186c	INT_FLAG .BYTE 0
2511	.$186d	REAL_CONST_ONE .REAL 1.0
2512	.$1872	REAL_CONST_ZERO .REAL 0.0
2513	.$1877	REAL_CONST_MINUS_ONE .REAL -1.0
2514	.$187c	CHLOCKFLAG .BYTE 0
2515	.$187d	EMPTYSTR .BYTE 0
2516	.$187e	FPSTACKP .WORD FPSTACK
2517	.$1880	FORSTACKP .WORD FORSTACK
2518	.$1882	DATASP .WORD DATAS
2519	.$1884	LASTVAR .WORD 0
2520	.$1886	LASTVARP .WORD 0
2521	.$1888	HIGHP .WORD STRBUF
2522	.$188a	STRBUFP .WORD STRBUF
2523	.$188c	ENDSTRBUF .WORD 0
2524	.$188e	INPUTQUEUEP .BYTE 0
2525	.$188f	PROGRAMEND
2526	.$188f	INPUTQUEUE .ARRAY $0F
2527	.$189e	FPSTACK .ARRAY 100
2528	.$1902	FORSTACK .ARRAY 340
2529	.$1a56	STRBUF .BYTE 0
