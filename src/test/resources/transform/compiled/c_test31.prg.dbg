117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
128	.$81f	LDA #<CONST_0
129	.$821	LDY #>CONST_0
130	.$823	JSR STROUTBRKWL
134	.$826	LINE_20:
136	.$826	JSR LINEBREAK
138	.$829	LINE_30:
140	.$829	LDA #<CONST_1
141	.$82b	LDY #>CONST_1
142	.$82d	JSR STROUTBRKWL
146	.$830	LINE_40:
148	.$830	LDA #<CONST_2
149	.$832	LDY #>CONST_2
150	.$834	JSR STROUTBRKWL
153	.$837	JSR END
154	.$83a	RTS
157	.$83b	END   LDX SP_SAVE
158	.$83e	TXS
165	.$83f	RTS
168	.$840	START  LDA ENDSTRBUF+1
169	.$843	BNE ENDGIVEN
170	.$845	LDA BASICEND
171	.$847	STA ENDSTRBUF
172	.$84a	LDA BASICEND+1
173	.$84c	STA ENDSTRBUF+1
174	.$84f	ENDGIVEN LDA #<FPSTACK
175	.$851	LDY #>FPSTACK
176	.$853	STA FPSTACKP
177	.$856	STY FPSTACKP+1
178	.$859	LDA #<FORSTACK
179	.$85b	LDY #>FORSTACK
180	.$85d	STA FORSTACKP
181	.$860	STY FORSTACKP+1
182	.$863	LDA #<STRBUF
183	.$865	LDY #>STRBUF
184	.$867	STA STRBUFP
185	.$86a	STY STRBUFP+1
186	.$86d	STA HIGHP
187	.$870	STY HIGHP+1
188	.$873	LDA #0
189	.$875	STA CHLOCKFLAG
190	.$878	STA LASTVAR
191	.$87b	STA LASTVAR+1
192	.$87e	JSR INITVARS
193	.$881	LDA #0
194	.$883	STA CMD_NUM
195	.$886	STA CHANNEL
196	.$889	TAY
197	.$88a	TAX
201	.$88b	STA KEYNDX
207	.$88d	JSR RESTORE
208	.$890	CLC
212	.$891	RTS
215	.$892	INITNARRAY
216	.$892	STA TMP_ZP
217	.$894	STY TMP_ZP+1
218	.$896	LDY #0
219	.$898	TYA
220	.$899	NINITLOOP STA (TMP_ZP),Y
221	.$89b	INC TMP_ZP
222	.$89d	BNE NLOOPNOV
223	.$89f	INC TMP_ZP+1
224	.$8a1	NLOOPNOV LDX TMP2_ZP
225	.$8a3	BNE NLOOPNOV2
226	.$8a5	DEC TMP2_ZP+1
227	.$8a7	NLOOPNOV2 DEC TMP2_ZP
228	.$8a9	BNE NINITLOOP
229	.$8ab	LDX TMP2_ZP+1
230	.$8ad	BNE NINITLOOP
231	.$8af	RTS
234	.$8b0	INITSTRARRAY
235	.$8b0	STA TMP_ZP
236	.$8b2	STY TMP_ZP+1
237	.$8b4	SINITLOOP LDY #0
238	.$8b6	LDA #<EMPTYSTR
239	.$8b8	STA (TMP_ZP),Y
240	.$8ba	LDA #>EMPTYSTR
241	.$8bc	INY
242	.$8bd	STA (TMP_ZP),Y
243	.$8bf	CLC
244	.$8c0	LDA TMP_ZP
245	.$8c2	ADC #2
246	.$8c4	STA TMP_ZP
247	.$8c6	BCC SLOOPNOV1
248	.$8c8	INC TMP_ZP+1
249	.$8ca	SLOOPNOV1 SEC
250	.$8cb	LDA TMP2_ZP
251	.$8cd	SBC #2
252	.$8cf	STA TMP2_ZP
253	.$8d1	BCS SLOOPNOV2
254	.$8d3	DEC TMP2_ZP+1
255	.$8d5	SLOOPNOV2 LDA TMP2_ZP
256	.$8d7	BNE SINITLOOP
257	.$8d9	LDA TMP2_ZP+1
258	.$8db	BNE SINITLOOP
259	.$8dd	RTS
262	.$8de	INITSPARAMS STA TMP3_ZP
263	.$8e0	STY TMP3_ZP+1
264	.$8e2	SEC
265	.$8e3	SBC #2
266	.$8e5	STA TMP_ZP
267	.$8e7	TYA
268	.$8e8	SBC #0
269	.$8ea	STA TMP_ZP+1
270	.$8ec	LDY #0
271	.$8ee	LDA (TMP_ZP),Y
272	.$8f0	STA TMP2_ZP
273	.$8f2	INY
274	.$8f3	LDA (TMP_ZP),Y
275	.$8f5	STA TMP2_ZP+1
276	.$8f7	LDA TMP3_ZP
277	.$8f9	LDY TMP3_ZP+1
278	.$8fb	RTS
281	.$8fc	INITSTRVARS LDA #<STRINGVARS_START  
282	.$8fe	LDY #>STRINGVARS_START
283	.$900	CMP #<STRINGVARS_END
284	.$902	BNE INITIT1
285	.$904	CPY #>STRINGVARS_END
286	.$906	BNE INITIT1
287	.$908	JMP INITSA2     
288	.$90b	INITIT1  STA TMP_ZP
289	.$90d	STY TMP_ZP+1
290	.$90f	LDY #0
291	.$911	INITSTRLOOP LDA #<EMPTYSTR
292	.$913	STA (TMP_ZP),Y
293	.$915	INY
294	.$916	LDA #>EMPTYSTR
295	.$918	STA (TMP_ZP),Y
296	.$91a	DEY
297	.$91b	LDA TMP_ZP
298	.$91d	CLC
299	.$91e	ADC #2
300	.$920	STA TMP_ZP
301	.$922	LDA TMP_ZP+1
302	.$924	ADC #0
303	.$926	STA TMP_ZP+1
304	.$928	CMP #>STRINGVARS_END
305	.$92a	BNE INITSTRLOOP
306	.$92c	LDA TMP_ZP
307	.$92e	CMP #<STRINGVARS_END
308	.$930	BNE INITSTRLOOP
309	.$932	INITSA2  LDA #<STRINGARRAYS_START 
310	.$934	LDY #>STRINGARRAYS_START
311	.$936	CMP #<STRINGARRAYS_END
312	.$938	BNE ARRAYLOOP
313	.$93a	CPY #>STRINGARRAYS_END
314	.$93c	BNE ARRAYLOOP
315	.$93e	RTS       
316	.$93f	ARRAYLOOP CLC
317	.$940	ADC #3
318	.$942	BCC ARRAYSKIP1
319	.$944	INY
320	.$945	ARRAYSKIP1 CPY #>STRINGARRAYS_END
321	.$947	BEQ ARRAYSC
322	.$949	BCC ARRAYSKIP2
323	.$94b	JMP ARRAYQUIT
324	.$94e	ARRAYSC  CMP #<STRINGARRAYS_END
325	.$950	BCS ARRAYQUIT
326	.$952	ARRAYSKIP2 STA TMP_REG
327	.$954	STY TMP_REG+1
328	.$956	JSR INITSPARAMS
329	.$959	LDA TMP_REG
330	.$95b	LDY TMP_REG+1
331	.$95d	JSR INITSTRARRAY
332	.$960	LDA TMP_ZP
333	.$962	LDY TMP_ZP+1
334	.$964	JMP ARRAYLOOP
335	.$967	ARRAYQUIT RTS
338	.$968	RESTORE  LDA #<DATAS
339	.$96a	LDY #>DATAS
340	.$96c	STA DATASP
341	.$96f	STY DATASP+1
342	.$972	RTS
345	.$973	REROUTE  LDA CMD_NUM  
346	.$976	BEQ REROUTECMD
347	.$978	TAX
348	.$979	STA CHANNEL
349	.$97c	JMP CHKOUT
350	.$97f	REROUTECMD RTS
353	.$980	RESETROUTE LDA CMD_NUM  
354	.$983	BEQ RESETROUTECMD
355	.$985	JMP CLRCHNEW
356	.$988	RESETROUTECMD
357	.$988	RTS
360	.$989	LINEBREAK JSR REROUTE
361	.$98c	LDA #$0D
362	.$98e	JSR CHROUT
363	.$991	JMP RESETROUTE
366	.$994	STROUTBRKWL STA A_REG
367	.$997	STY A_REG+1
368	.$99a	STROUTBRK JSR REROUTE
369	.$99d	LDA A_REG
370	.$9a0	STA INDEX1
371	.$9a2	LDA A_REG+1
372	.$9a5	STA INDEX1+1
373	.$9a7	LDY #0
374	.$9a9	LDA (INDEX1),Y
375	.$9ab	TAX
376	.$9ac	INC INDEX1
377	.$9ae	BNE PRINTSTR2
378	.$9b0	INC INDEX1+1
379	.$9b2	PRINTSTR2 JSR PRINTSTRS
380	.$9b5	LDA HIGHP   
381	.$9b8	STA STRBUFP
382	.$9bb	LDA HIGHP+1
383	.$9be	STA STRBUFP+1
384	.$9c1	LDA #$0D
385	.$9c3	JSR CHROUT
386	.$9c6	JMP RESETROUTE  
389	.$9c9	CLRCHNEW
390	.$9c9	LDA CHLOCKFLAG
391	.$9cc	BNE SKIPCLRCH
392	.$9ce	JMP CLRCH
393	.$9d1	SKIPCLRCH
394	.$9d1	RTS
508	.$9d2	INITVARS
509	.$9d2	JSR INITSTRVARS
510	.$9d5	LDA #0
511	.$9d7	RTS
515	.$9d8	CONSTANTS
517	.$9d8	CONST_0 .BYTE 11
518	.$9d9	.STRG "hello world"
520	.$9e4	CONST_1 .BYTE 14
521	.$9e5	.STRG "here comes...."
523	.$9f3	CONST_2 .BYTE 3
524	.$9f4	.STRG "a;b"
527	.$9f7	DATAS
528	.$9f7	.BYTE $FF
530	.$9f8	CONSTANTS_END
533	.$9f8	VARIABLES
534	.$9f8	STRINGVARS_START
536	.$9f8	VAR_TI$ .WORD EMPTYSTR
537	.$9fa	STRINGVARS_END
538	.$9fa	STRINGARRAYS_START
539	.$9fa	STRINGARRAYS_END
540	.$9fa	VARIABLES_END
542	.$9fa	Y_REG .REAL 0.0
543	.$9ff	C_REG .REAL 0.0
544	.$a04	D_REG .REAL 0.0
545	.$a09	E_REG .REAL 0.0
546	.$a0e	F_REG .REAL 0.0
547	.$a13	A_REG .WORD 0
548	.$a15	B_REG .WORD 0
549	.$a17	CMD_NUM .BYTE 0
550	.$a18	CHANNEL .BYTE 0
551	.$a19	SP_SAVE .BYTE 0
552	.$a1a	TMP2_REG .WORD 0
553	.$a1c	TMP3_REG .WORD 0
554	.$a1e	TMP4_REG .WORD 0
555	.$a20	AS_TMP .WORD 0
556	.$a22	BPOINTER_TMP .WORD 0
557	.$a24	BASICTEXTP .BYTE 0
558	.$a25	STORE1 .WORD 0
559	.$a27	STORE2 .WORD 0
560	.$a29	STORE3 .WORD 0
561	.$a2b	STORE4 .WORD 0
562	.$a2d	GCSTART .WORD 0
563	.$a2f	GCLEN .WORD 0
564	.$a31	GCWORK .WORD 0
565	.$a33	INPUTLENGTH .BYTE 0
566	.$a34	TMP_FREG .REAL 0
567	.$a39	TMP2_FREG .REAL 0
568	.$a3e	TMP_FLAG .BYTE 0
569	.$a3f	INT_FLAG .BYTE 0
570	.$a40	REAL_CONST_ONE .REAL 1.0
571	.$a45	REAL_CONST_ZERO .REAL 0.0
572	.$a4a	REAL_CONST_MINUS_ONE .REAL -1.0
573	.$a4f	CHLOCKFLAG .BYTE 0
574	.$a50	EMPTYSTR .BYTE 0
575	.$a51	FPSTACKP .WORD FPSTACK
576	.$a53	FORSTACKP .WORD FORSTACK
577	.$a55	DATASP .WORD DATAS
578	.$a57	LASTVAR .WORD 0
579	.$a59	LASTVARP .WORD 0
580	.$a5b	HIGHP .WORD STRBUF
581	.$a5d	STRBUFP .WORD STRBUF
582	.$a5f	ENDSTRBUF .WORD 0
583	.$a61	INPUTQUEUEP .BYTE 0
584	.$a62	PROGRAMEND
585	.$a62	INPUTQUEUE .ARRAY $0F
586	.$a71	FPSTACK .ARRAY 100
587	.$ad5	FORSTACK .ARRAY 340
588	.$c29	STRBUF .BYTE 0
