117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
128	.$81f	LDA #<CONST_0R
129	.$821	LDY #>CONST_0R
130	.$823	JSR REALFACPUSH
132	.$826	LDA #<CONST_0R
133	.$828	LDY #>CONST_0R
134	.$82a	JSR REALFACPUSH
136	.$82d	LDA #<CONST_1R
137	.$82f	LDY #>CONST_1R
138	.$831	JSR REALFACPUSH
140	.$834	JSR COMPACTMAX
141	.$837	LDA #0
142	.$839	JSR CHRINT
144	.$83c	LDA A_REG
145	.$83f	LDY A_REG+1
146	.$842	STA TMP_ZP
147	.$844	STY TMP_ZP+1
148	.$846	JSR PUSHINT
150	.$849	LDA #8
151	.$84b	JSR CHRINT
153	.$84e	JSR POPINT2B
155	.$851	JSR CONCAT
156	.$854	LDY A_REG
157	.$857	LDA A_REG+1
158	.$85a	STY G_REG
159	.$85c	STA G_REG+1
160	.$85e	JSR POPREAL
161	.$861	LDX #<D_REG
162	.$863	LDY #>D_REG
164	.$865	JSR FACMEM
165	.$868	JSR POPREAL
166	.$86b	LDX #<C_REG
167	.$86d	LDY #>C_REG
169	.$86f	JSR FACMEM
170	.$872	JSR POPREALXREG
173	.$875	LDA #<CONST_3R
174	.$877	LDY #>CONST_3R
175	.$879	JSR COPY2_XYA_YREG
179	.$87c	JSR OPEN
181	.$87f	LINE_15:
184	.$87f	LINE_20:
186	.$87f	LDA #<CONST_0R
187	.$881	LDY #>CONST_0R
188	.$883	JSR COPY2_XYA_CREG
192	.$886	JSR GETSTRCHANNEL
193	.$889	LDA A_REG
194	.$88c	LDY A_REG+1
195	.$88f	STA TMP_ZP
196	.$891	STY TMP_ZP+1
197	.$893	LDA #<VAR_A$
198	.$895	LDY #>VAR_A$
199	.$897	JSR COPYSTRING
200	.$89a	LDA VAR_A$
201	.$89d	LDY VAR_A$+1
202	.$8a0	JSR STROUTWL
205	.$8a3	LINE_30:
207	.$8a3	JSR GETADOLLAR
209	.$8a6	LDA VAR_A$
210	.$8a9	LDY VAR_A$+1
211	.$8ac	JSR STROUTWL
213	.$8af	LDA #<CONST_4
214	.$8b1	LDY #>CONST_4
215	.$8b3	STA B_REG
216	.$8b6	STY B_REG+1
217	.$8b9	LDA VAR_A$
218	.$8bc	LDY VAR_A$+1
219	.$8bf	STA A_REG
220	.$8c2	STY A_REG+1
222	.$8c5	JSR SNEQ
223	.$8c8	LDA X_REG
224	.$8ca	COMP_SKP0:
225	.$8ca	BEQ LINE_SKIP2
228	.$8cc	LINE_NSKIP2:
230	.$8cc	JSR COMPACTMAX
231	.$8cf	LDA VAR_A$
232	.$8d2	LDY VAR_A$+1
233	.$8d5	STA B_REG
234	.$8d8	STY B_REG+1
235	.$8db	LDA VAR_S$
236	.$8de	LDY VAR_S$+1
237	.$8e1	STA A_REG
238	.$8e4	STY A_REG+1
239	.$8e7	JSR CONCAT
241	.$8ea	LDA A_REG
242	.$8ed	LDY A_REG+1
243	.$8f0	STA TMP_ZP
244	.$8f2	STY TMP_ZP+1
245	.$8f4	LDA #<VAR_S$
246	.$8f6	LDY #>VAR_S$
247	.$8f8	JSR COPYSTRING
249	.$8fb	LINE_SKIP2:
252	.$8fb	LINE_40:
254	.$8fb	JSR COMPACTMAX
255	.$8fe	LDA #13
256	.$900	JSR CHRINTB
258	.$903	LDA VAR_A$
259	.$906	LDY VAR_A$+1
260	.$909	STA A_REG
261	.$90c	STY A_REG+1
263	.$90f	JSR SEQ
264	.$912	LDA X_REG
265	.$914	COMP_SKP1:
266	.$914	BNE LINE_NSKIP3
268	.$916	JMP LINE_SKIP3
270	.$919	LINE_NSKIP3:
272	.$919	JSR LOCKCHANNEL
273	.$91c	LDA #<CONST_0R
274	.$91e	LDY #>CONST_0R
275	.$920	JSR REALFACPUSH
277	.$923	LDA VAR_S$
278	.$926	LDY VAR_S$+1
279	.$929	STA A_REG
280	.$92c	STY A_REG+1
281	.$92f	JSR POPREAL
282	.$932	LDX #<C_REG
283	.$934	LDY #>C_REG
285	.$936	JSR FACMEM
286	.$939	JSR STROUTCHANNEL
287	.$93c	JSR UNLOCKCHANNEL
288	.$93f	LDA #<EMPTYSTR
289	.$941	LDY #>EMPTYSTR
290	.$943	STA VAR_S$
291	.$946	STY VAR_S$+1
295	.$949	LINE_SKIP3:
298	.$949	LINE_50:
300	.$949	JMP LINE_20
301	.$94c	JSR END
302	.$94f	RTS
305	.$950	END   LDX SP_SAVE
306	.$953	TXS
313	.$954	RTS
316	.$955	START  LDA ENDSTRBUF+1
317	.$958	BNE ENDGIVEN
318	.$95a	LDA BASICEND
319	.$95c	STA ENDSTRBUF
320	.$95f	LDA BASICEND+1
321	.$961	STA ENDSTRBUF+1
322	.$964	ENDGIVEN LDA #<FPSTACK
323	.$966	LDY #>FPSTACK
324	.$968	STA FPSTACKP
325	.$96b	STY FPSTACKP+1
326	.$96e	LDA #<FORSTACK
327	.$970	LDY #>FORSTACK
328	.$972	STA FORSTACKP
329	.$975	STY FORSTACKP+1
330	.$978	LDA #<STRBUF
331	.$97a	LDY #>STRBUF
332	.$97c	STA STRBUFP
333	.$97f	STY STRBUFP+1
334	.$982	STA HIGHP
335	.$985	STY HIGHP+1
336	.$988	LDA #0
337	.$98a	STA CHLOCKFLAG
338	.$98d	STA LASTVAR
339	.$990	STA LASTVAR+1
340	.$993	JSR INITVARS
341	.$996	LDA #0
342	.$998	STA CMD_NUM
343	.$99b	STA CHANNEL
344	.$99e	TAY
345	.$99f	TAX
349	.$9a0	STA KEYNDX
355	.$9a2	JSR RESTORE
356	.$9a5	CLC
360	.$9a6	RTS
363	.$9a7	INITNARRAY
364	.$9a7	STA TMP_ZP
365	.$9a9	STY TMP_ZP+1
366	.$9ab	LDY #0
367	.$9ad	TYA
368	.$9ae	NINITLOOP STA (TMP_ZP),Y
369	.$9b0	INC TMP_ZP
370	.$9b2	BNE NLOOPNOV
371	.$9b4	INC TMP_ZP+1
372	.$9b6	NLOOPNOV LDX TMP2_ZP
373	.$9b8	BNE NLOOPNOV2
374	.$9ba	DEC TMP2_ZP+1
375	.$9bc	NLOOPNOV2 DEC TMP2_ZP
376	.$9be	BNE NINITLOOP
377	.$9c0	LDX TMP2_ZP+1
378	.$9c2	BNE NINITLOOP
379	.$9c4	RTS
382	.$9c5	INITSTRARRAY
383	.$9c5	STA TMP_ZP
384	.$9c7	STY TMP_ZP+1
385	.$9c9	SINITLOOP LDY #0
386	.$9cb	LDA #<EMPTYSTR
387	.$9cd	STA (TMP_ZP),Y
388	.$9cf	LDA #>EMPTYSTR
389	.$9d1	INY
390	.$9d2	STA (TMP_ZP),Y
391	.$9d4	CLC
392	.$9d5	LDA TMP_ZP
393	.$9d7	ADC #2
394	.$9d9	STA TMP_ZP
395	.$9db	BCC SLOOPNOV1
396	.$9dd	INC TMP_ZP+1
397	.$9df	SLOOPNOV1 SEC
398	.$9e0	LDA TMP2_ZP
399	.$9e2	SBC #2
400	.$9e4	STA TMP2_ZP
401	.$9e6	BCS SLOOPNOV2
402	.$9e8	DEC TMP2_ZP+1
403	.$9ea	SLOOPNOV2 LDA TMP2_ZP
404	.$9ec	BNE SINITLOOP
405	.$9ee	LDA TMP2_ZP+1
406	.$9f0	BNE SINITLOOP
407	.$9f2	RTS
410	.$9f3	INITSPARAMS STA TMP3_ZP
411	.$9f5	STY TMP3_ZP+1
412	.$9f7	SEC
413	.$9f8	SBC #2
414	.$9fa	STA TMP_ZP
415	.$9fc	TYA
416	.$9fd	SBC #0
417	.$9ff	STA TMP_ZP+1
418	.$a01	LDY #0
419	.$a03	LDA (TMP_ZP),Y
420	.$a05	STA TMP2_ZP
421	.$a07	INY
422	.$a08	LDA (TMP_ZP),Y
423	.$a0a	STA TMP2_ZP+1
424	.$a0c	LDA TMP3_ZP
425	.$a0e	LDY TMP3_ZP+1
426	.$a10	RTS
429	.$a11	INITSTRVARS LDA #<STRINGVARS_START  
430	.$a13	LDY #>STRINGVARS_START
431	.$a15	CMP #<STRINGVARS_END
432	.$a17	BNE INITIT1
433	.$a19	CPY #>STRINGVARS_END
434	.$a1b	BNE INITIT1
435	.$a1d	JMP INITSA2     
436	.$a20	INITIT1  STA TMP_ZP
437	.$a22	STY TMP_ZP+1
438	.$a24	LDY #0
439	.$a26	INITSTRLOOP LDA #<EMPTYSTR
440	.$a28	STA (TMP_ZP),Y
441	.$a2a	INY
442	.$a2b	LDA #>EMPTYSTR
443	.$a2d	STA (TMP_ZP),Y
444	.$a2f	DEY
445	.$a30	LDA TMP_ZP
446	.$a32	CLC
447	.$a33	ADC #2
448	.$a35	STA TMP_ZP
449	.$a37	LDA TMP_ZP+1
450	.$a39	ADC #0
451	.$a3b	STA TMP_ZP+1
452	.$a3d	CMP #>STRINGVARS_END
453	.$a3f	BNE INITSTRLOOP
454	.$a41	LDA TMP_ZP
455	.$a43	CMP #<STRINGVARS_END
456	.$a45	BNE INITSTRLOOP
457	.$a47	INITSA2  LDA #<STRINGARRAYS_START 
458	.$a49	LDY #>STRINGARRAYS_START
459	.$a4b	CMP #<STRINGARRAYS_END
460	.$a4d	BNE ARRAYLOOP
461	.$a4f	CPY #>STRINGARRAYS_END
462	.$a51	BNE ARRAYLOOP
463	.$a53	RTS       
464	.$a54	ARRAYLOOP CLC
465	.$a55	ADC #3
466	.$a57	BCC ARRAYSKIP1
467	.$a59	INY
468	.$a5a	ARRAYSKIP1 CPY #>STRINGARRAYS_END
469	.$a5c	BEQ ARRAYSC
470	.$a5e	BCC ARRAYSKIP2
471	.$a60	JMP ARRAYQUIT
472	.$a63	ARRAYSC  CMP #<STRINGARRAYS_END
473	.$a65	BCS ARRAYQUIT
474	.$a67	ARRAYSKIP2 STA TMP_REG
475	.$a69	STY TMP_REG+1
476	.$a6b	JSR INITSPARAMS
477	.$a6e	LDA TMP_REG
478	.$a70	LDY TMP_REG+1
479	.$a72	JSR INITSTRARRAY
480	.$a75	LDA TMP_ZP
481	.$a77	LDY TMP_ZP+1
482	.$a79	JMP ARRAYLOOP
483	.$a7c	ARRAYQUIT RTS
486	.$a7d	RESTORE  LDA #<DATAS
487	.$a7f	LDY #>DATAS
488	.$a81	STA DATASP
489	.$a84	STY DATASP+1
490	.$a87	RTS
493	.$a88	CONCAT  LDA A_REG
494	.$a8b	STA TMP_ZP
495	.$a8d	LDA A_REG+1
496	.$a90	STA TMP_ZP+1
497	.$a92	LDA STRBUFP  
498	.$a95	STA A_REG
499	.$a98	STA TMP3_ZP
500	.$a9a	LDA STRBUFP+1
501	.$a9d	STA A_REG+1
502	.$aa0	STA TMP3_ZP+1
503	.$aa2	LDY #0
504	.$aa4	LDA (TMP_ZP),Y
505	.$aa6	TAX
506	.$aa7	LDA B_REG
507	.$aaa	STA TMP2_ZP
508	.$aac	LDA B_REG+1
509	.$aaf	STA TMP2_ZP+1
510	.$ab1	TXA
511	.$ab2	CLC
512	.$ab3	ADC (TMP2_ZP),Y
513	.$ab5	BCC CCSTRFITS
514	.$ab7	JMP STRINGTOOLONG
515	.$aba	CCSTRFITS STA (TMP3_ZP),Y
516	.$abc	INC TMP3_ZP
517	.$abe	BNE CCNOOV2
518	.$ac0	INC TMP3_ZP+1
519	.$ac2	CCNOOV2  CLC
520	.$ac3	ADC STRBUFP
521	.$ac6	PHP
522	.$ac7	CLC
523	.$ac8	ADC #3
524	.$aca	STA STRBUFP
525	.$acd	BCC CCNOCS1
526	.$acf	INC STRBUFP+1
527	.$ad2	CCNOCS1  PLP
528	.$ad3	BCC CCSTRFITS2
529	.$ad5	INC STRBUFP+1
530	.$ad8	CCSTRFITS2 JSR COPY2CONCAT  
531	.$adb	LDA B_REG   
532	.$ade	STA TMP_ZP
533	.$ae0	LDA B_REG+1
534	.$ae3	STA TMP_ZP+1
535	.$ae5	JMP COPY2CONCAT  
538	.$ae8	COPY2CONCAT LDY #0
539	.$aea	LDA (TMP_ZP),Y
540	.$aec	BEQ NOC2C   
541	.$aee	STA TMP2_ZP
542	.$af0	INC TMP_ZP
543	.$af2	BNE COPY2LOOP
544	.$af4	INC TMP_ZP+1
545	.$af6	COPY2LOOP LDA (TMP_ZP),Y
546	.$af8	STA (TMP3_ZP),Y
547	.$afa	INY
548	.$afb	CPY TMP2_ZP
549	.$afd	BNE COPY2LOOP
550	.$aff	TYA
551	.$b00	CLC
552	.$b01	ADC TMP3_ZP   
553	.$b03	STA TMP3_ZP
554	.$b05	BCC NOC2C
555	.$b07	INC TMP3_ZP+1
556	.$b09	NOC2C  RTS
559	.$b0a	CHRINTB  JSR CHRINT
560	.$b0d	LDY A_REG
561	.$b10	LDA A_REG+1
562	.$b13	STY B_REG
563	.$b16	STA B_REG+1
564	.$b19	RTS
567	.$b1a	CHRINT  TAX
568	.$b1b	LDA STRBUFP
569	.$b1e	STA TMP_ZP
570	.$b20	STA A_REG
571	.$b23	LDA STRBUFP+1
572	.$b26	STA TMP_ZP+1
573	.$b28	STA A_REG+1
574	.$b2b	LDA #1
575	.$b2d	LDY #0
576	.$b2f	STA (TMP_ZP),Y
577	.$b31	TXA
578	.$b32	INY
579	.$b33	STA (TMP_ZP),Y
580	.$b35	LDA STRBUFP
581	.$b38	CLC
582	.$b39	ADC #2
583	.$b3b	STA STRBUFP
584	.$b3e	BCC NOCHR2
585	.$b40	INC STRBUFP+1
586	.$b43	NOCHR2  RTS
589	.$b44	SAVEPOINTERS
590	.$b44	LDA TMP_ZP   
591	.$b46	STA STORE1
592	.$b49	LDA TMP_ZP+1
593	.$b4b	STA STORE1+1
594	.$b4e	LDA TMP2_ZP
595	.$b50	STA STORE2
596	.$b53	LDA TMP2_ZP+1
597	.$b55	STA STORE2+1
598	.$b58	LDA TMP3_ZP
599	.$b5a	STA STORE3
600	.$b5d	LDA TMP3_ZP+1
601	.$b5f	STA STORE3+1
602	.$b62	RTS
605	.$b63	RESTOREPOINTERS
606	.$b63	LDA STORE3+1  
607	.$b66	STA TMP3_ZP+1
608	.$b68	LDA STORE3
609	.$b6b	STA TMP3_ZP
610	.$b6d	LDA STORE2+1
611	.$b70	STA TMP2_ZP+1
612	.$b72	LDA STORE2
613	.$b75	STA TMP2_ZP
614	.$b77	LDA STORE1+1
615	.$b7a	STA TMP_ZP+1
616	.$b7c	LDA STORE1
617	.$b7f	STA TMP_ZP
618	.$b81	RTS
625	.$b82	COMPACTMAX
626	.$b82	LDA #$FF
627	.$b84	LDY #$0
628	.$b86	JMP COMPACTF
631	.$b89	COMPACT
632	.$b89	LDY #0
633	.$b8b	GCBUFNE  LDA (TMP_ZP),Y  
634	.$b8d	COMPACTF STA TMP4_REG  
635	.$b90	LDY STRBUFP+1  
636	.$b93	STY TMP4_REG+1  
637	.$b96	INY     
638	.$b97	BEQ ENDMEM   
639	.$b99	CPY ENDSTRBUF+1  
640	.$b9c	BCC RGCEXIT   
641	.$b9e	ENDMEM  LDA STRBUFP
642	.$ba1	CLC
643	.$ba2	ADC TMP4_REG
644	.$ba5	STA TMP4_REG
645	.$ba8	BCC RGCNOOV1
646	.$baa	INC TMP4_REG+1
647	.$bad	RGCNOOV1 CLC
648	.$bae	LDA TMP4_REG
649	.$bb1	ADC #3
650	.$bb3	STA TMP4_REG
651	.$bb6	BCC RGCNOOV2
652	.$bb8	INC TMP4_REG+1
653	.$bbb	RGCNOOV2 LDA TMP4_REG+1  
654	.$bbe	CMP ENDSTRBUF+1
655	.$bc1	BEQ RGCLOW1
656	.$bc3	BCS GCEXECOMP  
657	.$bc5	JMP RGCEXIT
658	.$bc8	RGCLOW1  LDA TMP4_REG
659	.$bcb	CMP ENDSTRBUF
660	.$bce	BCS GCEXECOMP  
661	.$bd0	RGCEXIT  RTS     
662	.$bd1	GCEXECOMP LDA STRBUFP
663	.$bd4	STA STORE4
664	.$bd7	LDA STRBUFP+1
665	.$bda	STA STORE4+1
666	.$bdd	JSR GCEXE
667	.$be0	JMP CHECKMEMORY
670	.$be3	GCEXE  JSR SAVEPOINTERS
671	.$be6	LDA #0
672	.$be8	STA LASTVAR
673	.$beb	STA LASTVAR+1  
674	.$bee	LDA #<STRBUF
675	.$bf0	STA TMP_ZP
676	.$bf2	STA GCSTART
677	.$bf5	LDA #>STRBUF
678	.$bf7	STA TMP_ZP+1  
679	.$bf9	STA GCSTART+1
680	.$bfc	GCLOOP  LDY #0
681	.$bfe	LDA TMP_ZP
682	.$c00	STA GCWORK
683	.$c03	LDA TMP_ZP+1
684	.$c05	STA GCWORK+1  
685	.$c08	LDA (TMP_ZP),Y
686	.$c0a	STA GCLEN   
687	.$c0d	INC TMP_ZP
688	.$c0f	BNE GCLOOPNOOV
689	.$c11	INC TMP_ZP+1
690	.$c13	GCLOOPNOOV LDA TMP_ZP
691	.$c15	CLC
692	.$c16	ADC GCLEN
693	.$c19	STA TMP_ZP
694	.$c1b	BCC GCLOOPNOOV2
695	.$c1d	INC TMP_ZP+1  
696	.$c1f	GCLOOPNOOV2 LDY #0
697	.$c21	LDA (TMP_ZP),Y
698	.$c23	STA TMP2_ZP
699	.$c25	INY
700	.$c26	LDA (TMP_ZP),Y
701	.$c28	STA TMP2_ZP+1  
702	.$c2a	LDA TMP_ZP
703	.$c2c	CLC
704	.$c2d	ADC #2
705	.$c2f	STA TMP_ZP
706	.$c31	BCC GCLOOPNOOV3
707	.$c33	INC TMP_ZP+1  
708	.$c35	GCLOOPNOOV3 LDY #0
709	.$c37	LDA (TMP2_ZP),Y
710	.$c39	CMP GCWORK
711	.$c3c	BNE GCKLOOP
712	.$c3e	INY
713	.$c3f	LDA (TMP2_ZP),Y
714	.$c41	CMP GCWORK+1
715	.$c44	BEQ MEMFREE
716	.$c46	GCKLOOP  LDA TMP_ZP+1  
717	.$c48	CMP HIGHP+1
718	.$c4b	BEQ GCHECKLOW
719	.$c4d	BCC GCLOOP
720	.$c4f	JMP GCDONE
721	.$c52	GCHECKLOW LDA TMP_ZP
722	.$c54	CMP HIGHP
723	.$c57	BCS GCDONE
724	.$c59	JMP GCLOOP
725	.$c5c	MEMFREE  LDA GCSTART   
726	.$c5f	CMP GCWORK   
727	.$c62	BNE COPYDOWN
728	.$c64	LDA GCSTART+1
729	.$c67	CMP GCWORK+1
730	.$c6a	BNE COPYDOWN
731	.$c6c	LDA TMP_ZP   
732	.$c6e	STA GCSTART
733	.$c71	LDA TMP_ZP+1
734	.$c73	STA GCSTART+1
735	.$c76	JMP GCKLOOP   
736	.$c79	COPYDOWN LDA GCSTART   
737	.$c7c	STA TMP_REG
738	.$c7e	LDA GCSTART+1
739	.$c81	STA TMP_REG+1  
740	.$c83	LDA GCWORK
741	.$c86	STA TMP2_REG
742	.$c89	LDA GCWORK+1
743	.$c8c	STA TMP2_REG+1  
744	.$c8f	LDA TMP_ZP
745	.$c91	SEC
746	.$c92	SBC GCWORK
747	.$c95	STA TMP3_REG
748	.$c98	LDA TMP_ZP+1
749	.$c9a	SBC GCWORK+1
750	.$c9d	STA TMP3_REG+1  
751	.$ca0	LDA GCSTART
752	.$ca3	CLC
753	.$ca4	ADC TMP3_REG
754	.$ca7	STA GCSTART
755	.$caa	LDA GCSTART+1
756	.$cad	ADC TMP3_REG+1
757	.$cb0	STA GCSTART+1  
758	.$cb3	JSR QUICKCOPY  
759	.$cb6	LDY #0
760	.$cb8	LDA TMP_REG
761	.$cba	STA (TMP2_ZP),Y
762	.$cbc	INY
763	.$cbd	LDA TMP_REG+1
764	.$cbf	STA (TMP2_ZP),Y  
765	.$cc1	JMP GCKLOOP
766	.$cc4	GCDONE  LDA GCSTART
767	.$cc7	STA HIGHP
768	.$cca	STA STRBUFP
769	.$ccd	LDA GCSTART+1
770	.$cd0	STA HIGHP+1
771	.$cd3	STA STRBUFP+1  
772	.$cd6	GCSKIP  JSR RESTOREPOINTERS
773	.$cd9	RTS     
776	.$cda	CHECKMEMORY
777	.$cda	LDA STRBUFP+1  
778	.$cdd	CMP STORE4+1  
779	.$ce0	BCC STILLFITSCM  
783	.$ce2	BEQ CHECKMEMLOWCM
784	.$ce4	JMP OUTOFMEMORY  
785	.$ce7	CHECKMEMLOWCM
786	.$ce7	LDA STRBUFP   
787	.$cea	CMP STORE4
788	.$ced	BCC STILLFITSCM
789	.$cef	JMP OUTOFMEMORY  
790	.$cf2	STILLFITSCM RTS
793	.$cf3	QUICKCOPY LDA TMP_REG  
794	.$cf5	STA TMEM+1
795	.$cf8	LDA TMP_REG+1
796	.$cfa	STA TMEM+2
797	.$cfd	LDA TMP2_REG
798	.$d00	STA SMEM+1
799	.$d03	LDA TMP2_REG+1
800	.$d06	STA SMEM+2
801	.$d09	LDY #$0
802	.$d0b	LDX TMP3_REG
803	.$d0e	BNE QCLOOP
804	.$d10	LDA TMP3_REG+1
805	.$d13	BEQ QCEXIT  
806	.$d15	QCLOOP
807	.$d15	SMEM  LDA $0000,Y
808	.$d18	TMEM  STA $0000,Y
809	.$d1b	INY
810	.$d1c	BNE YNOOV
811	.$d1e	INC TMEM+2
812	.$d21	INC SMEM+2
813	.$d24	YNOOV  DEX
814	.$d25	BNE QCLOOP
815	.$d27	LDA TMP3_REG+1
816	.$d2a	BEQ QCEXIT
817	.$d2c	DEC TMP3_REG+1
818	.$d2f	JMP QCLOOP
819	.$d32	QCEXIT  RTS
822	.$d33	COPYSTRING STA TMP2_ZP
823	.$d35	STY TMP2_ZP+1
824	.$d37	CPY TMP_ZP+1
825	.$d39	BNE CONTCOPY
826	.$d3b	LDA TMP2_ZP
827	.$d3d	CMP TMP_ZP
828	.$d3f	BNE CONTCOPY
829	.$d41	RTS     
830	.$d42	CONTCOPY JSR COMPACT   
831	.$d45	LDY #0
832	.$d47	STY TMP_FLAG
833	.$d4a	LDA (TMP_ZP),Y
834	.$d4c	BNE NOTEMPTYSTR
835	.$d4e	LDA #<EMPTYSTR  
836	.$d50	STA TMP_ZP
837	.$d52	LDA #>EMPTYSTR
838	.$d54	STA TMP_ZP+1
839	.$d56	JMP ISCONST
840	.$d59	NOTEMPTYSTR TAX     
841	.$d5a	LDA (TMP2_ZP),Y
842	.$d5c	STA TMP3_ZP
843	.$d5e	INY
844	.$d5f	LDA (TMP2_ZP),Y
845	.$d61	STA TMP3_ZP+1
846	.$d63	DEY
847	.$d64	LDA TMP_ZP+1  
848	.$d66	CMP #>CONSTANTS_END
849	.$d68	BEQ CHECKLOW1
850	.$d6a	BCS INVAR
851	.$d6c	JMP CHECKNEXT
852	.$d6f	CHECKLOW1 LDA TMP_ZP
853	.$d71	CMP #<CONSTANTS_END
854	.$d73	BCS INVAR
855	.$d75	CHECKNEXT LDA TMP_ZP+1  
856	.$d77	CMP #>CONSTANTS
857	.$d79	BEQ CHECKLOW3
858	.$d7b	BCC INVAR
859	.$d7d	JMP ISCONST
860	.$d80	CHECKLOW3 LDA TMP_ZP
861	.$d82	CMP #<CONSTANTS
862	.$d84	BCC INVAR   
863	.$d86	ISCONST  JSR CHECKLASTVAR 
864	.$d89	LDA TMP_ZP
865	.$d8b	STA (TMP2_ZP),Y  
866	.$d8d	INY
867	.$d8e	LDA TMP_ZP+1
868	.$d90	STA (TMP2_ZP),Y
869	.$d92	LDA HIGHP   
870	.$d95	STA STRBUFP
871	.$d98	LDA HIGHP+1
872	.$d9b	STA STRBUFP+1
873	.$d9e	RTS
874	.$d9f	INVAR  INY
875	.$da0	LDA (TMP2_ZP),Y  
876	.$da2	CMP #>CONSTANTS_END
877	.$da4	BEQ CHECKLOW2
878	.$da6	BCS INVAR2
879	.$da8	JMP PUPDATEPTR
880	.$dab	CHECKLOW2 DEY
881	.$dac	LDA (TMP2_ZP),Y
882	.$dae	CMP #<CONSTANTS_END
883	.$db0	BCS INVAR2
884	.$db2	JMP PUPDATEPTR
885	.$db5	INVAR2  LDY #0   
886	.$db7	LDA (TMP3_ZP),Y
887	.$db9	STA TMP_REG
888	.$dbb	TXA
889	.$dbc	CMP TMP_REG  
890	.$dbe	BEQ UPDATEHP2 
893	.$dc0	PUPDATEPTR JSR CHECKLASTVAR
894	.$dc3	LDY #1   
895	.$dc5	STY TMP_FLAG 
896	.$dc8	JMP UPDATEPTR 
897	.$dcb	UPDATEHP2 LDA HIGHP  
898	.$dce	STA STRBUFP
899	.$dd1	LDA HIGHP+1
900	.$dd4	STA STRBUFP+1
901	.$dd7	JMP STRFITS
902	.$dda	COPYONLY LDY #0
903	.$ddc	STY TMP_FLAG
904	.$ddf	JMP CHECKMEM
905	.$de2	ALTCOPY  JMP COPYSTRING2
906	.$de5	UPDATEPTR LDA TMP_ZP+1 
907	.$de7	CMP HIGHP+1  
908	.$dea	BEQ CHECKXT1
909	.$dec	BCS ALTCOPY
910	.$dee	JMP CHECKMEM
911	.$df1	CHECKXT1 LDA TMP_ZP
912	.$df3	CMP HIGHP
913	.$df6	BCS ALTCOPY
914	.$df8	CHECKMEM
915	.$df8	MEMOK  LDY #0
916	.$dfa	LDA STRBUFP  
917	.$dfd	STA (TMP2_ZP),Y 
918	.$dff	STA TMP3_ZP
919	.$e01	LDA STRBUFP+1
920	.$e04	INY
921	.$e05	STA (TMP2_ZP),Y
922	.$e07	STA TMP3_ZP+1
923	.$e09	TXA
924	.$e0a	CLC
925	.$e0b	ADC STRBUFP
926	.$e0e	PHP
927	.$e0f	CLC
928	.$e10	ADC #3
929	.$e12	STA STRBUFP
930	.$e15	BCC NOCS1
931	.$e17	INC STRBUFP+1
932	.$e1a	NOCS1  PLP
933	.$e1b	BCC STRFITS
934	.$e1d	INC STRBUFP+1
935	.$e20	STRFITS  LDY TMP_FLAG 
936	.$e23	BEQ NOHPUPDATE 
937	.$e25	LDA HIGHP+1
938	.$e28	CMP STRBUFP+1
939	.$e2b	BCC UPDATEHIGHP
940	.$e2d	BEQ CHECKNEXTHP
941	.$e2f	JMP NOHPUPDATE
942	.$e32	CHECKNEXTHP LDA HIGHP
943	.$e35	CMP STRBUFP
944	.$e38	BCC UPDATEHIGHP
945	.$e3a	JMP NOHPUPDATE
946	.$e3d	UPDATEHIGHP LDA STRBUFP
947	.$e40	STA HIGHP
948	.$e43	LDA STRBUFP+1
949	.$e46	STA HIGHP+1  
950	.$e49	JSR REMEMBERLASTVAR
951	.$e4c	JSR STOREVARREF
952	.$e4f	NOHPUPDATE LDY #0
953	.$e51	LDA (TMP_ZP),Y 
954	.$e53	STA (TMP3_ZP),Y
955	.$e55	TAY    
956	.$e56	BEQ EXITCOPY 
957	.$e58	LOOP  LDA (TMP_ZP),Y 
958	.$e5a	STA (TMP3_ZP),Y
959	.$e5c	DEY
960	.$e5d	BNE LOOP
961	.$e5f	EXITCOPY RTS
966	.$e60	COPYSTRING2 LDY #0
967	.$e62	LDA (TMP_ZP),Y
968	.$e64	STA TMP_REG
969	.$e66	TAX
970	.$e67	LDA HIGHP
971	.$e6a	STA TMP3_ZP
972	.$e6c	STA (TMP2_ZP),Y
973	.$e6e	LDA HIGHP+1
974	.$e71	STA TMP3_ZP+1
975	.$e73	INY
976	.$e74	STA (TMP2_ZP),Y
977	.$e76	JSR REMEMBERLASTVAR
980	.$e79	LDA TMP_ZP
981	.$e7b	CMP TMP3_ZP
982	.$e7d	BNE DOLOOP
983	.$e7f	LDA TMP_ZP+1
984	.$e81	CMP TMP3_ZP+1
985	.$e83	BEQ SKIPCP2
986	.$e85	DOLOOP  DEY
987	.$e86	TXA
988	.$e87	STA (TMP3_ZP),Y
989	.$e89	INY
990	.$e8a	ASLOOP  LDA (TMP_ZP),Y
991	.$e8c	STA (TMP3_ZP),Y
992	.$e8e	INY
993	.$e8f	DEX
994	.$e90	BNE ASLOOP
995	.$e92	SKIPCP2  LDA HIGHP
996	.$e95	CLC
997	.$e96	ADC TMP_REG
998	.$e98	PHP
999	.$e99	CLC
1000	.$e9a	ADC #3
1001	.$e9c	STA HIGHP
1002	.$e9f	STA STRBUFP
1003	.$ea2	BCC SKIPLOWAS1
1004	.$ea4	INC HIGHP+1
1005	.$ea7	SKIPLOWAS1 PLP
1006	.$ea8	BCC SKIPLOWAS2
1007	.$eaa	INC HIGHP+1
1008	.$ead	SKIPLOWAS2 LDA HIGHP+1
1009	.$eb0	STA STRBUFP+1
1010	.$eb3	JSR STOREVARREF
1011	.$eb6	RTS
1015	.$eb7	CHECKLASTVAR
1016	.$eb7	LDA TMP2_ZP
1017	.$eb9	CMP LASTVAR
1018	.$ebc	BNE NOTSAMEVAR
1019	.$ebe	LDA TMP2_ZP+1
1020	.$ec0	CMP LASTVAR+1
1021	.$ec3	BNE NOTSAMEVAR
1022	.$ec5	LDA LASTVARP   
1023	.$ec8	STA HIGHP
1024	.$ecb	STA STRBUFP
1025	.$ece	LDA LASTVARP+1
1026	.$ed1	STA HIGHP+1
1027	.$ed4	STA STRBUFP+1
1028	.$ed7	NOTSAMEVAR RTS
1032	.$ed8	REMEMBERLASTVAR
1033	.$ed8	LDA TMP2_ZP
1034	.$eda	STA LASTVAR
1035	.$edd	LDA TMP2_ZP+1
1036	.$edf	STA LASTVAR+1
1037	.$ee2	LDA TMP3_ZP
1038	.$ee4	STA LASTVARP
1039	.$ee7	LDA TMP3_ZP+1
1040	.$ee9	STA LASTVARP+1 
1041	.$eec	RTS
1046	.$eed	STOREVARREF
1047	.$eed	TYA
1048	.$eee	PHA    
1049	.$eef	LDA TMP_ZP
1050	.$ef1	PHA
1051	.$ef2	LDA TMP_ZP+1
1052	.$ef4	PHA
1053	.$ef5	LDA HIGHP+1
1054	.$ef8	STA TMP_ZP+1
1055	.$efa	LDA HIGHP
1056	.$efd	SEC
1057	.$efe	SBC #2
1058	.$f00	STA TMP_ZP
1059	.$f02	BCS RLVNOOV
1060	.$f04	DEC TMP_ZP+1
1061	.$f06	RLVNOOV  LDA TMP2_ZP
1062	.$f08	LDY #0
1063	.$f0a	STA (TMP_ZP),Y
1064	.$f0c	LDA TMP2_ZP+1
1065	.$f0e	INY
1066	.$f0f	STA (TMP_ZP),Y 
1067	.$f11	PLA
1068	.$f12	STA TMP_ZP+1
1069	.$f14	PLA
1070	.$f15	STA TMP_ZP  
1071	.$f17	PLA
1072	.$f18	TAY    
1073	.$f19	RTS
1076	.$f1a	REROUTE  LDA CMD_NUM  
1077	.$f1d	BEQ REROUTECMD
1078	.$f1f	TAX
1079	.$f20	STA CHANNEL
1080	.$f23	JMP CHKOUT
1081	.$f26	REROUTECMD RTS
1084	.$f27	RESETROUTE LDA CMD_NUM  
1085	.$f2a	BEQ RESETROUTECMD
1086	.$f2c	JMP CLRCHNEW
1087	.$f2f	RESETROUTECMD
1088	.$f2f	RTS
1091	.$f30	STROUTWL STA A_REG
1092	.$f33	STY A_REG+1
1093	.$f36	STROUT  JSR REROUTE
1094	.$f39	LDA A_REG
1095	.$f3c	STA INDEX1
1096	.$f3e	LDA A_REG+1
1097	.$f41	STA INDEX1+1
1098	.$f43	LDY #0
1099	.$f45	LDA (INDEX1),Y
1100	.$f47	TAX
1101	.$f48	INC INDEX1
1102	.$f4a	BNE PRINTSTR
1103	.$f4c	INC INDEX1+1
1104	.$f4e	PRINTSTR JSR PRINTSTRS
1105	.$f51	LDA HIGHP   
1106	.$f54	STA STRBUFP
1107	.$f57	LDA HIGHP+1
1108	.$f5a	STA STRBUFP+1
1109	.$f5d	JSR RESETROUTE
1110	.$f60	RTS
1113	.$f61	GETADOLLAR JSR GETSTR  
1114	.$f64	LDA A_REG
1115	.$f67	LDY A_REG+1
1116	.$f6a	STA TMP_ZP
1117	.$f6c	STY TMP_ZP+1
1118	.$f6e	LDA #<VAR_A$
1119	.$f70	LDY #>VAR_A$
1120	.$f72	JMP COPYSTRING
1123	.$f75	GETSTR  LDA #8
1124	.$f77	LDY #0
1125	.$f79	JSR COMPACTF
1126	.$f7c	LDY #0
1127	.$f7e	STY CMD_NUM  
1128	.$f81	JSR GETIN
1129	.$f84	CMP #0   
1130	.$f86	BNE SOMEKEY
1131	.$f88	NOKEY  LDA #<EMPTYSTR
1132	.$f8a	STA A_REG
1133	.$f8d	LDA #>EMPTYSTR
1134	.$f8f	STA A_REG+1
1135	.$f92	RTS
1136	.$f93	SOMEKEY  TAX
1137	.$f94	LDA STRBUFP
1138	.$f97	STA TMP_ZP
1139	.$f99	STA A_REG
1140	.$f9c	LDA STRBUFP+1
1141	.$f9f	STA TMP_ZP+1
1142	.$fa1	STA A_REG+1
1143	.$fa4	LDA #1
1144	.$fa6	LDY #0
1145	.$fa8	STA (TMP_ZP),Y
1146	.$faa	TXA
1147	.$fab	LDY #1
1148	.$fad	STA (TMP_ZP),Y
1149	.$faf	LDA STRBUFP
1150	.$fb2	CLC
1151	.$fb3	ADC #2
1152	.$fb5	STA STRBUFP
1153	.$fb8	BCC GETSTR1
1154	.$fba	INC STRBUFP+1
1155	.$fbd	GETSTR1  RTS
1158	.$fbe	ZEROSET  LDA #0
1159	.$fc0	STA X_REG
1160	.$fc2	STA X_REG+1
1161	.$fc4	STA X_REG+2
1162	.$fc6	STA X_REG+3
1163	.$fc8	STA X_REG+4
1164	.$fca	RTS
1167	.$fcb	SEQ   JSR CMPSTR
1168	.$fce	LDA TMP3_ZP
1169	.$fd0	BNE NOTSEQ
1170	.$fd2	LDA #<REAL_CONST_MINUS_ONE
1171	.$fd4	STA TMP3_ZP
1172	.$fd6	LDA #>REAL_CONST_MINUS_ONE
1173	.$fd8	STA TMP3_ZP+1
1174	.$fda	JMP COPY2_XY_XREG
1175	.$fdd	NOTSEQ  JMP ZEROSET
1178	.$fe0	SNEQ  JSR CMPSTR
1179	.$fe3	LDA TMP3_ZP
1180	.$fe5	BEQ NOTSEQ
1181	.$fe7	LDA #<REAL_CONST_MINUS_ONE
1182	.$fe9	STA TMP3_ZP
1183	.$feb	LDA #>REAL_CONST_MINUS_ONE
1184	.$fed	STA TMP3_ZP+1
1185	.$fef	JMP COPY2_XY_XREG
1188	.$ff2	CMPSTR  LDY #0   
1189	.$ff4	LDX #1
1190	.$ff6	LDA A_REG
1191	.$ff9	STA TMP_ZP
1192	.$ffb	LDA A_REG+1
1193	.$ffe	STA TMP_ZP+1
1194	.$1000	LDA B_REG
1195	.$1003	STA TMP2_ZP
1196	.$1005	LDA B_REG+1
1197	.$1008	STA TMP2_ZP+1
1198	.$100a	CMP TMP_ZP+1
1199	.$100c	BNE CMPSTRSK1
1200	.$100e	LDA TMP2_ZP
1201	.$1010	CMP TMP_ZP
1202	.$1012	BNE CMPSTRSK1
1203	.$1014	LDX #0
1204	.$1016	JMP STRCMPRES
1205	.$1019	CMPSTRSK1 LDA (TMP_ZP),Y
1206	.$101b	CMP (TMP2_ZP),Y
1207	.$101d	BNE STRCMPRES
1208	.$101f	TAX
1209	.$1020	BNE NOTZCTR
1210	.$1022	LDX #0
1211	.$1024	JMP STRCMPRES
1212	.$1027	NOTZCTR  INC TMP_ZP
1213	.$1029	BNE SCSKP1
1214	.$102b	INC TMP_ZP+1
1215	.$102d	SCSKP1  INC TMP2_ZP
1216	.$102f	BNE CMPSTRLOOP
1217	.$1031	INC TMP2_ZP+1
1218	.$1033	CMPSTRLOOP LDA (TMP_ZP),Y
1219	.$1035	CMP (TMP2_ZP),Y
1220	.$1037	BNE STRCMPRES
1221	.$1039	INY
1222	.$103a	DEX
1223	.$103b	BNE CMPSTRLOOP
1224	.$103d	STRCMPRES STX TMP3_ZP
1225	.$103f	RTS
1228	.$1040	PUSHINT  LDX FPSTACKP
1229	.$1043	STX TMP2_ZP
1230	.$1045	LDX FPSTACKP+1
1231	.$1048	STX TMP2_ZP+1
1232	.$104a	LDA TMP_ZP
1233	.$104c	LDY #0
1234	.$104e	STA (TMP2_ZP),Y
1235	.$1050	LDA TMP_ZP+1
1236	.$1052	INY
1237	.$1053	STA (TMP2_ZP),Y
1238	.$1055	LDA TMP2_ZP
1239	.$1057	CLC
1240	.$1058	ADC #2
1241	.$105a	STA FPSTACKP
1242	.$105d	LDA TMP2_ZP+1
1243	.$105f	ADC #0
1244	.$1061	STA FPSTACKP+1
1245	.$1064	RTS
1248	.$1065	POPINT2B LDA FPSTACKP
1249	.$1068	SEC
1250	.$1069	SBC #2
1251	.$106b	STA FPSTACKP
1252	.$106e	LDA FPSTACKP+1
1253	.$1071	SBC #0
1254	.$1073	STA FPSTACKP+1
1255	.$1076	LDX FPSTACKP
1256	.$1079	STX TMP2_ZP
1257	.$107b	LDX FPSTACKP+1
1258	.$107e	STX TMP2_ZP+1
1259	.$1080	LDY #0
1260	.$1082	LDA (TMP2_ZP),Y
1261	.$1084	STA B_REG
1262	.$1087	INY
1263	.$1088	LDA (TMP2_ZP),Y
1264	.$108a	STA B_REG+1
1265	.$108d	RTS
1268	.$108e	REALFACPUSH STA TMP_ZP
1269	.$1090	STY TMP_ZP+1
1270	.$1092	LDX FPSTACKP
1271	.$1095	LDY FPSTACKP+1
1272	.$1098	STX TMP2_ZP
1273	.$109a	STY TMP2_ZP+1
1274	.$109c	LDY #0
1275	.$109e	LDA (TMP_ZP),Y
1276	.$10a0	STA (TMP2_ZP),Y
1277	.$10a2	INY
1278	.$10a3	LDA (TMP_ZP),Y
1279	.$10a5	STA (TMP2_ZP),Y
1280	.$10a7	INY
1281	.$10a8	LDA (TMP_ZP),Y
1282	.$10aa	STA (TMP2_ZP),Y
1283	.$10ac	INY
1284	.$10ad	LDA (TMP_ZP),Y
1285	.$10af	STA (TMP2_ZP),Y
1286	.$10b1	INY
1287	.$10b2	LDA (TMP_ZP),Y
1288	.$10b4	STA (TMP2_ZP),Y
1289	.$10b6	TXA    
1290	.$10b7	CLC
1291	.$10b8	ADC #5
1292	.$10ba	STA FPSTACKP
1293	.$10bd	BCC NOPVRFPXX
1294	.$10bf	INC FPSTACKP+1
1295	.$10c2	NOPVRFPXX RTS
1298	.$10c3	POPREAL  LDA FPSTACKP
1299	.$10c6	SEC
1300	.$10c7	SBC #5
1301	.$10c9	STA FPSTACKP
1302	.$10cc	BCS NOPVPR
1303	.$10ce	DEC FPSTACKP+1
1304	.$10d1	NOPVPR  LDA FPSTACKP
1305	.$10d4	LDY FPSTACKP+1
1306	.$10d7	JMP REALFAC
1309	.$10da	POPREALXREG LDA FPSTACKP
1310	.$10dd	SEC
1311	.$10de	SBC #5
1312	.$10e0	STA FPSTACKP
1313	.$10e3	BCS NOPVPRXR
1314	.$10e5	DEC FPSTACKP+1
1315	.$10e8	NOPVPRXR LDA FPSTACKP
1316	.$10eb	LDY FPSTACKP+1
1317	.$10ee	STA TMP_ZP
1318	.$10f0	STY TMP_ZP+1
1319	.$10f2	LDY #$4
1320	.$10f4	LDA (TMP_ZP),Y
1321	.$10f6	STA X_REG+4
1322	.$10f8	STA FACLO
1323	.$10fa	DEY
1324	.$10fb	LDA (TMP_ZP),Y
1325	.$10fd	STA X_REG+3
1326	.$10ff	STA FACMO
1327	.$1101	DEY
1328	.$1102	LDA (TMP_ZP),Y
1329	.$1104	STA X_REG+2
1330	.$1106	STA FACMOH
1331	.$1108	DEY
1332	.$1109	LDA (TMP_ZP),Y
1333	.$110b	STA X_REG+1
1334	.$110d	STA FACSGN
1335	.$110f	ORA #$80
1336	.$1111	STA FACHO
1337	.$1113	DEY
1338	.$1114	LDA (TMP_ZP),Y
1339	.$1116	STA X_REG
1340	.$1118	STA FACEXP
1341	.$111a	STY FACOV
1342	.$111c	RTS
1345	.$111d	COPY2_XYA_XREG
1346	.$111d	STA TMP3_ZP
1347	.$111f	STY TMP3_ZP+1
1348	.$1121	COPY2_XY_XREG
1349	.$1121	LDX #<X_REG  
1350	.$1123	LDY #0
1351	.$1125	LDA (TMP3_ZP),Y
1352	.$1127	STA X_REG
1353	.$1129	INY
1354	.$112a	LDA (TMP3_ZP),Y
1355	.$112c	STA X_REG+1
1356	.$112e	INY
1357	.$112f	LDA (TMP3_ZP),Y
1358	.$1131	STA X_REG+2
1359	.$1133	INY
1360	.$1134	LDA (TMP3_ZP),Y
1361	.$1136	STA X_REG+3
1362	.$1138	INY
1363	.$1139	LDA (TMP3_ZP),Y
1364	.$113b	STA X_REG+4
1365	.$113d	RTS
1368	.$113e	COPY2_XYA_CREG
1369	.$113e	STA TMP3_ZP
1370	.$1140	STY TMP3_ZP+1
1371	.$1142	COPY2_XY_CREG
1372	.$1142	LDX #<C_REG  
1373	.$1144	LDY #0
1374	.$1146	LDA (TMP3_ZP),Y
1375	.$1148	STA C_REG
1376	.$114b	INY
1377	.$114c	LDA (TMP3_ZP),Y
1378	.$114e	STA C_REG+1
1379	.$1151	INY
1380	.$1152	LDA (TMP3_ZP),Y
1381	.$1154	STA C_REG+2
1382	.$1157	INY
1383	.$1158	LDA (TMP3_ZP),Y
1384	.$115a	STA C_REG+3
1385	.$115d	INY
1386	.$115e	LDA (TMP3_ZP),Y
1387	.$1160	STA C_REG+4
1388	.$1163	RTS
1391	.$1164	COPY2_XYA_YREG
1392	.$1164	STA TMP3_ZP
1393	.$1166	STY TMP3_ZP+1
1394	.$1168	COPY2_XY_YREG
1395	.$1168	LDX #<Y_REG  
1396	.$116a	LDY #0
1397	.$116c	LDA (TMP3_ZP),Y
1398	.$116e	STA Y_REG
1399	.$1171	INY
1400	.$1172	LDA (TMP3_ZP),Y
1401	.$1174	STA Y_REG+1
1402	.$1177	INY
1403	.$1178	LDA (TMP3_ZP),Y
1404	.$117a	STA Y_REG+2
1405	.$117d	INY
1406	.$117e	LDA (TMP3_ZP),Y
1407	.$1180	STA Y_REG+3
1408	.$1183	INY
1409	.$1184	LDA (TMP3_ZP),Y
1410	.$1186	STA Y_REG+4
1411	.$1189	RTS
1415	.$118a	FACWORD
1416	.$118a	LDA FACEXP   
1417	.$118c	BNE DOFACWORD
1418	.$118e	STA FACSGN   
1419	.$1190	DOFACWORD:
1420	.$1190	JMP XFACWORD
1424	.$1193	LOCKCHANNEL
1425	.$1193	PHA
1426	.$1194	LDA #$FF
1427	.$1196	STA CHLOCKFLAG
1428	.$1199	PLA
1429	.$119a	RTS
1432	.$119b	UNLOCKCHANNEL
1433	.$119b	PHA
1434	.$119c	LDA #0
1435	.$119e	STA CHLOCKFLAG
1436	.$11a1	PLA
1437	.$11a2	JMP CLRCH
1440	.$11a5	INITOUTCHANNEL
1441	.$11a5	LDA CHLOCKFLAG
1442	.$11a8	BEQ INITOUT2
1443	.$11aa	CMP #$FF
1444	.$11ac	BNE SKIPINITCH
1445	.$11ae	INITOUT2
1446	.$11ae	LDA #<C_REG
1447	.$11b0	LDY #>C_REG
1448	.$11b2	JSR REALFAC
1449	.$11b5	JSR FACWORD
1450	.$11b8	TYA
1451	.$11b9	TAX
1452	.$11ba	CPX CMD_NUM
1453	.$11bd	BNE CMDNEQUAL
1454	.$11bf	LDY #0
1455	.$11c1	STY CMD_NUM   
1456	.$11c4	CMDNEQUAL STA CHANNEL
1457	.$11c7	STA CHLOCKFLAG
1458	.$11ca	JMP CHKOUT
1459	.$11cd	SKIPINITCH
1460	.$11cd	RTS
1463	.$11ce	INITINCHANNEL
1464	.$11ce	LDA IOCHANNEL
1465	.$11d0	STA STORE1+1
1466	.$11d3	LDA #1
1467	.$11d5	STA IOCHANNEL  
1468	.$11d7	LDA #<C_REG
1469	.$11d9	LDY #>C_REG
1470	.$11db	JSR REALFAC
1471	.$11de	JSR FACWORD
1472	.$11e1	TYA
1473	.$11e2	TAX
1474	.$11e3	STA CHANNEL
1475	.$11e6	STA CHLOCKFLAG
1476	.$11e9	JMP CHKIN
1477	.$11ec	RTS
1480	.$11ed	CLRCHNEW
1481	.$11ed	LDA CHLOCKFLAG
1482	.$11f0	BNE SKIPCLRCH
1483	.$11f2	JMP CLRCH
1484	.$11f5	SKIPCLRCH
1485	.$11f5	RTS
1488	.$11f6	GETSTRCHANNEL
1489	.$11f6	JSR INITINCHANNEL
1490	.$11f9	JSR GETSTR
1491	.$11fc	JMP CLRINCH
1494	.$11ff	STROUTCHANNEL
1495	.$11ff	JSR INITOUTCHANNEL
1496	.$1202	JSR STROUT
1497	.$1205	JMP CLRCHNEW
1500	.$1208	CLRINCH  JSR CLRCH
1501	.$120b	LDA STORE1+1
1502	.$120e	STA IOCHANNEL
1503	.$1210	RTS
1506	.$1211	OPEN  JSR SETEMPTYSTR 
1507	.$1214	JSR YREGFAC
1508	.$1217	JSR FACWORD
1509	.$121a	STY TMP_REG  
1510	.$121c	JSR XREGFAC
1511	.$121f	JSR FACWORD
1512	.$1222	STY LOGICADDR 
1513	.$1224	DEC TMP_REG
1514	.$1226	BEQ ALLPARAMS
1515	.$1228	LDA #<C_REG
1516	.$122a	LDY #>C_REG
1517	.$122c	JSR REALFAC
1518	.$122f	JSR FACWORD
1519	.$1232	STY DEVICENUM 
1520	.$1234	DEC TMP_REG
1521	.$1236	BEQ ALLPARAMS
1522	.$1238	LDA #<D_REG
1523	.$123a	LDY #>D_REG
1524	.$123c	JSR REALFAC
1525	.$123f	JSR FACWORD
1526	.$1242	STY SECADDR  
1527	.$1244	DEC TMP_REG
1528	.$1246	BEQ ALLPARAMS
1529	.$1248	JSR SETNAMEPRT
1530	.$124b	ALLPARAMS
1534	.$124b	JSR OPENCH
1535	.$124e	BCS OPENERR
1536	.$1250	RTS
1537	.$1251	OPENERR  STA TMP2_ZP
1538	.$1253	LDA LOGICADDR
1539	.$1255	JSR CLOSECH
1543	.$1258	LDX TMP2_ZP
1544	.$125a	JMP ERRALL
1547	.$125d	SETEMPTYSTR
1548	.$125d	LDA #<EMPTYSTR
1549	.$125f	STA FILEADDR
1550	.$1261	LDA #>EMPTYSTR
1551	.$1263	STA FILEADDR+1
1552	.$1265	LDA #0
1553	.$1267	STA FILELEN
1554	.$1269	STA LOGICADDR
1555	.$126b	STA DEVICENUM
1556	.$126d	STA SECADDR
1557	.$126f	RTS
1560	.$1270	SETNAMEPRT LDA G_REG
1561	.$1272	LDY G_REG+1
1562	.$1274	STA TMP_ZP
1563	.$1276	STY TMP_ZP+1
1564	.$1278	LDY #0
1565	.$127a	LDA (TMP_ZP),Y 
1566	.$127c	STA FILELEN
1567	.$127e	INC G_REG
1568	.$1280	BNE SNPNOOV
1569	.$1282	INC G_REG+1
1570	.$1284	SNPNOOV  LDA G_REG
1571	.$1286	LDY G_REG+1
1572	.$1288	STA FILEADDR  
1573	.$128a	STY FILEADDR+1 
1574	.$128c	RTS
1577	.$128d	OUTOFMEMORY
1581	.$128d	LDX #$10
1582	.$128f	JMP ERRALL
1585	.$1292	STRINGTOOLONG
1589	.$1292	LDX #$17
1590	.$1294	JMP ERRALL
1593	.$1297	XREGFAC  LDA X_REG+4
1594	.$1299	STA FACLO
1595	.$129b	LDA X_REG+3
1596	.$129d	STA FACMO
1597	.$129f	LDA X_REG+2
1598	.$12a1	STA FACMOH
1599	.$12a3	LDA X_REG+1
1600	.$12a5	STA FACSGN
1601	.$12a7	ORA #$80
1602	.$12a9	STA FACHO
1603	.$12ab	LDA X_REG
1604	.$12ad	STA FACEXP
1605	.$12af	LDA #0
1606	.$12b1	STA FACOV
1607	.$12b3	RTS
1610	.$12b4	YREGFAC  LDA Y_REG+4
1611	.$12b7	STA FACLO
1612	.$12b9	LDA Y_REG+3
1613	.$12bc	STA FACMO
1614	.$12be	LDA Y_REG+2
1615	.$12c1	STA FACMOH
1616	.$12c3	LDA Y_REG+1
1617	.$12c6	STA FACSGN
1618	.$12c8	ORA #$80
1619	.$12ca	STA FACHO
1620	.$12cc	LDA Y_REG
1621	.$12cf	STA FACEXP
1622	.$12d1	LDA #0
1623	.$12d3	STA FACOV
1624	.$12d5	RTS
1738	.$12d6	INITVARS
1739	.$12d6	JSR INITSTRVARS
1740	.$12d9	LDA #0
1741	.$12db	RTS
1745	.$12dc	CONSTANTS
1748	.$12dc	CONST_0R .REAL 2.0
1751	.$12e1	CONST_1R .REAL 0.0
1757	.$12e6	CONST_3R .REAL 4.0
1759	.$12eb	CONST_4 .BYTE 0
1760	.$12ec	.STRG ""
1766	.$12ec	DATAS
1767	.$12ec	.BYTE $FF
1769	.$12ed	CONSTANTS_END
1772	.$12ed	VARIABLES
1773	.$12ed	STRINGVARS_START
1775	.$12ed	VAR_A$ .WORD EMPTYSTR
1777	.$12ef	VAR_S$ .WORD EMPTYSTR
1779	.$12f1	VAR_TI$ .WORD EMPTYSTR
1780	.$12f3	STRINGVARS_END
1781	.$12f3	STRINGARRAYS_START
1782	.$12f3	STRINGARRAYS_END
1783	.$12f3	VARIABLES_END
1785	.$12f3	Y_REG .REAL 0.0
1786	.$12f8	C_REG .REAL 0.0
1787	.$12fd	D_REG .REAL 0.0
1788	.$1302	E_REG .REAL 0.0
1789	.$1307	F_REG .REAL 0.0
1790	.$130c	A_REG .WORD 0
1791	.$130e	B_REG .WORD 0
1792	.$1310	CMD_NUM .BYTE 0
1793	.$1311	CHANNEL .BYTE 0
1794	.$1312	SP_SAVE .BYTE 0
1795	.$1313	TMP2_REG .WORD 0
1796	.$1315	TMP3_REG .WORD 0
1797	.$1317	TMP4_REG .WORD 0
1798	.$1319	AS_TMP .WORD 0
1799	.$131b	BPOINTER_TMP .WORD 0
1800	.$131d	BASICTEXTP .BYTE 0
1801	.$131e	STORE1 .WORD 0
1802	.$1320	STORE2 .WORD 0
1803	.$1322	STORE3 .WORD 0
1804	.$1324	STORE4 .WORD 0
1805	.$1326	GCSTART .WORD 0
1806	.$1328	GCLEN .WORD 0
1807	.$132a	GCWORK .WORD 0
1808	.$132c	INPUTLENGTH .BYTE 0
1809	.$132d	TMP_FREG .REAL 0
1810	.$1332	TMP2_FREG .REAL 0
1811	.$1337	TMP_FLAG .BYTE 0
1812	.$1338	INT_FLAG .BYTE 0
1813	.$1339	REAL_CONST_ONE .REAL 1.0
1814	.$133e	REAL_CONST_ZERO .REAL 0.0
1815	.$1343	REAL_CONST_MINUS_ONE .REAL -1.0
1816	.$1348	CHLOCKFLAG .BYTE 0
1817	.$1349	EMPTYSTR .BYTE 0
1818	.$134a	FPSTACKP .WORD FPSTACK
1819	.$134c	FORSTACKP .WORD FORSTACK
1820	.$134e	DATASP .WORD DATAS
1821	.$1350	LASTVAR .WORD 0
1822	.$1352	LASTVARP .WORD 0
1823	.$1354	HIGHP .WORD STRBUF
1824	.$1356	STRBUFP .WORD STRBUF
1825	.$1358	ENDSTRBUF .WORD 0
1826	.$135a	INPUTQUEUEP .BYTE 0
1827	.$135b	PROGRAMEND
1828	.$135b	INPUTQUEUE .ARRAY $0F
1829	.$136a	FPSTACK .ARRAY 100
1830	.$13ce	FORSTACK .ARRAY 340
1831	.$1522	STRBUF .BYTE 0
