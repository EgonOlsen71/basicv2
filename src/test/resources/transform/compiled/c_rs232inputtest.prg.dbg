117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
128	.$81f	LDA #<CONST_0R
129	.$821	LDY #>CONST_0R
130	.$823	JSR REALFACPUSH
132	.$826	LDA #<CONST_0R
133	.$828	LDY #>CONST_0R
134	.$82a	JSR REALFACPUSH
136	.$82d	LDA #<CONST_1R
137	.$82f	LDY #>CONST_1R
138	.$831	JSR REALFACPUSH
140	.$834	JSR COMPACTMAX
141	.$837	LDA #0
142	.$839	JSR CHRINT
144	.$83c	LDA A_REG
145	.$83f	LDY A_REG+1
146	.$842	STA TMP_ZP
147	.$844	STY TMP_ZP+1
148	.$846	JSR PUSHINT
150	.$849	LDA #8
151	.$84b	JSR CHRINT
153	.$84e	JSR POPINT2B
155	.$851	JSR CONCAT
156	.$854	LDY A_REG
157	.$857	LDA A_REG+1
158	.$85a	STY G_REG
159	.$85c	STA G_REG+1
160	.$85e	JSR POPREAL
161	.$861	LDX #<D_REG
162	.$863	LDY #>D_REG
164	.$865	JSR FACMEM
165	.$868	JSR POPREAL
166	.$86b	LDX #<C_REG
167	.$86d	LDY #>C_REG
169	.$86f	JSR FACMEM
170	.$872	JSR POPREALXREG
173	.$875	LDA #<CONST_3R
174	.$877	LDY #>CONST_3R
175	.$879	JSR COPY2_XYA_YREG
179	.$87c	JSR OPEN
181	.$87f	LINE_15:
183	.$87f	LDA #<CONST_0R
184	.$881	LDY #>CONST_0R
185	.$883	JSR REALFACPUSH
187	.$886	JSR CLEARQUEUE
188	.$889	JSR COMPACTMAX
189	.$88c	JSR POPREAL
190	.$88f	LDX #<C_REG
191	.$891	LDY #>C_REG
193	.$893	JSR FACMEM
194	.$896	JSR INPUTSTRCHANNEL
195	.$899	JSR INPUTLENGTHCHECK
196	.$89c	BEQ EMPTYINPUTSKIP2
197	.$89e	LDA A_REG
198	.$8a1	LDY A_REG+1
199	.$8a4	STA TMP_ZP
200	.$8a6	STY TMP_ZP+1
201	.$8a8	LDA #<VAR_A$
202	.$8aa	LDY #>VAR_A$
203	.$8ac	JSR COPYSTRING
204	.$8af	EMPTYINPUTSKIP2:
205	.$8af	LDA #<CONST_4
206	.$8b1	LDY #>CONST_4
207	.$8b3	JSR STROUTWL
209	.$8b6	LDA VAR_A$
210	.$8b9	LDY VAR_A$+1
211	.$8bc	JSR STROUTBRKWL
215	.$8bf	LINE_20:
217	.$8bf	LDA #<CONST_5
218	.$8c1	LDY #>CONST_5
219	.$8c3	STA B_REG
220	.$8c6	STY B_REG+1
221	.$8c9	LDA VAR_A$
222	.$8cc	LDY VAR_A$+1
223	.$8cf	STA A_REG
224	.$8d2	STY A_REG+1
226	.$8d5	JSR SEQ
227	.$8d8	LDA X_REG
228	.$8da	COMP_SKP0:
229	.$8da	BEQ LINE_SKIP1
232	.$8dc	LINE_NSKIP1:
234	.$8dc	LDA #<CONST_0R
235	.$8de	LDY #>CONST_0R
236	.$8e0	JSR COPY2_XYA_XREG
240	.$8e3	JSR CLOSE
241	.$8e6	JSR END
242	.$8e9	RTS
244	.$8ea	LINE_SKIP1:
247	.$8ea	LINE_30:
249	.$8ea	JMP LINE_15
250	.$8ed	JSR END
251	.$8f0	RTS
254	.$8f1	END   LDX SP_SAVE
255	.$8f4	TXS
262	.$8f5	RTS
265	.$8f6	START  LDA ENDSTRBUF+1
266	.$8f9	BNE ENDGIVEN
267	.$8fb	LDA BASICEND
268	.$8fd	STA ENDSTRBUF
269	.$900	LDA BASICEND+1
270	.$902	STA ENDSTRBUF+1
271	.$905	ENDGIVEN LDA #<FPSTACK
272	.$907	LDY #>FPSTACK
273	.$909	STA FPSTACKP
274	.$90c	STY FPSTACKP+1
275	.$90f	LDA #<FORSTACK
276	.$911	LDY #>FORSTACK
277	.$913	STA FORSTACKP
278	.$916	STY FORSTACKP+1
279	.$919	LDA #<STRBUF
280	.$91b	LDY #>STRBUF
281	.$91d	STA STRBUFP
282	.$920	STY STRBUFP+1
283	.$923	STA HIGHP
284	.$926	STY HIGHP+1
285	.$929	LDA #0
286	.$92b	STA CHLOCKFLAG
287	.$92e	STA LASTVAR
288	.$931	STA LASTVAR+1
289	.$934	JSR INITVARS
290	.$937	LDA #0
291	.$939	STA CMD_NUM
292	.$93c	STA CHANNEL
293	.$93f	TAY
294	.$940	TAX
298	.$941	STA KEYNDX
304	.$943	JSR RESTORE
305	.$946	CLC
309	.$947	RTS
312	.$948	INITNARRAY
313	.$948	STA TMP_ZP
314	.$94a	STY TMP_ZP+1
315	.$94c	LDY #0
316	.$94e	TYA
317	.$94f	NINITLOOP STA (TMP_ZP),Y
318	.$951	INC TMP_ZP
319	.$953	BNE NLOOPNOV
320	.$955	INC TMP_ZP+1
321	.$957	NLOOPNOV LDX TMP2_ZP
322	.$959	BNE NLOOPNOV2
323	.$95b	DEC TMP2_ZP+1
324	.$95d	NLOOPNOV2 DEC TMP2_ZP
325	.$95f	BNE NINITLOOP
326	.$961	LDX TMP2_ZP+1
327	.$963	BNE NINITLOOP
328	.$965	RTS
331	.$966	INITSTRARRAY
332	.$966	STA TMP_ZP
333	.$968	STY TMP_ZP+1
334	.$96a	SINITLOOP LDY #0
335	.$96c	LDA #<EMPTYSTR
336	.$96e	STA (TMP_ZP),Y
337	.$970	LDA #>EMPTYSTR
338	.$972	INY
339	.$973	STA (TMP_ZP),Y
340	.$975	CLC
341	.$976	LDA TMP_ZP
342	.$978	ADC #2
343	.$97a	STA TMP_ZP
344	.$97c	BCC SLOOPNOV1
345	.$97e	INC TMP_ZP+1
346	.$980	SLOOPNOV1 SEC
347	.$981	LDA TMP2_ZP
348	.$983	SBC #2
349	.$985	STA TMP2_ZP
350	.$987	BCS SLOOPNOV2
351	.$989	DEC TMP2_ZP+1
352	.$98b	SLOOPNOV2 LDA TMP2_ZP
353	.$98d	BNE SINITLOOP
354	.$98f	LDA TMP2_ZP+1
355	.$991	BNE SINITLOOP
356	.$993	RTS
359	.$994	INITSPARAMS STA TMP3_ZP
360	.$996	STY TMP3_ZP+1
361	.$998	SEC
362	.$999	SBC #2
363	.$99b	STA TMP_ZP
364	.$99d	TYA
365	.$99e	SBC #0
366	.$9a0	STA TMP_ZP+1
367	.$9a2	LDY #0
368	.$9a4	LDA (TMP_ZP),Y
369	.$9a6	STA TMP2_ZP
370	.$9a8	INY
371	.$9a9	LDA (TMP_ZP),Y
372	.$9ab	STA TMP2_ZP+1
373	.$9ad	LDA TMP3_ZP
374	.$9af	LDY TMP3_ZP+1
375	.$9b1	RTS
378	.$9b2	INITSTRVARS LDA #<STRINGVARS_START  
379	.$9b4	LDY #>STRINGVARS_START
380	.$9b6	CMP #<STRINGVARS_END
381	.$9b8	BNE INITIT1
382	.$9ba	CPY #>STRINGVARS_END
383	.$9bc	BNE INITIT1
384	.$9be	JMP INITSA2     
385	.$9c1	INITIT1  STA TMP_ZP
386	.$9c3	STY TMP_ZP+1
387	.$9c5	LDY #0
388	.$9c7	INITSTRLOOP LDA #<EMPTYSTR
389	.$9c9	STA (TMP_ZP),Y
390	.$9cb	INY
391	.$9cc	LDA #>EMPTYSTR
392	.$9ce	STA (TMP_ZP),Y
393	.$9d0	DEY
394	.$9d1	LDA TMP_ZP
395	.$9d3	CLC
396	.$9d4	ADC #2
397	.$9d6	STA TMP_ZP
398	.$9d8	LDA TMP_ZP+1
399	.$9da	ADC #0
400	.$9dc	STA TMP_ZP+1
401	.$9de	CMP #>STRINGVARS_END
402	.$9e0	BNE INITSTRLOOP
403	.$9e2	LDA TMP_ZP
404	.$9e4	CMP #<STRINGVARS_END
405	.$9e6	BNE INITSTRLOOP
406	.$9e8	INITSA2  LDA #<STRINGARRAYS_START 
407	.$9ea	LDY #>STRINGARRAYS_START
408	.$9ec	CMP #<STRINGARRAYS_END
409	.$9ee	BNE ARRAYLOOP
410	.$9f0	CPY #>STRINGARRAYS_END
411	.$9f2	BNE ARRAYLOOP
412	.$9f4	RTS       
413	.$9f5	ARRAYLOOP CLC
414	.$9f6	ADC #3
415	.$9f8	BCC ARRAYSKIP1
416	.$9fa	INY
417	.$9fb	ARRAYSKIP1 CPY #>STRINGARRAYS_END
418	.$9fd	BEQ ARRAYSC
419	.$9ff	BCC ARRAYSKIP2
420	.$a01	JMP ARRAYQUIT
421	.$a04	ARRAYSC  CMP #<STRINGARRAYS_END
422	.$a06	BCS ARRAYQUIT
423	.$a08	ARRAYSKIP2 STA TMP_REG
424	.$a0a	STY TMP_REG+1
425	.$a0c	JSR INITSPARAMS
426	.$a0f	LDA TMP_REG
427	.$a11	LDY TMP_REG+1
428	.$a13	JSR INITSTRARRAY
429	.$a16	LDA TMP_ZP
430	.$a18	LDY TMP_ZP+1
431	.$a1a	JMP ARRAYLOOP
432	.$a1d	ARRAYQUIT RTS
435	.$a1e	RESTORE  LDA #<DATAS
436	.$a20	LDY #>DATAS
437	.$a22	STA DATASP
438	.$a25	STY DATASP+1
439	.$a28	RTS
442	.$a29	CONCAT  LDA A_REG
443	.$a2c	STA TMP_ZP
444	.$a2e	LDA A_REG+1
445	.$a31	STA TMP_ZP+1
446	.$a33	LDA STRBUFP  
447	.$a36	STA A_REG
448	.$a39	STA TMP3_ZP
449	.$a3b	LDA STRBUFP+1
450	.$a3e	STA A_REG+1
451	.$a41	STA TMP3_ZP+1
452	.$a43	LDY #0
453	.$a45	LDA (TMP_ZP),Y
454	.$a47	TAX
455	.$a48	LDA B_REG
456	.$a4b	STA TMP2_ZP
457	.$a4d	LDA B_REG+1
458	.$a50	STA TMP2_ZP+1
459	.$a52	TXA
460	.$a53	CLC
461	.$a54	ADC (TMP2_ZP),Y
462	.$a56	BCC CCSTRFITS
463	.$a58	JMP STRINGTOOLONG
464	.$a5b	CCSTRFITS STA (TMP3_ZP),Y
465	.$a5d	INC TMP3_ZP
466	.$a5f	BNE CCNOOV2
467	.$a61	INC TMP3_ZP+1
468	.$a63	CCNOOV2  CLC
469	.$a64	ADC STRBUFP
470	.$a67	PHP
471	.$a68	CLC
472	.$a69	ADC #3
473	.$a6b	STA STRBUFP
474	.$a6e	BCC CCNOCS1
475	.$a70	INC STRBUFP+1
476	.$a73	CCNOCS1  PLP
477	.$a74	BCC CCSTRFITS2
478	.$a76	INC STRBUFP+1
479	.$a79	CCSTRFITS2 JSR COPY2CONCAT  
480	.$a7c	LDA B_REG   
481	.$a7f	STA TMP_ZP
482	.$a81	LDA B_REG+1
483	.$a84	STA TMP_ZP+1
484	.$a86	JMP COPY2CONCAT  
487	.$a89	COPY2CONCAT LDY #0
488	.$a8b	LDA (TMP_ZP),Y
489	.$a8d	BEQ NOC2C   
490	.$a8f	STA TMP2_ZP
491	.$a91	INC TMP_ZP
492	.$a93	BNE COPY2LOOP
493	.$a95	INC TMP_ZP+1
494	.$a97	COPY2LOOP LDA (TMP_ZP),Y
495	.$a99	STA (TMP3_ZP),Y
496	.$a9b	INY
497	.$a9c	CPY TMP2_ZP
498	.$a9e	BNE COPY2LOOP
499	.$aa0	TYA
500	.$aa1	CLC
501	.$aa2	ADC TMP3_ZP   
502	.$aa4	STA TMP3_ZP
503	.$aa6	BCC NOC2C
504	.$aa8	INC TMP3_ZP+1
505	.$aaa	NOC2C  RTS
508	.$aab	CHRINT  TAX
509	.$aac	LDA STRBUFP
510	.$aaf	STA TMP_ZP
511	.$ab1	STA A_REG
512	.$ab4	LDA STRBUFP+1
513	.$ab7	STA TMP_ZP+1
514	.$ab9	STA A_REG+1
515	.$abc	LDA #1
516	.$abe	LDY #0
517	.$ac0	STA (TMP_ZP),Y
518	.$ac2	TXA
519	.$ac3	INY
520	.$ac4	STA (TMP_ZP),Y
521	.$ac6	LDA STRBUFP
522	.$ac9	CLC
523	.$aca	ADC #2
524	.$acc	STA STRBUFP
525	.$acf	BCC NOCHR2
526	.$ad1	INC STRBUFP+1
527	.$ad4	NOCHR2  RTS
530	.$ad5	SAVEPOINTERS
531	.$ad5	LDA TMP_ZP   
532	.$ad7	STA STORE1
533	.$ada	LDA TMP_ZP+1
534	.$adc	STA STORE1+1
535	.$adf	LDA TMP2_ZP
536	.$ae1	STA STORE2
537	.$ae4	LDA TMP2_ZP+1
538	.$ae6	STA STORE2+1
539	.$ae9	LDA TMP3_ZP
540	.$aeb	STA STORE3
541	.$aee	LDA TMP3_ZP+1
542	.$af0	STA STORE3+1
543	.$af3	RTS
546	.$af4	RESTOREPOINTERS
547	.$af4	LDA STORE3+1  
548	.$af7	STA TMP3_ZP+1
549	.$af9	LDA STORE3
550	.$afc	STA TMP3_ZP
551	.$afe	LDA STORE2+1
552	.$b01	STA TMP2_ZP+1
553	.$b03	LDA STORE2
554	.$b06	STA TMP2_ZP
555	.$b08	LDA STORE1+1
556	.$b0b	STA TMP_ZP+1
557	.$b0d	LDA STORE1
558	.$b10	STA TMP_ZP
559	.$b12	RTS
566	.$b13	COMPACTMAX
567	.$b13	LDA #$FF
568	.$b15	LDY #$0
569	.$b17	JMP COMPACTF
572	.$b1a	COMPACT
573	.$b1a	LDY #0
574	.$b1c	GCBUFNE  LDA (TMP_ZP),Y  
575	.$b1e	COMPACTF STA TMP4_REG  
576	.$b21	LDY STRBUFP+1  
577	.$b24	STY TMP4_REG+1  
578	.$b27	INY     
579	.$b28	BEQ ENDMEM   
580	.$b2a	CPY ENDSTRBUF+1  
581	.$b2d	BCC RGCEXIT   
582	.$b2f	ENDMEM  LDA STRBUFP
583	.$b32	CLC
584	.$b33	ADC TMP4_REG
585	.$b36	STA TMP4_REG
586	.$b39	BCC RGCNOOV1
587	.$b3b	INC TMP4_REG+1
588	.$b3e	RGCNOOV1 CLC
589	.$b3f	LDA TMP4_REG
590	.$b42	ADC #3
591	.$b44	STA TMP4_REG
592	.$b47	BCC RGCNOOV2
593	.$b49	INC TMP4_REG+1
594	.$b4c	RGCNOOV2 LDA TMP4_REG+1  
595	.$b4f	CMP ENDSTRBUF+1
596	.$b52	BEQ RGCLOW1
597	.$b54	BCS GCEXECOMP  
598	.$b56	JMP RGCEXIT
599	.$b59	RGCLOW1  LDA TMP4_REG
600	.$b5c	CMP ENDSTRBUF
601	.$b5f	BCS GCEXECOMP  
602	.$b61	RGCEXIT  RTS     
603	.$b62	GCEXECOMP LDA STRBUFP
604	.$b65	STA STORE4
605	.$b68	LDA STRBUFP+1
606	.$b6b	STA STORE4+1
607	.$b6e	JSR GCEXE
608	.$b71	JMP CHECKMEMORY
611	.$b74	GCEXE  JSR SAVEPOINTERS
612	.$b77	LDA #0
613	.$b79	STA LASTVAR
614	.$b7c	STA LASTVAR+1  
615	.$b7f	LDA #<STRBUF
616	.$b81	STA TMP_ZP
617	.$b83	STA GCSTART
618	.$b86	LDA #>STRBUF
619	.$b88	STA TMP_ZP+1  
620	.$b8a	STA GCSTART+1
621	.$b8d	GCLOOP  LDY #0
622	.$b8f	LDA TMP_ZP
623	.$b91	STA GCWORK
624	.$b94	LDA TMP_ZP+1
625	.$b96	STA GCWORK+1  
626	.$b99	LDA (TMP_ZP),Y
627	.$b9b	STA GCLEN   
628	.$b9e	INC TMP_ZP
629	.$ba0	BNE GCLOOPNOOV
630	.$ba2	INC TMP_ZP+1
631	.$ba4	GCLOOPNOOV LDA TMP_ZP
632	.$ba6	CLC
633	.$ba7	ADC GCLEN
634	.$baa	STA TMP_ZP
635	.$bac	BCC GCLOOPNOOV2
636	.$bae	INC TMP_ZP+1  
637	.$bb0	GCLOOPNOOV2 LDY #0
638	.$bb2	LDA (TMP_ZP),Y
639	.$bb4	STA TMP2_ZP
640	.$bb6	INY
641	.$bb7	LDA (TMP_ZP),Y
642	.$bb9	STA TMP2_ZP+1  
643	.$bbb	LDA TMP_ZP
644	.$bbd	CLC
645	.$bbe	ADC #2
646	.$bc0	STA TMP_ZP
647	.$bc2	BCC GCLOOPNOOV3
648	.$bc4	INC TMP_ZP+1  
649	.$bc6	GCLOOPNOOV3 LDY #0
650	.$bc8	LDA (TMP2_ZP),Y
651	.$bca	CMP GCWORK
652	.$bcd	BNE GCKLOOP
653	.$bcf	INY
654	.$bd0	LDA (TMP2_ZP),Y
655	.$bd2	CMP GCWORK+1
656	.$bd5	BEQ MEMFREE
657	.$bd7	GCKLOOP  LDA TMP_ZP+1  
658	.$bd9	CMP HIGHP+1
659	.$bdc	BEQ GCHECKLOW
660	.$bde	BCC GCLOOP
661	.$be0	JMP GCDONE
662	.$be3	GCHECKLOW LDA TMP_ZP
663	.$be5	CMP HIGHP
664	.$be8	BCS GCDONE
665	.$bea	JMP GCLOOP
666	.$bed	MEMFREE  LDA GCSTART   
667	.$bf0	CMP GCWORK   
668	.$bf3	BNE COPYDOWN
669	.$bf5	LDA GCSTART+1
670	.$bf8	CMP GCWORK+1
671	.$bfb	BNE COPYDOWN
672	.$bfd	LDA TMP_ZP   
673	.$bff	STA GCSTART
674	.$c02	LDA TMP_ZP+1
675	.$c04	STA GCSTART+1
676	.$c07	JMP GCKLOOP   
677	.$c0a	COPYDOWN LDA GCSTART   
678	.$c0d	STA TMP_REG
679	.$c0f	LDA GCSTART+1
680	.$c12	STA TMP_REG+1  
681	.$c14	LDA GCWORK
682	.$c17	STA TMP2_REG
683	.$c1a	LDA GCWORK+1
684	.$c1d	STA TMP2_REG+1  
685	.$c20	LDA TMP_ZP
686	.$c22	SEC
687	.$c23	SBC GCWORK
688	.$c26	STA TMP3_REG
689	.$c29	LDA TMP_ZP+1
690	.$c2b	SBC GCWORK+1
691	.$c2e	STA TMP3_REG+1  
692	.$c31	LDA GCSTART
693	.$c34	CLC
694	.$c35	ADC TMP3_REG
695	.$c38	STA GCSTART
696	.$c3b	LDA GCSTART+1
697	.$c3e	ADC TMP3_REG+1
698	.$c41	STA GCSTART+1  
699	.$c44	JSR QUICKCOPY  
700	.$c47	LDY #0
701	.$c49	LDA TMP_REG
702	.$c4b	STA (TMP2_ZP),Y
703	.$c4d	INY
704	.$c4e	LDA TMP_REG+1
705	.$c50	STA (TMP2_ZP),Y  
706	.$c52	JMP GCKLOOP
707	.$c55	GCDONE  LDA GCSTART
708	.$c58	STA HIGHP
709	.$c5b	STA STRBUFP
710	.$c5e	LDA GCSTART+1
711	.$c61	STA HIGHP+1
712	.$c64	STA STRBUFP+1  
713	.$c67	GCSKIP  JSR RESTOREPOINTERS
714	.$c6a	RTS     
717	.$c6b	CHECKMEMORY
718	.$c6b	LDA STRBUFP+1  
719	.$c6e	CMP STORE4+1  
720	.$c71	BCC STILLFITSCM  
724	.$c73	BEQ CHECKMEMLOWCM
725	.$c75	JMP OUTOFMEMORY  
726	.$c78	CHECKMEMLOWCM
727	.$c78	LDA STRBUFP   
728	.$c7b	CMP STORE4
729	.$c7e	BCC STILLFITSCM
730	.$c80	JMP OUTOFMEMORY  
731	.$c83	STILLFITSCM RTS
734	.$c84	QUICKCOPY LDA TMP_REG  
735	.$c86	STA TMEM+1
736	.$c89	LDA TMP_REG+1
737	.$c8b	STA TMEM+2
738	.$c8e	LDA TMP2_REG
739	.$c91	STA SMEM+1
740	.$c94	LDA TMP2_REG+1
741	.$c97	STA SMEM+2
742	.$c9a	LDY #$0
743	.$c9c	LDX TMP3_REG
744	.$c9f	BNE QCLOOP
745	.$ca1	LDA TMP3_REG+1
746	.$ca4	BEQ QCEXIT  
747	.$ca6	QCLOOP
748	.$ca6	SMEM  LDA $0000,Y
749	.$ca9	TMEM  STA $0000,Y
750	.$cac	INY
751	.$cad	BNE YNOOV
752	.$caf	INC TMEM+2
753	.$cb2	INC SMEM+2
754	.$cb5	YNOOV  DEX
755	.$cb6	BNE QCLOOP
756	.$cb8	LDA TMP3_REG+1
757	.$cbb	BEQ QCEXIT
758	.$cbd	DEC TMP3_REG+1
759	.$cc0	JMP QCLOOP
760	.$cc3	QCEXIT  RTS
763	.$cc4	COPYSTRING STA TMP2_ZP
764	.$cc6	STY TMP2_ZP+1
765	.$cc8	CPY TMP_ZP+1
766	.$cca	BNE CONTCOPY
767	.$ccc	LDA TMP2_ZP
768	.$cce	CMP TMP_ZP
769	.$cd0	BNE CONTCOPY
770	.$cd2	RTS     
771	.$cd3	CONTCOPY JSR COMPACT   
772	.$cd6	LDY #0
773	.$cd8	STY TMP_FLAG
774	.$cdb	LDA (TMP_ZP),Y
775	.$cdd	BNE NOTEMPTYSTR
776	.$cdf	LDA #<EMPTYSTR  
777	.$ce1	STA TMP_ZP
778	.$ce3	LDA #>EMPTYSTR
779	.$ce5	STA TMP_ZP+1
780	.$ce7	JMP ISCONST
781	.$cea	NOTEMPTYSTR TAX     
782	.$ceb	LDA (TMP2_ZP),Y
783	.$ced	STA TMP3_ZP
784	.$cef	INY
785	.$cf0	LDA (TMP2_ZP),Y
786	.$cf2	STA TMP3_ZP+1
787	.$cf4	DEY
788	.$cf5	LDA TMP_ZP+1  
789	.$cf7	CMP #>CONSTANTS_END
790	.$cf9	BEQ CHECKLOW1
791	.$cfb	BCS INVAR
792	.$cfd	JMP CHECKNEXT
793	.$d00	CHECKLOW1 LDA TMP_ZP
794	.$d02	CMP #<CONSTANTS_END
795	.$d04	BCS INVAR
796	.$d06	CHECKNEXT LDA TMP_ZP+1  
797	.$d08	CMP #>CONSTANTS
798	.$d0a	BEQ CHECKLOW3
799	.$d0c	BCC INVAR
800	.$d0e	JMP ISCONST
801	.$d11	CHECKLOW3 LDA TMP_ZP
802	.$d13	CMP #<CONSTANTS
803	.$d15	BCC INVAR   
804	.$d17	ISCONST  JSR CHECKLASTVAR 
805	.$d1a	LDA TMP_ZP
806	.$d1c	STA (TMP2_ZP),Y  
807	.$d1e	INY
808	.$d1f	LDA TMP_ZP+1
809	.$d21	STA (TMP2_ZP),Y
810	.$d23	LDA HIGHP   
811	.$d26	STA STRBUFP
812	.$d29	LDA HIGHP+1
813	.$d2c	STA STRBUFP+1
814	.$d2f	RTS
815	.$d30	INVAR  INY
816	.$d31	LDA (TMP2_ZP),Y  
817	.$d33	CMP #>CONSTANTS_END
818	.$d35	BEQ CHECKLOW2
819	.$d37	BCS INVAR2
820	.$d39	JMP PUPDATEPTR
821	.$d3c	CHECKLOW2 DEY
822	.$d3d	LDA (TMP2_ZP),Y
823	.$d3f	CMP #<CONSTANTS_END
824	.$d41	BCS INVAR2
825	.$d43	JMP PUPDATEPTR
826	.$d46	INVAR2  LDY #0   
827	.$d48	LDA (TMP3_ZP),Y
828	.$d4a	STA TMP_REG
829	.$d4c	TXA
830	.$d4d	CMP TMP_REG  
831	.$d4f	BEQ UPDATEHP2 
834	.$d51	PUPDATEPTR JSR CHECKLASTVAR
835	.$d54	LDY #1   
836	.$d56	STY TMP_FLAG 
837	.$d59	JMP UPDATEPTR 
838	.$d5c	UPDATEHP2 LDA HIGHP  
839	.$d5f	STA STRBUFP
840	.$d62	LDA HIGHP+1
841	.$d65	STA STRBUFP+1
842	.$d68	JMP STRFITS
843	.$d6b	COPYONLY LDY #0
844	.$d6d	STY TMP_FLAG
845	.$d70	JMP CHECKMEM
846	.$d73	ALTCOPY  JMP COPYSTRING2
847	.$d76	UPDATEPTR LDA TMP_ZP+1 
848	.$d78	CMP HIGHP+1  
849	.$d7b	BEQ CHECKXT1
850	.$d7d	BCS ALTCOPY
851	.$d7f	JMP CHECKMEM
852	.$d82	CHECKXT1 LDA TMP_ZP
853	.$d84	CMP HIGHP
854	.$d87	BCS ALTCOPY
855	.$d89	CHECKMEM
856	.$d89	MEMOK  LDY #0
857	.$d8b	LDA STRBUFP  
858	.$d8e	STA (TMP2_ZP),Y 
859	.$d90	STA TMP3_ZP
860	.$d92	LDA STRBUFP+1
861	.$d95	INY
862	.$d96	STA (TMP2_ZP),Y
863	.$d98	STA TMP3_ZP+1
864	.$d9a	TXA
865	.$d9b	CLC
866	.$d9c	ADC STRBUFP
867	.$d9f	PHP
868	.$da0	CLC
869	.$da1	ADC #3
870	.$da3	STA STRBUFP
871	.$da6	BCC NOCS1
872	.$da8	INC STRBUFP+1
873	.$dab	NOCS1  PLP
874	.$dac	BCC STRFITS
875	.$dae	INC STRBUFP+1
876	.$db1	STRFITS  LDY TMP_FLAG 
877	.$db4	BEQ NOHPUPDATE 
878	.$db6	LDA HIGHP+1
879	.$db9	CMP STRBUFP+1
880	.$dbc	BCC UPDATEHIGHP
881	.$dbe	BEQ CHECKNEXTHP
882	.$dc0	JMP NOHPUPDATE
883	.$dc3	CHECKNEXTHP LDA HIGHP
884	.$dc6	CMP STRBUFP
885	.$dc9	BCC UPDATEHIGHP
886	.$dcb	JMP NOHPUPDATE
887	.$dce	UPDATEHIGHP LDA STRBUFP
888	.$dd1	STA HIGHP
889	.$dd4	LDA STRBUFP+1
890	.$dd7	STA HIGHP+1  
891	.$dda	JSR REMEMBERLASTVAR
892	.$ddd	JSR STOREVARREF
893	.$de0	NOHPUPDATE LDY #0
894	.$de2	LDA (TMP_ZP),Y 
895	.$de4	STA (TMP3_ZP),Y
896	.$de6	TAY    
897	.$de7	BEQ EXITCOPY 
898	.$de9	LOOP  LDA (TMP_ZP),Y 
899	.$deb	STA (TMP3_ZP),Y
900	.$ded	DEY
901	.$dee	BNE LOOP
902	.$df0	EXITCOPY RTS
907	.$df1	COPYSTRING2 LDY #0
908	.$df3	LDA (TMP_ZP),Y
909	.$df5	STA TMP_REG
910	.$df7	TAX
911	.$df8	LDA HIGHP
912	.$dfb	STA TMP3_ZP
913	.$dfd	STA (TMP2_ZP),Y
914	.$dff	LDA HIGHP+1
915	.$e02	STA TMP3_ZP+1
916	.$e04	INY
917	.$e05	STA (TMP2_ZP),Y
918	.$e07	JSR REMEMBERLASTVAR
921	.$e0a	LDA TMP_ZP
922	.$e0c	CMP TMP3_ZP
923	.$e0e	BNE DOLOOP
924	.$e10	LDA TMP_ZP+1
925	.$e12	CMP TMP3_ZP+1
926	.$e14	BEQ SKIPCP2
927	.$e16	DOLOOP  DEY
928	.$e17	TXA
929	.$e18	STA (TMP3_ZP),Y
930	.$e1a	INY
931	.$e1b	ASLOOP  LDA (TMP_ZP),Y
932	.$e1d	STA (TMP3_ZP),Y
933	.$e1f	INY
934	.$e20	DEX
935	.$e21	BNE ASLOOP
936	.$e23	SKIPCP2  LDA HIGHP
937	.$e26	CLC
938	.$e27	ADC TMP_REG
939	.$e29	PHP
940	.$e2a	CLC
941	.$e2b	ADC #3
942	.$e2d	STA HIGHP
943	.$e30	STA STRBUFP
944	.$e33	BCC SKIPLOWAS1
945	.$e35	INC HIGHP+1
946	.$e38	SKIPLOWAS1 PLP
947	.$e39	BCC SKIPLOWAS2
948	.$e3b	INC HIGHP+1
949	.$e3e	SKIPLOWAS2 LDA HIGHP+1
950	.$e41	STA STRBUFP+1
951	.$e44	JSR STOREVARREF
952	.$e47	RTS
956	.$e48	CHECKLASTVAR
957	.$e48	LDA TMP2_ZP
958	.$e4a	CMP LASTVAR
959	.$e4d	BNE NOTSAMEVAR
960	.$e4f	LDA TMP2_ZP+1
961	.$e51	CMP LASTVAR+1
962	.$e54	BNE NOTSAMEVAR
963	.$e56	LDA LASTVARP   
964	.$e59	STA HIGHP
965	.$e5c	STA STRBUFP
966	.$e5f	LDA LASTVARP+1
967	.$e62	STA HIGHP+1
968	.$e65	STA STRBUFP+1
969	.$e68	NOTSAMEVAR RTS
973	.$e69	REMEMBERLASTVAR
974	.$e69	LDA TMP2_ZP
975	.$e6b	STA LASTVAR
976	.$e6e	LDA TMP2_ZP+1
977	.$e70	STA LASTVAR+1
978	.$e73	LDA TMP3_ZP
979	.$e75	STA LASTVARP
980	.$e78	LDA TMP3_ZP+1
981	.$e7a	STA LASTVARP+1 
982	.$e7d	RTS
987	.$e7e	STOREVARREF
988	.$e7e	TYA
989	.$e7f	PHA    
990	.$e80	LDA TMP_ZP
991	.$e82	PHA
992	.$e83	LDA TMP_ZP+1
993	.$e85	PHA
994	.$e86	LDA HIGHP+1
995	.$e89	STA TMP_ZP+1
996	.$e8b	LDA HIGHP
997	.$e8e	SEC
998	.$e8f	SBC #2
999	.$e91	STA TMP_ZP
1000	.$e93	BCS RLVNOOV
1001	.$e95	DEC TMP_ZP+1
1002	.$e97	RLVNOOV  LDA TMP2_ZP
1003	.$e99	LDY #0
1004	.$e9b	STA (TMP_ZP),Y
1005	.$e9d	LDA TMP2_ZP+1
1006	.$e9f	INY
1007	.$ea0	STA (TMP_ZP),Y 
1008	.$ea2	PLA
1009	.$ea3	STA TMP_ZP+1
1010	.$ea5	PLA
1011	.$ea6	STA TMP_ZP  
1012	.$ea8	PLA
1013	.$ea9	TAY    
1014	.$eaa	RTS
1017	.$eab	REROUTE  LDA CMD_NUM  
1018	.$eae	BEQ REROUTECMD
1019	.$eb0	TAX
1020	.$eb1	STA CHANNEL
1021	.$eb4	JMP CHKOUT
1022	.$eb7	REROUTECMD RTS
1025	.$eb8	RESETROUTE LDA CMD_NUM  
1026	.$ebb	BEQ RESETROUTECMD
1027	.$ebd	JMP CLRCHNEW
1028	.$ec0	RESETROUTECMD
1029	.$ec0	RTS
1032	.$ec1	STROUTWL STA A_REG
1033	.$ec4	STY A_REG+1
1034	.$ec7	STROUT  JSR REROUTE
1035	.$eca	LDA A_REG
1036	.$ecd	STA INDEX1
1037	.$ecf	LDA A_REG+1
1038	.$ed2	STA INDEX1+1
1039	.$ed4	LDY #0
1040	.$ed6	LDA (INDEX1),Y
1041	.$ed8	TAX
1042	.$ed9	INC INDEX1
1043	.$edb	BNE PRINTSTR
1044	.$edd	INC INDEX1+1
1045	.$edf	PRINTSTR JSR PRINTSTRS
1046	.$ee2	LDA HIGHP   
1047	.$ee5	STA STRBUFP
1048	.$ee8	LDA HIGHP+1
1049	.$eeb	STA STRBUFP+1
1050	.$eee	JSR RESETROUTE
1051	.$ef1	RTS
1054	.$ef2	STROUTBRKWL STA A_REG
1055	.$ef5	STY A_REG+1
1056	.$ef8	STROUTBRK JSR REROUTE
1057	.$efb	LDA A_REG
1058	.$efe	STA INDEX1
1059	.$f00	LDA A_REG+1
1060	.$f03	STA INDEX1+1
1061	.$f05	LDY #0
1062	.$f07	LDA (INDEX1),Y
1063	.$f09	TAX
1064	.$f0a	INC INDEX1
1065	.$f0c	BNE PRINTSTR2
1066	.$f0e	INC INDEX1+1
1067	.$f10	PRINTSTR2 JSR PRINTSTRS
1068	.$f13	LDA HIGHP   
1069	.$f16	STA STRBUFP
1070	.$f19	LDA HIGHP+1
1071	.$f1c	STA STRBUFP+1
1072	.$f1f	LDA #$0D
1073	.$f21	JSR CHROUT
1074	.$f24	JMP RESETROUTE  
1077	.$f27	CLEARQUEUE LDA #$0
1078	.$f29	STA INPUTQUEUEP
1079	.$f2c	RTS
1082	.$f2d	CLEANINPUT LDY #0    
1083	.$f2f	LDX #0
1084	.$f31	STY STORE1   
1085	.$f34	STY STORE2   
1086	.$f37	DEY
1087	.$f38	CILOOP  INY
1088	.$f39	LDA $0200,Y
1089	.$f3c	BNE CINOEND
1090	.$f3e	JMP CIEND   
1091	.$f41	CINOEND  STA STORE3   
1092	.$f44	LDA STORE1
1093	.$f47	BEQ CINOQUOTE  
1094	.$f49	LDA STORE3
1095	.$f4c	CMP #$22   
1096	.$f4e	BNE CISTILLQUOTE 
1097	.$f50	LDA #0    
1098	.$f52	STA STORE1
1099	.$f55	JMP CILOOP
1100	.$f58	CISTILLQUOTE
1101	.$f58	STA $0200,X
1102	.$f5b	INX
1103	.$f5c	JMP CILOOP
1104	.$f5f	CINOQUOTE LDA STORE3
1105	.$f62	CMP #$22
1106	.$f64	BNE CISOMECHAR  
1107	.$f66	CIFIRSTCHAR LDA #1    
1108	.$f68	STA STORE1   
1109	.$f6b	STA STORE2   
1110	.$f6e	JMP CILOOP
1111	.$f71	CISOMECHAR  CMP #$3A   
1112	.$f73	BNE CINOCOLON
1113	.$f75	JMP CIEND
1114	.$f78	CINOCOLON CMP #$2C   
1115	.$f7a	BNE CINOCOMMA
1116	.$f7c	LDA #$22   
1117	.$f7e	STA $0200,X
1118	.$f81	INX
1119	.$f82	LDA #0
1120	.$f84	STA STORE2   
1121	.$f87	JMP CILOOP
1122	.$f8a	CINOCOMMA CMP #$20   
1123	.$f8c	BNE CINOSPACE
1124	.$f8e	LDA STORE2   
1125	.$f91	BEQ CINEXT   
1126	.$f93	LDA STORE3
1127	.$f96	CINOSPACE STA $0200,X
1128	.$f99	STA STORE2   
1129	.$f9c	INX
1130	.$f9d	CINEXT  JMP CILOOP
1131	.$fa0	CIEND  LDA #0
1132	.$fa2	STA $0200,X   
1133	.$fa5	RTS     
1136	.$fa6	INPUTSTR LDA #$0
1137	.$fa8	INPUTSTR2 STA TMP_REG+1
1138	.$faa	LDA #$0
1139	.$fac	STX INPUTLENGTH
1140	.$faf	STA TMP_REG
1141	.$fb1	STA TMP_FLAG
1142	.$fb4	LDX INPUTQUEUEP
1143	.$fb7	BEQ INPUTNORM
1144	.$fb9	LDA #LOFBUF
1145	.$fbb	LDX #$1
1146	.$fbd	CLC
1147	.$fbe	ADC INPUTQUEUE
1148	.$fc1	STA TMP_ZP
1149	.$fc3	BCC INNONO
1150	.$fc5	LDX #$2
1151	.$fc7	INNONO  STX TMP_ZP+1
1152	.$fc9	DEC INPUTQUEUEP  
1153	.$fcc	LDY INPUTQUEUE  
1154	.$fcf	STY TMP_REG   
1155	.$fd1	DEY
1156	.$fd2	LDX #$0
1157	.$fd4	SHRINKQ  LDA INPUTQUEUEP
1158	.$fd7	BEQ QUEUEEMPTY
1159	.$fd9	INX
1160	.$fda	LDA INPUTQUEUE,X 
1161	.$fdd	DEX
1162	.$fde	STA INPUTQUEUE,X
1163	.$fe1	INX
1164	.$fe2	CPX INPUTQUEUEP
1165	.$fe5	BNE SHRINKQ
1166	.$fe7	QUEUEEMPTY JMP ISTRLOOP
1167	.$fea	INPUTNORM AND #$FF
1168	.$fec	JSR INPUT
1169	.$fef	JSR CLEANINPUT
1170	.$ff2	LDA #LOFBUF
1171	.$ff4	STA TMP_ZP
1172	.$ff6	LDA #$1
1173	.$ff8	STA TMP_ZP+1
1174	.$ffa	LDY #0
1175	.$ffc	DEY
1176	.$ffd	ISTRLOOP INY
1177	.$ffe	LDA INPUTBUF,Y
1178	.$1001	TAX
1179	.$1002	CMP #$22   
1180	.$1004	BNE ICHECK
1181	.$1006	STA TMP_FLAG
1182	.$1009	LDA #$0
1183	.$100b	STA INPUTBUF,Y   
1184	.$100e	LDX INPUTQUEUEP  
1185	.$1011	BNE INQUEUENE  
1186	.$1013	STA INPUTQUEUE  
1187	.$1016	INX
1188	.$1017	INQUEUENE INY
1189	.$1018	TYA
1190	.$1019	STA INPUTQUEUE,X 
1191	.$101c	INX
1192	.$101d	STX INPUTQUEUEP  
1193	.$1020	JMP ISTRLOOP  
1194	.$1023	ICHECK  TXA     
1195	.$1024	BNE ISTRLOOP  
1196	.$1026	LDA TMP_FLAG
1197	.$1029	BEQ ISIMPLECOPY
1198	.$102b	JMP INPUTSTR
1199	.$102e	ISIMPLECOPY TYA
1200	.$102f	SEC
1201	.$1030	SBC TMP_REG
1202	.$1032	LDY #0
1203	.$1034	STA (TMP_ZP),Y
1204	.$1036	TAX    
1205	.$1037	STX INPUTLENGTH
1206	.$103a	LDA TMP_REG+1 
1207	.$103c	BEQ INISSTR
1208	.$103e	RTS
1209	.$103f	INISSTR  LDA #<A_REG
1210	.$1041	LDY #>A_REG
1211	.$1043	STA TMP2_ZP
1212	.$1045	STY TMP2_ZP+1
1213	.$1047	JSR COPYONLY
1214	.$104a	RTS
1217	.$104b	ZEROSET  LDA #0
1218	.$104d	STA X_REG
1219	.$104f	STA X_REG+1
1220	.$1051	STA X_REG+2
1221	.$1053	STA X_REG+3
1222	.$1055	STA X_REG+4
1223	.$1057	RTS
1226	.$1058	SEQ   JSR CMPSTR
1227	.$105b	LDA TMP3_ZP
1228	.$105d	BNE NOTSEQ
1229	.$105f	LDA #<REAL_CONST_MINUS_ONE
1230	.$1061	STA TMP3_ZP
1231	.$1063	LDA #>REAL_CONST_MINUS_ONE
1232	.$1065	STA TMP3_ZP+1
1233	.$1067	JMP COPY2_XY_XREG
1234	.$106a	NOTSEQ  JMP ZEROSET
1237	.$106d	CMPSTR  LDY #0   
1238	.$106f	LDX #1
1239	.$1071	LDA A_REG
1240	.$1074	STA TMP_ZP
1241	.$1076	LDA A_REG+1
1242	.$1079	STA TMP_ZP+1
1243	.$107b	LDA B_REG
1244	.$107e	STA TMP2_ZP
1245	.$1080	LDA B_REG+1
1246	.$1083	STA TMP2_ZP+1
1247	.$1085	CMP TMP_ZP+1
1248	.$1087	BNE CMPSTRSK1
1249	.$1089	LDA TMP2_ZP
1250	.$108b	CMP TMP_ZP
1251	.$108d	BNE CMPSTRSK1
1252	.$108f	LDX #0
1253	.$1091	JMP STRCMPRES
1254	.$1094	CMPSTRSK1 LDA (TMP_ZP),Y
1255	.$1096	CMP (TMP2_ZP),Y
1256	.$1098	BNE STRCMPRES
1257	.$109a	TAX
1258	.$109b	BNE NOTZCTR
1259	.$109d	LDX #0
1260	.$109f	JMP STRCMPRES
1261	.$10a2	NOTZCTR  INC TMP_ZP
1262	.$10a4	BNE SCSKP1
1263	.$10a6	INC TMP_ZP+1
1264	.$10a8	SCSKP1  INC TMP2_ZP
1265	.$10aa	BNE CMPSTRLOOP
1266	.$10ac	INC TMP2_ZP+1
1267	.$10ae	CMPSTRLOOP LDA (TMP_ZP),Y
1268	.$10b0	CMP (TMP2_ZP),Y
1269	.$10b2	BNE STRCMPRES
1270	.$10b4	INY
1271	.$10b5	DEX
1272	.$10b6	BNE CMPSTRLOOP
1273	.$10b8	STRCMPRES STX TMP3_ZP
1274	.$10ba	RTS
1277	.$10bb	PUSHINT  LDX FPSTACKP
1278	.$10be	STX TMP2_ZP
1279	.$10c0	LDX FPSTACKP+1
1280	.$10c3	STX TMP2_ZP+1
1281	.$10c5	LDA TMP_ZP
1282	.$10c7	LDY #0
1283	.$10c9	STA (TMP2_ZP),Y
1284	.$10cb	LDA TMP_ZP+1
1285	.$10cd	INY
1286	.$10ce	STA (TMP2_ZP),Y
1287	.$10d0	LDA TMP2_ZP
1288	.$10d2	CLC
1289	.$10d3	ADC #2
1290	.$10d5	STA FPSTACKP
1291	.$10d8	LDA TMP2_ZP+1
1292	.$10da	ADC #0
1293	.$10dc	STA FPSTACKP+1
1294	.$10df	RTS
1297	.$10e0	POPINT2B LDA FPSTACKP
1298	.$10e3	SEC
1299	.$10e4	SBC #2
1300	.$10e6	STA FPSTACKP
1301	.$10e9	LDA FPSTACKP+1
1302	.$10ec	SBC #0
1303	.$10ee	STA FPSTACKP+1
1304	.$10f1	LDX FPSTACKP
1305	.$10f4	STX TMP2_ZP
1306	.$10f6	LDX FPSTACKP+1
1307	.$10f9	STX TMP2_ZP+1
1308	.$10fb	LDY #0
1309	.$10fd	LDA (TMP2_ZP),Y
1310	.$10ff	STA B_REG
1311	.$1102	INY
1312	.$1103	LDA (TMP2_ZP),Y
1313	.$1105	STA B_REG+1
1314	.$1108	RTS
1317	.$1109	REALFACPUSH STA TMP_ZP
1318	.$110b	STY TMP_ZP+1
1319	.$110d	LDX FPSTACKP
1320	.$1110	LDY FPSTACKP+1
1321	.$1113	STX TMP2_ZP
1322	.$1115	STY TMP2_ZP+1
1323	.$1117	LDY #0
1324	.$1119	LDA (TMP_ZP),Y
1325	.$111b	STA (TMP2_ZP),Y
1326	.$111d	INY
1327	.$111e	LDA (TMP_ZP),Y
1328	.$1120	STA (TMP2_ZP),Y
1329	.$1122	INY
1330	.$1123	LDA (TMP_ZP),Y
1331	.$1125	STA (TMP2_ZP),Y
1332	.$1127	INY
1333	.$1128	LDA (TMP_ZP),Y
1334	.$112a	STA (TMP2_ZP),Y
1335	.$112c	INY
1336	.$112d	LDA (TMP_ZP),Y
1337	.$112f	STA (TMP2_ZP),Y
1338	.$1131	TXA    
1339	.$1132	CLC
1340	.$1133	ADC #5
1341	.$1135	STA FPSTACKP
1342	.$1138	BCC NOPVRFPXX
1343	.$113a	INC FPSTACKP+1
1344	.$113d	NOPVRFPXX RTS
1347	.$113e	POPREAL  LDA FPSTACKP
1348	.$1141	SEC
1349	.$1142	SBC #5
1350	.$1144	STA FPSTACKP
1351	.$1147	BCS NOPVPR
1352	.$1149	DEC FPSTACKP+1
1353	.$114c	NOPVPR  LDA FPSTACKP
1354	.$114f	LDY FPSTACKP+1
1355	.$1152	JMP REALFAC
1358	.$1155	POPREALXREG LDA FPSTACKP
1359	.$1158	SEC
1360	.$1159	SBC #5
1361	.$115b	STA FPSTACKP
1362	.$115e	BCS NOPVPRXR
1363	.$1160	DEC FPSTACKP+1
1364	.$1163	NOPVPRXR LDA FPSTACKP
1365	.$1166	LDY FPSTACKP+1
1366	.$1169	STA TMP_ZP
1367	.$116b	STY TMP_ZP+1
1368	.$116d	LDY #$4
1369	.$116f	LDA (TMP_ZP),Y
1370	.$1171	STA X_REG+4
1371	.$1173	STA FACLO
1372	.$1175	DEY
1373	.$1176	LDA (TMP_ZP),Y
1374	.$1178	STA X_REG+3
1375	.$117a	STA FACMO
1376	.$117c	DEY
1377	.$117d	LDA (TMP_ZP),Y
1378	.$117f	STA X_REG+2
1379	.$1181	STA FACMOH
1380	.$1183	DEY
1381	.$1184	LDA (TMP_ZP),Y
1382	.$1186	STA X_REG+1
1383	.$1188	STA FACSGN
1384	.$118a	ORA #$80
1385	.$118c	STA FACHO
1386	.$118e	DEY
1387	.$118f	LDA (TMP_ZP),Y
1388	.$1191	STA X_REG
1389	.$1193	STA FACEXP
1390	.$1195	STY FACOV
1391	.$1197	RTS
1394	.$1198	COPY2_XYA_XREG
1395	.$1198	STA TMP3_ZP
1396	.$119a	STY TMP3_ZP+1
1397	.$119c	COPY2_XY_XREG
1398	.$119c	LDX #<X_REG  
1399	.$119e	LDY #0
1400	.$11a0	LDA (TMP3_ZP),Y
1401	.$11a2	STA X_REG
1402	.$11a4	INY
1403	.$11a5	LDA (TMP3_ZP),Y
1404	.$11a7	STA X_REG+1
1405	.$11a9	INY
1406	.$11aa	LDA (TMP3_ZP),Y
1407	.$11ac	STA X_REG+2
1408	.$11ae	INY
1409	.$11af	LDA (TMP3_ZP),Y
1410	.$11b1	STA X_REG+3
1411	.$11b3	INY
1412	.$11b4	LDA (TMP3_ZP),Y
1413	.$11b6	STA X_REG+4
1414	.$11b8	RTS
1417	.$11b9	COPY2_XYA_YREG
1418	.$11b9	STA TMP3_ZP
1419	.$11bb	STY TMP3_ZP+1
1420	.$11bd	COPY2_XY_YREG
1421	.$11bd	LDX #<Y_REG  
1422	.$11bf	LDY #0
1423	.$11c1	LDA (TMP3_ZP),Y
1424	.$11c3	STA Y_REG
1425	.$11c6	INY
1426	.$11c7	LDA (TMP3_ZP),Y
1427	.$11c9	STA Y_REG+1
1428	.$11cc	INY
1429	.$11cd	LDA (TMP3_ZP),Y
1430	.$11cf	STA Y_REG+2
1431	.$11d2	INY
1432	.$11d3	LDA (TMP3_ZP),Y
1433	.$11d5	STA Y_REG+3
1434	.$11d8	INY
1435	.$11d9	LDA (TMP3_ZP),Y
1436	.$11db	STA Y_REG+4
1437	.$11de	RTS
1441	.$11df	FACWORD
1442	.$11df	LDA FACEXP   
1443	.$11e1	BNE DOFACWORD
1444	.$11e3	STA FACSGN   
1445	.$11e5	DOFACWORD:
1446	.$11e5	JMP XFACWORD
1450	.$11e8	INITINCHANNEL
1451	.$11e8	LDA IOCHANNEL
1452	.$11ea	STA STORE1+1
1453	.$11ed	LDA #1
1454	.$11ef	STA IOCHANNEL  
1455	.$11f1	LDA #<C_REG
1456	.$11f3	LDY #>C_REG
1457	.$11f5	JSR REALFAC
1458	.$11f8	JSR FACWORD
1459	.$11fb	TYA
1460	.$11fc	TAX
1461	.$11fd	STA CHANNEL
1462	.$1200	STA CHLOCKFLAG
1463	.$1203	JMP CHKIN
1464	.$1206	RTS
1467	.$1207	CLRCHNEW
1468	.$1207	LDA CHLOCKFLAG
1469	.$120a	BNE SKIPCLRCH
1470	.$120c	JMP CLRCH
1471	.$120f	SKIPCLRCH
1472	.$120f	RTS
1475	.$1210	INPUTLENGTHCHECK LDA INPUTLENGTH
1476	.$1213	RTS
1479	.$1214	INPUTSTRCHANNEL
1480	.$1214	JSR INITINCHANNEL
1481	.$1217	JSR INPUTSTR
1482	.$121a	JMP CLRINCH
1485	.$121d	CLRINCH  JSR CLRCH
1486	.$1220	LDA STORE1+1
1487	.$1223	STA IOCHANNEL
1488	.$1225	RTS
1491	.$1226	OPEN  JSR SETEMPTYSTR 
1492	.$1229	JSR YREGFAC
1493	.$122c	JSR FACWORD
1494	.$122f	STY TMP_REG  
1495	.$1231	JSR XREGFAC
1496	.$1234	JSR FACWORD
1497	.$1237	STY LOGICADDR 
1498	.$1239	DEC TMP_REG
1499	.$123b	BEQ ALLPARAMS
1500	.$123d	LDA #<C_REG
1501	.$123f	LDY #>C_REG
1502	.$1241	JSR REALFAC
1503	.$1244	JSR FACWORD
1504	.$1247	STY DEVICENUM 
1505	.$1249	DEC TMP_REG
1506	.$124b	BEQ ALLPARAMS
1507	.$124d	LDA #<D_REG
1508	.$124f	LDY #>D_REG
1509	.$1251	JSR REALFAC
1510	.$1254	JSR FACWORD
1511	.$1257	STY SECADDR  
1512	.$1259	DEC TMP_REG
1513	.$125b	BEQ ALLPARAMS
1514	.$125d	JSR SETNAMEPRT
1515	.$1260	ALLPARAMS
1519	.$1260	JSR OPENCH
1520	.$1263	BCS OPENERR
1521	.$1265	RTS
1522	.$1266	OPENERR  STA TMP2_ZP
1523	.$1268	LDA LOGICADDR
1524	.$126a	JSR CLOSECH
1528	.$126d	LDX TMP2_ZP
1529	.$126f	JMP ERRALL
1532	.$1272	SETEMPTYSTR
1533	.$1272	LDA #<EMPTYSTR
1534	.$1274	STA FILEADDR
1535	.$1276	LDA #>EMPTYSTR
1536	.$1278	STA FILEADDR+1
1537	.$127a	LDA #0
1538	.$127c	STA FILELEN
1539	.$127e	STA LOGICADDR
1540	.$1280	STA DEVICENUM
1541	.$1282	STA SECADDR
1542	.$1284	RTS
1545	.$1285	SETNAMEPRT LDA G_REG
1546	.$1287	LDY G_REG+1
1547	.$1289	STA TMP_ZP
1548	.$128b	STY TMP_ZP+1
1549	.$128d	LDY #0
1550	.$128f	LDA (TMP_ZP),Y 
1551	.$1291	STA FILELEN
1552	.$1293	INC G_REG
1553	.$1295	BNE SNPNOOV
1554	.$1297	INC G_REG+1
1555	.$1299	SNPNOOV  LDA G_REG
1556	.$129b	LDY G_REG+1
1557	.$129d	STA FILEADDR  
1558	.$129f	STY FILEADDR+1 
1559	.$12a1	RTS
1562	.$12a2	CLOSE  JSR XREGFAC
1563	.$12a5	JSR FACWORD
1564	.$12a8	TYA    
1565	.$12a9	JSR CLOSECH
1569	.$12ac	RTS
1572	.$12ad	OUTOFMEMORY
1576	.$12ad	LDX #$10
1577	.$12af	JMP ERRALL
1580	.$12b2	STRINGTOOLONG
1584	.$12b2	LDX #$17
1585	.$12b4	JMP ERRALL
1588	.$12b7	XREGFAC  LDA X_REG+4
1589	.$12b9	STA FACLO
1590	.$12bb	LDA X_REG+3
1591	.$12bd	STA FACMO
1592	.$12bf	LDA X_REG+2
1593	.$12c1	STA FACMOH
1594	.$12c3	LDA X_REG+1
1595	.$12c5	STA FACSGN
1596	.$12c7	ORA #$80
1597	.$12c9	STA FACHO
1598	.$12cb	LDA X_REG
1599	.$12cd	STA FACEXP
1600	.$12cf	LDA #0
1601	.$12d1	STA FACOV
1602	.$12d3	RTS
1605	.$12d4	YREGFAC  LDA Y_REG+4
1606	.$12d7	STA FACLO
1607	.$12d9	LDA Y_REG+3
1608	.$12dc	STA FACMO
1609	.$12de	LDA Y_REG+2
1610	.$12e1	STA FACMOH
1611	.$12e3	LDA Y_REG+1
1612	.$12e6	STA FACSGN
1613	.$12e8	ORA #$80
1614	.$12ea	STA FACHO
1615	.$12ec	LDA Y_REG
1616	.$12ef	STA FACEXP
1617	.$12f1	LDA #0
1618	.$12f3	STA FACOV
1619	.$12f5	RTS
1733	.$12f6	INITVARS
1734	.$12f6	JSR INITSTRVARS
1735	.$12f9	LDA #0
1736	.$12fb	RTS
1740	.$12fc	CONSTANTS
1743	.$12fc	CONST_0R .REAL 2.0
1746	.$1301	CONST_1R .REAL 0.0
1752	.$1306	CONST_3R .REAL 4.0
1754	.$130b	CONST_4 .BYTE 2
1755	.$130c	.STRG "i:"
1757	.$130e	CONST_5 .BYTE 4
1758	.$130f	.STRG "exit"
1761	.$1313	DATAS
1762	.$1313	.BYTE $FF
1764	.$1314	CONSTANTS_END
1767	.$1314	VARIABLES
1768	.$1314	STRINGVARS_START
1770	.$1314	VAR_A$ .WORD EMPTYSTR
1772	.$1316	VAR_TI$ .WORD EMPTYSTR
1773	.$1318	STRINGVARS_END
1774	.$1318	STRINGARRAYS_START
1775	.$1318	STRINGARRAYS_END
1776	.$1318	VARIABLES_END
1778	.$1318	Y_REG .REAL 0.0
1779	.$131d	C_REG .REAL 0.0
1780	.$1322	D_REG .REAL 0.0
1781	.$1327	E_REG .REAL 0.0
1782	.$132c	F_REG .REAL 0.0
1783	.$1331	A_REG .WORD 0
1784	.$1333	B_REG .WORD 0
1785	.$1335	CMD_NUM .BYTE 0
1786	.$1336	CHANNEL .BYTE 0
1787	.$1337	SP_SAVE .BYTE 0
1788	.$1338	TMP2_REG .WORD 0
1789	.$133a	TMP3_REG .WORD 0
1790	.$133c	TMP4_REG .WORD 0
1791	.$133e	AS_TMP .WORD 0
1792	.$1340	BPOINTER_TMP .WORD 0
1793	.$1342	BASICTEXTP .BYTE 0
1794	.$1343	STORE1 .WORD 0
1795	.$1345	STORE2 .WORD 0
1796	.$1347	STORE3 .WORD 0
1797	.$1349	STORE4 .WORD 0
1798	.$134b	GCSTART .WORD 0
1799	.$134d	GCLEN .WORD 0
1800	.$134f	GCWORK .WORD 0
1801	.$1351	INPUTLENGTH .BYTE 0
1802	.$1352	TMP_FREG .REAL 0
1803	.$1357	TMP2_FREG .REAL 0
1804	.$135c	TMP_FLAG .BYTE 0
1805	.$135d	INT_FLAG .BYTE 0
1806	.$135e	REAL_CONST_ONE .REAL 1.0
1807	.$1363	REAL_CONST_ZERO .REAL 0.0
1808	.$1368	REAL_CONST_MINUS_ONE .REAL -1.0
1809	.$136d	CHLOCKFLAG .BYTE 0
1810	.$136e	EMPTYSTR .BYTE 0
1811	.$136f	FPSTACKP .WORD FPSTACK
1812	.$1371	FORSTACKP .WORD FORSTACK
1813	.$1373	DATASP .WORD DATAS
1814	.$1375	LASTVAR .WORD 0
1815	.$1377	LASTVARP .WORD 0
1816	.$1379	HIGHP .WORD STRBUF
1817	.$137b	STRBUFP .WORD STRBUF
1818	.$137d	ENDSTRBUF .WORD 0
1819	.$137f	INPUTQUEUEP .BYTE 0
1820	.$1380	PROGRAMEND
1821	.$1380	INPUTQUEUE .ARRAY $0F
1822	.$138f	FPSTACK .ARRAY 100
1823	.$13f3	FORSTACK .ARRAY 340
1824	.$1547	STRBUF .BYTE 0
