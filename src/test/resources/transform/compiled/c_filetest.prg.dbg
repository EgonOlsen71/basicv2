117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_5:
128	.$81f	LDA #<CONST_0
129	.$821	LDY #>CONST_0
130	.$823	JSR STROUTBRKWL
134	.$826	LINE_10:
136	.$826	LDA #<CONST_1R
137	.$828	LDY #>CONST_1R
138	.$82a	JSR REALFACPUSH
140	.$82d	LDA #<CONST_2R
141	.$82f	LDY #>CONST_2R
142	.$831	JSR REALFACPUSH
144	.$834	LDA #<CONST_3R
145	.$836	LDY #>CONST_3R
146	.$838	JSR REALFACPUSH
148	.$83b	LDA #<CONST_4
149	.$83d	LDY #>CONST_4
150	.$83f	STA B_REG
151	.$842	STY B_REG+1
152	.$845	LDY B_REG
153	.$848	LDA B_REG+1
154	.$84b	STY G_REG
155	.$84d	STA G_REG+1
156	.$84f	JSR POPREAL
157	.$852	LDX #<D_REG
158	.$854	LDY #>D_REG
160	.$856	JSR FACMEM
161	.$859	JSR POPREAL
162	.$85c	LDX #<C_REG
163	.$85e	LDY #>C_REG
165	.$860	JSR FACMEM
166	.$863	JSR POPREALXREG
169	.$866	LDA #<CONST_5R
170	.$868	LDY #>CONST_5R
171	.$86a	JSR COPY2_XYA_YREG
175	.$86d	JSR OPEN
177	.$870	LINE_20:
179	.$870	JSR LOCKCHANNEL
180	.$873	LDA #<CONST_1R
181	.$875	LDY #>CONST_1R
182	.$877	JSR REALFACPUSH
184	.$87a	LDA #<CONST_6
185	.$87c	LDY #>CONST_6
186	.$87e	STA A_REG
187	.$881	STY A_REG+1
188	.$884	JSR POPREAL
189	.$887	LDX #<C_REG
190	.$889	LDY #>C_REG
192	.$88b	JSR FACMEM
193	.$88e	JSR STROUTCHANNEL
194	.$891	JSR LINEBREAKCHANNEL
195	.$894	JSR UNLOCKCHANNEL
197	.$897	LINE_30:
199	.$897	LDA #<CONST_1R
200	.$899	LDY #>CONST_1R
201	.$89b	JSR COPY2_XYA_XREG
205	.$89e	JSR CLOSE
207	.$8a1	LINE_35:
209	.$8a1	LDA #<CONST_7
210	.$8a3	LDY #>CONST_7
211	.$8a5	JSR STROUTBRKWL
215	.$8a8	LINE_40:
217	.$8a8	LDA #<CONST_5R
218	.$8aa	LDY #>CONST_5R
219	.$8ac	JSR REALFACPUSH
221	.$8af	LDA #<CONST_2R
222	.$8b1	LDY #>CONST_2R
223	.$8b3	JSR REALFACPUSH
225	.$8b6	LDA #<CONST_3R
226	.$8b8	LDY #>CONST_3R
227	.$8ba	JSR REALFACPUSH
229	.$8bd	LDA #<CONST_8
230	.$8bf	LDY #>CONST_8
231	.$8c1	STA B_REG
232	.$8c4	STY B_REG+1
233	.$8c7	LDY B_REG
234	.$8ca	LDA B_REG+1
235	.$8cd	STY G_REG
236	.$8cf	STA G_REG+1
237	.$8d1	JSR POPREAL
238	.$8d4	LDX #<D_REG
239	.$8d6	LDY #>D_REG
241	.$8d8	JSR FACMEM
242	.$8db	JSR POPREAL
243	.$8de	LDX #<C_REG
244	.$8e0	LDY #>C_REG
246	.$8e2	JSR FACMEM
247	.$8e5	JSR POPREALXREG
250	.$8e8	LDA #<CONST_5R
251	.$8ea	LDY #>CONST_5R
252	.$8ec	JSR COPY2_XYA_YREG
256	.$8ef	JSR OPEN
258	.$8f2	LINE_50:
260	.$8f2	LDA #<CONST_5R
261	.$8f4	LDY #>CONST_5R
262	.$8f6	JSR COPY2_XYA_CREG
266	.$8f9	JSR GETSTRCHANNEL
267	.$8fc	LDA A_REG
268	.$8ff	LDY A_REG+1
269	.$902	STA TMP_ZP
270	.$904	STY TMP_ZP+1
271	.$906	LDA #<VAR_A$
272	.$908	LDY #>VAR_A$
273	.$90a	JSR COPYSTRING
274	.$90d	LDA VAR_A$
275	.$910	LDY VAR_A$+1
276	.$913	JSR STROUTWL
279	.$916	LINE_60:
281	.$916	JSR COMPACTMAX
282	.$919	LDA #13
283	.$91b	JSR CHRINTB
285	.$91e	LDA VAR_A$
286	.$921	LDY VAR_A$+1
287	.$924	STA A_REG
288	.$927	STY A_REG+1
290	.$92a	JSR SNEQ
291	.$92d	LDA X_REG
292	.$92f	COMP_SKP0:
293	.$92f	BEQ LINE_SKIP1
296	.$931	LINE_NSKIP1:
298	.$931	JMP LINE_50
300	.$934	LINE_SKIP1:
303	.$934	LINE_70:
305	.$934	LDA #<CONST_5R
306	.$936	LDY #>CONST_5R
307	.$938	JSR COPY2_XYA_XREG
311	.$93b	JSR CLOSE
313	.$93e	LINE_75:
315	.$93e	JSR LINEBREAK
316	.$941	LDA #<CONST_11
317	.$943	LDY #>CONST_11
318	.$945	JSR STROUTBRKWL
322	.$948	LINE_80:
324	.$948	LDA #<CONST_5R
325	.$94a	LDY #>CONST_5R
326	.$94c	JSR REALFACPUSH
328	.$94f	LDA #<CONST_2R
329	.$951	LDY #>CONST_2R
330	.$953	JSR REALFACPUSH
332	.$956	LDA #<CONST_3R
333	.$958	LDY #>CONST_3R
334	.$95a	JSR REALFACPUSH
336	.$95d	LDA #<CONST_8
337	.$95f	LDY #>CONST_8
338	.$961	STA B_REG
339	.$964	STY B_REG+1
340	.$967	LDY B_REG
341	.$96a	LDA B_REG+1
342	.$96d	STY G_REG
343	.$96f	STA G_REG+1
344	.$971	JSR POPREAL
345	.$974	LDX #<D_REG
346	.$976	LDY #>D_REG
348	.$978	JSR FACMEM
349	.$97b	JSR POPREAL
350	.$97e	LDX #<C_REG
351	.$980	LDY #>C_REG
353	.$982	JSR FACMEM
354	.$985	JSR POPREALXREG
357	.$988	LDA #<CONST_5R
358	.$98a	LDY #>CONST_5R
359	.$98c	JSR COPY2_XYA_YREG
363	.$98f	JSR OPEN
365	.$992	LINE_90:
367	.$992	LDA #<CONST_5R
368	.$994	LDY #>CONST_5R
369	.$996	JSR REALFACPUSH
371	.$999	JSR CLEARQUEUE
372	.$99c	JSR COMPACTMAX
373	.$99f	JSR POPREAL
374	.$9a2	LDX #<C_REG
375	.$9a4	LDY #>C_REG
377	.$9a6	JSR FACMEM
378	.$9a9	JSR INPUTSTRCHANNEL
379	.$9ac	JSR INPUTLENGTHCHECK
380	.$9af	BEQ EMPTYINPUTSKIP2
381	.$9b1	LDA A_REG
382	.$9b4	LDY A_REG+1
383	.$9b7	STA TMP_ZP
384	.$9b9	STY TMP_ZP+1
385	.$9bb	LDA #<VAR_A$
386	.$9bd	LDY #>VAR_A$
387	.$9bf	JSR COPYSTRING
388	.$9c2	EMPTYINPUTSKIP2:
390	.$9c2	LINE_100:
392	.$9c2	LDA #<CONST_5R
393	.$9c4	LDY #>CONST_5R
394	.$9c6	JSR COPY2_XYA_XREG
398	.$9c9	JSR CLOSE
399	.$9cc	LDA VAR_A$
400	.$9cf	LDY VAR_A$+1
401	.$9d2	JSR STROUTBRKWL
404	.$9d5	JSR END
405	.$9d8	RTS
408	.$9d9	END   LDX SP_SAVE
409	.$9dc	TXS
416	.$9dd	RTS
419	.$9de	START  LDA ENDSTRBUF+1
420	.$9e1	BNE ENDGIVEN
421	.$9e3	LDA BASICEND
422	.$9e5	STA ENDSTRBUF
423	.$9e8	LDA BASICEND+1
424	.$9ea	STA ENDSTRBUF+1
425	.$9ed	ENDGIVEN LDA #<FPSTACK
426	.$9ef	LDY #>FPSTACK
427	.$9f1	STA FPSTACKP
428	.$9f4	STY FPSTACKP+1
429	.$9f7	LDA #<FORSTACK
430	.$9f9	LDY #>FORSTACK
431	.$9fb	STA FORSTACKP
432	.$9fe	STY FORSTACKP+1
433	.$a01	LDA #<STRBUF
434	.$a03	LDY #>STRBUF
435	.$a05	STA STRBUFP
436	.$a08	STY STRBUFP+1
437	.$a0b	STA HIGHP
438	.$a0e	STY HIGHP+1
439	.$a11	LDA #0
440	.$a13	STA CHLOCKFLAG
441	.$a16	STA LASTVAR
442	.$a19	STA LASTVAR+1
443	.$a1c	JSR INITVARS
444	.$a1f	LDA #0
445	.$a21	STA CMD_NUM
446	.$a24	STA CHANNEL
447	.$a27	TAY
448	.$a28	TAX
452	.$a29	STA KEYNDX
458	.$a2b	JSR RESTORE
459	.$a2e	CLC
463	.$a2f	RTS
466	.$a30	INITNARRAY
467	.$a30	STA TMP_ZP
468	.$a32	STY TMP_ZP+1
469	.$a34	LDY #0
470	.$a36	TYA
471	.$a37	NINITLOOP STA (TMP_ZP),Y
472	.$a39	INC TMP_ZP
473	.$a3b	BNE NLOOPNOV
474	.$a3d	INC TMP_ZP+1
475	.$a3f	NLOOPNOV LDX TMP2_ZP
476	.$a41	BNE NLOOPNOV2
477	.$a43	DEC TMP2_ZP+1
478	.$a45	NLOOPNOV2 DEC TMP2_ZP
479	.$a47	BNE NINITLOOP
480	.$a49	LDX TMP2_ZP+1
481	.$a4b	BNE NINITLOOP
482	.$a4d	RTS
485	.$a4e	INITSTRARRAY
486	.$a4e	STA TMP_ZP
487	.$a50	STY TMP_ZP+1
488	.$a52	SINITLOOP LDY #0
489	.$a54	LDA #<EMPTYSTR
490	.$a56	STA (TMP_ZP),Y
491	.$a58	LDA #>EMPTYSTR
492	.$a5a	INY
493	.$a5b	STA (TMP_ZP),Y
494	.$a5d	CLC
495	.$a5e	LDA TMP_ZP
496	.$a60	ADC #2
497	.$a62	STA TMP_ZP
498	.$a64	BCC SLOOPNOV1
499	.$a66	INC TMP_ZP+1
500	.$a68	SLOOPNOV1 SEC
501	.$a69	LDA TMP2_ZP
502	.$a6b	SBC #2
503	.$a6d	STA TMP2_ZP
504	.$a6f	BCS SLOOPNOV2
505	.$a71	DEC TMP2_ZP+1
506	.$a73	SLOOPNOV2 LDA TMP2_ZP
507	.$a75	BNE SINITLOOP
508	.$a77	LDA TMP2_ZP+1
509	.$a79	BNE SINITLOOP
510	.$a7b	RTS
513	.$a7c	INITSPARAMS STA TMP3_ZP
514	.$a7e	STY TMP3_ZP+1
515	.$a80	SEC
516	.$a81	SBC #2
517	.$a83	STA TMP_ZP
518	.$a85	TYA
519	.$a86	SBC #0
520	.$a88	STA TMP_ZP+1
521	.$a8a	LDY #0
522	.$a8c	LDA (TMP_ZP),Y
523	.$a8e	STA TMP2_ZP
524	.$a90	INY
525	.$a91	LDA (TMP_ZP),Y
526	.$a93	STA TMP2_ZP+1
527	.$a95	LDA TMP3_ZP
528	.$a97	LDY TMP3_ZP+1
529	.$a99	RTS
532	.$a9a	INITSTRVARS LDA #<STRINGVARS_START  
533	.$a9c	LDY #>STRINGVARS_START
534	.$a9e	CMP #<STRINGVARS_END
535	.$aa0	BNE INITIT1
536	.$aa2	CPY #>STRINGVARS_END
537	.$aa4	BNE INITIT1
538	.$aa6	JMP INITSA2     
539	.$aa9	INITIT1  STA TMP_ZP
540	.$aab	STY TMP_ZP+1
541	.$aad	LDY #0
542	.$aaf	INITSTRLOOP LDA #<EMPTYSTR
543	.$ab1	STA (TMP_ZP),Y
544	.$ab3	INY
545	.$ab4	LDA #>EMPTYSTR
546	.$ab6	STA (TMP_ZP),Y
547	.$ab8	DEY
548	.$ab9	LDA TMP_ZP
549	.$abb	CLC
550	.$abc	ADC #2
551	.$abe	STA TMP_ZP
552	.$ac0	LDA TMP_ZP+1
553	.$ac2	ADC #0
554	.$ac4	STA TMP_ZP+1
555	.$ac6	CMP #>STRINGVARS_END
556	.$ac8	BNE INITSTRLOOP
557	.$aca	LDA TMP_ZP
558	.$acc	CMP #<STRINGVARS_END
559	.$ace	BNE INITSTRLOOP
560	.$ad0	INITSA2  LDA #<STRINGARRAYS_START 
561	.$ad2	LDY #>STRINGARRAYS_START
562	.$ad4	CMP #<STRINGARRAYS_END
563	.$ad6	BNE ARRAYLOOP
564	.$ad8	CPY #>STRINGARRAYS_END
565	.$ada	BNE ARRAYLOOP
566	.$adc	RTS       
567	.$add	ARRAYLOOP CLC
568	.$ade	ADC #3
569	.$ae0	BCC ARRAYSKIP1
570	.$ae2	INY
571	.$ae3	ARRAYSKIP1 CPY #>STRINGARRAYS_END
572	.$ae5	BEQ ARRAYSC
573	.$ae7	BCC ARRAYSKIP2
574	.$ae9	JMP ARRAYQUIT
575	.$aec	ARRAYSC  CMP #<STRINGARRAYS_END
576	.$aee	BCS ARRAYQUIT
577	.$af0	ARRAYSKIP2 STA TMP_REG
578	.$af2	STY TMP_REG+1
579	.$af4	JSR INITSPARAMS
580	.$af7	LDA TMP_REG
581	.$af9	LDY TMP_REG+1
582	.$afb	JSR INITSTRARRAY
583	.$afe	LDA TMP_ZP
584	.$b00	LDY TMP_ZP+1
585	.$b02	JMP ARRAYLOOP
586	.$b05	ARRAYQUIT RTS
589	.$b06	RESTORE  LDA #<DATAS
590	.$b08	LDY #>DATAS
591	.$b0a	STA DATASP
592	.$b0d	STY DATASP+1
593	.$b10	RTS
596	.$b11	CHRINTB  JSR CHRINT
597	.$b14	LDY A_REG
598	.$b17	LDA A_REG+1
599	.$b1a	STY B_REG
600	.$b1d	STA B_REG+1
601	.$b20	RTS
604	.$b21	CHRINT  TAX
605	.$b22	LDA STRBUFP
606	.$b25	STA TMP_ZP
607	.$b27	STA A_REG
608	.$b2a	LDA STRBUFP+1
609	.$b2d	STA TMP_ZP+1
610	.$b2f	STA A_REG+1
611	.$b32	LDA #1
612	.$b34	LDY #0
613	.$b36	STA (TMP_ZP),Y
614	.$b38	TXA
615	.$b39	INY
616	.$b3a	STA (TMP_ZP),Y
617	.$b3c	LDA STRBUFP
618	.$b3f	CLC
619	.$b40	ADC #2
620	.$b42	STA STRBUFP
621	.$b45	BCC NOCHR2
622	.$b47	INC STRBUFP+1
623	.$b4a	NOCHR2  RTS
626	.$b4b	SAVEPOINTERS
627	.$b4b	LDA TMP_ZP   
628	.$b4d	STA STORE1
629	.$b50	LDA TMP_ZP+1
630	.$b52	STA STORE1+1
631	.$b55	LDA TMP2_ZP
632	.$b57	STA STORE2
633	.$b5a	LDA TMP2_ZP+1
634	.$b5c	STA STORE2+1
635	.$b5f	LDA TMP3_ZP
636	.$b61	STA STORE3
637	.$b64	LDA TMP3_ZP+1
638	.$b66	STA STORE3+1
639	.$b69	RTS
642	.$b6a	RESTOREPOINTERS
643	.$b6a	LDA STORE3+1  
644	.$b6d	STA TMP3_ZP+1
645	.$b6f	LDA STORE3
646	.$b72	STA TMP3_ZP
647	.$b74	LDA STORE2+1
648	.$b77	STA TMP2_ZP+1
649	.$b79	LDA STORE2
650	.$b7c	STA TMP2_ZP
651	.$b7e	LDA STORE1+1
652	.$b81	STA TMP_ZP+1
653	.$b83	LDA STORE1
654	.$b86	STA TMP_ZP
655	.$b88	RTS
662	.$b89	COMPACTMAX
663	.$b89	LDA #$FF
664	.$b8b	LDY #$0
665	.$b8d	JMP COMPACTF
668	.$b90	COMPACT
669	.$b90	LDY #0
670	.$b92	GCBUFNE  LDA (TMP_ZP),Y  
671	.$b94	COMPACTF STA TMP4_REG  
672	.$b97	LDY STRBUFP+1  
673	.$b9a	STY TMP4_REG+1  
674	.$b9d	INY     
675	.$b9e	BEQ ENDMEM   
676	.$ba0	CPY ENDSTRBUF+1  
677	.$ba3	BCC RGCEXIT   
678	.$ba5	ENDMEM  LDA STRBUFP
679	.$ba8	CLC
680	.$ba9	ADC TMP4_REG
681	.$bac	STA TMP4_REG
682	.$baf	BCC RGCNOOV1
683	.$bb1	INC TMP4_REG+1
684	.$bb4	RGCNOOV1 CLC
685	.$bb5	LDA TMP4_REG
686	.$bb8	ADC #3
687	.$bba	STA TMP4_REG
688	.$bbd	BCC RGCNOOV2
689	.$bbf	INC TMP4_REG+1
690	.$bc2	RGCNOOV2 LDA TMP4_REG+1  
691	.$bc5	CMP ENDSTRBUF+1
692	.$bc8	BEQ RGCLOW1
693	.$bca	BCS GCEXECOMP  
694	.$bcc	JMP RGCEXIT
695	.$bcf	RGCLOW1  LDA TMP4_REG
696	.$bd2	CMP ENDSTRBUF
697	.$bd5	BCS GCEXECOMP  
698	.$bd7	RGCEXIT  RTS     
699	.$bd8	GCEXECOMP LDA STRBUFP
700	.$bdb	STA STORE4
701	.$bde	LDA STRBUFP+1
702	.$be1	STA STORE4+1
703	.$be4	JSR GCEXE
704	.$be7	JMP CHECKMEMORY
707	.$bea	GCEXE  JSR SAVEPOINTERS
708	.$bed	LDA #0
709	.$bef	STA LASTVAR
710	.$bf2	STA LASTVAR+1  
711	.$bf5	LDA #<STRBUF
712	.$bf7	STA TMP_ZP
713	.$bf9	STA GCSTART
714	.$bfc	LDA #>STRBUF
715	.$bfe	STA TMP_ZP+1  
716	.$c00	STA GCSTART+1
717	.$c03	GCLOOP  LDY #0
718	.$c05	LDA TMP_ZP
719	.$c07	STA GCWORK
720	.$c0a	LDA TMP_ZP+1
721	.$c0c	STA GCWORK+1  
722	.$c0f	LDA (TMP_ZP),Y
723	.$c11	STA GCLEN   
724	.$c14	INC TMP_ZP
725	.$c16	BNE GCLOOPNOOV
726	.$c18	INC TMP_ZP+1
727	.$c1a	GCLOOPNOOV LDA TMP_ZP
728	.$c1c	CLC
729	.$c1d	ADC GCLEN
730	.$c20	STA TMP_ZP
731	.$c22	BCC GCLOOPNOOV2
732	.$c24	INC TMP_ZP+1  
733	.$c26	GCLOOPNOOV2 LDY #0
734	.$c28	LDA (TMP_ZP),Y
735	.$c2a	STA TMP2_ZP
736	.$c2c	INY
737	.$c2d	LDA (TMP_ZP),Y
738	.$c2f	STA TMP2_ZP+1  
739	.$c31	LDA TMP_ZP
740	.$c33	CLC
741	.$c34	ADC #2
742	.$c36	STA TMP_ZP
743	.$c38	BCC GCLOOPNOOV3
744	.$c3a	INC TMP_ZP+1  
745	.$c3c	GCLOOPNOOV3 LDY #0
746	.$c3e	LDA (TMP2_ZP),Y
747	.$c40	CMP GCWORK
748	.$c43	BNE GCKLOOP
749	.$c45	INY
750	.$c46	LDA (TMP2_ZP),Y
751	.$c48	CMP GCWORK+1
752	.$c4b	BEQ MEMFREE
753	.$c4d	GCKLOOP  LDA TMP_ZP+1  
754	.$c4f	CMP HIGHP+1
755	.$c52	BEQ GCHECKLOW
756	.$c54	BCC GCLOOP
757	.$c56	JMP GCDONE
758	.$c59	GCHECKLOW LDA TMP_ZP
759	.$c5b	CMP HIGHP
760	.$c5e	BCS GCDONE
761	.$c60	JMP GCLOOP
762	.$c63	MEMFREE  LDA GCSTART   
763	.$c66	CMP GCWORK   
764	.$c69	BNE COPYDOWN
765	.$c6b	LDA GCSTART+1
766	.$c6e	CMP GCWORK+1
767	.$c71	BNE COPYDOWN
768	.$c73	LDA TMP_ZP   
769	.$c75	STA GCSTART
770	.$c78	LDA TMP_ZP+1
771	.$c7a	STA GCSTART+1
772	.$c7d	JMP GCKLOOP   
773	.$c80	COPYDOWN LDA GCSTART   
774	.$c83	STA TMP_REG
775	.$c85	LDA GCSTART+1
776	.$c88	STA TMP_REG+1  
777	.$c8a	LDA GCWORK
778	.$c8d	STA TMP2_REG
779	.$c90	LDA GCWORK+1
780	.$c93	STA TMP2_REG+1  
781	.$c96	LDA TMP_ZP
782	.$c98	SEC
783	.$c99	SBC GCWORK
784	.$c9c	STA TMP3_REG
785	.$c9f	LDA TMP_ZP+1
786	.$ca1	SBC GCWORK+1
787	.$ca4	STA TMP3_REG+1  
788	.$ca7	LDA GCSTART
789	.$caa	CLC
790	.$cab	ADC TMP3_REG
791	.$cae	STA GCSTART
792	.$cb1	LDA GCSTART+1
793	.$cb4	ADC TMP3_REG+1
794	.$cb7	STA GCSTART+1  
795	.$cba	JSR QUICKCOPY  
796	.$cbd	LDY #0
797	.$cbf	LDA TMP_REG
798	.$cc1	STA (TMP2_ZP),Y
799	.$cc3	INY
800	.$cc4	LDA TMP_REG+1
801	.$cc6	STA (TMP2_ZP),Y  
802	.$cc8	JMP GCKLOOP
803	.$ccb	GCDONE  LDA GCSTART
804	.$cce	STA HIGHP
805	.$cd1	STA STRBUFP
806	.$cd4	LDA GCSTART+1
807	.$cd7	STA HIGHP+1
808	.$cda	STA STRBUFP+1  
809	.$cdd	GCSKIP  JSR RESTOREPOINTERS
810	.$ce0	RTS     
813	.$ce1	CHECKMEMORY
814	.$ce1	LDA STRBUFP+1  
815	.$ce4	CMP STORE4+1  
816	.$ce7	BCC STILLFITSCM  
820	.$ce9	BEQ CHECKMEMLOWCM
821	.$ceb	JMP OUTOFMEMORY  
822	.$cee	CHECKMEMLOWCM
823	.$cee	LDA STRBUFP   
824	.$cf1	CMP STORE4
825	.$cf4	BCC STILLFITSCM
826	.$cf6	JMP OUTOFMEMORY  
827	.$cf9	STILLFITSCM RTS
830	.$cfa	QUICKCOPY LDA TMP_REG  
831	.$cfc	STA TMEM+1
832	.$cff	LDA TMP_REG+1
833	.$d01	STA TMEM+2
834	.$d04	LDA TMP2_REG
835	.$d07	STA SMEM+1
836	.$d0a	LDA TMP2_REG+1
837	.$d0d	STA SMEM+2
838	.$d10	LDY #$0
839	.$d12	LDX TMP3_REG
840	.$d15	BNE QCLOOP
841	.$d17	LDA TMP3_REG+1
842	.$d1a	BEQ QCEXIT  
843	.$d1c	QCLOOP
844	.$d1c	SMEM  LDA $0000,Y
845	.$d1f	TMEM  STA $0000,Y
846	.$d22	INY
847	.$d23	BNE YNOOV
848	.$d25	INC TMEM+2
849	.$d28	INC SMEM+2
850	.$d2b	YNOOV  DEX
851	.$d2c	BNE QCLOOP
852	.$d2e	LDA TMP3_REG+1
853	.$d31	BEQ QCEXIT
854	.$d33	DEC TMP3_REG+1
855	.$d36	JMP QCLOOP
856	.$d39	QCEXIT  RTS
859	.$d3a	COPYSTRING STA TMP2_ZP
860	.$d3c	STY TMP2_ZP+1
861	.$d3e	CPY TMP_ZP+1
862	.$d40	BNE CONTCOPY
863	.$d42	LDA TMP2_ZP
864	.$d44	CMP TMP_ZP
865	.$d46	BNE CONTCOPY
866	.$d48	RTS     
867	.$d49	CONTCOPY JSR COMPACT   
868	.$d4c	LDY #0
869	.$d4e	STY TMP_FLAG
870	.$d51	LDA (TMP_ZP),Y
871	.$d53	BNE NOTEMPTYSTR
872	.$d55	LDA #<EMPTYSTR  
873	.$d57	STA TMP_ZP
874	.$d59	LDA #>EMPTYSTR
875	.$d5b	STA TMP_ZP+1
876	.$d5d	JMP ISCONST
877	.$d60	NOTEMPTYSTR TAX     
878	.$d61	LDA (TMP2_ZP),Y
879	.$d63	STA TMP3_ZP
880	.$d65	INY
881	.$d66	LDA (TMP2_ZP),Y
882	.$d68	STA TMP3_ZP+1
883	.$d6a	DEY
884	.$d6b	LDA TMP_ZP+1  
885	.$d6d	CMP #>CONSTANTS_END
886	.$d6f	BEQ CHECKLOW1
887	.$d71	BCS INVAR
888	.$d73	JMP CHECKNEXT
889	.$d76	CHECKLOW1 LDA TMP_ZP
890	.$d78	CMP #<CONSTANTS_END
891	.$d7a	BCS INVAR
892	.$d7c	CHECKNEXT LDA TMP_ZP+1  
893	.$d7e	CMP #>CONSTANTS
894	.$d80	BEQ CHECKLOW3
895	.$d82	BCC INVAR
896	.$d84	JMP ISCONST
897	.$d87	CHECKLOW3 LDA TMP_ZP
898	.$d89	CMP #<CONSTANTS
899	.$d8b	BCC INVAR   
900	.$d8d	ISCONST  JSR CHECKLASTVAR 
901	.$d90	LDA TMP_ZP
902	.$d92	STA (TMP2_ZP),Y  
903	.$d94	INY
904	.$d95	LDA TMP_ZP+1
905	.$d97	STA (TMP2_ZP),Y
906	.$d99	LDA HIGHP   
907	.$d9c	STA STRBUFP
908	.$d9f	LDA HIGHP+1
909	.$da2	STA STRBUFP+1
910	.$da5	RTS
911	.$da6	INVAR  INY
912	.$da7	LDA (TMP2_ZP),Y  
913	.$da9	CMP #>CONSTANTS_END
914	.$dab	BEQ CHECKLOW2
915	.$dad	BCS INVAR2
916	.$daf	JMP PUPDATEPTR
917	.$db2	CHECKLOW2 DEY
918	.$db3	LDA (TMP2_ZP),Y
919	.$db5	CMP #<CONSTANTS_END
920	.$db7	BCS INVAR2
921	.$db9	JMP PUPDATEPTR
922	.$dbc	INVAR2  LDY #0   
923	.$dbe	LDA (TMP3_ZP),Y
924	.$dc0	STA TMP_REG
925	.$dc2	TXA
926	.$dc3	CMP TMP_REG  
927	.$dc5	BEQ UPDATEHP2 
930	.$dc7	PUPDATEPTR JSR CHECKLASTVAR
931	.$dca	LDY #1   
932	.$dcc	STY TMP_FLAG 
933	.$dcf	JMP UPDATEPTR 
934	.$dd2	UPDATEHP2 LDA HIGHP  
935	.$dd5	STA STRBUFP
936	.$dd8	LDA HIGHP+1
937	.$ddb	STA STRBUFP+1
938	.$dde	JMP STRFITS
939	.$de1	COPYONLY LDY #0
940	.$de3	STY TMP_FLAG
941	.$de6	JMP CHECKMEM
942	.$de9	ALTCOPY  JMP COPYSTRING2
943	.$dec	UPDATEPTR LDA TMP_ZP+1 
944	.$dee	CMP HIGHP+1  
945	.$df1	BEQ CHECKXT1
946	.$df3	BCS ALTCOPY
947	.$df5	JMP CHECKMEM
948	.$df8	CHECKXT1 LDA TMP_ZP
949	.$dfa	CMP HIGHP
950	.$dfd	BCS ALTCOPY
951	.$dff	CHECKMEM
952	.$dff	MEMOK  LDY #0
953	.$e01	LDA STRBUFP  
954	.$e04	STA (TMP2_ZP),Y 
955	.$e06	STA TMP3_ZP
956	.$e08	LDA STRBUFP+1
957	.$e0b	INY
958	.$e0c	STA (TMP2_ZP),Y
959	.$e0e	STA TMP3_ZP+1
960	.$e10	TXA
961	.$e11	CLC
962	.$e12	ADC STRBUFP
963	.$e15	PHP
964	.$e16	CLC
965	.$e17	ADC #3
966	.$e19	STA STRBUFP
967	.$e1c	BCC NOCS1
968	.$e1e	INC STRBUFP+1
969	.$e21	NOCS1  PLP
970	.$e22	BCC STRFITS
971	.$e24	INC STRBUFP+1
972	.$e27	STRFITS  LDY TMP_FLAG 
973	.$e2a	BEQ NOHPUPDATE 
974	.$e2c	LDA HIGHP+1
975	.$e2f	CMP STRBUFP+1
976	.$e32	BCC UPDATEHIGHP
977	.$e34	BEQ CHECKNEXTHP
978	.$e36	JMP NOHPUPDATE
979	.$e39	CHECKNEXTHP LDA HIGHP
980	.$e3c	CMP STRBUFP
981	.$e3f	BCC UPDATEHIGHP
982	.$e41	JMP NOHPUPDATE
983	.$e44	UPDATEHIGHP LDA STRBUFP
984	.$e47	STA HIGHP
985	.$e4a	LDA STRBUFP+1
986	.$e4d	STA HIGHP+1  
987	.$e50	JSR REMEMBERLASTVAR
988	.$e53	JSR STOREVARREF
989	.$e56	NOHPUPDATE LDY #0
990	.$e58	LDA (TMP_ZP),Y 
991	.$e5a	STA (TMP3_ZP),Y
992	.$e5c	TAY    
993	.$e5d	BEQ EXITCOPY 
994	.$e5f	LOOP  LDA (TMP_ZP),Y 
995	.$e61	STA (TMP3_ZP),Y
996	.$e63	DEY
997	.$e64	BNE LOOP
998	.$e66	EXITCOPY RTS
1003	.$e67	COPYSTRING2 LDY #0
1004	.$e69	LDA (TMP_ZP),Y
1005	.$e6b	STA TMP_REG
1006	.$e6d	TAX
1007	.$e6e	LDA HIGHP
1008	.$e71	STA TMP3_ZP
1009	.$e73	STA (TMP2_ZP),Y
1010	.$e75	LDA HIGHP+1
1011	.$e78	STA TMP3_ZP+1
1012	.$e7a	INY
1013	.$e7b	STA (TMP2_ZP),Y
1014	.$e7d	JSR REMEMBERLASTVAR
1017	.$e80	LDA TMP_ZP
1018	.$e82	CMP TMP3_ZP
1019	.$e84	BNE DOLOOP
1020	.$e86	LDA TMP_ZP+1
1021	.$e88	CMP TMP3_ZP+1
1022	.$e8a	BEQ SKIPCP2
1023	.$e8c	DOLOOP  DEY
1024	.$e8d	TXA
1025	.$e8e	STA (TMP3_ZP),Y
1026	.$e90	INY
1027	.$e91	ASLOOP  LDA (TMP_ZP),Y
1028	.$e93	STA (TMP3_ZP),Y
1029	.$e95	INY
1030	.$e96	DEX
1031	.$e97	BNE ASLOOP
1032	.$e99	SKIPCP2  LDA HIGHP
1033	.$e9c	CLC
1034	.$e9d	ADC TMP_REG
1035	.$e9f	PHP
1036	.$ea0	CLC
1037	.$ea1	ADC #3
1038	.$ea3	STA HIGHP
1039	.$ea6	STA STRBUFP
1040	.$ea9	BCC SKIPLOWAS1
1041	.$eab	INC HIGHP+1
1042	.$eae	SKIPLOWAS1 PLP
1043	.$eaf	BCC SKIPLOWAS2
1044	.$eb1	INC HIGHP+1
1045	.$eb4	SKIPLOWAS2 LDA HIGHP+1
1046	.$eb7	STA STRBUFP+1
1047	.$eba	JSR STOREVARREF
1048	.$ebd	RTS
1052	.$ebe	CHECKLASTVAR
1053	.$ebe	LDA TMP2_ZP
1054	.$ec0	CMP LASTVAR
1055	.$ec3	BNE NOTSAMEVAR
1056	.$ec5	LDA TMP2_ZP+1
1057	.$ec7	CMP LASTVAR+1
1058	.$eca	BNE NOTSAMEVAR
1059	.$ecc	LDA LASTVARP   
1060	.$ecf	STA HIGHP
1061	.$ed2	STA STRBUFP
1062	.$ed5	LDA LASTVARP+1
1063	.$ed8	STA HIGHP+1
1064	.$edb	STA STRBUFP+1
1065	.$ede	NOTSAMEVAR RTS
1069	.$edf	REMEMBERLASTVAR
1070	.$edf	LDA TMP2_ZP
1071	.$ee1	STA LASTVAR
1072	.$ee4	LDA TMP2_ZP+1
1073	.$ee6	STA LASTVAR+1
1074	.$ee9	LDA TMP3_ZP
1075	.$eeb	STA LASTVARP
1076	.$eee	LDA TMP3_ZP+1
1077	.$ef0	STA LASTVARP+1 
1078	.$ef3	RTS
1083	.$ef4	STOREVARREF
1084	.$ef4	TYA
1085	.$ef5	PHA    
1086	.$ef6	LDA TMP_ZP
1087	.$ef8	PHA
1088	.$ef9	LDA TMP_ZP+1
1089	.$efb	PHA
1090	.$efc	LDA HIGHP+1
1091	.$eff	STA TMP_ZP+1
1092	.$f01	LDA HIGHP
1093	.$f04	SEC
1094	.$f05	SBC #2
1095	.$f07	STA TMP_ZP
1096	.$f09	BCS RLVNOOV
1097	.$f0b	DEC TMP_ZP+1
1098	.$f0d	RLVNOOV  LDA TMP2_ZP
1099	.$f0f	LDY #0
1100	.$f11	STA (TMP_ZP),Y
1101	.$f13	LDA TMP2_ZP+1
1102	.$f15	INY
1103	.$f16	STA (TMP_ZP),Y 
1104	.$f18	PLA
1105	.$f19	STA TMP_ZP+1
1106	.$f1b	PLA
1107	.$f1c	STA TMP_ZP  
1108	.$f1e	PLA
1109	.$f1f	TAY    
1110	.$f20	RTS
1113	.$f21	REROUTE  LDA CMD_NUM  
1114	.$f24	BEQ REROUTECMD
1115	.$f26	TAX
1116	.$f27	STA CHANNEL
1117	.$f2a	JMP CHKOUT
1118	.$f2d	REROUTECMD RTS
1121	.$f2e	RESETROUTE LDA CMD_NUM  
1122	.$f31	BEQ RESETROUTECMD
1123	.$f33	JMP CLRCHNEW
1124	.$f36	RESETROUTECMD
1125	.$f36	RTS
1128	.$f37	LINEBREAK JSR REROUTE
1129	.$f3a	LDA #$0D
1130	.$f3c	JSR CHROUT
1131	.$f3f	JMP RESETROUTE
1134	.$f42	STROUTWL STA A_REG
1135	.$f45	STY A_REG+1
1136	.$f48	STROUT  JSR REROUTE
1137	.$f4b	LDA A_REG
1138	.$f4e	STA INDEX1
1139	.$f50	LDA A_REG+1
1140	.$f53	STA INDEX1+1
1141	.$f55	LDY #0
1142	.$f57	LDA (INDEX1),Y
1143	.$f59	TAX
1144	.$f5a	INC INDEX1
1145	.$f5c	BNE PRINTSTR
1146	.$f5e	INC INDEX1+1
1147	.$f60	PRINTSTR JSR PRINTSTRS
1148	.$f63	LDA HIGHP   
1149	.$f66	STA STRBUFP
1150	.$f69	LDA HIGHP+1
1151	.$f6c	STA STRBUFP+1
1152	.$f6f	JSR RESETROUTE
1153	.$f72	RTS
1156	.$f73	STROUTBRKWL STA A_REG
1157	.$f76	STY A_REG+1
1158	.$f79	STROUTBRK JSR REROUTE
1159	.$f7c	LDA A_REG
1160	.$f7f	STA INDEX1
1161	.$f81	LDA A_REG+1
1162	.$f84	STA INDEX1+1
1163	.$f86	LDY #0
1164	.$f88	LDA (INDEX1),Y
1165	.$f8a	TAX
1166	.$f8b	INC INDEX1
1167	.$f8d	BNE PRINTSTR2
1168	.$f8f	INC INDEX1+1
1169	.$f91	PRINTSTR2 JSR PRINTSTRS
1170	.$f94	LDA HIGHP   
1171	.$f97	STA STRBUFP
1172	.$f9a	LDA HIGHP+1
1173	.$f9d	STA STRBUFP+1
1174	.$fa0	LDA #$0D
1175	.$fa2	JSR CHROUT
1176	.$fa5	JMP RESETROUTE  
1179	.$fa8	CLEARQUEUE LDA #$0
1180	.$faa	STA INPUTQUEUEP
1181	.$fad	RTS
1184	.$fae	CLEANINPUT LDY #0    
1185	.$fb0	LDX #0
1186	.$fb2	STY STORE1   
1187	.$fb5	STY STORE2   
1188	.$fb8	DEY
1189	.$fb9	CILOOP  INY
1190	.$fba	LDA $0200,Y
1191	.$fbd	BNE CINOEND
1192	.$fbf	JMP CIEND   
1193	.$fc2	CINOEND  STA STORE3   
1194	.$fc5	LDA STORE1
1195	.$fc8	BEQ CINOQUOTE  
1196	.$fca	LDA STORE3
1197	.$fcd	CMP #$22   
1198	.$fcf	BNE CISTILLQUOTE 
1199	.$fd1	LDA #0    
1200	.$fd3	STA STORE1
1201	.$fd6	JMP CILOOP
1202	.$fd9	CISTILLQUOTE
1203	.$fd9	STA $0200,X
1204	.$fdc	INX
1205	.$fdd	JMP CILOOP
1206	.$fe0	CINOQUOTE LDA STORE3
1207	.$fe3	CMP #$22
1208	.$fe5	BNE CISOMECHAR  
1209	.$fe7	CIFIRSTCHAR LDA #1    
1210	.$fe9	STA STORE1   
1211	.$fec	STA STORE2   
1212	.$fef	JMP CILOOP
1213	.$ff2	CISOMECHAR  CMP #$3A   
1214	.$ff4	BNE CINOCOLON
1215	.$ff6	JMP CIEND
1216	.$ff9	CINOCOLON CMP #$2C   
1217	.$ffb	BNE CINOCOMMA
1218	.$ffd	LDA #$22   
1219	.$fff	STA $0200,X
1220	.$1002	INX
1221	.$1003	LDA #0
1222	.$1005	STA STORE2   
1223	.$1008	JMP CILOOP
1224	.$100b	CINOCOMMA CMP #$20   
1225	.$100d	BNE CINOSPACE
1226	.$100f	LDA STORE2   
1227	.$1012	BEQ CINEXT   
1228	.$1014	LDA STORE3
1229	.$1017	CINOSPACE STA $0200,X
1230	.$101a	STA STORE2   
1231	.$101d	INX
1232	.$101e	CINEXT  JMP CILOOP
1233	.$1021	CIEND  LDA #0
1234	.$1023	STA $0200,X   
1235	.$1026	RTS     
1238	.$1027	INPUTSTR LDA #$0
1239	.$1029	INPUTSTR2 STA TMP_REG+1
1240	.$102b	LDA #$0
1241	.$102d	STX INPUTLENGTH
1242	.$1030	STA TMP_REG
1243	.$1032	STA TMP_FLAG
1244	.$1035	LDX INPUTQUEUEP
1245	.$1038	BEQ INPUTNORM
1246	.$103a	LDA #LOFBUF
1247	.$103c	LDX #$1
1248	.$103e	CLC
1249	.$103f	ADC INPUTQUEUE
1250	.$1042	STA TMP_ZP
1251	.$1044	BCC INNONO
1252	.$1046	LDX #$2
1253	.$1048	INNONO  STX TMP_ZP+1
1254	.$104a	DEC INPUTQUEUEP  
1255	.$104d	LDY INPUTQUEUE  
1256	.$1050	STY TMP_REG   
1257	.$1052	DEY
1258	.$1053	LDX #$0
1259	.$1055	SHRINKQ  LDA INPUTQUEUEP
1260	.$1058	BEQ QUEUEEMPTY
1261	.$105a	INX
1262	.$105b	LDA INPUTQUEUE,X 
1263	.$105e	DEX
1264	.$105f	STA INPUTQUEUE,X
1265	.$1062	INX
1266	.$1063	CPX INPUTQUEUEP
1267	.$1066	BNE SHRINKQ
1268	.$1068	QUEUEEMPTY JMP ISTRLOOP
1269	.$106b	INPUTNORM AND #$FF
1270	.$106d	JSR INPUT
1271	.$1070	JSR CLEANINPUT
1272	.$1073	LDA #LOFBUF
1273	.$1075	STA TMP_ZP
1274	.$1077	LDA #$1
1275	.$1079	STA TMP_ZP+1
1276	.$107b	LDY #0
1277	.$107d	DEY
1278	.$107e	ISTRLOOP INY
1279	.$107f	LDA INPUTBUF,Y
1280	.$1082	TAX
1281	.$1083	CMP #$22   
1282	.$1085	BNE ICHECK
1283	.$1087	STA TMP_FLAG
1284	.$108a	LDA #$0
1285	.$108c	STA INPUTBUF,Y   
1286	.$108f	LDX INPUTQUEUEP  
1287	.$1092	BNE INQUEUENE  
1288	.$1094	STA INPUTQUEUE  
1289	.$1097	INX
1290	.$1098	INQUEUENE INY
1291	.$1099	TYA
1292	.$109a	STA INPUTQUEUE,X 
1293	.$109d	INX
1294	.$109e	STX INPUTQUEUEP  
1295	.$10a1	JMP ISTRLOOP  
1296	.$10a4	ICHECK  TXA     
1297	.$10a5	BNE ISTRLOOP  
1298	.$10a7	LDA TMP_FLAG
1299	.$10aa	BEQ ISIMPLECOPY
1300	.$10ac	JMP INPUTSTR
1301	.$10af	ISIMPLECOPY TYA
1302	.$10b0	SEC
1303	.$10b1	SBC TMP_REG
1304	.$10b3	LDY #0
1305	.$10b5	STA (TMP_ZP),Y
1306	.$10b7	TAX    
1307	.$10b8	STX INPUTLENGTH
1308	.$10bb	LDA TMP_REG+1 
1309	.$10bd	BEQ INISSTR
1310	.$10bf	RTS
1311	.$10c0	INISSTR  LDA #<A_REG
1312	.$10c2	LDY #>A_REG
1313	.$10c4	STA TMP2_ZP
1314	.$10c6	STY TMP2_ZP+1
1315	.$10c8	JSR COPYONLY
1316	.$10cb	RTS
1319	.$10cc	GETSTR  LDA #8
1320	.$10ce	LDY #0
1321	.$10d0	JSR COMPACTF
1322	.$10d3	LDY #0
1323	.$10d5	STY CMD_NUM  
1324	.$10d8	JSR GETIN
1325	.$10db	CMP #0   
1326	.$10dd	BNE SOMEKEY
1327	.$10df	NOKEY  LDA #<EMPTYSTR
1328	.$10e1	STA A_REG
1329	.$10e4	LDA #>EMPTYSTR
1330	.$10e6	STA A_REG+1
1331	.$10e9	RTS
1332	.$10ea	SOMEKEY  TAX
1333	.$10eb	LDA STRBUFP
1334	.$10ee	STA TMP_ZP
1335	.$10f0	STA A_REG
1336	.$10f3	LDA STRBUFP+1
1337	.$10f6	STA TMP_ZP+1
1338	.$10f8	STA A_REG+1
1339	.$10fb	LDA #1
1340	.$10fd	LDY #0
1341	.$10ff	STA (TMP_ZP),Y
1342	.$1101	TXA
1343	.$1102	LDY #1
1344	.$1104	STA (TMP_ZP),Y
1345	.$1106	LDA STRBUFP
1346	.$1109	CLC
1347	.$110a	ADC #2
1348	.$110c	STA STRBUFP
1349	.$110f	BCC GETSTR1
1350	.$1111	INC STRBUFP+1
1351	.$1114	GETSTR1  RTS
1354	.$1115	ZEROSET  LDA #0
1355	.$1117	STA X_REG
1356	.$1119	STA X_REG+1
1357	.$111b	STA X_REG+2
1358	.$111d	STA X_REG+3
1359	.$111f	STA X_REG+4
1360	.$1121	RTS
1363	.$1122	SEQ   JSR CMPSTR
1364	.$1125	LDA TMP3_ZP
1365	.$1127	BNE NOTSEQ
1366	.$1129	LDA #<REAL_CONST_MINUS_ONE
1367	.$112b	STA TMP3_ZP
1368	.$112d	LDA #>REAL_CONST_MINUS_ONE
1369	.$112f	STA TMP3_ZP+1
1370	.$1131	JMP COPY2_XY_XREG
1371	.$1134	NOTSEQ  JMP ZEROSET
1374	.$1137	SNEQ  JSR CMPSTR
1375	.$113a	LDA TMP3_ZP
1376	.$113c	BEQ NOTSEQ
1377	.$113e	LDA #<REAL_CONST_MINUS_ONE
1378	.$1140	STA TMP3_ZP
1379	.$1142	LDA #>REAL_CONST_MINUS_ONE
1380	.$1144	STA TMP3_ZP+1
1381	.$1146	JMP COPY2_XY_XREG
1384	.$1149	CMPSTR  LDY #0   
1385	.$114b	LDX #1
1386	.$114d	LDA A_REG
1387	.$1150	STA TMP_ZP
1388	.$1152	LDA A_REG+1
1389	.$1155	STA TMP_ZP+1
1390	.$1157	LDA B_REG
1391	.$115a	STA TMP2_ZP
1392	.$115c	LDA B_REG+1
1393	.$115f	STA TMP2_ZP+1
1394	.$1161	CMP TMP_ZP+1
1395	.$1163	BNE CMPSTRSK1
1396	.$1165	LDA TMP2_ZP
1397	.$1167	CMP TMP_ZP
1398	.$1169	BNE CMPSTRSK1
1399	.$116b	LDX #0
1400	.$116d	JMP STRCMPRES
1401	.$1170	CMPSTRSK1 LDA (TMP_ZP),Y
1402	.$1172	CMP (TMP2_ZP),Y
1403	.$1174	BNE STRCMPRES
1404	.$1176	TAX
1405	.$1177	BNE NOTZCTR
1406	.$1179	LDX #0
1407	.$117b	JMP STRCMPRES
1408	.$117e	NOTZCTR  INC TMP_ZP
1409	.$1180	BNE SCSKP1
1410	.$1182	INC TMP_ZP+1
1411	.$1184	SCSKP1  INC TMP2_ZP
1412	.$1186	BNE CMPSTRLOOP
1413	.$1188	INC TMP2_ZP+1
1414	.$118a	CMPSTRLOOP LDA (TMP_ZP),Y
1415	.$118c	CMP (TMP2_ZP),Y
1416	.$118e	BNE STRCMPRES
1417	.$1190	INY
1418	.$1191	DEX
1419	.$1192	BNE CMPSTRLOOP
1420	.$1194	STRCMPRES STX TMP3_ZP
1421	.$1196	RTS
1424	.$1197	REALFACPUSH STA TMP_ZP
1425	.$1199	STY TMP_ZP+1
1426	.$119b	LDX FPSTACKP
1427	.$119e	LDY FPSTACKP+1
1428	.$11a1	STX TMP2_ZP
1429	.$11a3	STY TMP2_ZP+1
1430	.$11a5	LDY #0
1431	.$11a7	LDA (TMP_ZP),Y
1432	.$11a9	STA (TMP2_ZP),Y
1433	.$11ab	INY
1434	.$11ac	LDA (TMP_ZP),Y
1435	.$11ae	STA (TMP2_ZP),Y
1436	.$11b0	INY
1437	.$11b1	LDA (TMP_ZP),Y
1438	.$11b3	STA (TMP2_ZP),Y
1439	.$11b5	INY
1440	.$11b6	LDA (TMP_ZP),Y
1441	.$11b8	STA (TMP2_ZP),Y
1442	.$11ba	INY
1443	.$11bb	LDA (TMP_ZP),Y
1444	.$11bd	STA (TMP2_ZP),Y
1445	.$11bf	TXA    
1446	.$11c0	CLC
1447	.$11c1	ADC #5
1448	.$11c3	STA FPSTACKP
1449	.$11c6	BCC NOPVRFPXX
1450	.$11c8	INC FPSTACKP+1
1451	.$11cb	NOPVRFPXX RTS
1454	.$11cc	POPREAL  LDA FPSTACKP
1455	.$11cf	SEC
1456	.$11d0	SBC #5
1457	.$11d2	STA FPSTACKP
1458	.$11d5	BCS NOPVPR
1459	.$11d7	DEC FPSTACKP+1
1460	.$11da	NOPVPR  LDA FPSTACKP
1461	.$11dd	LDY FPSTACKP+1
1462	.$11e0	JMP REALFAC
1465	.$11e3	POPREALXREG LDA FPSTACKP
1466	.$11e6	SEC
1467	.$11e7	SBC #5
1468	.$11e9	STA FPSTACKP
1469	.$11ec	BCS NOPVPRXR
1470	.$11ee	DEC FPSTACKP+1
1471	.$11f1	NOPVPRXR LDA FPSTACKP
1472	.$11f4	LDY FPSTACKP+1
1473	.$11f7	STA TMP_ZP
1474	.$11f9	STY TMP_ZP+1
1475	.$11fb	LDY #$4
1476	.$11fd	LDA (TMP_ZP),Y
1477	.$11ff	STA X_REG+4
1478	.$1201	STA FACLO
1479	.$1203	DEY
1480	.$1204	LDA (TMP_ZP),Y
1481	.$1206	STA X_REG+3
1482	.$1208	STA FACMO
1483	.$120a	DEY
1484	.$120b	LDA (TMP_ZP),Y
1485	.$120d	STA X_REG+2
1486	.$120f	STA FACMOH
1487	.$1211	DEY
1488	.$1212	LDA (TMP_ZP),Y
1489	.$1214	STA X_REG+1
1490	.$1216	STA FACSGN
1491	.$1218	ORA #$80
1492	.$121a	STA FACHO
1493	.$121c	DEY
1494	.$121d	LDA (TMP_ZP),Y
1495	.$121f	STA X_REG
1496	.$1221	STA FACEXP
1497	.$1223	STY FACOV
1498	.$1225	RTS
1501	.$1226	COPY2_XYA_XREG
1502	.$1226	STA TMP3_ZP
1503	.$1228	STY TMP3_ZP+1
1504	.$122a	COPY2_XY_XREG
1505	.$122a	LDX #<X_REG  
1506	.$122c	LDY #0
1507	.$122e	LDA (TMP3_ZP),Y
1508	.$1230	STA X_REG
1509	.$1232	INY
1510	.$1233	LDA (TMP3_ZP),Y
1511	.$1235	STA X_REG+1
1512	.$1237	INY
1513	.$1238	LDA (TMP3_ZP),Y
1514	.$123a	STA X_REG+2
1515	.$123c	INY
1516	.$123d	LDA (TMP3_ZP),Y
1517	.$123f	STA X_REG+3
1518	.$1241	INY
1519	.$1242	LDA (TMP3_ZP),Y
1520	.$1244	STA X_REG+4
1521	.$1246	RTS
1524	.$1247	COPY2_XYA_CREG
1525	.$1247	STA TMP3_ZP
1526	.$1249	STY TMP3_ZP+1
1527	.$124b	COPY2_XY_CREG
1528	.$124b	LDX #<C_REG  
1529	.$124d	LDY #0
1530	.$124f	LDA (TMP3_ZP),Y
1531	.$1251	STA C_REG
1532	.$1254	INY
1533	.$1255	LDA (TMP3_ZP),Y
1534	.$1257	STA C_REG+1
1535	.$125a	INY
1536	.$125b	LDA (TMP3_ZP),Y
1537	.$125d	STA C_REG+2
1538	.$1260	INY
1539	.$1261	LDA (TMP3_ZP),Y
1540	.$1263	STA C_REG+3
1541	.$1266	INY
1542	.$1267	LDA (TMP3_ZP),Y
1543	.$1269	STA C_REG+4
1544	.$126c	RTS
1547	.$126d	COPY2_XYA_YREG
1548	.$126d	STA TMP3_ZP
1549	.$126f	STY TMP3_ZP+1
1550	.$1271	COPY2_XY_YREG
1551	.$1271	LDX #<Y_REG  
1552	.$1273	LDY #0
1553	.$1275	LDA (TMP3_ZP),Y
1554	.$1277	STA Y_REG
1555	.$127a	INY
1556	.$127b	LDA (TMP3_ZP),Y
1557	.$127d	STA Y_REG+1
1558	.$1280	INY
1559	.$1281	LDA (TMP3_ZP),Y
1560	.$1283	STA Y_REG+2
1561	.$1286	INY
1562	.$1287	LDA (TMP3_ZP),Y
1563	.$1289	STA Y_REG+3
1564	.$128c	INY
1565	.$128d	LDA (TMP3_ZP),Y
1566	.$128f	STA Y_REG+4
1567	.$1292	RTS
1571	.$1293	FACWORD
1572	.$1293	LDA FACEXP   
1573	.$1295	BNE DOFACWORD
1574	.$1297	STA FACSGN   
1575	.$1299	DOFACWORD:
1576	.$1299	JMP XFACWORD
1580	.$129c	LOCKCHANNEL
1581	.$129c	PHA
1582	.$129d	LDA #$FF
1583	.$129f	STA CHLOCKFLAG
1584	.$12a2	PLA
1585	.$12a3	RTS
1588	.$12a4	UNLOCKCHANNEL
1589	.$12a4	PHA
1590	.$12a5	LDA #0
1591	.$12a7	STA CHLOCKFLAG
1592	.$12aa	PLA
1593	.$12ab	JMP CLRCH
1596	.$12ae	INITOUTCHANNEL
1597	.$12ae	LDA CHLOCKFLAG
1598	.$12b1	BEQ INITOUT2
1599	.$12b3	CMP #$FF
1600	.$12b5	BNE SKIPINITCH
1601	.$12b7	INITOUT2
1602	.$12b7	LDA #<C_REG
1603	.$12b9	LDY #>C_REG
1604	.$12bb	JSR REALFAC
1605	.$12be	JSR FACWORD
1606	.$12c1	TYA
1607	.$12c2	TAX
1608	.$12c3	CPX CMD_NUM
1609	.$12c6	BNE CMDNEQUAL
1610	.$12c8	LDY #0
1611	.$12ca	STY CMD_NUM   
1612	.$12cd	CMDNEQUAL STA CHANNEL
1613	.$12d0	STA CHLOCKFLAG
1614	.$12d3	JMP CHKOUT
1615	.$12d6	SKIPINITCH
1616	.$12d6	RTS
1619	.$12d7	INITINCHANNEL
1620	.$12d7	LDA IOCHANNEL
1621	.$12d9	STA STORE1+1
1622	.$12dc	LDA #1
1623	.$12de	STA IOCHANNEL  
1624	.$12e0	LDA #<C_REG
1625	.$12e2	LDY #>C_REG
1626	.$12e4	JSR REALFAC
1627	.$12e7	JSR FACWORD
1628	.$12ea	TYA
1629	.$12eb	TAX
1630	.$12ec	STA CHANNEL
1631	.$12ef	STA CHLOCKFLAG
1632	.$12f2	JMP CHKIN
1633	.$12f5	RTS
1636	.$12f6	CLRCHNEW
1637	.$12f6	LDA CHLOCKFLAG
1638	.$12f9	BNE SKIPCLRCH
1639	.$12fb	JMP CLRCH
1640	.$12fe	SKIPCLRCH
1641	.$12fe	RTS
1644	.$12ff	GETSTRCHANNEL
1645	.$12ff	JSR INITINCHANNEL
1646	.$1302	JSR GETSTR
1647	.$1305	JMP CLRINCH
1650	.$1308	INPUTLENGTHCHECK LDA INPUTLENGTH
1651	.$130b	RTS
1654	.$130c	INPUTSTRCHANNEL
1655	.$130c	JSR INITINCHANNEL
1656	.$130f	JSR INPUTSTR
1657	.$1312	JMP CLRINCH
1660	.$1315	STROUTCHANNEL
1661	.$1315	JSR INITOUTCHANNEL
1662	.$1318	JSR STROUT
1663	.$131b	JMP CLRCHNEW
1666	.$131e	LINEBREAKCHANNEL
1667	.$131e	JSR INITOUTCHANNEL
1668	.$1321	JSR LINEBREAK
1669	.$1324	JMP CLRCHNEW
1672	.$1327	CLRINCH  JSR CLRCH
1673	.$132a	LDA STORE1+1
1674	.$132d	STA IOCHANNEL
1675	.$132f	RTS
1678	.$1330	OPEN  JSR SETEMPTYSTR 
1679	.$1333	JSR YREGFAC
1680	.$1336	JSR FACWORD
1681	.$1339	STY TMP_REG  
1682	.$133b	JSR XREGFAC
1683	.$133e	JSR FACWORD
1684	.$1341	STY LOGICADDR 
1685	.$1343	DEC TMP_REG
1686	.$1345	BEQ ALLPARAMS
1687	.$1347	LDA #<C_REG
1688	.$1349	LDY #>C_REG
1689	.$134b	JSR REALFAC
1690	.$134e	JSR FACWORD
1691	.$1351	STY DEVICENUM 
1692	.$1353	DEC TMP_REG
1693	.$1355	BEQ ALLPARAMS
1694	.$1357	LDA #<D_REG
1695	.$1359	LDY #>D_REG
1696	.$135b	JSR REALFAC
1697	.$135e	JSR FACWORD
1698	.$1361	STY SECADDR  
1699	.$1363	DEC TMP_REG
1700	.$1365	BEQ ALLPARAMS
1701	.$1367	JSR SETNAMEPRT
1702	.$136a	ALLPARAMS
1706	.$136a	JSR OPENCH
1707	.$136d	BCS OPENERR
1708	.$136f	RTS
1709	.$1370	OPENERR  STA TMP2_ZP
1710	.$1372	LDA LOGICADDR
1711	.$1374	JSR CLOSECH
1715	.$1377	LDX TMP2_ZP
1716	.$1379	JMP ERRALL
1719	.$137c	SETEMPTYSTR
1720	.$137c	LDA #<EMPTYSTR
1721	.$137e	STA FILEADDR
1722	.$1380	LDA #>EMPTYSTR
1723	.$1382	STA FILEADDR+1
1724	.$1384	LDA #0
1725	.$1386	STA FILELEN
1726	.$1388	STA LOGICADDR
1727	.$138a	STA DEVICENUM
1728	.$138c	STA SECADDR
1729	.$138e	RTS
1732	.$138f	SETNAMEPRT LDA G_REG
1733	.$1391	LDY G_REG+1
1734	.$1393	STA TMP_ZP
1735	.$1395	STY TMP_ZP+1
1736	.$1397	LDY #0
1737	.$1399	LDA (TMP_ZP),Y 
1738	.$139b	STA FILELEN
1739	.$139d	INC G_REG
1740	.$139f	BNE SNPNOOV
1741	.$13a1	INC G_REG+1
1742	.$13a3	SNPNOOV  LDA G_REG
1743	.$13a5	LDY G_REG+1
1744	.$13a7	STA FILEADDR  
1745	.$13a9	STY FILEADDR+1 
1746	.$13ab	RTS
1749	.$13ac	CLOSE  JSR XREGFAC
1750	.$13af	JSR FACWORD
1751	.$13b2	TYA    
1752	.$13b3	JSR CLOSECH
1756	.$13b6	RTS
1759	.$13b7	OUTOFMEMORY
1763	.$13b7	LDX #$10
1764	.$13b9	JMP ERRALL
1767	.$13bc	XREGFAC  LDA X_REG+4
1768	.$13be	STA FACLO
1769	.$13c0	LDA X_REG+3
1770	.$13c2	STA FACMO
1771	.$13c4	LDA X_REG+2
1772	.$13c6	STA FACMOH
1773	.$13c8	LDA X_REG+1
1774	.$13ca	STA FACSGN
1775	.$13cc	ORA #$80
1776	.$13ce	STA FACHO
1777	.$13d0	LDA X_REG
1778	.$13d2	STA FACEXP
1779	.$13d4	LDA #0
1780	.$13d6	STA FACOV
1781	.$13d8	RTS
1784	.$13d9	YREGFAC  LDA Y_REG+4
1785	.$13dc	STA FACLO
1786	.$13de	LDA Y_REG+3
1787	.$13e1	STA FACMO
1788	.$13e3	LDA Y_REG+2
1789	.$13e6	STA FACMOH
1790	.$13e8	LDA Y_REG+1
1791	.$13eb	STA FACSGN
1792	.$13ed	ORA #$80
1793	.$13ef	STA FACHO
1794	.$13f1	LDA Y_REG
1795	.$13f4	STA FACEXP
1796	.$13f6	LDA #0
1797	.$13f8	STA FACOV
1798	.$13fa	RTS
1912	.$13fb	INITVARS
1913	.$13fb	JSR INITSTRVARS
1914	.$13fe	LDA #0
1915	.$1400	RTS
1919	.$1401	CONSTANTS
1921	.$1401	CONST_0 .BYTE 10
1922	.$1402	.STRG "write file"
1925	.$140c	CONST_1R .REAL 3.0
1928	.$1411	CONST_2R .REAL 8.0
1931	.$1416	CONST_3R .REAL 2.0
1933	.$141b	CONST_4 .BYTE 12
1934	.$141c	.STRG "testfile,s,w"
1937	.$1428	CONST_5R .REAL 4.0
1939	.$142d	CONST_6 .BYTE 5
1940	.$142e	.STRG "yeah!"
1942	.$1433	CONST_7 .BYTE 11
1943	.$1434	.STRG "read by get"
1945	.$143f	CONST_8 .BYTE 12
1946	.$1440	.STRG "testfile,s,r"
1954	.$144c	CONST_11 .BYTE 13
1955	.$144d	.STRG "read by input"
1958	.$145a	DATAS
1959	.$145a	.BYTE $FF
1961	.$145b	CONSTANTS_END
1964	.$145b	VARIABLES
1965	.$145b	STRINGVARS_START
1967	.$145b	VAR_A$ .WORD EMPTYSTR
1969	.$145d	VAR_TI$ .WORD EMPTYSTR
1970	.$145f	STRINGVARS_END
1971	.$145f	STRINGARRAYS_START
1972	.$145f	STRINGARRAYS_END
1973	.$145f	VARIABLES_END
1975	.$145f	Y_REG .REAL 0.0
1976	.$1464	C_REG .REAL 0.0
1977	.$1469	D_REG .REAL 0.0
1978	.$146e	E_REG .REAL 0.0
1979	.$1473	F_REG .REAL 0.0
1980	.$1478	A_REG .WORD 0
1981	.$147a	B_REG .WORD 0
1982	.$147c	CMD_NUM .BYTE 0
1983	.$147d	CHANNEL .BYTE 0
1984	.$147e	SP_SAVE .BYTE 0
1985	.$147f	TMP2_REG .WORD 0
1986	.$1481	TMP3_REG .WORD 0
1987	.$1483	TMP4_REG .WORD 0
1988	.$1485	AS_TMP .WORD 0
1989	.$1487	BPOINTER_TMP .WORD 0
1990	.$1489	BASICTEXTP .BYTE 0
1991	.$148a	STORE1 .WORD 0
1992	.$148c	STORE2 .WORD 0
1993	.$148e	STORE3 .WORD 0
1994	.$1490	STORE4 .WORD 0
1995	.$1492	GCSTART .WORD 0
1996	.$1494	GCLEN .WORD 0
1997	.$1496	GCWORK .WORD 0
1998	.$1498	INPUTLENGTH .BYTE 0
1999	.$1499	TMP_FREG .REAL 0
2000	.$149e	TMP2_FREG .REAL 0
2001	.$14a3	TMP_FLAG .BYTE 0
2002	.$14a4	INT_FLAG .BYTE 0
2003	.$14a5	REAL_CONST_ONE .REAL 1.0
2004	.$14aa	REAL_CONST_ZERO .REAL 0.0
2005	.$14af	REAL_CONST_MINUS_ONE .REAL -1.0
2006	.$14b4	CHLOCKFLAG .BYTE 0
2007	.$14b5	EMPTYSTR .BYTE 0
2008	.$14b6	FPSTACKP .WORD FPSTACK
2009	.$14b8	FORSTACKP .WORD FORSTACK
2010	.$14ba	DATASP .WORD DATAS
2011	.$14bc	LASTVAR .WORD 0
2012	.$14be	LASTVARP .WORD 0
2013	.$14c0	HIGHP .WORD STRBUF
2014	.$14c2	STRBUFP .WORD STRBUF
2015	.$14c4	ENDSTRBUF .WORD 0
2016	.$14c6	INPUTQUEUEP .BYTE 0
2017	.$14c7	PROGRAMEND
2018	.$14c7	INPUTQUEUE .ARRAY $0F
2019	.$14d6	FPSTACK .ARRAY 100
2020	.$153a	FORSTACK .ARRAY 340
2021	.$168e	STRBUF .BYTE 0
