117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
125	.$81f	LDY 53281
126	.$822	LDA #0
128	.$824	JSR INTFAC
129	.$827	JSR FACXREG
133	.$82a	JSR FACWORD
134	.$82d	STY 53280
136	.$830	LINE_1:
139	.$830	LINE_2:
141	.$830	LDA #<CONST_0
142	.$832	LDY #>CONST_0
143	.$834	STA TMP_ZP
144	.$836	STY TMP_ZP+1
145	.$838	LDA #<VAR_A$
146	.$83a	LDY #>VAR_A$
147	.$83c	JSR COPYSTRING
150	.$83f	LINE_3:
152	.$83f	JSR COMPACTMAX
153	.$842	LDA #<CONST_1
154	.$844	LDY #>CONST_1
155	.$846	STA B_REG
156	.$849	STY B_REG+1
157	.$84c	LDA VAR_A$
158	.$84f	LDY VAR_A$+1
159	.$852	STA A_REG
160	.$855	STY A_REG+1
161	.$858	JSR CONCAT
163	.$85b	LDA A_REG
164	.$85e	LDY A_REG+1
165	.$861	STA TMP_ZP
166	.$863	STY TMP_ZP+1
167	.$865	LDA #<VAR_A$
168	.$867	LDY #>VAR_A$
169	.$869	JSR COPYSTRING
171	.$86c	LINE_4:
173	.$86c	JSR COMPACTMAX
174	.$86f	LDA #<CONST_2
175	.$871	LDY #>CONST_2
176	.$873	STA B_REG
177	.$876	STY B_REG+1
178	.$879	LDA VAR_A$
179	.$87c	LDY VAR_A$+1
180	.$87f	STA A_REG
181	.$882	STY A_REG+1
182	.$885	JSR CONCAT
184	.$888	LDA A_REG
185	.$88b	LDY A_REG+1
186	.$88e	STA TMP_ZP
187	.$890	STY TMP_ZP+1
188	.$892	LDA #<VAR_A$
189	.$894	LDY #>VAR_A$
190	.$896	JSR COPYSTRING
192	.$899	LINE_5:
194	.$899	JSR COMPACTMAX
195	.$89c	LDA #<CONST_3
196	.$89e	LDY #>CONST_3
197	.$8a0	STA B_REG
198	.$8a3	STY B_REG+1
199	.$8a6	LDA VAR_A$
200	.$8a9	LDY VAR_A$+1
201	.$8ac	STA A_REG
202	.$8af	STY A_REG+1
203	.$8b2	JSR CONCAT
205	.$8b5	LDA A_REG
206	.$8b8	LDY A_REG+1
207	.$8bb	STA TMP_ZP
208	.$8bd	STY TMP_ZP+1
209	.$8bf	LDA #<VAR_A$
210	.$8c1	LDY #>VAR_A$
211	.$8c3	JSR COPYSTRING
213	.$8c6	LINE_6:
215	.$8c6	LDA #<CONST_4
216	.$8c8	LDY #>CONST_4
217	.$8ca	JSR STROUTBRKWL
221	.$8cd	LINE_7:
223	.$8cd	LDA #0
224	.$8cf	STA VAR_I
225	.$8d2	STA VAR_I+1
226	.$8d5	STA VAR_I+2
227	.$8d8	STA VAR_I+3
228	.$8db	STA VAR_I+4
230	.$8de	LDA VAR_A$
231	.$8e1	LDY VAR_A$+1
232	.$8e4	STA B_REG
233	.$8e7	STY B_REG+1
234	.$8ea	JSR LEN
235	.$8ed	JSR ONETOFAC
238	.$8f0	LDA #<X_REG
239	.$8f2	LDY #>X_REG
241	.$8f4	JSR FASTFSUBMEM
244	.$8f7	JSR FACXREG
247	.$8fa	LDX #<VAR_L
248	.$8fc	LDY #>VAR_L
250	.$8fe	JSR FACMEM
252	.$901	LINE_8:
255	.$901	LINE_9:
258	.$901	LINE_10:
260	.$901	LDX #4
261	.$903	dcloop1065_1:
262	.$903	LDA CONST_7R,X
263	.$906	STA VAR_X,X
264	.$909	DEX
265	.$90a	BPL dcloop1065_1
267	.$90c	LDA 56334
268	.$90f	AND #254
269	.$911	STA 56335
281	.$914	LINE_11:
283	.$914	LDA #0
284	.$916	STA VAR_I
285	.$919	STA VAR_I+1
286	.$91c	STA VAR_I+2
287	.$91f	STA VAR_I+3
288	.$922	STA VAR_I+4
290	.$925	LDA #<CONST_6
291	.$927	LDY #>CONST_6
292	.$929	JSR REALFACPUSH
294	.$92c	LDA #<CONST_5
295	.$92e	LDY #>CONST_5
296	.$930	JSR REALFACPUSH
298	.$933	LDA #<VAR_I
299	.$935	LDY #>VAR_I
300	.$937	STA A_REG
301	.$93a	STY A_REG+1
302	.$93d	LDA #<FORLOOP0
303	.$93f	STA JUMP_TARGET
304	.$941	LDA #>FORLOOP0
305	.$943	STA JUMP_TARGET+1
306	.$945	JSR INITFOR
307	.$948	FORLOOP0:
308	.$948	LDY #1
309	.$94a	STY 53273
311	.$94d	LDA #<CONST_11
312	.$94f	LDY #>CONST_11
313	.$951	JSR COPY2_XYA_YREG
317	.$954	LDA #<CONST_6
318	.$956	LDY #>CONST_6
319	.$958	JSR COPY2_XYA_XREG
323	.$95b	WAIT1:
324	.$95b	JSR YREGFAC
326	.$95e	JSR FACWORD
327	.$961	STY MOVSELF0+1
328	.$964	STA MOVSELF0+2
329	.$967	MOVSELF0:
330	.$967	LDA $FFFF
331	.$96a	TAY
332	.$96b	LDA #0
334	.$96d	JSR INTFAC
335	.$970	LDX #<D_REG
336	.$972	LDY #>D_REG
338	.$974	JSR FACMEM
339	.$977	JSR XREGFAC
341	.$97a	LDA #<D_REG
342	.$97c	LDY #>D_REG
344	.$97e	JSR MEMARG
346	.$981	JSR FASTAND
348	.$984	LDX #<D_REG
349	.$986	LDY #>D_REG
351	.$988	JSR FACMEM
352	.$98b	LDA D_REG
353	.$98e	COMP_SKP0:
354	.$98e	BEQ WAIT1
357	.$990	LINE_12:
359	.$990	LDA #<VAR_X
360	.$992	LDY #>VAR_X
361	.$994	JSR COPY2_XYA_XREG
364	.$997	JSR XREGFAC
367	.$99a	JSR FACWORD
368	.$99d	STY 53270
369	.$9a0	LDA #<CONST_13
370	.$9a2	LDY #>CONST_13
371	.$9a4	JSR STROUTWL
373	.$9a7	JSR COMPACTMAX
374	.$9aa	LDA VAR_A$
375	.$9ad	LDY VAR_A$+1
376	.$9b0	STA B_REG
377	.$9b3	STY B_REG+1
378	.$9b6	LDY #39
379	.$9b8	JSR LEFTCONST
386	.$9bb	JSR STROUTBRK
388	.$9be	JSR ONETOFAC
390	.$9c1	LDA #<VAR_X
391	.$9c3	LDY #>VAR_X
392	.$9c5	JSR FASTFSUBMEM
397	.$9c8	LDX #<VAR_X
398	.$9ca	LDY #>VAR_X
400	.$9cc	JSR FACMEM
401	.$9cf	LDA #<CONST_5
402	.$9d1	LDY #>CONST_5
403	.$9d3	JSR REALFAC
404	.$9d6	LDA #<VAR_X
405	.$9d8	LDY #>VAR_X
406	.$9da	JSR CMPFAC
408	.$9dd	BEQ LT_LT_EQ0
409	.$9df	ROL
410	.$9e0	BCC LT_LT0
411	.$9e2	LT_LT_EQ0:
412	.$9e2	LDA #0
413	.$9e4	JMP LT_SKIP0
414	.$9e7	LT_LT0:
415	.$9e7	LDA #$1
416	.$9e9	LT_SKIP0:
417	.$9e9	COMP_SKP1:
418	.$9e9	BNE LINE_NSKIP2
420	.$9eb	JMP LINE_SKIP2
422	.$9ee	LINE_NSKIP2:
424	.$9ee	JSR COMPACTMAX
425	.$9f1	LDA VAR_A$
426	.$9f4	LDY VAR_A$+1
427	.$9f7	STA B_REG
428	.$9fa	STY B_REG+1
429	.$9fd	LDY #1
430	.$9ff	JSR LEFTCONST
437	.$a02	LDA A_REG
438	.$a05	LDY A_REG+1
439	.$a08	STA TMP_ZP
440	.$a0a	STY TMP_ZP+1
441	.$a0c	JSR PUSHINT
443	.$a0f	LDA #<VAR_L
444	.$a11	LDY #>VAR_L
445	.$a13	JSR COPY2_XYA_CREG
450	.$a16	LDA VAR_A$
451	.$a19	LDY VAR_A$+1
452	.$a1c	STA B_REG
453	.$a1f	STY B_REG+1
454	.$a22	JSR RIGHT
455	.$a25	JSR POPINT2B
457	.$a28	JSR CONCAT
459	.$a2b	LDA A_REG
460	.$a2e	LDY A_REG+1
461	.$a31	STA TMP_ZP
462	.$a33	STY TMP_ZP+1
463	.$a35	LDA #<VAR_A$
464	.$a37	LDY #>VAR_A$
465	.$a39	JSR COPYSTRING
467	.$a3c	LINE_SKIP2:
470	.$a3c	LINE_13:
472	.$a3c	LDY $00c6
473	.$a3e	LDA #0
484	.$a40	JSR INTFAC
486	.$a43	LDX #<VAR_I
487	.$a45	LDY #>VAR_I
489	.$a47	JSR FACMEM
490	.$a4a	LDA #<CONST_5
491	.$a4c	LDY #>CONST_5
492	.$a4e	JSR REALFAC
493	.$a51	LDA #<VAR_X
494	.$a53	LDY #>VAR_X
495	.$a55	JSR CMPFAC
497	.$a58	BEQ LT_LT_EQ1
498	.$a5a	ROL
499	.$a5b	BCC LT_LT1
500	.$a5d	LT_LT_EQ1:
501	.$a5d	LDA #0
502	.$a5f	JMP LT_SKIP1
503	.$a62	LT_LT1:
504	.$a62	LDA #$1
505	.$a64	LT_SKIP1:
506	.$a64	COMP_SKP2:
507	.$a64	BEQ LINE_SKIP3
510	.$a66	LINE_NSKIP3:
512	.$a66	LDX #4
513	.$a68	dcloop1895_1:
514	.$a68	LDA CONST_7R,X
515	.$a6b	STA VAR_X,X
516	.$a6e	DEX
517	.$a6f	BPL dcloop1895_1
520	.$a71	LINE_SKIP3:
523	.$a71	LINE_14:
525	.$a71	LDA #0
526	.$a73	STA A_REG
527	.$a76	STA A_REG+1
528	.$a79	JSR NEXT
530	.$a7c	LDA A_REG
531	.$a7f	BNE RBEQ_0
532	.$a81	JMP (JUMP_TARGET)
534	.$a84	RBEQ_0:
536	.$a84	LINE_15:
538	.$a84	LDY #200
539	.$a86	STY 53270
542	.$a89	LINE_16:
544	.$a89	LDA 56334
545	.$a8c	ORA #1
546	.$a8e	STA 56334
557	.$a91	JSR GETSTR
558	.$a94	LDA A_REG
559	.$a97	LDY A_REG+1
560	.$a9a	STA TMP_ZP
561	.$a9c	STY TMP_ZP+1
562	.$a9e	LDA #<VAR_K$
563	.$aa0	LDY #>VAR_K$
564	.$aa2	JSR COPYSTRING
565	.$aa5	LDY #0
566	.$aa7	STY 198
568	.$aa9	JSR END
569	.$aac	RTS
572	.$aad	END   LDX SP_SAVE
573	.$ab0	TXS
580	.$ab1	RTS
583	.$ab2	START  LDA ENDSTRBUF+1
584	.$ab5	BNE ENDGIVEN
585	.$ab7	LDA BASICEND
586	.$ab9	STA ENDSTRBUF
587	.$abc	LDA BASICEND+1
588	.$abe	STA ENDSTRBUF+1
589	.$ac1	ENDGIVEN LDA #<FPSTACK
590	.$ac3	LDY #>FPSTACK
591	.$ac5	STA FPSTACKP
592	.$ac8	STY FPSTACKP+1
593	.$acb	LDA #<FORSTACK
594	.$acd	LDY #>FORSTACK
595	.$acf	STA FORSTACKP
596	.$ad2	STY FORSTACKP+1
597	.$ad5	LDA #<STRBUF
598	.$ad7	LDY #>STRBUF
599	.$ad9	STA STRBUFP
600	.$adc	STY STRBUFP+1
601	.$adf	STA HIGHP
602	.$ae2	STY HIGHP+1
603	.$ae5	LDA #0
604	.$ae7	STA CHLOCKFLAG
605	.$aea	STA LASTVAR
606	.$aed	STA LASTVAR+1
607	.$af0	JSR INITVARS
608	.$af3	LDA #0
609	.$af5	STA CMD_NUM
610	.$af8	STA CHANNEL
611	.$afb	TAY
612	.$afc	TAX
616	.$afd	STA KEYNDX
622	.$aff	JSR RESTORE
623	.$b02	CLC
627	.$b03	RTS
630	.$b04	INITNARRAY
631	.$b04	STA TMP_ZP
632	.$b06	STY TMP_ZP+1
633	.$b08	LDY #0
634	.$b0a	TYA
635	.$b0b	NINITLOOP STA (TMP_ZP),Y
636	.$b0d	INC TMP_ZP
637	.$b0f	BNE NLOOPNOV
638	.$b11	INC TMP_ZP+1
639	.$b13	NLOOPNOV LDX TMP2_ZP
640	.$b15	BNE NLOOPNOV2
641	.$b17	DEC TMP2_ZP+1
642	.$b19	NLOOPNOV2 DEC TMP2_ZP
643	.$b1b	BNE NINITLOOP
644	.$b1d	LDX TMP2_ZP+1
645	.$b1f	BNE NINITLOOP
646	.$b21	RTS
649	.$b22	INITSTRARRAY
650	.$b22	STA TMP_ZP
651	.$b24	STY TMP_ZP+1
652	.$b26	SINITLOOP LDY #0
653	.$b28	LDA #<EMPTYSTR
654	.$b2a	STA (TMP_ZP),Y
655	.$b2c	LDA #>EMPTYSTR
656	.$b2e	INY
657	.$b2f	STA (TMP_ZP),Y
658	.$b31	CLC
659	.$b32	LDA TMP_ZP
660	.$b34	ADC #2
661	.$b36	STA TMP_ZP
662	.$b38	BCC SLOOPNOV1
663	.$b3a	INC TMP_ZP+1
664	.$b3c	SLOOPNOV1 SEC
665	.$b3d	LDA TMP2_ZP
666	.$b3f	SBC #2
667	.$b41	STA TMP2_ZP
668	.$b43	BCS SLOOPNOV2
669	.$b45	DEC TMP2_ZP+1
670	.$b47	SLOOPNOV2 LDA TMP2_ZP
671	.$b49	BNE SINITLOOP
672	.$b4b	LDA TMP2_ZP+1
673	.$b4d	BNE SINITLOOP
674	.$b4f	RTS
677	.$b50	INITSPARAMS STA TMP3_ZP
678	.$b52	STY TMP3_ZP+1
679	.$b54	SEC
680	.$b55	SBC #2
681	.$b57	STA TMP_ZP
682	.$b59	TYA
683	.$b5a	SBC #0
684	.$b5c	STA TMP_ZP+1
685	.$b5e	LDY #0
686	.$b60	LDA (TMP_ZP),Y
687	.$b62	STA TMP2_ZP
688	.$b64	INY
689	.$b65	LDA (TMP_ZP),Y
690	.$b67	STA TMP2_ZP+1
691	.$b69	LDA TMP3_ZP
692	.$b6b	LDY TMP3_ZP+1
693	.$b6d	RTS
696	.$b6e	INITSTRVARS LDA #<STRINGVARS_START  
697	.$b70	LDY #>STRINGVARS_START
698	.$b72	CMP #<STRINGVARS_END
699	.$b74	BNE INITIT1
700	.$b76	CPY #>STRINGVARS_END
701	.$b78	BNE INITIT1
702	.$b7a	JMP INITSA2     
703	.$b7d	INITIT1  STA TMP_ZP
704	.$b7f	STY TMP_ZP+1
705	.$b81	LDY #0
706	.$b83	INITSTRLOOP LDA #<EMPTYSTR
707	.$b85	STA (TMP_ZP),Y
708	.$b87	INY
709	.$b88	LDA #>EMPTYSTR
710	.$b8a	STA (TMP_ZP),Y
711	.$b8c	DEY
712	.$b8d	LDA TMP_ZP
713	.$b8f	CLC
714	.$b90	ADC #2
715	.$b92	STA TMP_ZP
716	.$b94	LDA TMP_ZP+1
717	.$b96	ADC #0
718	.$b98	STA TMP_ZP+1
719	.$b9a	CMP #>STRINGVARS_END
720	.$b9c	BNE INITSTRLOOP
721	.$b9e	LDA TMP_ZP
722	.$ba0	CMP #<STRINGVARS_END
723	.$ba2	BNE INITSTRLOOP
724	.$ba4	INITSA2  LDA #<STRINGARRAYS_START 
725	.$ba6	LDY #>STRINGARRAYS_START
726	.$ba8	CMP #<STRINGARRAYS_END
727	.$baa	BNE ARRAYLOOP
728	.$bac	CPY #>STRINGARRAYS_END
729	.$bae	BNE ARRAYLOOP
730	.$bb0	RTS       
731	.$bb1	ARRAYLOOP CLC
732	.$bb2	ADC #3
733	.$bb4	BCC ARRAYSKIP1
734	.$bb6	INY
735	.$bb7	ARRAYSKIP1 CPY #>STRINGARRAYS_END
736	.$bb9	BEQ ARRAYSC
737	.$bbb	BCC ARRAYSKIP2
738	.$bbd	JMP ARRAYQUIT
739	.$bc0	ARRAYSC  CMP #<STRINGARRAYS_END
740	.$bc2	BCS ARRAYQUIT
741	.$bc4	ARRAYSKIP2 STA TMP_REG
742	.$bc6	STY TMP_REG+1
743	.$bc8	JSR INITSPARAMS
744	.$bcb	LDA TMP_REG
745	.$bcd	LDY TMP_REG+1
746	.$bcf	JSR INITSTRARRAY
747	.$bd2	LDA TMP_ZP
748	.$bd4	LDY TMP_ZP+1
749	.$bd6	JMP ARRAYLOOP
750	.$bd9	ARRAYQUIT RTS
753	.$bda	RESTORE  LDA #<DATAS
754	.$bdc	LDY #>DATAS
755	.$bde	STA DATASP
756	.$be1	STY DATASP+1
757	.$be4	RTS
760	.$be5	RIGHT  JSR STRFUNCINT
761	.$be8	RIGHT2  LDA (TMP_ZP),Y
762	.$bea	TAX
763	.$beb	CMP TMP_REG   
764	.$bed	BCS RIGHTBELOW
765	.$bef	STA TMP_REG   
766	.$bf1	RIGHTBELOW TXA
767	.$bf2	SEC
768	.$bf3	SBC TMP_REG
769	.$bf5	BCS RIGHTNOV
770	.$bf7	LDA #0
771	.$bf9	RIGHTNOV STA TMP_REG+1
772	.$bfb	JMP STRFUNC
775	.$bfe	LEFTCONSTA CMP #0
776	.$c00	BEQ LEFTCONST
777	.$c02	LDY #$FF
778	.$c04	LEFTCONST JSR STRFUNCINTINT
779	.$c07	JMP LEFT2
782	.$c0a	LEFT  JSR STRFUNCINT
783	.$c0d	LEFT2  STY TMP_REG+1  
784	.$c0f	LDA (TMP_ZP),Y
785	.$c11	CMP TMP_REG   
786	.$c13	BCS LEFTBELOW
787	.$c15	STA TMP_REG   
788	.$c17	LEFTBELOW JMP STRFUNC
791	.$c1a	STRFUNCINT  LDA B_REG   
792	.$c1d	STA TMP_ZP
793	.$c1f	LDA B_REG+1
794	.$c22	STA TMP_ZP+1
795	.$c24	LDA #<C_REG
796	.$c26	LDY #>C_REG
797	.$c28	JSR REALFAC
798	.$c2b	JSR FACWORD
799	.$c2e	STY TMP_REG   
800	.$c30	LDY #0
801	.$c32	RTS
804	.$c33	STRFUNCINTINT
805	.$c33	LDA B_REG   
806	.$c36	STA TMP_ZP
807	.$c38	LDA B_REG+1
808	.$c3b	STA TMP_ZP+1
809	.$c3d	STY TMP_REG   
810	.$c3f	LDY #0
811	.$c41	RTS
818	.$c42	STRFUNC  LDA TMP_REG+1
819	.$c44	BEQ STARTATZERO
820	.$c46	LDA TMP_ZP
821	.$c48	CLC
822	.$c49	ADC TMP_REG+1
823	.$c4b	STA TMP_ZP
824	.$c4d	BCC STARTATZERO
825	.$c4f	INC TMP_ZP+1
826	.$c51	STARTATZERO LDY #0
827	.$c53	LDA (TMP_ZP),Y
828	.$c55	PHA     
829	.$c56	LDA TMP_REG
830	.$c58	BNE STRFUNCNZ
831	.$c5a	LDA #<EMPTYSTR
832	.$c5c	STA A_REG
833	.$c5f	LDA #>EMPTYSTR
834	.$c61	STA A_REG+1
835	.$c64	PLA     
838	.$c65	JMP EXITSTRFUNC
839	.$c68	STRFUNCNZ STA (TMP_ZP),Y
840	.$c6a	LDA #<A_REG
841	.$c6c	LDY #>A_REG
842	.$c6e	STA TMP2_ZP
843	.$c70	STY TMP2_ZP+1
844	.$c72	LDX TMP_REG   
845	.$c74	JSR COPYONLY
846	.$c77	PLA
847	.$c78	LDY #0
848	.$c7a	STA (TMP_ZP),Y  
849	.$c7c	EXITSTRFUNC RTS
852	.$c7d	CONCAT  LDA A_REG
853	.$c80	STA TMP_ZP
854	.$c82	LDA A_REG+1
855	.$c85	STA TMP_ZP+1
856	.$c87	LDA STRBUFP  
857	.$c8a	STA A_REG
858	.$c8d	STA TMP3_ZP
859	.$c8f	LDA STRBUFP+1
860	.$c92	STA A_REG+1
861	.$c95	STA TMP3_ZP+1
862	.$c97	LDY #0
863	.$c99	LDA (TMP_ZP),Y
864	.$c9b	TAX
865	.$c9c	LDA B_REG
866	.$c9f	STA TMP2_ZP
867	.$ca1	LDA B_REG+1
868	.$ca4	STA TMP2_ZP+1
869	.$ca6	TXA
870	.$ca7	CLC
871	.$ca8	ADC (TMP2_ZP),Y
872	.$caa	BCC CCSTRFITS
873	.$cac	JMP STRINGTOOLONG
874	.$caf	CCSTRFITS STA (TMP3_ZP),Y
875	.$cb1	INC TMP3_ZP
876	.$cb3	BNE CCNOOV2
877	.$cb5	INC TMP3_ZP+1
878	.$cb7	CCNOOV2  CLC
879	.$cb8	ADC STRBUFP
880	.$cbb	PHP
881	.$cbc	CLC
882	.$cbd	ADC #3
883	.$cbf	STA STRBUFP
884	.$cc2	BCC CCNOCS1
885	.$cc4	INC STRBUFP+1
886	.$cc7	CCNOCS1  PLP
887	.$cc8	BCC CCSTRFITS2
888	.$cca	INC STRBUFP+1
889	.$ccd	CCSTRFITS2 JSR COPY2CONCAT  
890	.$cd0	LDA B_REG   
891	.$cd3	STA TMP_ZP
892	.$cd5	LDA B_REG+1
893	.$cd8	STA TMP_ZP+1
894	.$cda	JMP COPY2CONCAT  
897	.$cdd	COPY2CONCAT LDY #0
898	.$cdf	LDA (TMP_ZP),Y
899	.$ce1	BEQ NOC2C   
900	.$ce3	STA TMP2_ZP
901	.$ce5	INC TMP_ZP
902	.$ce7	BNE COPY2LOOP
903	.$ce9	INC TMP_ZP+1
904	.$ceb	COPY2LOOP LDA (TMP_ZP),Y
905	.$ced	STA (TMP3_ZP),Y
906	.$cef	INY
907	.$cf0	CPY TMP2_ZP
908	.$cf2	BNE COPY2LOOP
909	.$cf4	TYA
910	.$cf5	CLC
911	.$cf6	ADC TMP3_ZP   
912	.$cf8	STA TMP3_ZP
913	.$cfa	BCC NOC2C
914	.$cfc	INC TMP3_ZP+1
915	.$cfe	NOC2C  RTS
918	.$cff	LEN   LDA B_REG
919	.$d02	STA TMP_ZP
920	.$d04	LDA B_REG+1
921	.$d07	STA TMP_ZP+1
922	.$d09	LDY #0
923	.$d0b	LDA (TMP_ZP),Y
924	.$d0d	STA TMP2_ZP  
925	.$d0f	BEQ ZEROLEN
926	.$d11	TAY
927	.$d12	LDA #0
928	.$d14	JSR INTFAC
929	.$d17	JMP FACXREG 
930	.$d1a	ZEROLEN  JMP ZEROSET
933	.$d1d	SAVEPOINTERS
934	.$d1d	LDA TMP_ZP   
935	.$d1f	STA STORE1
936	.$d22	LDA TMP_ZP+1
937	.$d24	STA STORE1+1
938	.$d27	LDA TMP2_ZP
939	.$d29	STA STORE2
940	.$d2c	LDA TMP2_ZP+1
941	.$d2e	STA STORE2+1
942	.$d31	LDA TMP3_ZP
943	.$d33	STA STORE3
944	.$d36	LDA TMP3_ZP+1
945	.$d38	STA STORE3+1
946	.$d3b	RTS
949	.$d3c	RESTOREPOINTERS
950	.$d3c	LDA STORE3+1  
951	.$d3f	STA TMP3_ZP+1
952	.$d41	LDA STORE3
953	.$d44	STA TMP3_ZP
954	.$d46	LDA STORE2+1
955	.$d49	STA TMP2_ZP+1
956	.$d4b	LDA STORE2
957	.$d4e	STA TMP2_ZP
958	.$d50	LDA STORE1+1
959	.$d53	STA TMP_ZP+1
960	.$d55	LDA STORE1
961	.$d58	STA TMP_ZP
962	.$d5a	RTS
969	.$d5b	COMPACTMAX
970	.$d5b	LDA #$FF
971	.$d5d	LDY #$0
972	.$d5f	JMP COMPACTF
975	.$d62	COMPACT
976	.$d62	LDY #0
977	.$d64	GCBUFNE  LDA (TMP_ZP),Y  
978	.$d66	COMPACTF STA TMP4_REG  
979	.$d69	LDY STRBUFP+1  
980	.$d6c	STY TMP4_REG+1  
981	.$d6f	INY     
982	.$d70	BEQ ENDMEM   
983	.$d72	CPY ENDSTRBUF+1  
984	.$d75	BCC RGCEXIT   
985	.$d77	ENDMEM  LDA STRBUFP
986	.$d7a	CLC
987	.$d7b	ADC TMP4_REG
988	.$d7e	STA TMP4_REG
989	.$d81	BCC RGCNOOV1
990	.$d83	INC TMP4_REG+1
991	.$d86	RGCNOOV1 CLC
992	.$d87	LDA TMP4_REG
993	.$d8a	ADC #3
994	.$d8c	STA TMP4_REG
995	.$d8f	BCC RGCNOOV2
996	.$d91	INC TMP4_REG+1
997	.$d94	RGCNOOV2 LDA TMP4_REG+1  
998	.$d97	CMP ENDSTRBUF+1
999	.$d9a	BEQ RGCLOW1
1000	.$d9c	BCS GCEXECOMP  
1001	.$d9e	JMP RGCEXIT
1002	.$da1	RGCLOW1  LDA TMP4_REG
1003	.$da4	CMP ENDSTRBUF
1004	.$da7	BCS GCEXECOMP  
1005	.$da9	RGCEXIT  RTS     
1006	.$daa	GCEXECOMP LDA STRBUFP
1007	.$dad	STA STORE4
1008	.$db0	LDA STRBUFP+1
1009	.$db3	STA STORE4+1
1010	.$db6	JSR GCEXE
1011	.$db9	JMP CHECKMEMORY
1014	.$dbc	GCEXE  JSR SAVEPOINTERS
1015	.$dbf	LDA #0
1016	.$dc1	STA LASTVAR
1017	.$dc4	STA LASTVAR+1  
1018	.$dc7	LDA #<STRBUF
1019	.$dc9	STA TMP_ZP
1020	.$dcb	STA GCSTART
1021	.$dce	LDA #>STRBUF
1022	.$dd0	STA TMP_ZP+1  
1023	.$dd2	STA GCSTART+1
1024	.$dd5	GCLOOP  LDY #0
1025	.$dd7	LDA TMP_ZP
1026	.$dd9	STA GCWORK
1027	.$ddc	LDA TMP_ZP+1
1028	.$dde	STA GCWORK+1  
1029	.$de1	LDA (TMP_ZP),Y
1030	.$de3	STA GCLEN   
1031	.$de6	INC TMP_ZP
1032	.$de8	BNE GCLOOPNOOV
1033	.$dea	INC TMP_ZP+1
1034	.$dec	GCLOOPNOOV LDA TMP_ZP
1035	.$dee	CLC
1036	.$def	ADC GCLEN
1037	.$df2	STA TMP_ZP
1038	.$df4	BCC GCLOOPNOOV2
1039	.$df6	INC TMP_ZP+1  
1040	.$df8	GCLOOPNOOV2 LDY #0
1041	.$dfa	LDA (TMP_ZP),Y
1042	.$dfc	STA TMP2_ZP
1043	.$dfe	INY
1044	.$dff	LDA (TMP_ZP),Y
1045	.$e01	STA TMP2_ZP+1  
1046	.$e03	LDA TMP_ZP
1047	.$e05	CLC
1048	.$e06	ADC #2
1049	.$e08	STA TMP_ZP
1050	.$e0a	BCC GCLOOPNOOV3
1051	.$e0c	INC TMP_ZP+1  
1052	.$e0e	GCLOOPNOOV3 LDY #0
1053	.$e10	LDA (TMP2_ZP),Y
1054	.$e12	CMP GCWORK
1055	.$e15	BNE GCKLOOP
1056	.$e17	INY
1057	.$e18	LDA (TMP2_ZP),Y
1058	.$e1a	CMP GCWORK+1
1059	.$e1d	BEQ MEMFREE
1060	.$e1f	GCKLOOP  LDA TMP_ZP+1  
1061	.$e21	CMP HIGHP+1
1062	.$e24	BEQ GCHECKLOW
1063	.$e26	BCC GCLOOP
1064	.$e28	JMP GCDONE
1065	.$e2b	GCHECKLOW LDA TMP_ZP
1066	.$e2d	CMP HIGHP
1067	.$e30	BCS GCDONE
1068	.$e32	JMP GCLOOP
1069	.$e35	MEMFREE  LDA GCSTART   
1070	.$e38	CMP GCWORK   
1071	.$e3b	BNE COPYDOWN
1072	.$e3d	LDA GCSTART+1
1073	.$e40	CMP GCWORK+1
1074	.$e43	BNE COPYDOWN
1075	.$e45	LDA TMP_ZP   
1076	.$e47	STA GCSTART
1077	.$e4a	LDA TMP_ZP+1
1078	.$e4c	STA GCSTART+1
1079	.$e4f	JMP GCKLOOP   
1080	.$e52	COPYDOWN LDA GCSTART   
1081	.$e55	STA TMP_REG
1082	.$e57	LDA GCSTART+1
1083	.$e5a	STA TMP_REG+1  
1084	.$e5c	LDA GCWORK
1085	.$e5f	STA TMP2_REG
1086	.$e62	LDA GCWORK+1
1087	.$e65	STA TMP2_REG+1  
1088	.$e68	LDA TMP_ZP
1089	.$e6a	SEC
1090	.$e6b	SBC GCWORK
1091	.$e6e	STA TMP3_REG
1092	.$e71	LDA TMP_ZP+1
1093	.$e73	SBC GCWORK+1
1094	.$e76	STA TMP3_REG+1  
1095	.$e79	LDA GCSTART
1096	.$e7c	CLC
1097	.$e7d	ADC TMP3_REG
1098	.$e80	STA GCSTART
1099	.$e83	LDA GCSTART+1
1100	.$e86	ADC TMP3_REG+1
1101	.$e89	STA GCSTART+1  
1102	.$e8c	JSR QUICKCOPY  
1103	.$e8f	LDY #0
1104	.$e91	LDA TMP_REG
1105	.$e93	STA (TMP2_ZP),Y
1106	.$e95	INY
1107	.$e96	LDA TMP_REG+1
1108	.$e98	STA (TMP2_ZP),Y  
1109	.$e9a	JMP GCKLOOP
1110	.$e9d	GCDONE  LDA GCSTART
1111	.$ea0	STA HIGHP
1112	.$ea3	STA STRBUFP
1113	.$ea6	LDA GCSTART+1
1114	.$ea9	STA HIGHP+1
1115	.$eac	STA STRBUFP+1  
1116	.$eaf	GCSKIP  JSR RESTOREPOINTERS
1117	.$eb2	RTS     
1120	.$eb3	CHECKMEMORY
1121	.$eb3	LDA STRBUFP+1  
1122	.$eb6	CMP STORE4+1  
1123	.$eb9	BCC STILLFITSCM  
1127	.$ebb	BEQ CHECKMEMLOWCM
1128	.$ebd	JMP OUTOFMEMORY  
1129	.$ec0	CHECKMEMLOWCM
1130	.$ec0	LDA STRBUFP   
1131	.$ec3	CMP STORE4
1132	.$ec6	BCC STILLFITSCM
1133	.$ec8	JMP OUTOFMEMORY  
1134	.$ecb	STILLFITSCM RTS
1137	.$ecc	QUICKCOPY LDA TMP_REG  
1138	.$ece	STA TMEM+1
1139	.$ed1	LDA TMP_REG+1
1140	.$ed3	STA TMEM+2
1141	.$ed6	LDA TMP2_REG
1142	.$ed9	STA SMEM+1
1143	.$edc	LDA TMP2_REG+1
1144	.$edf	STA SMEM+2
1145	.$ee2	LDY #$0
1146	.$ee4	LDX TMP3_REG
1147	.$ee7	BNE QCLOOP
1148	.$ee9	LDA TMP3_REG+1
1149	.$eec	BEQ QCEXIT  
1150	.$eee	QCLOOP
1151	.$eee	SMEM  LDA $0000,Y
1152	.$ef1	TMEM  STA $0000,Y
1153	.$ef4	INY
1154	.$ef5	BNE YNOOV
1155	.$ef7	INC TMEM+2
1156	.$efa	INC SMEM+2
1157	.$efd	YNOOV  DEX
1158	.$efe	BNE QCLOOP
1159	.$f00	LDA TMP3_REG+1
1160	.$f03	BEQ QCEXIT
1161	.$f05	DEC TMP3_REG+1
1162	.$f08	JMP QCLOOP
1163	.$f0b	QCEXIT  RTS
1166	.$f0c	COPYSTRING STA TMP2_ZP
1167	.$f0e	STY TMP2_ZP+1
1168	.$f10	CPY TMP_ZP+1
1169	.$f12	BNE CONTCOPY
1170	.$f14	LDA TMP2_ZP
1171	.$f16	CMP TMP_ZP
1172	.$f18	BNE CONTCOPY
1173	.$f1a	RTS     
1174	.$f1b	CONTCOPY JSR COMPACT   
1175	.$f1e	LDY #0
1176	.$f20	STY TMP_FLAG
1177	.$f23	LDA (TMP_ZP),Y
1178	.$f25	BNE NOTEMPTYSTR
1179	.$f27	LDA #<EMPTYSTR  
1180	.$f29	STA TMP_ZP
1181	.$f2b	LDA #>EMPTYSTR
1182	.$f2d	STA TMP_ZP+1
1183	.$f2f	JMP ISCONST
1184	.$f32	NOTEMPTYSTR TAX     
1185	.$f33	LDA (TMP2_ZP),Y
1186	.$f35	STA TMP3_ZP
1187	.$f37	INY
1188	.$f38	LDA (TMP2_ZP),Y
1189	.$f3a	STA TMP3_ZP+1
1190	.$f3c	DEY
1191	.$f3d	LDA TMP_ZP+1  
1192	.$f3f	CMP #>CONSTANTS_END
1193	.$f41	BEQ CHECKLOW1
1194	.$f43	BCS INVAR
1195	.$f45	JMP CHECKNEXT
1196	.$f48	CHECKLOW1 LDA TMP_ZP
1197	.$f4a	CMP #<CONSTANTS_END
1198	.$f4c	BCS INVAR
1199	.$f4e	CHECKNEXT LDA TMP_ZP+1  
1200	.$f50	CMP #>CONSTANTS
1201	.$f52	BEQ CHECKLOW3
1202	.$f54	BCC INVAR
1203	.$f56	JMP ISCONST
1204	.$f59	CHECKLOW3 LDA TMP_ZP
1205	.$f5b	CMP #<CONSTANTS
1206	.$f5d	BCC INVAR   
1207	.$f5f	ISCONST  JSR CHECKLASTVAR 
1208	.$f62	LDA TMP_ZP
1209	.$f64	STA (TMP2_ZP),Y  
1210	.$f66	INY
1211	.$f67	LDA TMP_ZP+1
1212	.$f69	STA (TMP2_ZP),Y
1213	.$f6b	LDA HIGHP   
1214	.$f6e	STA STRBUFP
1215	.$f71	LDA HIGHP+1
1216	.$f74	STA STRBUFP+1
1217	.$f77	RTS
1218	.$f78	INVAR  INY
1219	.$f79	LDA (TMP2_ZP),Y  
1220	.$f7b	CMP #>CONSTANTS_END
1221	.$f7d	BEQ CHECKLOW2
1222	.$f7f	BCS INVAR2
1223	.$f81	JMP PUPDATEPTR
1224	.$f84	CHECKLOW2 DEY
1225	.$f85	LDA (TMP2_ZP),Y
1226	.$f87	CMP #<CONSTANTS_END
1227	.$f89	BCS INVAR2
1228	.$f8b	JMP PUPDATEPTR
1229	.$f8e	INVAR2  LDY #0   
1230	.$f90	LDA (TMP3_ZP),Y
1231	.$f92	STA TMP_REG
1232	.$f94	TXA
1233	.$f95	CMP TMP_REG  
1234	.$f97	BEQ UPDATEHP2 
1237	.$f99	PUPDATEPTR JSR CHECKLASTVAR
1238	.$f9c	LDY #1   
1239	.$f9e	STY TMP_FLAG 
1240	.$fa1	JMP UPDATEPTR 
1241	.$fa4	UPDATEHP2 LDA HIGHP  
1242	.$fa7	STA STRBUFP
1243	.$faa	LDA HIGHP+1
1244	.$fad	STA STRBUFP+1
1245	.$fb0	JMP STRFITS
1246	.$fb3	COPYONLY LDY #0
1247	.$fb5	STY TMP_FLAG
1248	.$fb8	JMP CHECKMEM
1249	.$fbb	ALTCOPY  JMP COPYSTRING2
1250	.$fbe	UPDATEPTR LDA TMP_ZP+1 
1251	.$fc0	CMP HIGHP+1  
1252	.$fc3	BEQ CHECKXT1
1253	.$fc5	BCS ALTCOPY
1254	.$fc7	JMP CHECKMEM
1255	.$fca	CHECKXT1 LDA TMP_ZP
1256	.$fcc	CMP HIGHP
1257	.$fcf	BCS ALTCOPY
1258	.$fd1	CHECKMEM
1259	.$fd1	MEMOK  LDY #0
1260	.$fd3	LDA STRBUFP  
1261	.$fd6	STA (TMP2_ZP),Y 
1262	.$fd8	STA TMP3_ZP
1263	.$fda	LDA STRBUFP+1
1264	.$fdd	INY
1265	.$fde	STA (TMP2_ZP),Y
1266	.$fe0	STA TMP3_ZP+1
1267	.$fe2	TXA
1268	.$fe3	CLC
1269	.$fe4	ADC STRBUFP
1270	.$fe7	PHP
1271	.$fe8	CLC
1272	.$fe9	ADC #3
1273	.$feb	STA STRBUFP
1274	.$fee	BCC NOCS1
1275	.$ff0	INC STRBUFP+1
1276	.$ff3	NOCS1  PLP
1277	.$ff4	BCC STRFITS
1278	.$ff6	INC STRBUFP+1
1279	.$ff9	STRFITS  LDY TMP_FLAG 
1280	.$ffc	BEQ NOHPUPDATE 
1281	.$ffe	LDA HIGHP+1
1282	.$1001	CMP STRBUFP+1
1283	.$1004	BCC UPDATEHIGHP
1284	.$1006	BEQ CHECKNEXTHP
1285	.$1008	JMP NOHPUPDATE
1286	.$100b	CHECKNEXTHP LDA HIGHP
1287	.$100e	CMP STRBUFP
1288	.$1011	BCC UPDATEHIGHP
1289	.$1013	JMP NOHPUPDATE
1290	.$1016	UPDATEHIGHP LDA STRBUFP
1291	.$1019	STA HIGHP
1292	.$101c	LDA STRBUFP+1
1293	.$101f	STA HIGHP+1  
1294	.$1022	JSR REMEMBERLASTVAR
1295	.$1025	JSR STOREVARREF
1296	.$1028	NOHPUPDATE LDY #0
1297	.$102a	LDA (TMP_ZP),Y 
1298	.$102c	STA (TMP3_ZP),Y
1299	.$102e	TAY    
1300	.$102f	BEQ EXITCOPY 
1301	.$1031	LOOP  LDA (TMP_ZP),Y 
1302	.$1033	STA (TMP3_ZP),Y
1303	.$1035	DEY
1304	.$1036	BNE LOOP
1305	.$1038	EXITCOPY RTS
1310	.$1039	COPYSTRING2 LDY #0
1311	.$103b	LDA (TMP_ZP),Y
1312	.$103d	STA TMP_REG
1313	.$103f	TAX
1314	.$1040	LDA HIGHP
1315	.$1043	STA TMP3_ZP
1316	.$1045	STA (TMP2_ZP),Y
1317	.$1047	LDA HIGHP+1
1318	.$104a	STA TMP3_ZP+1
1319	.$104c	INY
1320	.$104d	STA (TMP2_ZP),Y
1321	.$104f	JSR REMEMBERLASTVAR
1324	.$1052	LDA TMP_ZP
1325	.$1054	CMP TMP3_ZP
1326	.$1056	BNE DOLOOP
1327	.$1058	LDA TMP_ZP+1
1328	.$105a	CMP TMP3_ZP+1
1329	.$105c	BEQ SKIPCP2
1330	.$105e	DOLOOP  DEY
1331	.$105f	TXA
1332	.$1060	STA (TMP3_ZP),Y
1333	.$1062	INY
1334	.$1063	ASLOOP  LDA (TMP_ZP),Y
1335	.$1065	STA (TMP3_ZP),Y
1336	.$1067	INY
1337	.$1068	DEX
1338	.$1069	BNE ASLOOP
1339	.$106b	SKIPCP2  LDA HIGHP
1340	.$106e	CLC
1341	.$106f	ADC TMP_REG
1342	.$1071	PHP
1343	.$1072	CLC
1344	.$1073	ADC #3
1345	.$1075	STA HIGHP
1346	.$1078	STA STRBUFP
1347	.$107b	BCC SKIPLOWAS1
1348	.$107d	INC HIGHP+1
1349	.$1080	SKIPLOWAS1 PLP
1350	.$1081	BCC SKIPLOWAS2
1351	.$1083	INC HIGHP+1
1352	.$1086	SKIPLOWAS2 LDA HIGHP+1
1353	.$1089	STA STRBUFP+1
1354	.$108c	JSR STOREVARREF
1355	.$108f	RTS
1359	.$1090	CHECKLASTVAR
1360	.$1090	LDA TMP2_ZP
1361	.$1092	CMP LASTVAR
1362	.$1095	BNE NOTSAMEVAR
1363	.$1097	LDA TMP2_ZP+1
1364	.$1099	CMP LASTVAR+1
1365	.$109c	BNE NOTSAMEVAR
1366	.$109e	LDA LASTVARP   
1367	.$10a1	STA HIGHP
1368	.$10a4	STA STRBUFP
1369	.$10a7	LDA LASTVARP+1
1370	.$10aa	STA HIGHP+1
1371	.$10ad	STA STRBUFP+1
1372	.$10b0	NOTSAMEVAR RTS
1376	.$10b1	REMEMBERLASTVAR
1377	.$10b1	LDA TMP2_ZP
1378	.$10b3	STA LASTVAR
1379	.$10b6	LDA TMP2_ZP+1
1380	.$10b8	STA LASTVAR+1
1381	.$10bb	LDA TMP3_ZP
1382	.$10bd	STA LASTVARP
1383	.$10c0	LDA TMP3_ZP+1
1384	.$10c2	STA LASTVARP+1 
1385	.$10c5	RTS
1390	.$10c6	STOREVARREF
1391	.$10c6	TYA
1392	.$10c7	PHA    
1393	.$10c8	LDA TMP_ZP
1394	.$10ca	PHA
1395	.$10cb	LDA TMP_ZP+1
1396	.$10cd	PHA
1397	.$10ce	LDA HIGHP+1
1398	.$10d1	STA TMP_ZP+1
1399	.$10d3	LDA HIGHP
1400	.$10d6	SEC
1401	.$10d7	SBC #2
1402	.$10d9	STA TMP_ZP
1403	.$10db	BCS RLVNOOV
1404	.$10dd	DEC TMP_ZP+1
1405	.$10df	RLVNOOV  LDA TMP2_ZP
1406	.$10e1	LDY #0
1407	.$10e3	STA (TMP_ZP),Y
1408	.$10e5	LDA TMP2_ZP+1
1409	.$10e7	INY
1410	.$10e8	STA (TMP_ZP),Y 
1411	.$10ea	PLA
1412	.$10eb	STA TMP_ZP+1
1413	.$10ed	PLA
1414	.$10ee	STA TMP_ZP  
1415	.$10f0	PLA
1416	.$10f1	TAY    
1417	.$10f2	RTS
1420	.$10f3	REROUTE  LDA CMD_NUM  
1421	.$10f6	BEQ REROUTECMD
1422	.$10f8	TAX
1423	.$10f9	STA CHANNEL
1424	.$10fc	JMP CHKOUT
1425	.$10ff	REROUTECMD RTS
1428	.$1100	RESETROUTE LDA CMD_NUM  
1429	.$1103	BEQ RESETROUTECMD
1430	.$1105	JMP CLRCHNEW
1431	.$1108	RESETROUTECMD
1432	.$1108	RTS
1435	.$1109	STROUTWL STA A_REG
1436	.$110c	STY A_REG+1
1437	.$110f	STROUT  JSR REROUTE
1438	.$1112	LDA A_REG
1439	.$1115	STA INDEX1
1440	.$1117	LDA A_REG+1
1441	.$111a	STA INDEX1+1
1442	.$111c	LDY #0
1443	.$111e	LDA (INDEX1),Y
1444	.$1120	TAX
1445	.$1121	INC INDEX1
1446	.$1123	BNE PRINTSTR
1447	.$1125	INC INDEX1+1
1448	.$1127	PRINTSTR JSR PRINTSTRS
1449	.$112a	LDA HIGHP   
1450	.$112d	STA STRBUFP
1451	.$1130	LDA HIGHP+1
1452	.$1133	STA STRBUFP+1
1453	.$1136	JSR RESETROUTE
1454	.$1139	RTS
1457	.$113a	STROUTBRKWL STA A_REG
1458	.$113d	STY A_REG+1
1459	.$1140	STROUTBRK JSR REROUTE
1460	.$1143	LDA A_REG
1461	.$1146	STA INDEX1
1462	.$1148	LDA A_REG+1
1463	.$114b	STA INDEX1+1
1464	.$114d	LDY #0
1465	.$114f	LDA (INDEX1),Y
1466	.$1151	TAX
1467	.$1152	INC INDEX1
1468	.$1154	BNE PRINTSTR2
1469	.$1156	INC INDEX1+1
1470	.$1158	PRINTSTR2 JSR PRINTSTRS
1471	.$115b	LDA HIGHP   
1472	.$115e	STA STRBUFP
1473	.$1161	LDA HIGHP+1
1474	.$1164	STA STRBUFP+1
1475	.$1167	LDA #$0D
1476	.$1169	JSR CHROUT
1477	.$116c	JMP RESETROUTE  
1480	.$116f	ADJUSTSTACK LDA FORSTACKP 
1481	.$1172	STA TMP_ZP
1482	.$1174	LDA FORSTACKP+1
1483	.$1177	STA TMP_ZP+1
1484	.$1179	ADSEARCHFOR LDA TMP_ZP
1485	.$117b	CMP #<FORSTACK
1486	.$117d	BNE ADJUST2
1487	.$117f	LDA TMP_ZP+1
1488	.$1181	CMP #>FORSTACK
1489	.$1183	BNE ADJUST2
1490	.$1185	RTS    
1491	.$1186	ADJUST2  LDA TMP_ZP
1492	.$1188	SEC
1493	.$1189	SBC #2
1494	.$118b	STA TMP_ZP
1495	.$118d	BCS ADNOPV1N1
1496	.$118f	DEC TMP_ZP+1
1497	.$1191	ADNOPV1N1 LDY #0
1498	.$1193	LDA (TMP_ZP),Y
1499	.$1195	BNE ADNOGOSUB
1500	.$1197	RTS    
1501	.$1198	ADNOGOSUB
1502	.$1198	INY
1503	.$1199	LDA TMP_ZP
1504	.$119b	SEC
1505	.$119c	SBC (TMP_ZP),Y
1506	.$119e	STA TMP_ZP
1507	.$11a0	BCS ADNOPV1N2
1508	.$11a2	DEC TMP_ZP+1
1509	.$11a4	ADNOPV1N2 DEY
1510	.$11a5	LDA A_REG
1511	.$11a8	ADCMPFOR CMP (TMP_ZP),Y
1512	.$11aa	BNE ADSEARCHFOR
1513	.$11ac	LDA A_REG+1
1514	.$11af	INY
1515	.$11b0	CMP (TMP_ZP),Y
1516	.$11b2	BEQ ADFOUNDFOR
1517	.$11b4	JMP ADSEARCHFOR
1518	.$11b7	ADLOW0  LDX A_REG+1
1519	.$11ba	BEQ ADFOUNDFOR
1520	.$11bc	BNE ADCMPFOR
1521	.$11be	ADFOUNDFOR LDA TMP_ZP  
1522	.$11c0	STA FORSTACKP
1523	.$11c3	LDA TMP_ZP+1
1524	.$11c5	STA FORSTACKP+1
1525	.$11c8	RTS
1528	.$11c9	INITFOR  JSR ADJUSTSTACK
1529	.$11cc	LDA FORSTACKP
1530	.$11cf	STA TMP_ZP
1531	.$11d1	LDA FORSTACKP+1
1532	.$11d4	STA TMP_ZP+1
1533	.$11d6	LDY #0
1534	.$11d8	LDA A_REG
1535	.$11db	STA (TMP_ZP),Y
1536	.$11dd	INY
1537	.$11de	LDA A_REG+1
1538	.$11e1	STA (TMP_ZP),Y
1539	.$11e3	INY
1540	.$11e4	LDA JUMP_TARGET
1541	.$11e6	STA (TMP_ZP),Y
1542	.$11e8	INY
1543	.$11e9	LDA JUMP_TARGET+1
1544	.$11eb	STA (TMP_ZP),Y
1545	.$11ed	INY
1546	.$11ee	STY TMP3_ZP
1547	.$11f0	JSR INCTMPZP
1548	.$11f3	JSR POPREAL
1549	.$11f6	LDX TMP_ZP
1550	.$11f8	LDY TMP_ZP+1
1552	.$11fa	JSR FACMEM
1553	.$11fd	JSR SGNFAC
1554	.$1200	STA TMP_FLAG
1555	.$1203	LDY #5
1556	.$1205	STY TMP3_ZP
1557	.$1207	JSR INCTMPZP
1558	.$120a	JSR POPREAL
1559	.$120d	LDX TMP_ZP
1560	.$120f	LDY TMP_ZP+1
1562	.$1211	JSR FACMEM
1563	.$1214	LDY #5
1564	.$1216	STY TMP3_ZP
1565	.$1218	JSR INCTMPZP
1566	.$121b	LDY #0
1567	.$121d	LDA TMP_FLAG
1568	.$1220	STA (TMP_ZP),Y
1569	.$1222	INY
1570	.$1223	LDA #1
1571	.$1225	STA (TMP_ZP),Y
1572	.$1227	INY
1573	.$1228	LDA #15
1574	.$122a	STA (TMP_ZP),Y
1575	.$122c	LDY #3
1576	.$122e	STY TMP3_ZP
1577	.$1230	JSR INCTMPZP
1578	.$1233	LDA TMP_ZP
1579	.$1235	STA FORSTACKP
1580	.$1238	LDA TMP_ZP+1
1581	.$123a	STA FORSTACKP+1
1582	.$123d	RTS
1585	.$123e	NEXT  LDA FORSTACKP
1586	.$1241	STA TMP_ZP
1587	.$1243	LDA FORSTACKP+1
1588	.$1246	STA TMP_ZP+1
1589	.$1248	SEARCHFOR LDA TMP_ZP+1
1590	.$124a	STA TMP3_REG+1
1591	.$124d	LDA TMP_ZP
1592	.$124f	STA TMP3_REG
1593	.$1252	SEC
1594	.$1253	SBC #2
1595	.$1255	STA TMP_ZP
1596	.$1257	BCS NOPV1N1
1597	.$1259	DEC TMP_ZP+1
1598	.$125b	NOPV1N1  LDY #0
1599	.$125d	LDA (TMP_ZP),Y
1600	.$125f	BNE NOGOSUB
1601	.$1261	JMP NEXTWOFOR
1602	.$1264	NOGOSUB
1603	.$1264	INY
1604	.$1265	LDA TMP_ZP
1605	.$1267	SEC
1606	.$1268	SBC (TMP_ZP),Y
1607	.$126a	STA TMP_ZP
1608	.$126c	BCS NOPV1N2
1609	.$126e	DEC TMP_ZP+1
1610	.$1270	NOPV1N2  DEY
1611	.$1271	LDA A_REG
1612	.$1274	BEQ LOW0
1613	.$1276	CMPFOR  CMP (TMP_ZP),Y
1614	.$1278	BNE SEARCHFOR
1615	.$127a	LDA A_REG+1
1616	.$127d	INY
1617	.$127e	CMP (TMP_ZP),Y
1618	.$1280	BEQ FOUNDFOR
1619	.$1282	JMP SEARCHFOR
1620	.$1285	LOW0  LDX A_REG+1
1621	.$1288	BEQ FOUNDFOR
1622	.$128a	BNE CMPFOR
1623	.$128c	FOUNDFOR LDA TMP_ZP
1624	.$128e	STA TMP2_REG
1625	.$1291	LDA TMP_ZP+1
1626	.$1293	STA TMP2_REG+1
1627	.$1296	VARREAL
1628	.$1296	LDY #0
1629	.$1298	STY A_REG+1 
1630	.$129b	LDA (TMP_ZP),Y
1631	.$129d	TAX
1632	.$129e	INY
1633	.$129f	LDA (TMP_ZP),Y
1634	.$12a1	TAY
1635	.$12a2	TXA
1636	.$12a3	JSR REALFAC
1637	.$12a6	CALCNEXT LDA TMP_ZP
1638	.$12a8	CLC
1639	.$12a9	ADC #4
1640	.$12ab	STA TMP_ZP
1641	.$12ad	BCC NOPV2IN
1642	.$12af	INC TMP_ZP+1
1643	.$12b1	NOPV2IN  STA TMP_REG
1644	.$12b3	LDY TMP_ZP+1
1645	.$12b5	STY TMP_REG+1
1646	.$12b7	JSR FASTFADDMEM
1648	.$12ba	LDA TMP2_REG
1649	.$12bd	STA TMP_ZP
1650	.$12bf	LDA TMP2_REG+1
1651	.$12c2	STA TMP_ZP+1
1652	.$12c4	STOREREAL
1653	.$12c4	LDY #0
1654	.$12c6	LDA (TMP_ZP),Y
1655	.$12c8	TAX
1656	.$12c9	INY
1657	.$12ca	LDA (TMP_ZP),Y
1658	.$12cc	TAY
1659	.$12cd	JSR FACMEM 
1660	.$12d0	CMPFORXX LDA #5
1661	.$12d2	STA TMP3_ZP
1662	.$12d4	LDA TMP_REG
1663	.$12d6	CLC
1664	.$12d7	ADC #5
1665	.$12d9	STA TMP_REG
1666	.$12db	BCC NOPV3
1667	.$12dd	INC TMP_REG+1
1668	.$12df	NOPV3  LDY TMP_REG+1
1669	.$12e1	JSR CMPFAC  
1670	.$12e4	BEQ LOOPING
1671	.$12e6	PHA
1672	.$12e7	LDY #14
1673	.$12e9	LDA (TMP_ZP),Y
1674	.$12eb	BEQ STEPZERO
1675	.$12ed	ROL
1676	.$12ee	BCC STEPPOS
1677	.$12f0	STEPNEG  PLA
1678	.$12f1	ROL
1679	.$12f2	BCC LOOPING
1680	.$12f4	BCS EXITLOOP
1681	.$12f6	STEPPOS  PLA
1682	.$12f7	ROL
1683	.$12f8	BCC EXITLOOP
1684	.$12fa	LOOPING  LDA TMP3_REG
1685	.$12fd	STA FORSTACKP
1686	.$1300	LDA TMP3_REG+1
1687	.$1303	STA FORSTACKP+1
1688	.$1306	LDA TMP2_REG
1689	.$1309	CLC
1690	.$130a	ADC #2
1691	.$130c	STA TMP2_REG
1692	.$130f	BCC NOPV4IN
1693	.$1311	INC TMP2_REG+1
1694	.$1314	NOPV4IN  LDY #0
1695	.$1316	STY A_REG
1696	.$1319	STA TMP_ZP
1697	.$131b	LDA TMP2_REG+1
1698	.$131e	STA TMP_ZP+1
1699	.$1320	LDA (TMP_ZP),Y
1700	.$1322	STA JUMP_TARGET
1701	.$1324	INY
1702	.$1325	LDA (TMP_ZP),Y
1703	.$1327	STA JUMP_TARGET+1
1704	.$1329	RTS
1705	.$132a	STEPZERO PLA
1706	.$132b	JMP LOOPING
1707	.$132e	EXITLOOP LDA TMP2_REG
1708	.$1331	STA FORSTACKP
1709	.$1334	LDA TMP2_REG+1
1710	.$1337	STA FORSTACKP+1
1711	.$133a	LDA #1
1712	.$133c	STA A_REG
1713	.$133f	RTS
1716	.$1340	GETSTR  LDA #8
1717	.$1342	LDY #0
1718	.$1344	JSR COMPACTF
1719	.$1347	LDY #0
1720	.$1349	STY CMD_NUM  
1721	.$134c	JSR GETIN
1722	.$134f	CMP #0   
1723	.$1351	BNE SOMEKEY
1724	.$1353	NOKEY  LDA #<EMPTYSTR
1725	.$1355	STA A_REG
1726	.$1358	LDA #>EMPTYSTR
1727	.$135a	STA A_REG+1
1728	.$135d	RTS
1729	.$135e	SOMEKEY  TAX
1730	.$135f	LDA STRBUFP
1731	.$1362	STA TMP_ZP
1732	.$1364	STA A_REG
1733	.$1367	LDA STRBUFP+1
1734	.$136a	STA TMP_ZP+1
1735	.$136c	STA A_REG+1
1736	.$136f	LDA #1
1737	.$1371	LDY #0
1738	.$1373	STA (TMP_ZP),Y
1739	.$1375	TXA
1740	.$1376	LDY #1
1741	.$1378	STA (TMP_ZP),Y
1742	.$137a	LDA STRBUFP
1743	.$137d	CLC
1744	.$137e	ADC #2
1745	.$1380	STA STRBUFP
1746	.$1383	BCC GETSTR1
1747	.$1385	INC STRBUFP+1
1748	.$1388	GETSTR1  RTS
1751	.$1389	ZEROSET  LDA #0
1752	.$138b	STA X_REG
1753	.$138d	STA X_REG+1
1754	.$138f	STA X_REG+2
1755	.$1391	STA X_REG+3
1756	.$1393	STA X_REG+4
1757	.$1395	RTS
1760	.$1396	PUSHINT  LDX FPSTACKP
1761	.$1399	STX TMP2_ZP
1762	.$139b	LDX FPSTACKP+1
1763	.$139e	STX TMP2_ZP+1
1764	.$13a0	LDA TMP_ZP
1765	.$13a2	LDY #0
1766	.$13a4	STA (TMP2_ZP),Y
1767	.$13a6	LDA TMP_ZP+1
1768	.$13a8	INY
1769	.$13a9	STA (TMP2_ZP),Y
1770	.$13ab	LDA TMP2_ZP
1771	.$13ad	CLC
1772	.$13ae	ADC #2
1773	.$13b0	STA FPSTACKP
1774	.$13b3	LDA TMP2_ZP+1
1775	.$13b5	ADC #0
1776	.$13b7	STA FPSTACKP+1
1777	.$13ba	RTS
1780	.$13bb	POPINT2B LDA FPSTACKP
1781	.$13be	SEC
1782	.$13bf	SBC #2
1783	.$13c1	STA FPSTACKP
1784	.$13c4	LDA FPSTACKP+1
1785	.$13c7	SBC #0
1786	.$13c9	STA FPSTACKP+1
1787	.$13cc	LDX FPSTACKP
1788	.$13cf	STX TMP2_ZP
1789	.$13d1	LDX FPSTACKP+1
1790	.$13d4	STX TMP2_ZP+1
1791	.$13d6	LDY #0
1792	.$13d8	LDA (TMP2_ZP),Y
1793	.$13da	STA B_REG
1794	.$13dd	INY
1795	.$13de	LDA (TMP2_ZP),Y
1796	.$13e0	STA B_REG+1
1797	.$13e3	RTS
1800	.$13e4	REALFACPUSH STA TMP_ZP
1801	.$13e6	STY TMP_ZP+1
1802	.$13e8	LDX FPSTACKP
1803	.$13eb	LDY FPSTACKP+1
1804	.$13ee	STX TMP2_ZP
1805	.$13f0	STY TMP2_ZP+1
1806	.$13f2	LDY #0
1807	.$13f4	LDA (TMP_ZP),Y
1808	.$13f6	STA (TMP2_ZP),Y
1809	.$13f8	INY
1810	.$13f9	LDA (TMP_ZP),Y
1811	.$13fb	STA (TMP2_ZP),Y
1812	.$13fd	INY
1813	.$13fe	LDA (TMP_ZP),Y
1814	.$1400	STA (TMP2_ZP),Y
1815	.$1402	INY
1816	.$1403	LDA (TMP_ZP),Y
1817	.$1405	STA (TMP2_ZP),Y
1818	.$1407	INY
1819	.$1408	LDA (TMP_ZP),Y
1820	.$140a	STA (TMP2_ZP),Y
1821	.$140c	TXA    
1822	.$140d	CLC
1823	.$140e	ADC #5
1824	.$1410	STA FPSTACKP
1825	.$1413	BCC NOPVRFPXX
1826	.$1415	INC FPSTACKP+1
1827	.$1418	NOPVRFPXX RTS
1830	.$1419	POPREAL  LDA FPSTACKP
1831	.$141c	SEC
1832	.$141d	SBC #5
1833	.$141f	STA FPSTACKP
1834	.$1422	BCS NOPVPR
1835	.$1424	DEC FPSTACKP+1
1836	.$1427	NOPVPR  LDA FPSTACKP
1837	.$142a	LDY FPSTACKP+1
1838	.$142d	JMP REALFAC
1841	.$1430	INCTMPZP LDA TMP_ZP
1842	.$1432	CLC
1843	.$1433	ADC TMP3_ZP
1844	.$1435	STA TMP_ZP
1845	.$1437	BCC NOPV2
1846	.$1439	INC TMP_ZP+1
1847	.$143b	NOPV2  RTS
1850	.$143c	COPY2_XYA_XREG
1851	.$143c	STA TMP3_ZP
1852	.$143e	STY TMP3_ZP+1
1853	.$1440	COPY2_XY_XREG
1854	.$1440	LDX #<X_REG  
1855	.$1442	LDY #0
1856	.$1444	LDA (TMP3_ZP),Y
1857	.$1446	STA X_REG
1858	.$1448	INY
1859	.$1449	LDA (TMP3_ZP),Y
1860	.$144b	STA X_REG+1
1861	.$144d	INY
1862	.$144e	LDA (TMP3_ZP),Y
1863	.$1450	STA X_REG+2
1864	.$1452	INY
1865	.$1453	LDA (TMP3_ZP),Y
1866	.$1455	STA X_REG+3
1867	.$1457	INY
1868	.$1458	LDA (TMP3_ZP),Y
1869	.$145a	STA X_REG+4
1870	.$145c	RTS
1873	.$145d	COPY2_XYA_CREG
1874	.$145d	STA TMP3_ZP
1875	.$145f	STY TMP3_ZP+1
1876	.$1461	COPY2_XY_CREG
1877	.$1461	LDX #<C_REG  
1878	.$1463	LDY #0
1879	.$1465	LDA (TMP3_ZP),Y
1880	.$1467	STA C_REG
1881	.$146a	INY
1882	.$146b	LDA (TMP3_ZP),Y
1883	.$146d	STA C_REG+1
1884	.$1470	INY
1885	.$1471	LDA (TMP3_ZP),Y
1886	.$1473	STA C_REG+2
1887	.$1476	INY
1888	.$1477	LDA (TMP3_ZP),Y
1889	.$1479	STA C_REG+3
1890	.$147c	INY
1891	.$147d	LDA (TMP3_ZP),Y
1892	.$147f	STA C_REG+4
1893	.$1482	RTS
1896	.$1483	COPY2_XYA_YREG
1897	.$1483	STA TMP3_ZP
1898	.$1485	STY TMP3_ZP+1
1899	.$1487	COPY2_XY_YREG
1900	.$1487	LDX #<Y_REG  
1901	.$1489	LDY #0
1902	.$148b	LDA (TMP3_ZP),Y
1903	.$148d	STA Y_REG
1904	.$1490	INY
1905	.$1491	LDA (TMP3_ZP),Y
1906	.$1493	STA Y_REG+1
1907	.$1496	INY
1908	.$1497	LDA (TMP3_ZP),Y
1909	.$1499	STA Y_REG+2
1910	.$149c	INY
1911	.$149d	LDA (TMP3_ZP),Y
1912	.$149f	STA Y_REG+3
1913	.$14a2	INY
1914	.$14a3	LDA (TMP3_ZP),Y
1915	.$14a5	STA Y_REG+4
1916	.$14a8	RTS
1920	.$14a9	FACWORD
1921	.$14a9	LDA FACEXP   
1922	.$14ab	BNE DOFACWORD
1923	.$14ad	STA FACSGN   
1924	.$14af	DOFACWORD:
1925	.$14af	JMP XFACWORD
1929	.$14b2	ONETOFAC    LDX #129
1930	.$14b4	STX FAC
1931	.$14b6	DEX
1932	.$14b7	STX FAC+1
1933	.$14b9	LDX #0
1934	.$14bb	STX FAC+2
1935	.$14bd	STX FAC+3
1936	.$14bf	STX FAC+4
1937	.$14c1	STX FAC+5
1938	.$14c3	STX FAC+15
1939	.$14c5	RTS
1942	.$14c6	FASTAND  LDA ARGEXP   
1943	.$14c8	BNE CHECKFAC
1944	.$14ca	STA FACSGN   
1945	.$14cc	STA FACLO
1946	.$14ce	STA FACMO
1947	.$14d0	STA FACMOH
1948	.$14d2	STA FACHO
1949	.$14d4	STA FACEXP
1950	.$14d6	RTS
1951	.$14d7	CHECKFAC LDA FACEXP   
1952	.$14d9	BNE FACNOTNULL
1953	.$14db	STA FACSGN   
1954	.$14dd	RTS    
1955	.$14de	FACNOTNULL CMP #$81
1956	.$14e0	BNE NORMALAND
1957	.$14e2	LDA FACHO
1958	.$14e4	CMP #$80
1959	.$14e6	BNE NORMALAND
1960	.$14e8	LDA FACMOH
1961	.$14ea	BNE NORMALAND
1962	.$14ec	LDA FACMO
1963	.$14ee	BNE NORMALAND
1964	.$14f0	LDA FACLO
1965	.$14f2	BNE NORMALAND
1966	.$14f4	LDA FACSGN
1967	.$14f6	ROL
1968	.$14f7	BCC NORMALAND
1969	.$14f9	LDA ARGEXP   
1970	.$14fb	CMP #$81
1971	.$14fd	BNE NORMALAND
1972	.$14ff	LDA ARGHO
1973	.$1501	CMP #$80
1974	.$1503	BNE NORMALAND
1975	.$1505	LDA ARGMOH
1976	.$1507	BNE NORMALAND
1977	.$1509	LDA ARGMO
1978	.$150b	BNE NORMALAND
1979	.$150d	LDA ARGLO
1980	.$150f	BNE NORMALAND
1981	.$1511	LDA ARGSGN
1982	.$1513	ROL
1983	.$1514	BCC NORMALAND
1984	.$1516	RTS    
1985	.$1517	NORMALAND JMP ARGAND
1988	.$151a	CLRCHNEW
1989	.$151a	LDA CHLOCKFLAG
1990	.$151d	BNE SKIPCLRCH
1991	.$151f	JMP CLRCH
1992	.$1522	SKIPCLRCH
1993	.$1522	RTS
1996	.$1523	NEXTWOFOR
2000	.$1523	LDX #$0A
2001	.$1525	JMP ERRALL
2004	.$1528	OUTOFMEMORY
2008	.$1528	LDX #$10
2009	.$152a	JMP ERRALL
2012	.$152d	STRINGTOOLONG
2016	.$152d	LDX #$17
2017	.$152f	JMP ERRALL
2020	.$1532	ILLEGALQUANTITY
2024	.$1532	JMP ERRIQ
2027	.$1535	FACXREG  LDA FACLO
2028	.$1537	STA X_REG+4
2029	.$1539	LDA FACMO
2030	.$153b	STA X_REG+3
2031	.$153d	LDA FACMOH
2032	.$153f	STA X_REG+2
2033	.$1541	LDA FACSGN
2034	.$1543	ORA #$7F
2035	.$1545	AND FACHO
2036	.$1547	STA X_REG+1
2037	.$1549	LDA FACEXP
2038	.$154b	STA X_REG
2039	.$154d	LDA #0   
2040	.$154f	STA FACOV
2041	.$1551	RTS
2044	.$1552	XREGFAC  LDA X_REG+4
2045	.$1554	STA FACLO
2046	.$1556	LDA X_REG+3
2047	.$1558	STA FACMO
2048	.$155a	LDA X_REG+2
2049	.$155c	STA FACMOH
2050	.$155e	LDA X_REG+1
2051	.$1560	STA FACSGN
2052	.$1562	ORA #$80
2053	.$1564	STA FACHO
2054	.$1566	LDA X_REG
2055	.$1568	STA FACEXP
2056	.$156a	LDA #0
2057	.$156c	STA FACOV
2058	.$156e	RTS
2061	.$156f	YREGFAC  LDA Y_REG+4
2062	.$1572	STA FACLO
2063	.$1574	LDA Y_REG+3
2064	.$1577	STA FACMO
2065	.$1579	LDA Y_REG+2
2066	.$157c	STA FACMOH
2067	.$157e	LDA Y_REG+1
2068	.$1581	STA FACSGN
2069	.$1583	ORA #$80
2070	.$1585	STA FACHO
2071	.$1587	LDA Y_REG
2072	.$158a	STA FACEXP
2073	.$158c	LDA #0
2074	.$158e	STA FACOV
2075	.$1590	RTS
2189	.$1591	FASTFSUBMEM
2190	.$1591	JSR MEMARG
2191	.$1594	FASTFSUBARG
2192	.$1594	LDA FACSGN
2193	.$1596	EOR #$FF
2194	.$1598	STA FACSGN
2195	.$159a	EOR ARGSGN
2196	.$159c	STA ARISGN
2197	.$159e	LDA FACEXP
2198	.$15a0	JMP FASTFADDARG
2201	.$15a3	FASTFADDMEM
2202	.$15a3	JSR MEMARG
2203	.$15a6	FASTFADDARG
2204	.$15a6	BNE FADDRET2     
2205	.$15a8	JMP ARGFAC
2206	.$15ab	FADDRET2 LDA ARGEXP
2207	.$15ad	BNE FADDRET1     
2208	.$15af	RTS
2209	.$15b0	FADDRET1 SEC
2210	.$15b1	SBC FACEXP
2211	.$15b3	BEQ FFADD_EXPEQ     
2212	.$15b5	BCC FFADD_SHFARG1   
2216	.$15b7	LDY ARGEXP
2217	.$15b9	STY FACEXP
2218	.$15bb	LDY ARGSGN
2219	.$15bd	STY FACSGN
2220	.$15bf	LDX #0
2221	.$15c1	STX OLDOV        
2222	.$15c3	LDX #FAC         
2224	.$15c5	SEC
2225	.$15c6	SBC #$08
2226	.$15c8	BMI FFADD_SHFFAC2
2228	.$15ca	FFADD_SHFFAC1
2229	.$15ca	LDY FACLO        
2230	.$15cc	STY FACOV
2231	.$15ce	LDY FACMO        
2232	.$15d0	STY FACMO+1
2233	.$15d2	LDY FACMOH       
2234	.$15d4	STY FACMOH+1
2235	.$15d6	LDY FACHO        
2236	.$15d8	STY FACHO+1
2237	.$15da	LDY #0
2238	.$15dc	STY FACHO        
2239	.$15de	SBC #$08         
2240	.$15e0	BPL FFADD_SHFFAC1   
2241	.$15e2	FFADD_SHFFAC2
2242	.$15e2	ADC #$08         
2243	.$15e4	BEQ FFADD_SHFFAC4   
2244	.$15e6	TAY
2245	.$15e7	LDA FACOV
2246	.$15e9	FFADD_SHFFAC3
2247	.$15e9	LSR FACHO        
2248	.$15eb	ROR FACMOH       
2249	.$15ed	ROR FACMO        
2250	.$15ef	ROR FACLO        
2251	.$15f1	ROR              
2252	.$15f2	DEY
2253	.$15f3	BNE FFADD_SHFFAC3
2254	.$15f5	JMP FFADD_MANADD2   
2255	.$15f8	FFADD_SHFFAC4
2256	.$15f8	LDA FACOV        
2257	.$15fa	JMP FFADD_MANADD2
2258	.$15fd	FFADD_EXPEQ
2259	.$15fd	LDX FACOV
2260	.$15ff	STX OLDOV
2263	.$1601	JMP FFADD_MANADD1
2264	.$1604	FFADD_SHFARG2
2265	.$1604	LDA FACOV        
2266	.$1606	JMP FFADD_MANADD1
2267	.$1609	FFADD_SHFARG1
2268	.$1609	LDX FACOV
2269	.$160b	STX OLDOV        
2270	.$160d	LDX #$00         
2273	.$160f	ADC #$08
2274	.$1611	BPL FFADD_SHFARG6   
2275	.$1613	FFADD_SHFARG3
2276	.$1613	LDX ARGLO        
2277	.$1615	LDY ARGMO        
2278	.$1617	STY ARGMO+1
2279	.$1619	LDY ARGMOH       
2280	.$161b	STY ARGMOH+1
2281	.$161d	LDY ARGHO        
2282	.$161f	STY ARGHO+1
2283	.$1621	LDY #0
2284	.$1623	STY ARGHO        
2285	.$1625	FFADD_SHFARG4
2286	.$1625	ADC #$08
2287	.$1627	BMI FFADD_SHFARG3
2288	.$1629	BEQ FFADD_SHFARG3
2289	.$162b	FFADD_SHFARG6
2290	.$162b	SBC #$08
2291	.$162d	BEQ FFADD_SHFARG2   
2292	.$162f	TAY
2293	.$1630	TXA              
2294	.$1631	FFADD_SHFARG5
2295	.$1631	LSR ARGHO
2296	.$1633	ROR ARGMOH
2297	.$1635	ROR ARGMO
2298	.$1637	ROR ARGLO
2299	.$1639	ROR           
2300	.$163a	INY
2301	.$163b	BNE FFADD_SHFARG5
2302	.$163d	FFADD_MANADD1
2303	.$163d	LDX #ARGEXP      
2304	.$163f	FFADD_MANADD2
2305	.$163f	BIT ARISGN
2306	.$1641	BMI FFADD_MANSUB1   
2307	.$1643	CLC
2308	.$1644	ADC OLDOV
2309	.$1646	STA FACOV
2310	.$1648	LDA FACLO
2311	.$164a	ADC ARGLO
2312	.$164c	STA FACLO
2313	.$164e	LDA FACMO
2314	.$1650	ADC ARGMO
2315	.$1652	STA FACMO
2316	.$1654	LDA FACMOH
2317	.$1656	ADC ARGMOH
2318	.$1658	STA FACMOH
2319	.$165a	LDA FACHO
2320	.$165c	ADC ARGHO
2321	.$165e	STA FACHO
2322	.$1660	BCC FFADD_RNDRTS
2323	.$1662	INC FACEXP
2324	.$1664	BEQ FFADD_OVERR
2326	.$1666	ROR FACHO
2327	.$1668	ROR FACMOH
2328	.$166a	ROR FACMO
2329	.$166c	ROR FACLO
2330	.$166e	ROR FACOV
2331	.$1670	FFADD_RNDRTS
2332	.$1670	RTS
2333	.$1671	FFADD_OVERR
2334	.$1671	JMP ILLEGALQUANTITY
2335	.$1674	FFADD_MANSUB1
2336	.$1674	LDY #FACEXP
2337	.$1676	CPX #ARGEXP
2338	.$1678	BEQ FFADD_MANSUB2
2339	.$167a	LDY #ARGEXP
2340	.$167c	FFADD_MANSUB2
2341	.$167c	SEC              
2342	.$167d	EOR #$FF
2343	.$167f	ADC OLDOV
2344	.$1681	STA FACOV
2345	.$1683	LDA 4,Y
2346	.$1686	SBC 4,X
2347	.$1688	STA FACLO
2348	.$168a	LDA 3,Y
2349	.$168d	SBC 3,X
2350	.$168f	STA FACMO
2351	.$1691	LDA 2,Y
2352	.$1694	SBC 2,X
2353	.$1696	STA FACMOH
2354	.$1698	LDA 1,Y
2355	.$169b	SBC 1,X
2356	.$169d	STA FACHO
2357	.$169f	BCS FCNORMAL
2358	.$16a1	LDA FACSGN
2359	.$16a3	EOR #$FF
2360	.$16a5	STA FACSGN
2361	.$16a7	LDA FACHO
2362	.$16a9	EOR #$FF
2363	.$16ab	STA FACHO
2364	.$16ad	LDA FACMOH
2365	.$16af	EOR #$FF
2366	.$16b1	STA FACMOH
2367	.$16b3	LDA FACMO
2368	.$16b5	EOR #$FF
2369	.$16b7	STA FACMO
2370	.$16b9	LDA FACLO
2371	.$16bb	EOR #$FF
2372	.$16bd	STA FACLO
2373	.$16bf	LDA FACOV
2374	.$16c1	EOR #$FF
2375	.$16c3	CLC
2376	.$16c4	ADC #1
2377	.$16c6	STA FACOV
2378	.$16c8	BNE FCNORMAL
2379	.$16ca	INC FACLO
2380	.$16cc	BNE FCNORMAL
2381	.$16ce	INC FACMO
2382	.$16d0	BNE FCNORMAL
2383	.$16d2	INC FACMOH
2384	.$16d4	BNE FCNORMAL
2385	.$16d6	INC FACHO
2386	.$16d8	FCNORMAL   BIT FACHO
2387	.$16da	BMI FFADD_RET       
2388	.$16dc	LDA #0           
2389	.$16de	CLC
2390	.$16df	FFADD_NORM3
2391	.$16df	LDX FACHO
2392	.$16e1	BNE FFADD_NORM1
2393	.$16e3	LDX FACHO+1
2394	.$16e5	STX FACHO
2395	.$16e7	LDX FACMOH+1
2396	.$16e9	STX FACMOH
2397	.$16eb	LDX FACMO+1
2398	.$16ed	STX FACMO
2399	.$16ef	LDX FACOV
2400	.$16f1	STX FACLO
2401	.$16f3	LDX #0
2402	.$16f5	STX FACOV
2403	.$16f7	ADC #$08
2404	.$16f9	CMP #$20
2405	.$16fb	BNE FFADD_NORM3
2406	.$16fd	JMP FFADD_ZEROFAC
2407	.$1700	FFADD_NORM2
2408	.$1700	CLC
2409	.$1701	ADC #1
2410	.$1703	ASL FACOV
2411	.$1705	ROL FACLO
2412	.$1707	ROL FACMO
2413	.$1709	ROL FACMOH
2414	.$170b	ROL FACHO
2415	.$170d	FFADD_NORM1
2416	.$170d	BPL FFADD_NORM2     
2417	.$170f	SEC
2418	.$1710	SBC FACEXP
2419	.$1712	BCS FFADD_ZEROFAC
2420	.$1714	EOR #$FF
2421	.$1716	CLC
2422	.$1717	ADC #1
2423	.$1719	STA FACEXP
2424	.$171b	FFADD_RET   RTS
2425	.$171c	FFADD_ZEROFAC
2426	.$171c	LDX #0
2427	.$171e	STX FACEXP
2428	.$1720	STX FACSGN
2429	.$1722	RTS
2432	.$1723	INITVARS
2433	.$1723	JSR INITSTRVARS
2434	.$1726	LDA #0
2435	.$1728	LDY #4
2436	.$172a	REALINITLOOP0:
2437	.$172a	STA VAR_I,Y
2438	.$172d	STA VAR_L,Y
2439	.$1730	STA VAR_X,Y
2440	.$1733	DEY
2441	.$1734	BMI REALLOOPEXIT0
2442	.$1736	JMP REALINITLOOP0
2443	.$1739	REALLOOPEXIT0:
2444	.$1739	RTS
2448	.$173a	CONSTANTS
2450	.$173a	CONST_0 .BYTE 29
2451	.$173b	.STRG " Here is a little scrolly dem"
2453	.$1758	CONST_1 .BYTE 26
2454	.$1759	.STRG "o using a 'go to'-less tec"
2456	.$1773	CONST_2 .BYTE 26
2457	.$1774	.STRG "hnique. Hellos to Ruby Mae"
2459	.$178e	CONST_3 .BYTE 26
2460	.$178f	.STRG ". Press a key to exit....."
2462	.$17a9	CONST_4 .BYTE 10
2463	.$17aa	.STRG "{clr/home}"
2466	.$17ab	CONST_5 .REAL 0.0
2469	.$17b0	CONST_6 .REAL 1.0
2472	.$17b5	CONST_7R .REAL 7.0
2484	.$17ba	CONST_11 .REAL 53273.0
2489	.$17bf	CONST_13 .BYTE 17
2490	.$17c0	.STRG "{control+n}{home}"
2502	.$17c2	DATAS
2503	.$17c2	.BYTE $FF
2505	.$17c3	CONSTANTS_END
2508	.$17c3	VARIABLES
2510	.$17c3	VAR_I .REAL 0.0
2512	.$17c8	VAR_L .REAL 0.0
2514	.$17cd	VAR_X .REAL 0.0
2515	.$17d2	STRINGVARS_START
2517	.$17d2	VAR_A$ .WORD EMPTYSTR
2519	.$17d4	VAR_K$ .WORD EMPTYSTR
2521	.$17d6	VAR_TI$ .WORD EMPTYSTR
2522	.$17d8	STRINGVARS_END
2523	.$17d8	STRINGARRAYS_START
2524	.$17d8	STRINGARRAYS_END
2525	.$17d8	VARIABLES_END
2527	.$17d8	Y_REG .REAL 0.0
2528	.$17dd	C_REG .REAL 0.0
2529	.$17e2	D_REG .REAL 0.0
2530	.$17e7	E_REG .REAL 0.0
2531	.$17ec	F_REG .REAL 0.0
2532	.$17f1	A_REG .WORD 0
2533	.$17f3	B_REG .WORD 0
2534	.$17f5	CMD_NUM .BYTE 0
2535	.$17f6	CHANNEL .BYTE 0
2536	.$17f7	SP_SAVE .BYTE 0
2537	.$17f8	TMP2_REG .WORD 0
2538	.$17fa	TMP3_REG .WORD 0
2539	.$17fc	TMP4_REG .WORD 0
2540	.$17fe	AS_TMP .WORD 0
2541	.$1800	BPOINTER_TMP .WORD 0
2542	.$1802	BASICTEXTP .BYTE 0
2543	.$1803	STORE1 .WORD 0
2544	.$1805	STORE2 .WORD 0
2545	.$1807	STORE3 .WORD 0
2546	.$1809	STORE4 .WORD 0
2547	.$180b	GCSTART .WORD 0
2548	.$180d	GCLEN .WORD 0
2549	.$180f	GCWORK .WORD 0
2550	.$1811	INPUTLENGTH .BYTE 0
2551	.$1812	TMP_FREG .REAL 0
2552	.$1817	TMP2_FREG .REAL 0
2553	.$181c	TMP_FLAG .BYTE 0
2554	.$181d	INT_FLAG .BYTE 0
2555	.$181e	REAL_CONST_ONE .REAL 1.0
2556	.$1823	REAL_CONST_ZERO .REAL 0.0
2557	.$1828	REAL_CONST_MINUS_ONE .REAL -1.0
2558	.$182d	CHLOCKFLAG .BYTE 0
2559	.$182e	EMPTYSTR .BYTE 0
2560	.$182f	FPSTACKP .WORD FPSTACK
2561	.$1831	FORSTACKP .WORD FORSTACK
2562	.$1833	DATASP .WORD DATAS
2563	.$1835	LASTVAR .WORD 0
2564	.$1837	LASTVARP .WORD 0
2565	.$1839	HIGHP .WORD STRBUF
2566	.$183b	STRBUFP .WORD STRBUF
2567	.$183d	ENDSTRBUF .WORD 0
2568	.$183f	INPUTQUEUEP .BYTE 0
2569	.$1840	PROGRAMEND
2570	.$1840	INPUTQUEUE .ARRAY $0F
2571	.$184f	FPSTACK .ARRAY 100
2572	.$18b3	FORSTACK .ARRAY 340
2573	.$1a07	STRBUF .BYTE 0
