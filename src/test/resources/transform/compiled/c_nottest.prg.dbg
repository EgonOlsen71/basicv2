117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
128	.$81f	LDA #0
129	.$821	STA VAR_I
130	.$824	STA VAR_I+1
131	.$827	STA VAR_I+2
132	.$82a	STA VAR_I+3
133	.$82d	STA VAR_I+4
135	.$830	LDA #<CONST_1R
136	.$832	LDY #>CONST_1R
137	.$834	JSR REALFACPUSH
139	.$837	LDA #<CONST_2R
140	.$839	LDY #>CONST_2R
141	.$83b	JSR REALFACPUSH
143	.$83e	LDA #<VAR_I
144	.$840	LDY #>VAR_I
145	.$842	STA A_REG
146	.$845	STY A_REG+1
147	.$848	LDA #<FORLOOP0
148	.$84a	STA JUMP_TARGET
149	.$84c	LDA #>FORLOOP0
150	.$84e	STA JUMP_TARGET+1
151	.$850	JSR INITFOR
152	.$853	FORLOOP0:
154	.$853	LINE_20:
156	.$853	LDA #<CONST_3R
157	.$855	LDY #>CONST_3R
158	.$857	JSR REALFAC
159	.$85a	LDA #<VAR_I
160	.$85c	LDY #>VAR_I
161	.$85e	JSR CMPFAC
163	.$861	BEQ LT_LT_EQ0
164	.$863	ROL
165	.$864	BCC LT_LT0
166	.$866	LT_LT_EQ0:
167	.$866	LDA #<REAL_CONST_ZERO
168	.$868	LDY #>REAL_CONST_ZERO
169	.$86a	JMP LT_SKIP0
170	.$86d	LT_LT0:
171	.$86d	LDA #<REAL_CONST_MINUS_ONE
172	.$86f	LDY #>REAL_CONST_MINUS_ONE
173	.$871	LT_SKIP0:
175	.$871	JSR REALFACPUSH
177	.$874	JSR ONETOFAC
179	.$877	LDA #<VAR_I
180	.$879	LDY #>VAR_I
181	.$87b	JSR CMPFAC
183	.$87e	ROL
184	.$87f	BCS GT_GT1
185	.$881	LDA #<REAL_CONST_ZERO
186	.$883	LDY #>REAL_CONST_ZERO
187	.$885	JMP GT_SKIP1
188	.$888	GT_GT1:
189	.$888	LDA #<REAL_CONST_MINUS_ONE
190	.$88a	LDY #>REAL_CONST_MINUS_ONE
191	.$88c	GT_SKIP1:
193	.$88c	JSR REALFAC
194	.$88f	JSR FACXREG
196	.$892	JSR POPREAL2X
198	.$895	JSR FASTOR
204	.$898	JSR FACNOT
205	.$89b	JSR FACXREG
207	.$89e	LDA X_REG
208	.$8a0	COMP_SKP0:
209	.$8a0	BEQ LINE_SKIP1
212	.$8a2	LINE_NSKIP1:
214	.$8a2	LDA #<CONST_4
215	.$8a4	LDY #>CONST_4
216	.$8a6	JSR STROUTBRKWL
220	.$8a9	LINE_SKIP1:
223	.$8a9	LINE_30:
225	.$8a9	LDA #0
226	.$8ab	STA A_REG
227	.$8ae	STA A_REG+1
228	.$8b1	JSR NEXT
230	.$8b4	LDA A_REG
231	.$8b7	BNE RBEQ_0
232	.$8b9	JMP (JUMP_TARGET)
234	.$8bc	RBEQ_0:
235	.$8bc	JSR END
236	.$8bf	RTS
239	.$8c0	END   LDX SP_SAVE
240	.$8c3	TXS
247	.$8c4	RTS
250	.$8c5	START  LDA ENDSTRBUF+1
251	.$8c8	BNE ENDGIVEN
252	.$8ca	LDA BASICEND
253	.$8cc	STA ENDSTRBUF
254	.$8cf	LDA BASICEND+1
255	.$8d1	STA ENDSTRBUF+1
256	.$8d4	ENDGIVEN LDA #<FPSTACK
257	.$8d6	LDY #>FPSTACK
258	.$8d8	STA FPSTACKP
259	.$8db	STY FPSTACKP+1
260	.$8de	LDA #<FORSTACK
261	.$8e0	LDY #>FORSTACK
262	.$8e2	STA FORSTACKP
263	.$8e5	STY FORSTACKP+1
264	.$8e8	LDA #<STRBUF
265	.$8ea	LDY #>STRBUF
266	.$8ec	STA STRBUFP
267	.$8ef	STY STRBUFP+1
268	.$8f2	STA HIGHP
269	.$8f5	STY HIGHP+1
270	.$8f8	LDA #0
271	.$8fa	STA CHLOCKFLAG
272	.$8fd	STA LASTVAR
273	.$900	STA LASTVAR+1
274	.$903	JSR INITVARS
275	.$906	LDA #0
276	.$908	STA CMD_NUM
277	.$90b	STA CHANNEL
278	.$90e	TAY
279	.$90f	TAX
283	.$910	STA KEYNDX
289	.$912	JSR RESTORE
290	.$915	CLC
294	.$916	RTS
297	.$917	INITNARRAY
298	.$917	STA TMP_ZP
299	.$919	STY TMP_ZP+1
300	.$91b	LDY #0
301	.$91d	TYA
302	.$91e	NINITLOOP STA (TMP_ZP),Y
303	.$920	INC TMP_ZP
304	.$922	BNE NLOOPNOV
305	.$924	INC TMP_ZP+1
306	.$926	NLOOPNOV LDX TMP2_ZP
307	.$928	BNE NLOOPNOV2
308	.$92a	DEC TMP2_ZP+1
309	.$92c	NLOOPNOV2 DEC TMP2_ZP
310	.$92e	BNE NINITLOOP
311	.$930	LDX TMP2_ZP+1
312	.$932	BNE NINITLOOP
313	.$934	RTS
316	.$935	INITSTRARRAY
317	.$935	STA TMP_ZP
318	.$937	STY TMP_ZP+1
319	.$939	SINITLOOP LDY #0
320	.$93b	LDA #<EMPTYSTR
321	.$93d	STA (TMP_ZP),Y
322	.$93f	LDA #>EMPTYSTR
323	.$941	INY
324	.$942	STA (TMP_ZP),Y
325	.$944	CLC
326	.$945	LDA TMP_ZP
327	.$947	ADC #2
328	.$949	STA TMP_ZP
329	.$94b	BCC SLOOPNOV1
330	.$94d	INC TMP_ZP+1
331	.$94f	SLOOPNOV1 SEC
332	.$950	LDA TMP2_ZP
333	.$952	SBC #2
334	.$954	STA TMP2_ZP
335	.$956	BCS SLOOPNOV2
336	.$958	DEC TMP2_ZP+1
337	.$95a	SLOOPNOV2 LDA TMP2_ZP
338	.$95c	BNE SINITLOOP
339	.$95e	LDA TMP2_ZP+1
340	.$960	BNE SINITLOOP
341	.$962	RTS
344	.$963	INITSPARAMS STA TMP3_ZP
345	.$965	STY TMP3_ZP+1
346	.$967	SEC
347	.$968	SBC #2
348	.$96a	STA TMP_ZP
349	.$96c	TYA
350	.$96d	SBC #0
351	.$96f	STA TMP_ZP+1
352	.$971	LDY #0
353	.$973	LDA (TMP_ZP),Y
354	.$975	STA TMP2_ZP
355	.$977	INY
356	.$978	LDA (TMP_ZP),Y
357	.$97a	STA TMP2_ZP+1
358	.$97c	LDA TMP3_ZP
359	.$97e	LDY TMP3_ZP+1
360	.$980	RTS
363	.$981	INITSTRVARS LDA #<STRINGVARS_START  
364	.$983	LDY #>STRINGVARS_START
365	.$985	CMP #<STRINGVARS_END
366	.$987	BNE INITIT1
367	.$989	CPY #>STRINGVARS_END
368	.$98b	BNE INITIT1
369	.$98d	JMP INITSA2     
370	.$990	INITIT1  STA TMP_ZP
371	.$992	STY TMP_ZP+1
372	.$994	LDY #0
373	.$996	INITSTRLOOP LDA #<EMPTYSTR
374	.$998	STA (TMP_ZP),Y
375	.$99a	INY
376	.$99b	LDA #>EMPTYSTR
377	.$99d	STA (TMP_ZP),Y
378	.$99f	DEY
379	.$9a0	LDA TMP_ZP
380	.$9a2	CLC
381	.$9a3	ADC #2
382	.$9a5	STA TMP_ZP
383	.$9a7	LDA TMP_ZP+1
384	.$9a9	ADC #0
385	.$9ab	STA TMP_ZP+1
386	.$9ad	CMP #>STRINGVARS_END
387	.$9af	BNE INITSTRLOOP
388	.$9b1	LDA TMP_ZP
389	.$9b3	CMP #<STRINGVARS_END
390	.$9b5	BNE INITSTRLOOP
391	.$9b7	INITSA2  LDA #<STRINGARRAYS_START 
392	.$9b9	LDY #>STRINGARRAYS_START
393	.$9bb	CMP #<STRINGARRAYS_END
394	.$9bd	BNE ARRAYLOOP
395	.$9bf	CPY #>STRINGARRAYS_END
396	.$9c1	BNE ARRAYLOOP
397	.$9c3	RTS       
398	.$9c4	ARRAYLOOP CLC
399	.$9c5	ADC #3
400	.$9c7	BCC ARRAYSKIP1
401	.$9c9	INY
402	.$9ca	ARRAYSKIP1 CPY #>STRINGARRAYS_END
403	.$9cc	BEQ ARRAYSC
404	.$9ce	BCC ARRAYSKIP2
405	.$9d0	JMP ARRAYQUIT
406	.$9d3	ARRAYSC  CMP #<STRINGARRAYS_END
407	.$9d5	BCS ARRAYQUIT
408	.$9d7	ARRAYSKIP2 STA TMP_REG
409	.$9d9	STY TMP_REG+1
410	.$9db	JSR INITSPARAMS
411	.$9de	LDA TMP_REG
412	.$9e0	LDY TMP_REG+1
413	.$9e2	JSR INITSTRARRAY
414	.$9e5	LDA TMP_ZP
415	.$9e7	LDY TMP_ZP+1
416	.$9e9	JMP ARRAYLOOP
417	.$9ec	ARRAYQUIT RTS
420	.$9ed	RESTORE  LDA #<DATAS
421	.$9ef	LDY #>DATAS
422	.$9f1	STA DATASP
423	.$9f4	STY DATASP+1
424	.$9f7	RTS
427	.$9f8	REROUTE  LDA CMD_NUM  
428	.$9fb	BEQ REROUTECMD
429	.$9fd	TAX
430	.$9fe	STA CHANNEL
431	.$a01	JMP CHKOUT
432	.$a04	REROUTECMD RTS
435	.$a05	RESETROUTE LDA CMD_NUM  
436	.$a08	BEQ RESETROUTECMD
437	.$a0a	JMP CLRCHNEW
438	.$a0d	RESETROUTECMD
439	.$a0d	RTS
442	.$a0e	STROUTBRKWL STA A_REG
443	.$a11	STY A_REG+1
444	.$a14	STROUTBRK JSR REROUTE
445	.$a17	LDA A_REG
446	.$a1a	STA INDEX1
447	.$a1c	LDA A_REG+1
448	.$a1f	STA INDEX1+1
449	.$a21	LDY #0
450	.$a23	LDA (INDEX1),Y
451	.$a25	TAX
452	.$a26	INC INDEX1
453	.$a28	BNE PRINTSTR2
454	.$a2a	INC INDEX1+1
455	.$a2c	PRINTSTR2 JSR PRINTSTRS
456	.$a2f	LDA HIGHP   
457	.$a32	STA STRBUFP
458	.$a35	LDA HIGHP+1
459	.$a38	STA STRBUFP+1
460	.$a3b	LDA #$0D
461	.$a3d	JSR CHROUT
462	.$a40	JMP RESETROUTE  
465	.$a43	ADJUSTSTACK LDA FORSTACKP 
466	.$a46	STA TMP_ZP
467	.$a48	LDA FORSTACKP+1
468	.$a4b	STA TMP_ZP+1
469	.$a4d	ADSEARCHFOR LDA TMP_ZP
470	.$a4f	CMP #<FORSTACK
471	.$a51	BNE ADJUST2
472	.$a53	LDA TMP_ZP+1
473	.$a55	CMP #>FORSTACK
474	.$a57	BNE ADJUST2
475	.$a59	RTS    
476	.$a5a	ADJUST2  LDA TMP_ZP
477	.$a5c	SEC
478	.$a5d	SBC #2
479	.$a5f	STA TMP_ZP
480	.$a61	BCS ADNOPV1N1
481	.$a63	DEC TMP_ZP+1
482	.$a65	ADNOPV1N1 LDY #0
483	.$a67	LDA (TMP_ZP),Y
484	.$a69	BNE ADNOGOSUB
485	.$a6b	RTS    
486	.$a6c	ADNOGOSUB
487	.$a6c	INY
488	.$a6d	LDA TMP_ZP
489	.$a6f	SEC
490	.$a70	SBC (TMP_ZP),Y
491	.$a72	STA TMP_ZP
492	.$a74	BCS ADNOPV1N2
493	.$a76	DEC TMP_ZP+1
494	.$a78	ADNOPV1N2 DEY
495	.$a79	LDA A_REG
496	.$a7c	ADCMPFOR CMP (TMP_ZP),Y
497	.$a7e	BNE ADSEARCHFOR
498	.$a80	LDA A_REG+1
499	.$a83	INY
500	.$a84	CMP (TMP_ZP),Y
501	.$a86	BEQ ADFOUNDFOR
502	.$a88	JMP ADSEARCHFOR
503	.$a8b	ADLOW0  LDX A_REG+1
504	.$a8e	BEQ ADFOUNDFOR
505	.$a90	BNE ADCMPFOR
506	.$a92	ADFOUNDFOR LDA TMP_ZP  
507	.$a94	STA FORSTACKP
508	.$a97	LDA TMP_ZP+1
509	.$a99	STA FORSTACKP+1
510	.$a9c	RTS
513	.$a9d	INITFOR  JSR ADJUSTSTACK
514	.$aa0	LDA FORSTACKP
515	.$aa3	STA TMP_ZP
516	.$aa5	LDA FORSTACKP+1
517	.$aa8	STA TMP_ZP+1
518	.$aaa	LDY #0
519	.$aac	LDA A_REG
520	.$aaf	STA (TMP_ZP),Y
521	.$ab1	INY
522	.$ab2	LDA A_REG+1
523	.$ab5	STA (TMP_ZP),Y
524	.$ab7	INY
525	.$ab8	LDA JUMP_TARGET
526	.$aba	STA (TMP_ZP),Y
527	.$abc	INY
528	.$abd	LDA JUMP_TARGET+1
529	.$abf	STA (TMP_ZP),Y
530	.$ac1	INY
531	.$ac2	STY TMP3_ZP
532	.$ac4	JSR INCTMPZP
533	.$ac7	JSR POPREAL
534	.$aca	LDX TMP_ZP
535	.$acc	LDY TMP_ZP+1
537	.$ace	JSR FACMEM
538	.$ad1	JSR SGNFAC
539	.$ad4	STA TMP_FLAG
540	.$ad7	LDY #5
541	.$ad9	STY TMP3_ZP
542	.$adb	JSR INCTMPZP
543	.$ade	JSR POPREAL
544	.$ae1	LDX TMP_ZP
545	.$ae3	LDY TMP_ZP+1
547	.$ae5	JSR FACMEM
548	.$ae8	LDY #5
549	.$aea	STY TMP3_ZP
550	.$aec	JSR INCTMPZP
551	.$aef	LDY #0
552	.$af1	LDA TMP_FLAG
553	.$af4	STA (TMP_ZP),Y
554	.$af6	INY
555	.$af7	LDA #1
556	.$af9	STA (TMP_ZP),Y
557	.$afb	INY
558	.$afc	LDA #15
559	.$afe	STA (TMP_ZP),Y
560	.$b00	LDY #3
561	.$b02	STY TMP3_ZP
562	.$b04	JSR INCTMPZP
563	.$b07	LDA TMP_ZP
564	.$b09	STA FORSTACKP
565	.$b0c	LDA TMP_ZP+1
566	.$b0e	STA FORSTACKP+1
567	.$b11	RTS
570	.$b12	NEXT  LDA FORSTACKP
571	.$b15	STA TMP_ZP
572	.$b17	LDA FORSTACKP+1
573	.$b1a	STA TMP_ZP+1
574	.$b1c	SEARCHFOR LDA TMP_ZP+1
575	.$b1e	STA TMP3_REG+1
576	.$b21	LDA TMP_ZP
577	.$b23	STA TMP3_REG
578	.$b26	SEC
579	.$b27	SBC #2
580	.$b29	STA TMP_ZP
581	.$b2b	BCS NOPV1N1
582	.$b2d	DEC TMP_ZP+1
583	.$b2f	NOPV1N1  LDY #0
584	.$b31	LDA (TMP_ZP),Y
585	.$b33	BNE NOGOSUB
586	.$b35	JMP NEXTWOFOR
587	.$b38	NOGOSUB
588	.$b38	INY
589	.$b39	LDA TMP_ZP
590	.$b3b	SEC
591	.$b3c	SBC (TMP_ZP),Y
592	.$b3e	STA TMP_ZP
593	.$b40	BCS NOPV1N2
594	.$b42	DEC TMP_ZP+1
595	.$b44	NOPV1N2  DEY
596	.$b45	LDA A_REG
597	.$b48	BEQ LOW0
598	.$b4a	CMPFOR  CMP (TMP_ZP),Y
599	.$b4c	BNE SEARCHFOR
600	.$b4e	LDA A_REG+1
601	.$b51	INY
602	.$b52	CMP (TMP_ZP),Y
603	.$b54	BEQ FOUNDFOR
604	.$b56	JMP SEARCHFOR
605	.$b59	LOW0  LDX A_REG+1
606	.$b5c	BEQ FOUNDFOR
607	.$b5e	BNE CMPFOR
608	.$b60	FOUNDFOR LDA TMP_ZP
609	.$b62	STA TMP2_REG
610	.$b65	LDA TMP_ZP+1
611	.$b67	STA TMP2_REG+1
612	.$b6a	VARREAL
613	.$b6a	LDY #0
614	.$b6c	STY A_REG+1 
615	.$b6f	LDA (TMP_ZP),Y
616	.$b71	TAX
617	.$b72	INY
618	.$b73	LDA (TMP_ZP),Y
619	.$b75	TAY
620	.$b76	TXA
621	.$b77	JSR REALFAC
622	.$b7a	CALCNEXT LDA TMP_ZP
623	.$b7c	CLC
624	.$b7d	ADC #4
625	.$b7f	STA TMP_ZP
626	.$b81	BCC NOPV2IN
627	.$b83	INC TMP_ZP+1
628	.$b85	NOPV2IN  STA TMP_REG
629	.$b87	LDY TMP_ZP+1
630	.$b89	STY TMP_REG+1
631	.$b8b	JSR FASTFADDMEM
633	.$b8e	LDA TMP2_REG
634	.$b91	STA TMP_ZP
635	.$b93	LDA TMP2_REG+1
636	.$b96	STA TMP_ZP+1
637	.$b98	STOREREAL
638	.$b98	LDY #0
639	.$b9a	LDA (TMP_ZP),Y
640	.$b9c	TAX
641	.$b9d	INY
642	.$b9e	LDA (TMP_ZP),Y
643	.$ba0	TAY
644	.$ba1	JSR FACMEM 
645	.$ba4	CMPFORXX LDA #5
646	.$ba6	STA TMP3_ZP
647	.$ba8	LDA TMP_REG
648	.$baa	CLC
649	.$bab	ADC #5
650	.$bad	STA TMP_REG
651	.$baf	BCC NOPV3
652	.$bb1	INC TMP_REG+1
653	.$bb3	NOPV3  LDY TMP_REG+1
654	.$bb5	JSR CMPFAC  
655	.$bb8	BEQ LOOPING
656	.$bba	PHA
657	.$bbb	LDY #14
658	.$bbd	LDA (TMP_ZP),Y
659	.$bbf	BEQ STEPZERO
660	.$bc1	ROL
661	.$bc2	BCC STEPPOS
662	.$bc4	STEPNEG  PLA
663	.$bc5	ROL
664	.$bc6	BCC LOOPING
665	.$bc8	BCS EXITLOOP
666	.$bca	STEPPOS  PLA
667	.$bcb	ROL
668	.$bcc	BCC EXITLOOP
669	.$bce	LOOPING  LDA TMP3_REG
670	.$bd1	STA FORSTACKP
671	.$bd4	LDA TMP3_REG+1
672	.$bd7	STA FORSTACKP+1
673	.$bda	LDA TMP2_REG
674	.$bdd	CLC
675	.$bde	ADC #2
676	.$be0	STA TMP2_REG
677	.$be3	BCC NOPV4IN
678	.$be5	INC TMP2_REG+1
679	.$be8	NOPV4IN  LDY #0
680	.$bea	STY A_REG
681	.$bed	STA TMP_ZP
682	.$bef	LDA TMP2_REG+1
683	.$bf2	STA TMP_ZP+1
684	.$bf4	LDA (TMP_ZP),Y
685	.$bf6	STA JUMP_TARGET
686	.$bf8	INY
687	.$bf9	LDA (TMP_ZP),Y
688	.$bfb	STA JUMP_TARGET+1
689	.$bfd	RTS
690	.$bfe	STEPZERO PLA
691	.$bff	JMP LOOPING
692	.$c02	EXITLOOP LDA TMP2_REG
693	.$c05	STA FORSTACKP
694	.$c08	LDA TMP2_REG+1
695	.$c0b	STA FORSTACKP+1
696	.$c0e	LDA #1
697	.$c10	STA A_REG
698	.$c13	RTS
701	.$c14	REALFACPUSH STA TMP_ZP
702	.$c16	STY TMP_ZP+1
703	.$c18	LDX FPSTACKP
704	.$c1b	LDY FPSTACKP+1
705	.$c1e	STX TMP2_ZP
706	.$c20	STY TMP2_ZP+1
707	.$c22	LDY #0
708	.$c24	LDA (TMP_ZP),Y
709	.$c26	STA (TMP2_ZP),Y
710	.$c28	INY
711	.$c29	LDA (TMP_ZP),Y
712	.$c2b	STA (TMP2_ZP),Y
713	.$c2d	INY
714	.$c2e	LDA (TMP_ZP),Y
715	.$c30	STA (TMP2_ZP),Y
716	.$c32	INY
717	.$c33	LDA (TMP_ZP),Y
718	.$c35	STA (TMP2_ZP),Y
719	.$c37	INY
720	.$c38	LDA (TMP_ZP),Y
721	.$c3a	STA (TMP2_ZP),Y
722	.$c3c	TXA    
723	.$c3d	CLC
724	.$c3e	ADC #5
725	.$c40	STA FPSTACKP
726	.$c43	BCC NOPVRFPXX
727	.$c45	INC FPSTACKP+1
728	.$c48	NOPVRFPXX RTS
731	.$c49	POPREAL2X LDA FPSTACKP
732	.$c4c	SEC
733	.$c4d	SBC #5
734	.$c4f	STA FPSTACKP
735	.$c52	BCS NOPVPR2X
736	.$c54	DEC FPSTACKP+1
737	.$c57	NOPVPR2X LDA FPSTACKP
738	.$c5a	LDY FPSTACKP+1
739	.$c5d	JSR REALFAC
740	.$c60	JSR XREGARG
741	.$c63	RTS
744	.$c64	POPREAL  LDA FPSTACKP
745	.$c67	SEC
746	.$c68	SBC #5
747	.$c6a	STA FPSTACKP
748	.$c6d	BCS NOPVPR
749	.$c6f	DEC FPSTACKP+1
750	.$c72	NOPVPR  LDA FPSTACKP
751	.$c75	LDY FPSTACKP+1
752	.$c78	JMP REALFAC
755	.$c7b	INCTMPZP LDA TMP_ZP
756	.$c7d	CLC
757	.$c7e	ADC TMP3_ZP
758	.$c80	STA TMP_ZP
759	.$c82	BCC NOPV2
760	.$c84	INC TMP_ZP+1
761	.$c86	NOPV2  RTS
764	.$c87	ONETOFAC    LDX #129
765	.$c89	STX FAC
766	.$c8b	DEX
767	.$c8c	STX FAC+1
768	.$c8e	LDX #0
769	.$c90	STX FAC+2
770	.$c92	STX FAC+3
771	.$c94	STX FAC+4
772	.$c96	STX FAC+5
773	.$c98	STX FAC+15
774	.$c9a	RTS
777	.$c9b	FASTOR  LDA FACEXP   
778	.$c9d	BNE CHECKFACOR
779	.$c9f	LDA ARGEXP   
780	.$ca1	BNE CHECKARGOR 
781	.$ca3	LDA #0
782	.$ca5	STA FACSGN   
783	.$ca7	RTS    
784	.$ca8	CHECKFACOR LDA FACEXP   
785	.$caa	CMP #$81
786	.$cac	BNE NORMALOR
787	.$cae	LDA FACHO
788	.$cb0	CMP #$80
789	.$cb2	BNE NORMALOR
790	.$cb4	LDA FACMOH
791	.$cb6	BNE NORMALOR
792	.$cb8	LDA FACMO
793	.$cba	BNE NORMALOR
794	.$cbc	LDA FACLO
795	.$cbe	BNE NORMALOR
796	.$cc0	LDA FACSGN
797	.$cc2	ROL
798	.$cc3	BCC NORMALOR
799	.$cc5	CHECKARGOR LDA ARGEXP   
800	.$cc7	BNE CHECKARGOR2
801	.$cc9	RTS    
802	.$cca	CHECKARGOR2 CMP #$81
803	.$ccc	BNE NORMALOR
804	.$cce	LDA ARGHO
805	.$cd0	CMP #$80
806	.$cd2	BNE NORMALOR
807	.$cd4	LDA ARGMOH
808	.$cd6	BNE NORMALOR
809	.$cd8	LDA ARGMO
810	.$cda	BNE NORMALOR
811	.$cdc	LDA ARGLO
812	.$cde	BNE NORMALOR
813	.$ce0	LDA ARGSGN
814	.$ce2	AND #$80
815	.$ce4	CMP #$80
816	.$ce6	BNE NORMALOR
817	.$ce8	JMP ARGFAC  
818	.$ceb	NORMALOR JMP FACOR
821	.$cee	CLRCHNEW
822	.$cee	LDA CHLOCKFLAG
823	.$cf1	BNE SKIPCLRCH
824	.$cf3	JMP CLRCH
825	.$cf6	SKIPCLRCH
826	.$cf6	RTS
829	.$cf7	NEXTWOFOR
833	.$cf7	LDX #$0A
834	.$cf9	JMP ERRALL
837	.$cfc	ILLEGALQUANTITY
841	.$cfc	JMP ERRIQ
844	.$cff	FACXREG  LDA FACLO
845	.$d01	STA X_REG+4
846	.$d03	LDA FACMO
847	.$d05	STA X_REG+3
848	.$d07	LDA FACMOH
849	.$d09	STA X_REG+2
850	.$d0b	LDA FACSGN
851	.$d0d	ORA #$7F
852	.$d0f	AND FACHO
853	.$d11	STA X_REG+1
854	.$d13	LDA FACEXP
855	.$d15	STA X_REG
856	.$d17	LDA #0   
857	.$d19	STA FACOV
858	.$d1b	RTS
861	.$d1c	XREGARG  LDA X_REG+4
862	.$d1e	STA ARGLO
863	.$d20	LDA X_REG+3
864	.$d22	STA ARGMO
865	.$d24	LDA X_REG+2
866	.$d26	STA ARGMOH
867	.$d28	LDA X_REG+1
868	.$d2a	STA ARGSGN
869	.$d2c	EOR FACSGN
870	.$d2e	STA ARISGN
871	.$d30	LDA ARGSGN
872	.$d32	ORA #$80
873	.$d34	STA ARGHO
874	.$d36	LDA X_REG
875	.$d38	STA ARGEXP
876	.$d3a	LDA FACEXP
877	.$d3c	RTS
991	.$d3d	FASTFADDMEM
992	.$d3d	JSR MEMARG
993	.$d40	FASTFADDARG
994	.$d40	BNE FADDRET2     
995	.$d42	JMP ARGFAC
996	.$d45	FADDRET2 LDA ARGEXP
997	.$d47	BNE FADDRET1     
998	.$d49	RTS
999	.$d4a	FADDRET1 SEC
1000	.$d4b	SBC FACEXP
1001	.$d4d	BEQ FFADD_EXPEQ     
1002	.$d4f	BCC FFADD_SHFARG1   
1006	.$d51	LDY ARGEXP
1007	.$d53	STY FACEXP
1008	.$d55	LDY ARGSGN
1009	.$d57	STY FACSGN
1010	.$d59	LDX #0
1011	.$d5b	STX OLDOV        
1012	.$d5d	LDX #FAC         
1014	.$d5f	SEC
1015	.$d60	SBC #$08
1016	.$d62	BMI FFADD_SHFFAC2
1018	.$d64	FFADD_SHFFAC1
1019	.$d64	LDY FACLO        
1020	.$d66	STY FACOV
1021	.$d68	LDY FACMO        
1022	.$d6a	STY FACMO+1
1023	.$d6c	LDY FACMOH       
1024	.$d6e	STY FACMOH+1
1025	.$d70	LDY FACHO        
1026	.$d72	STY FACHO+1
1027	.$d74	LDY #0
1028	.$d76	STY FACHO        
1029	.$d78	SBC #$08         
1030	.$d7a	BPL FFADD_SHFFAC1   
1031	.$d7c	FFADD_SHFFAC2
1032	.$d7c	ADC #$08         
1033	.$d7e	BEQ FFADD_SHFFAC4   
1034	.$d80	TAY
1035	.$d81	LDA FACOV
1036	.$d83	FFADD_SHFFAC3
1037	.$d83	LSR FACHO        
1038	.$d85	ROR FACMOH       
1039	.$d87	ROR FACMO        
1040	.$d89	ROR FACLO        
1041	.$d8b	ROR              
1042	.$d8c	DEY
1043	.$d8d	BNE FFADD_SHFFAC3
1044	.$d8f	JMP FFADD_MANADD2   
1045	.$d92	FFADD_SHFFAC4
1046	.$d92	LDA FACOV        
1047	.$d94	JMP FFADD_MANADD2
1048	.$d97	FFADD_EXPEQ
1049	.$d97	LDX FACOV
1050	.$d99	STX OLDOV
1053	.$d9b	JMP FFADD_MANADD1
1054	.$d9e	FFADD_SHFARG2
1055	.$d9e	LDA FACOV        
1056	.$da0	JMP FFADD_MANADD1
1057	.$da3	FFADD_SHFARG1
1058	.$da3	LDX FACOV
1059	.$da5	STX OLDOV        
1060	.$da7	LDX #$00         
1063	.$da9	ADC #$08
1064	.$dab	BPL FFADD_SHFARG6   
1065	.$dad	FFADD_SHFARG3
1066	.$dad	LDX ARGLO        
1067	.$daf	LDY ARGMO        
1068	.$db1	STY ARGMO+1
1069	.$db3	LDY ARGMOH       
1070	.$db5	STY ARGMOH+1
1071	.$db7	LDY ARGHO        
1072	.$db9	STY ARGHO+1
1073	.$dbb	LDY #0
1074	.$dbd	STY ARGHO        
1075	.$dbf	FFADD_SHFARG4
1076	.$dbf	ADC #$08
1077	.$dc1	BMI FFADD_SHFARG3
1078	.$dc3	BEQ FFADD_SHFARG3
1079	.$dc5	FFADD_SHFARG6
1080	.$dc5	SBC #$08
1081	.$dc7	BEQ FFADD_SHFARG2   
1082	.$dc9	TAY
1083	.$dca	TXA              
1084	.$dcb	FFADD_SHFARG5
1085	.$dcb	LSR ARGHO
1086	.$dcd	ROR ARGMOH
1087	.$dcf	ROR ARGMO
1088	.$dd1	ROR ARGLO
1089	.$dd3	ROR           
1090	.$dd4	INY
1091	.$dd5	BNE FFADD_SHFARG5
1092	.$dd7	FFADD_MANADD1
1093	.$dd7	LDX #ARGEXP      
1094	.$dd9	FFADD_MANADD2
1095	.$dd9	BIT ARISGN
1096	.$ddb	BMI FFADD_MANSUB1   
1097	.$ddd	CLC
1098	.$dde	ADC OLDOV
1099	.$de0	STA FACOV
1100	.$de2	LDA FACLO
1101	.$de4	ADC ARGLO
1102	.$de6	STA FACLO
1103	.$de8	LDA FACMO
1104	.$dea	ADC ARGMO
1105	.$dec	STA FACMO
1106	.$dee	LDA FACMOH
1107	.$df0	ADC ARGMOH
1108	.$df2	STA FACMOH
1109	.$df4	LDA FACHO
1110	.$df6	ADC ARGHO
1111	.$df8	STA FACHO
1112	.$dfa	BCC FFADD_RNDRTS
1113	.$dfc	INC FACEXP
1114	.$dfe	BEQ FFADD_OVERR
1116	.$e00	ROR FACHO
1117	.$e02	ROR FACMOH
1118	.$e04	ROR FACMO
1119	.$e06	ROR FACLO
1120	.$e08	ROR FACOV
1121	.$e0a	FFADD_RNDRTS
1122	.$e0a	RTS
1123	.$e0b	FFADD_OVERR
1124	.$e0b	JMP ILLEGALQUANTITY
1125	.$e0e	FFADD_MANSUB1
1126	.$e0e	LDY #FACEXP
1127	.$e10	CPX #ARGEXP
1128	.$e12	BEQ FFADD_MANSUB2
1129	.$e14	LDY #ARGEXP
1130	.$e16	FFADD_MANSUB2
1131	.$e16	SEC              
1132	.$e17	EOR #$FF
1133	.$e19	ADC OLDOV
1134	.$e1b	STA FACOV
1135	.$e1d	LDA 4,Y
1136	.$e20	SBC 4,X
1137	.$e22	STA FACLO
1138	.$e24	LDA 3,Y
1139	.$e27	SBC 3,X
1140	.$e29	STA FACMO
1141	.$e2b	LDA 2,Y
1142	.$e2e	SBC 2,X
1143	.$e30	STA FACMOH
1144	.$e32	LDA 1,Y
1145	.$e35	SBC 1,X
1146	.$e37	STA FACHO
1147	.$e39	BCS FCNORMAL
1148	.$e3b	LDA FACSGN
1149	.$e3d	EOR #$FF
1150	.$e3f	STA FACSGN
1151	.$e41	LDA FACHO
1152	.$e43	EOR #$FF
1153	.$e45	STA FACHO
1154	.$e47	LDA FACMOH
1155	.$e49	EOR #$FF
1156	.$e4b	STA FACMOH
1157	.$e4d	LDA FACMO
1158	.$e4f	EOR #$FF
1159	.$e51	STA FACMO
1160	.$e53	LDA FACLO
1161	.$e55	EOR #$FF
1162	.$e57	STA FACLO
1163	.$e59	LDA FACOV
1164	.$e5b	EOR #$FF
1165	.$e5d	CLC
1166	.$e5e	ADC #1
1167	.$e60	STA FACOV
1168	.$e62	BNE FCNORMAL
1169	.$e64	INC FACLO
1170	.$e66	BNE FCNORMAL
1171	.$e68	INC FACMO
1172	.$e6a	BNE FCNORMAL
1173	.$e6c	INC FACMOH
1174	.$e6e	BNE FCNORMAL
1175	.$e70	INC FACHO
1176	.$e72	FCNORMAL   BIT FACHO
1177	.$e74	BMI FFADD_RET       
1178	.$e76	LDA #0           
1179	.$e78	CLC
1180	.$e79	FFADD_NORM3
1181	.$e79	LDX FACHO
1182	.$e7b	BNE FFADD_NORM1
1183	.$e7d	LDX FACHO+1
1184	.$e7f	STX FACHO
1185	.$e81	LDX FACMOH+1
1186	.$e83	STX FACMOH
1187	.$e85	LDX FACMO+1
1188	.$e87	STX FACMO
1189	.$e89	LDX FACOV
1190	.$e8b	STX FACLO
1191	.$e8d	LDX #0
1192	.$e8f	STX FACOV
1193	.$e91	ADC #$08
1194	.$e93	CMP #$20
1195	.$e95	BNE FFADD_NORM3
1196	.$e97	JMP FFADD_ZEROFAC
1197	.$e9a	FFADD_NORM2
1198	.$e9a	CLC
1199	.$e9b	ADC #1
1200	.$e9d	ASL FACOV
1201	.$e9f	ROL FACLO
1202	.$ea1	ROL FACMO
1203	.$ea3	ROL FACMOH
1204	.$ea5	ROL FACHO
1205	.$ea7	FFADD_NORM1
1206	.$ea7	BPL FFADD_NORM2     
1207	.$ea9	SEC
1208	.$eaa	SBC FACEXP
1209	.$eac	BCS FFADD_ZEROFAC
1210	.$eae	EOR #$FF
1211	.$eb0	CLC
1212	.$eb1	ADC #1
1213	.$eb3	STA FACEXP
1214	.$eb5	FFADD_RET   RTS
1215	.$eb6	FFADD_ZEROFAC
1216	.$eb6	LDX #0
1217	.$eb8	STX FACEXP
1218	.$eba	STX FACSGN
1219	.$ebc	RTS
1222	.$ebd	INITVARS
1223	.$ebd	JSR INITSTRVARS
1224	.$ec0	LDA #0
1225	.$ec2	LDY #4
1226	.$ec4	REALINITLOOP0:
1227	.$ec4	STA VAR_I,Y
1228	.$ec7	DEY
1229	.$ec8	BMI REALLOOPEXIT0
1230	.$eca	JMP REALINITLOOP0
1231	.$ecd	REALLOOPEXIT0:
1232	.$ecd	RTS
1236	.$ece	CONSTANTS
1242	.$ece	CONST_1R .REAL 10.0
1245	.$ed3	CONST_2R .REAL 1.0
1248	.$ed8	CONST_3R .REAL 12.0
1250	.$edd	CONST_4 .BYTE 4
1251	.$ede	.STRG "yeah"
1254	.$ee2	DATAS
1255	.$ee2	.BYTE $FF
1257	.$ee3	CONSTANTS_END
1260	.$ee3	VARIABLES
1262	.$ee3	VAR_I .REAL 0.0
1263	.$ee8	STRINGVARS_START
1265	.$ee8	VAR_TI$ .WORD EMPTYSTR
1266	.$eea	STRINGVARS_END
1267	.$eea	STRINGARRAYS_START
1268	.$eea	STRINGARRAYS_END
1269	.$eea	VARIABLES_END
1271	.$eea	Y_REG .REAL 0.0
1272	.$eef	C_REG .REAL 0.0
1273	.$ef4	D_REG .REAL 0.0
1274	.$ef9	E_REG .REAL 0.0
1275	.$efe	F_REG .REAL 0.0
1276	.$f03	A_REG .WORD 0
1277	.$f05	B_REG .WORD 0
1278	.$f07	CMD_NUM .BYTE 0
1279	.$f08	CHANNEL .BYTE 0
1280	.$f09	SP_SAVE .BYTE 0
1281	.$f0a	TMP2_REG .WORD 0
1282	.$f0c	TMP3_REG .WORD 0
1283	.$f0e	TMP4_REG .WORD 0
1284	.$f10	AS_TMP .WORD 0
1285	.$f12	BPOINTER_TMP .WORD 0
1286	.$f14	BASICTEXTP .BYTE 0
1287	.$f15	STORE1 .WORD 0
1288	.$f17	STORE2 .WORD 0
1289	.$f19	STORE3 .WORD 0
1290	.$f1b	STORE4 .WORD 0
1291	.$f1d	GCSTART .WORD 0
1292	.$f1f	GCLEN .WORD 0
1293	.$f21	GCWORK .WORD 0
1294	.$f23	INPUTLENGTH .BYTE 0
1295	.$f24	TMP_FREG .REAL 0
1296	.$f29	TMP2_FREG .REAL 0
1297	.$f2e	TMP_FLAG .BYTE 0
1298	.$f2f	INT_FLAG .BYTE 0
1299	.$f30	REAL_CONST_ONE .REAL 1.0
1300	.$f35	REAL_CONST_ZERO .REAL 0.0
1301	.$f3a	REAL_CONST_MINUS_ONE .REAL -1.0
1302	.$f3f	CHLOCKFLAG .BYTE 0
1303	.$f40	EMPTYSTR .BYTE 0
1304	.$f41	FPSTACKP .WORD FPSTACK
1305	.$f43	FORSTACKP .WORD FORSTACK
1306	.$f45	DATASP .WORD DATAS
1307	.$f47	LASTVAR .WORD 0
1308	.$f49	LASTVARP .WORD 0
1309	.$f4b	HIGHP .WORD STRBUF
1310	.$f4d	STRBUFP .WORD STRBUF
1311	.$f4f	ENDSTRBUF .WORD 0
1312	.$f51	INPUTQUEUEP .BYTE 0
1313	.$f52	PROGRAMEND
1314	.$f52	INPUTQUEUE .ARRAY $0F
1315	.$f61	FPSTACK .ARRAY 100
1316	.$fc5	FORSTACK .ARRAY 340
1317	.$1119	STRBUF .BYTE 0
