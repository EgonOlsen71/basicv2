PROGRAMSTART:
JSR START
0:
5:
NOP
MOV A,#write file{STRING}
JSR STROUT
JSR LINEBREAK
10:
NOP
MOV Y,#3{INTEGER}
PUSH Y
MOV Y,#8{INTEGER}
PUSH Y
MOV Y,#2{INTEGER}
PUSH Y
MOV B,#testfile,s,w{STRING}
MOV G,B
POP D
POP C
POP X
MOV Y,#4{INTEGER}
JSR OPEN
20:
NOP
JSR LOCKCHANNEL
MOV Y,#3{INTEGER}
PUSH Y
NOP
MOV A,#yeah!{STRING}
POP C
JSR STROUTCHANNEL
JSR LINEBREAKCHANNEL
JSR UNLOCKCHANNEL
30:
NOP
MOV X,#3{INTEGER}
JSR CLOSE
35:
NOP
MOV A,#read by get{STRING}
JSR STROUT
JSR LINEBREAK
40:
NOP
MOV Y,#4{INTEGER}
PUSH Y
MOV Y,#8{INTEGER}
PUSH Y
MOV Y,#2{INTEGER}
PUSH Y
MOV B,#testfile,s,r{STRING}
MOV G,B
POP D
POP C
POP X
MOV Y,#4{INTEGER}
JSR OPEN
50:
NOP
MOV C,#4{INTEGER}
JSR GETSTRCHANNEL
MOV A${STRING},A
NOP
MOV A,A${STRING}
JSR STROUT
60:
NOP
JSR COMPACTMAX
MOV Y,#13{INTEGER}
CHGCTX #1
JSR CHR
MOV B,A
MOV A,A${STRING}
CHGCTX #0
JSR SNEQ
CMP X,#0{REAL}
JNE NSKIP0
JMP SKIP0
NSKIP0:
JMP 50
NOP
SKIP0:
70:
NOP
MOV X,#4{INTEGER}
JSR CLOSE
75:
NOP
JSR LINEBREAK
NOP
MOV A,#read by input{STRING}
JSR STROUT
JSR LINEBREAK
80:
NOP
MOV Y,#4{INTEGER}
PUSH Y
MOV Y,#8{INTEGER}
PUSH Y
MOV Y,#2{INTEGER}
PUSH Y
MOV B,#testfile,s,r{STRING}
MOV G,B
POP D
POP C
POP X
MOV Y,#4{INTEGER}
JSR OPEN
90:
NOP
MOV Y,#4{INTEGER}
PUSH Y
JSR CLEARQUEUE
JSR COMPACTMAX
POP C
JSR INPUTSTRCHANNEL
JSR INPUTLENGTHCHECK
JE EMPTYINPUTSKIP1
MOV A${STRING},A
EMPTYINPUTSKIP1:
100:
NOP
MOV X,#4{INTEGER}
JSR CLOSE
NOP
MOV A,A${STRING}
JSR STROUT
JSR LINEBREAK
NOP
JSR END
RTS
