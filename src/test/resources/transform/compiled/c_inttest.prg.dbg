117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
128	.$81f	LDY #5
129	.$821	LDA #0
131	.$823	STY VAR_A%
132	.$826	STA VAR_A%+1
134	.$829	LINE_20:
136	.$829	LDA #0
137	.$82b	STA VAR_I
138	.$82e	STA VAR_I+1
139	.$831	STA VAR_I+2
140	.$834	STA VAR_I+3
141	.$837	STA VAR_I+4
143	.$83a	LDA #<CONST_2R
144	.$83c	LDY #>CONST_2R
145	.$83e	JSR REALFACPUSH
147	.$841	LDA #<CONST_3R
148	.$843	LDY #>CONST_3R
149	.$845	JSR REALFACPUSH
151	.$848	LDA #<VAR_I
152	.$84a	LDY #>VAR_I
153	.$84c	STA A_REG
154	.$84f	STY A_REG+1
155	.$852	LDA #<FORLOOP0
156	.$854	STA JUMP_TARGET
157	.$856	LDA #>FORLOOP0
158	.$858	STA JUMP_TARGET+1
159	.$85a	JSR INITFOR
160	.$85d	FORLOOP0:
162	.$85d	LINE_30:
164	.$85d	LDY VAR_A%
165	.$860	LDA VAR_A%+1
166	.$863	JSR SUPERFIINX
168	.$866	STY VAR_B%
169	.$869	STA VAR_B%+1
171	.$86c	LINE_40:
173	.$86c	LDY #4
174	.$86e	LDA #0
176	.$870	STY VAR_A%
177	.$873	STA VAR_A%+1
179	.$876	LINE_50:
181	.$876	LDY VAR_A%
182	.$879	STY TMP_ZP
183	.$87b	LDA VAR_A%+1
184	.$87e	STA TMP_ZP+1
185	.$880	JSR INTOUTFAST
188	.$883	JSR CRSRRIGHT
189	.$886	JSR TABOUT
190	.$889	LDY VAR_B%
191	.$88c	STY TMP_ZP
192	.$88e	LDA VAR_B%+1
193	.$891	STA TMP_ZP+1
194	.$893	JSR INTOUTBRKFAST
199	.$896	LINE_60:
201	.$896	LDA #0
202	.$898	STA A_REG
203	.$89b	STA A_REG+1
204	.$89e	JSR NEXT
206	.$8a1	LDA A_REG
207	.$8a4	BNE RBEQ_0
208	.$8a6	JMP (JUMP_TARGET)
210	.$8a9	RBEQ_0:
211	.$8a9	JSR END
212	.$8ac	RTS
215	.$8ad	END   LDX SP_SAVE
216	.$8b0	TXS
223	.$8b1	RTS
226	.$8b2	START  LDA ENDSTRBUF+1
227	.$8b5	BNE ENDGIVEN
228	.$8b7	LDA BASICEND
229	.$8b9	STA ENDSTRBUF
230	.$8bc	LDA BASICEND+1
231	.$8be	STA ENDSTRBUF+1
232	.$8c1	ENDGIVEN LDA #<FPSTACK
233	.$8c3	LDY #>FPSTACK
234	.$8c5	STA FPSTACKP
235	.$8c8	STY FPSTACKP+1
236	.$8cb	LDA #<FORSTACK
237	.$8cd	LDY #>FORSTACK
238	.$8cf	STA FORSTACKP
239	.$8d2	STY FORSTACKP+1
240	.$8d5	LDA #<STRBUF
241	.$8d7	LDY #>STRBUF
242	.$8d9	STA STRBUFP
243	.$8dc	STY STRBUFP+1
244	.$8df	STA HIGHP
245	.$8e2	STY HIGHP+1
246	.$8e5	LDA #0
247	.$8e7	STA CHLOCKFLAG
248	.$8ea	STA LASTVAR
249	.$8ed	STA LASTVAR+1
250	.$8f0	JSR INITVARS
251	.$8f3	LDA #0
252	.$8f5	STA CMD_NUM
253	.$8f8	STA CHANNEL
254	.$8fb	TAY
255	.$8fc	TAX
259	.$8fd	STA KEYNDX
265	.$8ff	JSR RESTORE
266	.$902	CLC
270	.$903	RTS
273	.$904	INITNARRAY
274	.$904	STA TMP_ZP
275	.$906	STY TMP_ZP+1
276	.$908	LDY #0
277	.$90a	TYA
278	.$90b	NINITLOOP STA (TMP_ZP),Y
279	.$90d	INC TMP_ZP
280	.$90f	BNE NLOOPNOV
281	.$911	INC TMP_ZP+1
282	.$913	NLOOPNOV LDX TMP2_ZP
283	.$915	BNE NLOOPNOV2
284	.$917	DEC TMP2_ZP+1
285	.$919	NLOOPNOV2 DEC TMP2_ZP
286	.$91b	BNE NINITLOOP
287	.$91d	LDX TMP2_ZP+1
288	.$91f	BNE NINITLOOP
289	.$921	RTS
292	.$922	INITSTRARRAY
293	.$922	STA TMP_ZP
294	.$924	STY TMP_ZP+1
295	.$926	SINITLOOP LDY #0
296	.$928	LDA #<EMPTYSTR
297	.$92a	STA (TMP_ZP),Y
298	.$92c	LDA #>EMPTYSTR
299	.$92e	INY
300	.$92f	STA (TMP_ZP),Y
301	.$931	CLC
302	.$932	LDA TMP_ZP
303	.$934	ADC #2
304	.$936	STA TMP_ZP
305	.$938	BCC SLOOPNOV1
306	.$93a	INC TMP_ZP+1
307	.$93c	SLOOPNOV1 SEC
308	.$93d	LDA TMP2_ZP
309	.$93f	SBC #2
310	.$941	STA TMP2_ZP
311	.$943	BCS SLOOPNOV2
312	.$945	DEC TMP2_ZP+1
313	.$947	SLOOPNOV2 LDA TMP2_ZP
314	.$949	BNE SINITLOOP
315	.$94b	LDA TMP2_ZP+1
316	.$94d	BNE SINITLOOP
317	.$94f	RTS
320	.$950	INITSPARAMS STA TMP3_ZP
321	.$952	STY TMP3_ZP+1
322	.$954	SEC
323	.$955	SBC #2
324	.$957	STA TMP_ZP
325	.$959	TYA
326	.$95a	SBC #0
327	.$95c	STA TMP_ZP+1
328	.$95e	LDY #0
329	.$960	LDA (TMP_ZP),Y
330	.$962	STA TMP2_ZP
331	.$964	INY
332	.$965	LDA (TMP_ZP),Y
333	.$967	STA TMP2_ZP+1
334	.$969	LDA TMP3_ZP
335	.$96b	LDY TMP3_ZP+1
336	.$96d	RTS
339	.$96e	INITSTRVARS LDA #<STRINGVARS_START  
340	.$970	LDY #>STRINGVARS_START
341	.$972	CMP #<STRINGVARS_END
342	.$974	BNE INITIT1
343	.$976	CPY #>STRINGVARS_END
344	.$978	BNE INITIT1
345	.$97a	JMP INITSA2     
346	.$97d	INITIT1  STA TMP_ZP
347	.$97f	STY TMP_ZP+1
348	.$981	LDY #0
349	.$983	INITSTRLOOP LDA #<EMPTYSTR
350	.$985	STA (TMP_ZP),Y
351	.$987	INY
352	.$988	LDA #>EMPTYSTR
353	.$98a	STA (TMP_ZP),Y
354	.$98c	DEY
355	.$98d	LDA TMP_ZP
356	.$98f	CLC
357	.$990	ADC #2
358	.$992	STA TMP_ZP
359	.$994	LDA TMP_ZP+1
360	.$996	ADC #0
361	.$998	STA TMP_ZP+1
362	.$99a	CMP #>STRINGVARS_END
363	.$99c	BNE INITSTRLOOP
364	.$99e	LDA TMP_ZP
365	.$9a0	CMP #<STRINGVARS_END
366	.$9a2	BNE INITSTRLOOP
367	.$9a4	INITSA2  LDA #<STRINGARRAYS_START 
368	.$9a6	LDY #>STRINGARRAYS_START
369	.$9a8	CMP #<STRINGARRAYS_END
370	.$9aa	BNE ARRAYLOOP
371	.$9ac	CPY #>STRINGARRAYS_END
372	.$9ae	BNE ARRAYLOOP
373	.$9b0	RTS       
374	.$9b1	ARRAYLOOP CLC
375	.$9b2	ADC #3
376	.$9b4	BCC ARRAYSKIP1
377	.$9b6	INY
378	.$9b7	ARRAYSKIP1 CPY #>STRINGARRAYS_END
379	.$9b9	BEQ ARRAYSC
380	.$9bb	BCC ARRAYSKIP2
381	.$9bd	JMP ARRAYQUIT
382	.$9c0	ARRAYSC  CMP #<STRINGARRAYS_END
383	.$9c2	BCS ARRAYQUIT
384	.$9c4	ARRAYSKIP2 STA TMP_REG
385	.$9c6	STY TMP_REG+1
386	.$9c8	JSR INITSPARAMS
387	.$9cb	LDA TMP_REG
388	.$9cd	LDY TMP_REG+1
389	.$9cf	JSR INITSTRARRAY
390	.$9d2	LDA TMP_ZP
391	.$9d4	LDY TMP_ZP+1
392	.$9d6	JMP ARRAYLOOP
393	.$9d9	ARRAYQUIT RTS
396	.$9da	RESTORE  LDA #<DATAS
397	.$9dc	LDY #>DATAS
398	.$9de	STA DATASP
399	.$9e1	STY DATASP+1
400	.$9e4	RTS
403	.$9e5	TABSPC     BCC DOSPC
404	.$9e7	TXA
405	.$9e8	SBC $09
406	.$9ea	BCC TABSPCQUIT
407	.$9ec	TAX
408	.$9ed	DOSPC  INX
409	.$9ee	TABSPCLOOP  DEX
410	.$9ef	BNE TABSPCRIGHT
411	.$9f1	TABSPCQUIT RTS
412	.$9f2	TABSPCRIGHT JSR CRSRRIGHT
413	.$9f5	JMP TABSPCLOOP
416	.$9f8	REROUTE  LDA CMD_NUM  
417	.$9fb	BEQ REROUTECMD
418	.$9fd	TAX
419	.$9fe	STA CHANNEL
420	.$a01	JMP CHKOUT
421	.$a04	REROUTECMD RTS
424	.$a05	RESETROUTE LDA CMD_NUM  
425	.$a08	BEQ RESETROUTECMD
426	.$a0a	JMP CLRCHNEW
427	.$a0d	RESETROUTECMD
428	.$a0d	RTS
431	.$a0e	INTOUTFAST JSR REROUTE
432	.$a11	JSR INTOUTFASTZ
433	.$a14	JMP RESETROUTE
436	.$a17	INTOUTBRKFAST
437	.$a17	JSR REROUTE
438	.$a1a	JSR INTOUTFASTZ
439	.$a1d	LDA #$0D
440	.$a1f	JSR CHROUT
441	.$a22	JMP RESETROUTE
444	.$a25	INTOUTFASTZ LDX #32    
445	.$a27	LDA TMP_ZP+1
446	.$a29	BPL INTISPOS
447	.$a2b	CLC
448	.$a2c	LDA TMP_ZP
449	.$a2e	EOR #$FF
450	.$a30	ADC #1
451	.$a32	STA TMP_ZP
452	.$a34	LDA TMP_ZP+1
453	.$a36	EOR #$FF
454	.$a38	ADC #0
455	.$a3a	STA TMP_ZP+1
456	.$a3c	LDX #45    
457	.$a3e	INTISPOS
458	.$a3e	TXA
459	.$a3f	JSR CHROUT
460	.$a42	JSR CONVPOSINT
461	.$a45	LDA NUMFLAG
462	.$a48	BNE ALLINTOUTDONE
463	.$a4a	LDA #48
464	.$a4c	JSR CHROUT
465	.$a4f	ALLINTOUTDONE
466	.$a4f	RTS
469	.$a50	NUMBEROUT
470	.$a50	BEQ NUMZERO
471	.$a52	ORA #$30
472	.$a54	STA NUMFLAG
473	.$a57	JMP CHROUT
474	.$a5a	NUMZERO
475	.$a5a	LDX NUMFLAG
476	.$a5d	BEQ STILLZERO
477	.$a5f	ORA #$30
478	.$a61	JMP CHROUT
479	.$a64	STILLZERO
480	.$a64	RTS
483	.$a65	CONVPOSINT
484	.$a65	JSR INT2BCD
485	.$a68	LDX #0
486	.$a6a	STX NUMFLAG
487	.$a6d	AND #$0F
488	.$a6f	JSR NUMBEROUT
489	.$a72	LDA BCD+1
490	.$a75	LSR
491	.$a76	LSR
492	.$a77	LSR
493	.$a78	LSR
494	.$a79	JSR NUMBEROUT
495	.$a7c	LDA BCD+1
496	.$a7f	AND #$0F
497	.$a81	TAY
498	.$a82	JSR NUMBEROUT
499	.$a85	LDA BCD
500	.$a88	LSR
501	.$a89	LSR
502	.$a8a	LSR
503	.$a8b	LSR
504	.$a8c	JSR NUMBEROUT
505	.$a8f	LDA BCD
506	.$a92	AND #$0F
507	.$a94	JSR NUMBEROUT
508	.$a97	RTS
511	.$a98	INT2BCD
512	.$a98	SED
513	.$a99	LDA #0
514	.$a9b	STA BCD
515	.$a9e	STA BCD+1
516	.$aa1	STA BCD+2
517	.$aa4	ASL TMP_ZP
518	.$aa6	ROL TMP_ZP+1
519	.$aa8	LDA BCD
520	.$aab	ADC BCD
521	.$aae	STA BCD
522	.$ab1	ASL TMP_ZP
523	.$ab3	ROL TMP_ZP+1
524	.$ab5	ADC BCD
525	.$ab8	STA BCD
526	.$abb	ASL TMP_ZP
527	.$abd	ROL TMP_ZP+1
528	.$abf	ADC BCD
529	.$ac2	STA BCD
530	.$ac5	ASL TMP_ZP
531	.$ac7	ROL TMP_ZP+1
532	.$ac9	ADC BCD
533	.$acc	STA BCD
534	.$acf	ASL TMP_ZP
535	.$ad1	ROL TMP_ZP+1
536	.$ad3	ADC BCD
537	.$ad6	STA BCD
538	.$ad9	ASL TMP_ZP
539	.$adb	ROL TMP_ZP+1
540	.$add	ADC BCD
541	.$ae0	STA BCD
542	.$ae3	LDX #7
543	.$ae5	BCDBIT1
544	.$ae5	ASL TMP_ZP
545	.$ae7	ROL TMP_ZP+1
546	.$ae9	LDA BCD
547	.$aec	ADC BCD
548	.$aef	STA BCD
549	.$af2	LDA BCD+1
550	.$af5	ADC BCD+1
551	.$af8	STA BCD+1
552	.$afb	DEX
553	.$afc	BNE BCDBIT1
554	.$afe	LDX #3
555	.$b00	BCDBIT2
556	.$b00	ASL TMP_ZP
557	.$b02	ROL TMP_ZP+1
558	.$b04	LDA BCD
559	.$b07	ADC BCD
560	.$b0a	STA BCD
561	.$b0d	LDA BCD+1
562	.$b10	ADC BCD+1
563	.$b13	STA BCD+1
564	.$b16	LDA BCD+2
565	.$b19	ADC BCD+2
566	.$b1c	STA BCD+2
567	.$b1f	DEX
568	.$b20	BNE BCDBIT2
569	.$b22	CLD
570	.$b23	RTS
571	.$b24	BCD
572	.$b24	.WORD 0 0
573	.$b28	NUMFLAG
574	.$b28	.BYTE 0
577	.$b29	TABOUT  JSR REROUTE
578	.$b2c	LDA CMD_NUM
579	.$b2f	BEQ NORMALTABOUT  
580	.$b31	CMP #3
581	.$b33	BEQ NORMALTABOUT2  
582	.$b35	JMP TABOUTCHANNEL2
583	.$b38	NORMALTABOUT2
584	.$b38	JSR CLRCHNEW
585	.$b3b	NORMALTABOUT
586	.$b3b	SEC
587	.$b3c	JSR CRSRPOS
588	.$b3f	TYA
589	.$b40	SEC
590	.$b41	TABSUB   SBC #$0A
591	.$b43	BCS TABSUB
592	.$b45	EOR #$FF
593	.$b47	ADC #$01
594	.$b49	TAX
595	.$b4a	INX
596	.$b4b	TABLOOP  DEX
597	.$b4c	BNE TABRIGHT
598	.$b4e	RTS
599	.$b4f	TABRIGHT JSR CRSRRIGHT
600	.$b52	JMP TABLOOP
603	.$b55	ADJUSTSTACK LDA FORSTACKP 
604	.$b58	STA TMP_ZP
605	.$b5a	LDA FORSTACKP+1
606	.$b5d	STA TMP_ZP+1
607	.$b5f	ADSEARCHFOR LDA TMP_ZP
608	.$b61	CMP #<FORSTACK
609	.$b63	BNE ADJUST2
610	.$b65	LDA TMP_ZP+1
611	.$b67	CMP #>FORSTACK
612	.$b69	BNE ADJUST2
613	.$b6b	RTS    
614	.$b6c	ADJUST2  LDA TMP_ZP
615	.$b6e	SEC
616	.$b6f	SBC #2
617	.$b71	STA TMP_ZP
618	.$b73	BCS ADNOPV1N1
619	.$b75	DEC TMP_ZP+1
620	.$b77	ADNOPV1N1 LDY #0
621	.$b79	LDA (TMP_ZP),Y
622	.$b7b	BNE ADNOGOSUB
623	.$b7d	RTS    
624	.$b7e	ADNOGOSUB
625	.$b7e	INY
626	.$b7f	LDA TMP_ZP
627	.$b81	SEC
628	.$b82	SBC (TMP_ZP),Y
629	.$b84	STA TMP_ZP
630	.$b86	BCS ADNOPV1N2
631	.$b88	DEC TMP_ZP+1
632	.$b8a	ADNOPV1N2 DEY
633	.$b8b	LDA A_REG
634	.$b8e	ADCMPFOR CMP (TMP_ZP),Y
635	.$b90	BNE ADSEARCHFOR
636	.$b92	LDA A_REG+1
637	.$b95	INY
638	.$b96	CMP (TMP_ZP),Y
639	.$b98	BEQ ADFOUNDFOR
640	.$b9a	JMP ADSEARCHFOR
641	.$b9d	ADLOW0  LDX A_REG+1
642	.$ba0	BEQ ADFOUNDFOR
643	.$ba2	BNE ADCMPFOR
644	.$ba4	ADFOUNDFOR LDA TMP_ZP  
645	.$ba6	STA FORSTACKP
646	.$ba9	LDA TMP_ZP+1
647	.$bab	STA FORSTACKP+1
648	.$bae	RTS
651	.$baf	INITFOR  JSR ADJUSTSTACK
652	.$bb2	LDA FORSTACKP
653	.$bb5	STA TMP_ZP
654	.$bb7	LDA FORSTACKP+1
655	.$bba	STA TMP_ZP+1
656	.$bbc	LDY #0
657	.$bbe	LDA A_REG
658	.$bc1	STA (TMP_ZP),Y
659	.$bc3	INY
660	.$bc4	LDA A_REG+1
661	.$bc7	STA (TMP_ZP),Y
662	.$bc9	INY
663	.$bca	LDA JUMP_TARGET
664	.$bcc	STA (TMP_ZP),Y
665	.$bce	INY
666	.$bcf	LDA JUMP_TARGET+1
667	.$bd1	STA (TMP_ZP),Y
668	.$bd3	INY
669	.$bd4	STY TMP3_ZP
670	.$bd6	JSR INCTMPZP
671	.$bd9	JSR POPREAL
672	.$bdc	LDX TMP_ZP
673	.$bde	LDY TMP_ZP+1
675	.$be0	JSR FACMEM
676	.$be3	JSR SGNFAC
677	.$be6	STA TMP_FLAG
678	.$be9	LDY #5
679	.$beb	STY TMP3_ZP
680	.$bed	JSR INCTMPZP
681	.$bf0	JSR POPREAL
682	.$bf3	LDX TMP_ZP
683	.$bf5	LDY TMP_ZP+1
685	.$bf7	JSR FACMEM
686	.$bfa	LDY #5
687	.$bfc	STY TMP3_ZP
688	.$bfe	JSR INCTMPZP
689	.$c01	LDY #0
690	.$c03	LDA TMP_FLAG
691	.$c06	STA (TMP_ZP),Y
692	.$c08	INY
693	.$c09	LDA #1
694	.$c0b	STA (TMP_ZP),Y
695	.$c0d	INY
696	.$c0e	LDA #15
697	.$c10	STA (TMP_ZP),Y
698	.$c12	LDY #3
699	.$c14	STY TMP3_ZP
700	.$c16	JSR INCTMPZP
701	.$c19	LDA TMP_ZP
702	.$c1b	STA FORSTACKP
703	.$c1e	LDA TMP_ZP+1
704	.$c20	STA FORSTACKP+1
705	.$c23	RTS
708	.$c24	NEXT  LDA FORSTACKP
709	.$c27	STA TMP_ZP
710	.$c29	LDA FORSTACKP+1
711	.$c2c	STA TMP_ZP+1
712	.$c2e	SEARCHFOR LDA TMP_ZP+1
713	.$c30	STA TMP3_REG+1
714	.$c33	LDA TMP_ZP
715	.$c35	STA TMP3_REG
716	.$c38	SEC
717	.$c39	SBC #2
718	.$c3b	STA TMP_ZP
719	.$c3d	BCS NOPV1N1
720	.$c3f	DEC TMP_ZP+1
721	.$c41	NOPV1N1  LDY #0
722	.$c43	LDA (TMP_ZP),Y
723	.$c45	BNE NOGOSUB
724	.$c47	JMP NEXTWOFOR
725	.$c4a	NOGOSUB
726	.$c4a	INY
727	.$c4b	LDA TMP_ZP
728	.$c4d	SEC
729	.$c4e	SBC (TMP_ZP),Y
730	.$c50	STA TMP_ZP
731	.$c52	BCS NOPV1N2
732	.$c54	DEC TMP_ZP+1
733	.$c56	NOPV1N2  DEY
734	.$c57	LDA A_REG
735	.$c5a	BEQ LOW0
736	.$c5c	CMPFOR  CMP (TMP_ZP),Y
737	.$c5e	BNE SEARCHFOR
738	.$c60	LDA A_REG+1
739	.$c63	INY
740	.$c64	CMP (TMP_ZP),Y
741	.$c66	BEQ FOUNDFOR
742	.$c68	JMP SEARCHFOR
743	.$c6b	LOW0  LDX A_REG+1
744	.$c6e	BEQ FOUNDFOR
745	.$c70	BNE CMPFOR
746	.$c72	FOUNDFOR LDA TMP_ZP
747	.$c74	STA TMP2_REG
748	.$c77	LDA TMP_ZP+1
749	.$c79	STA TMP2_REG+1
750	.$c7c	VARREAL
751	.$c7c	LDY #0
752	.$c7e	STY A_REG+1 
753	.$c81	LDA (TMP_ZP),Y
754	.$c83	TAX
755	.$c84	INY
756	.$c85	LDA (TMP_ZP),Y
757	.$c87	TAY
758	.$c88	TXA
759	.$c89	JSR REALFAC
760	.$c8c	CALCNEXT LDA TMP_ZP
761	.$c8e	CLC
762	.$c8f	ADC #4
763	.$c91	STA TMP_ZP
764	.$c93	BCC NOPV2IN
765	.$c95	INC TMP_ZP+1
766	.$c97	NOPV2IN  STA TMP_REG
767	.$c99	LDY TMP_ZP+1
768	.$c9b	STY TMP_REG+1
769	.$c9d	JSR FASTFADDMEM
771	.$ca0	LDA TMP2_REG
772	.$ca3	STA TMP_ZP
773	.$ca5	LDA TMP2_REG+1
774	.$ca8	STA TMP_ZP+1
775	.$caa	STOREREAL
776	.$caa	LDY #0
777	.$cac	LDA (TMP_ZP),Y
778	.$cae	TAX
779	.$caf	INY
780	.$cb0	LDA (TMP_ZP),Y
781	.$cb2	TAY
782	.$cb3	JSR FACMEM 
783	.$cb6	CMPFORXX LDA #5
784	.$cb8	STA TMP3_ZP
785	.$cba	LDA TMP_REG
786	.$cbc	CLC
787	.$cbd	ADC #5
788	.$cbf	STA TMP_REG
789	.$cc1	BCC NOPV3
790	.$cc3	INC TMP_REG+1
791	.$cc5	NOPV3  LDY TMP_REG+1
792	.$cc7	JSR CMPFAC  
793	.$cca	BEQ LOOPING
794	.$ccc	PHA
795	.$ccd	LDY #14
796	.$ccf	LDA (TMP_ZP),Y
797	.$cd1	BEQ STEPZERO
798	.$cd3	ROL
799	.$cd4	BCC STEPPOS
800	.$cd6	STEPNEG  PLA
801	.$cd7	ROL
802	.$cd8	BCC LOOPING
803	.$cda	BCS EXITLOOP
804	.$cdc	STEPPOS  PLA
805	.$cdd	ROL
806	.$cde	BCC EXITLOOP
807	.$ce0	LOOPING  LDA TMP3_REG
808	.$ce3	STA FORSTACKP
809	.$ce6	LDA TMP3_REG+1
810	.$ce9	STA FORSTACKP+1
811	.$cec	LDA TMP2_REG
812	.$cef	CLC
813	.$cf0	ADC #2
814	.$cf2	STA TMP2_REG
815	.$cf5	BCC NOPV4IN
816	.$cf7	INC TMP2_REG+1
817	.$cfa	NOPV4IN  LDY #0
818	.$cfc	STY A_REG
819	.$cff	STA TMP_ZP
820	.$d01	LDA TMP2_REG+1
821	.$d04	STA TMP_ZP+1
822	.$d06	LDA (TMP_ZP),Y
823	.$d08	STA JUMP_TARGET
824	.$d0a	INY
825	.$d0b	LDA (TMP_ZP),Y
826	.$d0d	STA JUMP_TARGET+1
827	.$d0f	RTS
828	.$d10	STEPZERO PLA
829	.$d11	JMP LOOPING
830	.$d14	EXITLOOP LDA TMP2_REG
831	.$d17	STA FORSTACKP
832	.$d1a	LDA TMP2_REG+1
833	.$d1d	STA FORSTACKP+1
834	.$d20	LDA #1
835	.$d22	STA A_REG
836	.$d25	RTS
839	.$d26	REALFACPUSH STA TMP_ZP
840	.$d28	STY TMP_ZP+1
841	.$d2a	LDX FPSTACKP
842	.$d2d	LDY FPSTACKP+1
843	.$d30	STX TMP2_ZP
844	.$d32	STY TMP2_ZP+1
845	.$d34	LDY #0
846	.$d36	LDA (TMP_ZP),Y
847	.$d38	STA (TMP2_ZP),Y
848	.$d3a	INY
849	.$d3b	LDA (TMP_ZP),Y
850	.$d3d	STA (TMP2_ZP),Y
851	.$d3f	INY
852	.$d40	LDA (TMP_ZP),Y
853	.$d42	STA (TMP2_ZP),Y
854	.$d44	INY
855	.$d45	LDA (TMP_ZP),Y
856	.$d47	STA (TMP2_ZP),Y
857	.$d49	INY
858	.$d4a	LDA (TMP_ZP),Y
859	.$d4c	STA (TMP2_ZP),Y
860	.$d4e	TXA    
861	.$d4f	CLC
862	.$d50	ADC #5
863	.$d52	STA FPSTACKP
864	.$d55	BCC NOPVRFPXX
865	.$d57	INC FPSTACKP+1
866	.$d5a	NOPVRFPXX RTS
869	.$d5b	POPREAL  LDA FPSTACKP
870	.$d5e	SEC
871	.$d5f	SBC #5
872	.$d61	STA FPSTACKP
873	.$d64	BCS NOPVPR
874	.$d66	DEC FPSTACKP+1
875	.$d69	NOPVPR  LDA FPSTACKP
876	.$d6c	LDY FPSTACKP+1
877	.$d6f	JMP REALFAC
880	.$d72	INCTMPZP LDA TMP_ZP
881	.$d74	CLC
882	.$d75	ADC TMP3_ZP
883	.$d77	STA TMP_ZP
884	.$d79	BCC NOPV2
885	.$d7b	INC TMP_ZP+1
886	.$d7d	NOPV2  RTS
890	.$d7e	FACWORD
891	.$d7e	LDA FACEXP   
892	.$d80	BNE DOFACWORD
893	.$d82	STA FACSGN   
894	.$d84	DOFACWORD:
895	.$d84	JMP XFACWORD
899	.$d87	INITOUTCHANNEL
900	.$d87	LDA CHLOCKFLAG
901	.$d8a	BEQ INITOUT2
902	.$d8c	CMP #$FF
903	.$d8e	BNE SKIPINITCH
904	.$d90	INITOUT2
905	.$d90	LDA #<C_REG
906	.$d92	LDY #>C_REG
907	.$d94	JSR REALFAC
908	.$d97	JSR FACWORD
909	.$d9a	TYA
910	.$d9b	TAX
911	.$d9c	CPX CMD_NUM
912	.$d9f	BNE CMDNEQUAL
913	.$da1	LDY #0
914	.$da3	STY CMD_NUM   
915	.$da6	CMDNEQUAL STA CHANNEL
916	.$da9	STA CHLOCKFLAG
917	.$dac	JMP CHKOUT
918	.$daf	SKIPINITCH
919	.$daf	RTS
922	.$db0	CLRCHNEW
923	.$db0	LDA CHLOCKFLAG
924	.$db3	BNE SKIPCLRCH
925	.$db5	JMP CLRCH
926	.$db8	SKIPCLRCH
927	.$db8	RTS
930	.$db9	TABOUTCHANNEL
931	.$db9	JSR INITOUTCHANNEL
932	.$dbc	LDA CHANNEL
933	.$dbf	CMP #3  
934	.$dc1	BEQ TABOUTSCREEN
935	.$dc3	TABOUTCHANNEL2
936	.$dc3	LDA IOCHANNEL
937	.$dc5	STA STORE1
938	.$dc8	LDA #1
939	.$dca	STA IOCHANNEL  
940	.$dcc	LDX #10
941	.$dce	JMP EXITCHANNEL
942	.$dd1	TABOUTSCREEN
943	.$dd1	JSR CLRCHNEW
944	.$dd4	JMP TABOUT
947	.$dd7	EXITCHANNEL CLC
948	.$dd8	JSR TABSPC
949	.$ddb	JSR CLRCHNEW
950	.$dde	LDA STORE1
951	.$de1	STA IOCHANNEL
952	.$de3	RTS
955	.$de4	SUPERFIINX INY
956	.$de5	BNE SFIINXNOV
957	.$de7	CLC
958	.$de8	ADC #$1
959	.$dea	CMP #$80
960	.$dec	BNE SFIINXNOV
961	.$dee	JMP ILLEGALQUANTITY
962	.$df1	SFIINXNOV RTS
965	.$df2	NEXTWOFOR
969	.$df2	LDX #$0A
970	.$df4	JMP ERRALL
973	.$df7	ILLEGALQUANTITY
977	.$df7	JMP ERRIQ
1091	.$dfa	FASTFADDMEM
1092	.$dfa	JSR MEMARG
1093	.$dfd	FASTFADDARG
1094	.$dfd	BNE FADDRET2     
1095	.$dff	JMP ARGFAC
1096	.$e02	FADDRET2 LDA ARGEXP
1097	.$e04	BNE FADDRET1     
1098	.$e06	RTS
1099	.$e07	FADDRET1 SEC
1100	.$e08	SBC FACEXP
1101	.$e0a	BEQ FFADD_EXPEQ     
1102	.$e0c	BCC FFADD_SHFARG1   
1106	.$e0e	LDY ARGEXP
1107	.$e10	STY FACEXP
1108	.$e12	LDY ARGSGN
1109	.$e14	STY FACSGN
1110	.$e16	LDX #0
1111	.$e18	STX OLDOV        
1112	.$e1a	LDX #FAC         
1114	.$e1c	SEC
1115	.$e1d	SBC #$08
1116	.$e1f	BMI FFADD_SHFFAC2
1118	.$e21	FFADD_SHFFAC1
1119	.$e21	LDY FACLO        
1120	.$e23	STY FACOV
1121	.$e25	LDY FACMO        
1122	.$e27	STY FACMO+1
1123	.$e29	LDY FACMOH       
1124	.$e2b	STY FACMOH+1
1125	.$e2d	LDY FACHO        
1126	.$e2f	STY FACHO+1
1127	.$e31	LDY #0
1128	.$e33	STY FACHO        
1129	.$e35	SBC #$08         
1130	.$e37	BPL FFADD_SHFFAC1   
1131	.$e39	FFADD_SHFFAC2
1132	.$e39	ADC #$08         
1133	.$e3b	BEQ FFADD_SHFFAC4   
1134	.$e3d	TAY
1135	.$e3e	LDA FACOV
1136	.$e40	FFADD_SHFFAC3
1137	.$e40	LSR FACHO        
1138	.$e42	ROR FACMOH       
1139	.$e44	ROR FACMO        
1140	.$e46	ROR FACLO        
1141	.$e48	ROR              
1142	.$e49	DEY
1143	.$e4a	BNE FFADD_SHFFAC3
1144	.$e4c	JMP FFADD_MANADD2   
1145	.$e4f	FFADD_SHFFAC4
1146	.$e4f	LDA FACOV        
1147	.$e51	JMP FFADD_MANADD2
1148	.$e54	FFADD_EXPEQ
1149	.$e54	LDX FACOV
1150	.$e56	STX OLDOV
1153	.$e58	JMP FFADD_MANADD1
1154	.$e5b	FFADD_SHFARG2
1155	.$e5b	LDA FACOV        
1156	.$e5d	JMP FFADD_MANADD1
1157	.$e60	FFADD_SHFARG1
1158	.$e60	LDX FACOV
1159	.$e62	STX OLDOV        
1160	.$e64	LDX #$00         
1163	.$e66	ADC #$08
1164	.$e68	BPL FFADD_SHFARG6   
1165	.$e6a	FFADD_SHFARG3
1166	.$e6a	LDX ARGLO        
1167	.$e6c	LDY ARGMO        
1168	.$e6e	STY ARGMO+1
1169	.$e70	LDY ARGMOH       
1170	.$e72	STY ARGMOH+1
1171	.$e74	LDY ARGHO        
1172	.$e76	STY ARGHO+1
1173	.$e78	LDY #0
1174	.$e7a	STY ARGHO        
1175	.$e7c	FFADD_SHFARG4
1176	.$e7c	ADC #$08
1177	.$e7e	BMI FFADD_SHFARG3
1178	.$e80	BEQ FFADD_SHFARG3
1179	.$e82	FFADD_SHFARG6
1180	.$e82	SBC #$08
1181	.$e84	BEQ FFADD_SHFARG2   
1182	.$e86	TAY
1183	.$e87	TXA              
1184	.$e88	FFADD_SHFARG5
1185	.$e88	LSR ARGHO
1186	.$e8a	ROR ARGMOH
1187	.$e8c	ROR ARGMO
1188	.$e8e	ROR ARGLO
1189	.$e90	ROR           
1190	.$e91	INY
1191	.$e92	BNE FFADD_SHFARG5
1192	.$e94	FFADD_MANADD1
1193	.$e94	LDX #ARGEXP      
1194	.$e96	FFADD_MANADD2
1195	.$e96	BIT ARISGN
1196	.$e98	BMI FFADD_MANSUB1   
1197	.$e9a	CLC
1198	.$e9b	ADC OLDOV
1199	.$e9d	STA FACOV
1200	.$e9f	LDA FACLO
1201	.$ea1	ADC ARGLO
1202	.$ea3	STA FACLO
1203	.$ea5	LDA FACMO
1204	.$ea7	ADC ARGMO
1205	.$ea9	STA FACMO
1206	.$eab	LDA FACMOH
1207	.$ead	ADC ARGMOH
1208	.$eaf	STA FACMOH
1209	.$eb1	LDA FACHO
1210	.$eb3	ADC ARGHO
1211	.$eb5	STA FACHO
1212	.$eb7	BCC FFADD_RNDRTS
1213	.$eb9	INC FACEXP
1214	.$ebb	BEQ FFADD_OVERR
1216	.$ebd	ROR FACHO
1217	.$ebf	ROR FACMOH
1218	.$ec1	ROR FACMO
1219	.$ec3	ROR FACLO
1220	.$ec5	ROR FACOV
1221	.$ec7	FFADD_RNDRTS
1222	.$ec7	RTS
1223	.$ec8	FFADD_OVERR
1224	.$ec8	JMP ILLEGALQUANTITY
1225	.$ecb	FFADD_MANSUB1
1226	.$ecb	LDY #FACEXP
1227	.$ecd	CPX #ARGEXP
1228	.$ecf	BEQ FFADD_MANSUB2
1229	.$ed1	LDY #ARGEXP
1230	.$ed3	FFADD_MANSUB2
1231	.$ed3	SEC              
1232	.$ed4	EOR #$FF
1233	.$ed6	ADC OLDOV
1234	.$ed8	STA FACOV
1235	.$eda	LDA 4,Y
1236	.$edd	SBC 4,X
1237	.$edf	STA FACLO
1238	.$ee1	LDA 3,Y
1239	.$ee4	SBC 3,X
1240	.$ee6	STA FACMO
1241	.$ee8	LDA 2,Y
1242	.$eeb	SBC 2,X
1243	.$eed	STA FACMOH
1244	.$eef	LDA 1,Y
1245	.$ef2	SBC 1,X
1246	.$ef4	STA FACHO
1247	.$ef6	BCS FCNORMAL
1248	.$ef8	LDA FACSGN
1249	.$efa	EOR #$FF
1250	.$efc	STA FACSGN
1251	.$efe	LDA FACHO
1252	.$f00	EOR #$FF
1253	.$f02	STA FACHO
1254	.$f04	LDA FACMOH
1255	.$f06	EOR #$FF
1256	.$f08	STA FACMOH
1257	.$f0a	LDA FACMO
1258	.$f0c	EOR #$FF
1259	.$f0e	STA FACMO
1260	.$f10	LDA FACLO
1261	.$f12	EOR #$FF
1262	.$f14	STA FACLO
1263	.$f16	LDA FACOV
1264	.$f18	EOR #$FF
1265	.$f1a	CLC
1266	.$f1b	ADC #1
1267	.$f1d	STA FACOV
1268	.$f1f	BNE FCNORMAL
1269	.$f21	INC FACLO
1270	.$f23	BNE FCNORMAL
1271	.$f25	INC FACMO
1272	.$f27	BNE FCNORMAL
1273	.$f29	INC FACMOH
1274	.$f2b	BNE FCNORMAL
1275	.$f2d	INC FACHO
1276	.$f2f	FCNORMAL   BIT FACHO
1277	.$f31	BMI FFADD_RET       
1278	.$f33	LDA #0           
1279	.$f35	CLC
1280	.$f36	FFADD_NORM3
1281	.$f36	LDX FACHO
1282	.$f38	BNE FFADD_NORM1
1283	.$f3a	LDX FACHO+1
1284	.$f3c	STX FACHO
1285	.$f3e	LDX FACMOH+1
1286	.$f40	STX FACMOH
1287	.$f42	LDX FACMO+1
1288	.$f44	STX FACMO
1289	.$f46	LDX FACOV
1290	.$f48	STX FACLO
1291	.$f4a	LDX #0
1292	.$f4c	STX FACOV
1293	.$f4e	ADC #$08
1294	.$f50	CMP #$20
1295	.$f52	BNE FFADD_NORM3
1296	.$f54	JMP FFADD_ZEROFAC
1297	.$f57	FFADD_NORM2
1298	.$f57	CLC
1299	.$f58	ADC #1
1300	.$f5a	ASL FACOV
1301	.$f5c	ROL FACLO
1302	.$f5e	ROL FACMO
1303	.$f60	ROL FACMOH
1304	.$f62	ROL FACHO
1305	.$f64	FFADD_NORM1
1306	.$f64	BPL FFADD_NORM2     
1307	.$f66	SEC
1308	.$f67	SBC FACEXP
1309	.$f69	BCS FFADD_ZEROFAC
1310	.$f6b	EOR #$FF
1311	.$f6d	CLC
1312	.$f6e	ADC #1
1313	.$f70	STA FACEXP
1314	.$f72	FFADD_RET   RTS
1315	.$f73	FFADD_ZEROFAC
1316	.$f73	LDX #0
1317	.$f75	STX FACEXP
1318	.$f77	STX FACSGN
1319	.$f79	RTS
1322	.$f7a	INITVARS
1323	.$f7a	JSR INITSTRVARS
1324	.$f7d	LDA #0
1325	.$f7f	LDY #4
1326	.$f81	REALINITLOOP0:
1327	.$f81	STA VAR_I,Y
1328	.$f84	DEY
1329	.$f85	BMI REALLOOPEXIT0
1330	.$f87	JMP REALINITLOOP0
1331	.$f8a	REALLOOPEXIT0:
1332	.$f8a	STA VAR_A%
1333	.$f8d	STA VAR_A%+1
1334	.$f90	STA VAR_B%
1335	.$f93	STA VAR_B%+1
1336	.$f96	RTS
1340	.$f97	CONSTANTS
1349	.$f97	CONST_2R .REAL 10.0
1352	.$f9c	CONST_3R .REAL 1.0
1358	.$fa1	DATAS
1359	.$fa1	.BYTE $FF
1361	.$fa2	CONSTANTS_END
1364	.$fa2	VARIABLES
1366	.$fa2	VAR_A% .WORD 0
1368	.$fa4	VAR_I .REAL 0.0
1370	.$fa9	VAR_B% .WORD 0
1371	.$fab	STRINGVARS_START
1373	.$fab	VAR_TI$ .WORD EMPTYSTR
1374	.$fad	STRINGVARS_END
1375	.$fad	STRINGARRAYS_START
1376	.$fad	STRINGARRAYS_END
1377	.$fad	VARIABLES_END
1379	.$fad	Y_REG .REAL 0.0
1380	.$fb2	C_REG .REAL 0.0
1381	.$fb7	D_REG .REAL 0.0
1382	.$fbc	E_REG .REAL 0.0
1383	.$fc1	F_REG .REAL 0.0
1384	.$fc6	A_REG .WORD 0
1385	.$fc8	B_REG .WORD 0
1386	.$fca	CMD_NUM .BYTE 0
1387	.$fcb	CHANNEL .BYTE 0
1388	.$fcc	SP_SAVE .BYTE 0
1389	.$fcd	TMP2_REG .WORD 0
1390	.$fcf	TMP3_REG .WORD 0
1391	.$fd1	TMP4_REG .WORD 0
1392	.$fd3	AS_TMP .WORD 0
1393	.$fd5	BPOINTER_TMP .WORD 0
1394	.$fd7	BASICTEXTP .BYTE 0
1395	.$fd8	STORE1 .WORD 0
1396	.$fda	STORE2 .WORD 0
1397	.$fdc	STORE3 .WORD 0
1398	.$fde	STORE4 .WORD 0
1399	.$fe0	GCSTART .WORD 0
1400	.$fe2	GCLEN .WORD 0
1401	.$fe4	GCWORK .WORD 0
1402	.$fe6	INPUTLENGTH .BYTE 0
1403	.$fe7	TMP_FREG .REAL 0
1404	.$fec	TMP2_FREG .REAL 0
1405	.$ff1	TMP_FLAG .BYTE 0
1406	.$ff2	INT_FLAG .BYTE 0
1407	.$ff3	REAL_CONST_ONE .REAL 1.0
1408	.$ff8	REAL_CONST_ZERO .REAL 0.0
1409	.$ffd	REAL_CONST_MINUS_ONE .REAL -1.0
1410	.$1002	CHLOCKFLAG .BYTE 0
1411	.$1003	EMPTYSTR .BYTE 0
1412	.$1004	FPSTACKP .WORD FPSTACK
1413	.$1006	FORSTACKP .WORD FORSTACK
1414	.$1008	DATASP .WORD DATAS
1415	.$100a	LASTVAR .WORD 0
1416	.$100c	LASTVARP .WORD 0
1417	.$100e	HIGHP .WORD STRBUF
1418	.$1010	STRBUFP .WORD STRBUF
1419	.$1012	ENDSTRBUF .WORD 0
1420	.$1014	INPUTQUEUEP .BYTE 0
1421	.$1015	PROGRAMEND
1422	.$1015	INPUTQUEUE .ARRAY $0F
1423	.$1024	FPSTACK .ARRAY 100
1424	.$1088	FORSTACK .ARRAY 340
1425	.$11dc	STRBUF .BYTE 0
