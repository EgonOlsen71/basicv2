117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
128	.$81f	LDY #8
129	.$821	LDA #128
130	.$823	STY VAR_P%
131	.$826	STA VAR_P%+1
137	.$829	LINE_20:
139	.$829	LDY VAR_P%
140	.$82c	LDA VAR_P%+1
141	.$82f	JSR SUPERFIDEX
143	.$832	STY VAR_P%
144	.$835	STA VAR_P%+1
146	.$838	LINE_30:
148	.$838	LDY VAR_P%
149	.$83b	STY TMP_ZP
150	.$83d	LDA VAR_P%+1
151	.$840	STA TMP_ZP+1
152	.$842	JSR INTOUTBRKFAST
157	.$845	LINE_40:
159	.$845	JMP LINE_20
160	.$848	JSR END
161	.$84b	RTS
164	.$84c	END   LDX SP_SAVE
165	.$84f	TXS
172	.$850	RTS
175	.$851	START  LDA ENDSTRBUF+1
176	.$854	BNE ENDGIVEN
177	.$856	LDA BASICEND
178	.$858	STA ENDSTRBUF
179	.$85b	LDA BASICEND+1
180	.$85d	STA ENDSTRBUF+1
181	.$860	ENDGIVEN LDA #<FPSTACK
182	.$862	LDY #>FPSTACK
183	.$864	STA FPSTACKP
184	.$867	STY FPSTACKP+1
185	.$86a	LDA #<FORSTACK
186	.$86c	LDY #>FORSTACK
187	.$86e	STA FORSTACKP
188	.$871	STY FORSTACKP+1
189	.$874	LDA #<STRBUF
190	.$876	LDY #>STRBUF
191	.$878	STA STRBUFP
192	.$87b	STY STRBUFP+1
193	.$87e	STA HIGHP
194	.$881	STY HIGHP+1
195	.$884	LDA #0
196	.$886	STA CHLOCKFLAG
197	.$889	STA LASTVAR
198	.$88c	STA LASTVAR+1
199	.$88f	JSR INITVARS
200	.$892	LDA #0
201	.$894	STA CMD_NUM
202	.$897	STA CHANNEL
203	.$89a	TAY
204	.$89b	TAX
208	.$89c	STA KEYNDX
214	.$89e	JSR RESTORE
215	.$8a1	CLC
219	.$8a2	RTS
222	.$8a3	INITNARRAY
223	.$8a3	STA TMP_ZP
224	.$8a5	STY TMP_ZP+1
225	.$8a7	LDY #0
226	.$8a9	TYA
227	.$8aa	NINITLOOP STA (TMP_ZP),Y
228	.$8ac	INC TMP_ZP
229	.$8ae	BNE NLOOPNOV
230	.$8b0	INC TMP_ZP+1
231	.$8b2	NLOOPNOV LDX TMP2_ZP
232	.$8b4	BNE NLOOPNOV2
233	.$8b6	DEC TMP2_ZP+1
234	.$8b8	NLOOPNOV2 DEC TMP2_ZP
235	.$8ba	BNE NINITLOOP
236	.$8bc	LDX TMP2_ZP+1
237	.$8be	BNE NINITLOOP
238	.$8c0	RTS
241	.$8c1	INITSTRARRAY
242	.$8c1	STA TMP_ZP
243	.$8c3	STY TMP_ZP+1
244	.$8c5	SINITLOOP LDY #0
245	.$8c7	LDA #<EMPTYSTR
246	.$8c9	STA (TMP_ZP),Y
247	.$8cb	LDA #>EMPTYSTR
248	.$8cd	INY
249	.$8ce	STA (TMP_ZP),Y
250	.$8d0	CLC
251	.$8d1	LDA TMP_ZP
252	.$8d3	ADC #2
253	.$8d5	STA TMP_ZP
254	.$8d7	BCC SLOOPNOV1
255	.$8d9	INC TMP_ZP+1
256	.$8db	SLOOPNOV1 SEC
257	.$8dc	LDA TMP2_ZP
258	.$8de	SBC #2
259	.$8e0	STA TMP2_ZP
260	.$8e2	BCS SLOOPNOV2
261	.$8e4	DEC TMP2_ZP+1
262	.$8e6	SLOOPNOV2 LDA TMP2_ZP
263	.$8e8	BNE SINITLOOP
264	.$8ea	LDA TMP2_ZP+1
265	.$8ec	BNE SINITLOOP
266	.$8ee	RTS
269	.$8ef	INITSPARAMS STA TMP3_ZP
270	.$8f1	STY TMP3_ZP+1
271	.$8f3	SEC
272	.$8f4	SBC #2
273	.$8f6	STA TMP_ZP
274	.$8f8	TYA
275	.$8f9	SBC #0
276	.$8fb	STA TMP_ZP+1
277	.$8fd	LDY #0
278	.$8ff	LDA (TMP_ZP),Y
279	.$901	STA TMP2_ZP
280	.$903	INY
281	.$904	LDA (TMP_ZP),Y
282	.$906	STA TMP2_ZP+1
283	.$908	LDA TMP3_ZP
284	.$90a	LDY TMP3_ZP+1
285	.$90c	RTS
288	.$90d	INITSTRVARS LDA #<STRINGVARS_START  
289	.$90f	LDY #>STRINGVARS_START
290	.$911	CMP #<STRINGVARS_END
291	.$913	BNE INITIT1
292	.$915	CPY #>STRINGVARS_END
293	.$917	BNE INITIT1
294	.$919	JMP INITSA2     
295	.$91c	INITIT1  STA TMP_ZP
296	.$91e	STY TMP_ZP+1
297	.$920	LDY #0
298	.$922	INITSTRLOOP LDA #<EMPTYSTR
299	.$924	STA (TMP_ZP),Y
300	.$926	INY
301	.$927	LDA #>EMPTYSTR
302	.$929	STA (TMP_ZP),Y
303	.$92b	DEY
304	.$92c	LDA TMP_ZP
305	.$92e	CLC
306	.$92f	ADC #2
307	.$931	STA TMP_ZP
308	.$933	LDA TMP_ZP+1
309	.$935	ADC #0
310	.$937	STA TMP_ZP+1
311	.$939	CMP #>STRINGVARS_END
312	.$93b	BNE INITSTRLOOP
313	.$93d	LDA TMP_ZP
314	.$93f	CMP #<STRINGVARS_END
315	.$941	BNE INITSTRLOOP
316	.$943	INITSA2  LDA #<STRINGARRAYS_START 
317	.$945	LDY #>STRINGARRAYS_START
318	.$947	CMP #<STRINGARRAYS_END
319	.$949	BNE ARRAYLOOP
320	.$94b	CPY #>STRINGARRAYS_END
321	.$94d	BNE ARRAYLOOP
322	.$94f	RTS       
323	.$950	ARRAYLOOP CLC
324	.$951	ADC #3
325	.$953	BCC ARRAYSKIP1
326	.$955	INY
327	.$956	ARRAYSKIP1 CPY #>STRINGARRAYS_END
328	.$958	BEQ ARRAYSC
329	.$95a	BCC ARRAYSKIP2
330	.$95c	JMP ARRAYQUIT
331	.$95f	ARRAYSC  CMP #<STRINGARRAYS_END
332	.$961	BCS ARRAYQUIT
333	.$963	ARRAYSKIP2 STA TMP_REG
334	.$965	STY TMP_REG+1
335	.$967	JSR INITSPARAMS
336	.$96a	LDA TMP_REG
337	.$96c	LDY TMP_REG+1
338	.$96e	JSR INITSTRARRAY
339	.$971	LDA TMP_ZP
340	.$973	LDY TMP_ZP+1
341	.$975	JMP ARRAYLOOP
342	.$978	ARRAYQUIT RTS
345	.$979	RESTORE  LDA #<DATAS
346	.$97b	LDY #>DATAS
347	.$97d	STA DATASP
348	.$980	STY DATASP+1
349	.$983	RTS
352	.$984	REROUTE  LDA CMD_NUM  
353	.$987	BEQ REROUTECMD
354	.$989	TAX
355	.$98a	STA CHANNEL
356	.$98d	JMP CHKOUT
357	.$990	REROUTECMD RTS
360	.$991	RESETROUTE LDA CMD_NUM  
361	.$994	BEQ RESETROUTECMD
362	.$996	JMP CLRCHNEW
363	.$999	RESETROUTECMD
364	.$999	RTS
367	.$99a	INTOUTBRKFAST
368	.$99a	JSR REROUTE
369	.$99d	JSR INTOUTFASTZ
370	.$9a0	LDA #$0D
371	.$9a2	JSR CHROUT
372	.$9a5	JMP RESETROUTE
375	.$9a8	INTOUTFASTZ LDX #32    
376	.$9aa	LDA TMP_ZP+1
377	.$9ac	BPL INTISPOS
378	.$9ae	CLC
379	.$9af	LDA TMP_ZP
380	.$9b1	EOR #$FF
381	.$9b3	ADC #1
382	.$9b5	STA TMP_ZP
383	.$9b7	LDA TMP_ZP+1
384	.$9b9	EOR #$FF
385	.$9bb	ADC #0
386	.$9bd	STA TMP_ZP+1
387	.$9bf	LDX #45    
388	.$9c1	INTISPOS
389	.$9c1	TXA
390	.$9c2	JSR CHROUT
391	.$9c5	JSR CONVPOSINT
392	.$9c8	LDA NUMFLAG
393	.$9cb	BNE ALLINTOUTDONE
394	.$9cd	LDA #48
395	.$9cf	JSR CHROUT
396	.$9d2	ALLINTOUTDONE
397	.$9d2	RTS
400	.$9d3	NUMBEROUT
401	.$9d3	BEQ NUMZERO
402	.$9d5	ORA #$30
403	.$9d7	STA NUMFLAG
404	.$9da	JMP CHROUT
405	.$9dd	NUMZERO
406	.$9dd	LDX NUMFLAG
407	.$9e0	BEQ STILLZERO
408	.$9e2	ORA #$30
409	.$9e4	JMP CHROUT
410	.$9e7	STILLZERO
411	.$9e7	RTS
414	.$9e8	CONVPOSINT
415	.$9e8	JSR INT2BCD
416	.$9eb	LDX #0
417	.$9ed	STX NUMFLAG
418	.$9f0	AND #$0F
419	.$9f2	JSR NUMBEROUT
420	.$9f5	LDA BCD+1
421	.$9f8	LSR
422	.$9f9	LSR
423	.$9fa	LSR
424	.$9fb	LSR
425	.$9fc	JSR NUMBEROUT
426	.$9ff	LDA BCD+1
427	.$a02	AND #$0F
428	.$a04	TAY
429	.$a05	JSR NUMBEROUT
430	.$a08	LDA BCD
431	.$a0b	LSR
432	.$a0c	LSR
433	.$a0d	LSR
434	.$a0e	LSR
435	.$a0f	JSR NUMBEROUT
436	.$a12	LDA BCD
437	.$a15	AND #$0F
438	.$a17	JSR NUMBEROUT
439	.$a1a	RTS
442	.$a1b	INT2BCD
443	.$a1b	SED
444	.$a1c	LDA #0
445	.$a1e	STA BCD
446	.$a21	STA BCD+1
447	.$a24	STA BCD+2
448	.$a27	ASL TMP_ZP
449	.$a29	ROL TMP_ZP+1
450	.$a2b	LDA BCD
451	.$a2e	ADC BCD
452	.$a31	STA BCD
453	.$a34	ASL TMP_ZP
454	.$a36	ROL TMP_ZP+1
455	.$a38	ADC BCD
456	.$a3b	STA BCD
457	.$a3e	ASL TMP_ZP
458	.$a40	ROL TMP_ZP+1
459	.$a42	ADC BCD
460	.$a45	STA BCD
461	.$a48	ASL TMP_ZP
462	.$a4a	ROL TMP_ZP+1
463	.$a4c	ADC BCD
464	.$a4f	STA BCD
465	.$a52	ASL TMP_ZP
466	.$a54	ROL TMP_ZP+1
467	.$a56	ADC BCD
468	.$a59	STA BCD
469	.$a5c	ASL TMP_ZP
470	.$a5e	ROL TMP_ZP+1
471	.$a60	ADC BCD
472	.$a63	STA BCD
473	.$a66	LDX #7
474	.$a68	BCDBIT1
475	.$a68	ASL TMP_ZP
476	.$a6a	ROL TMP_ZP+1
477	.$a6c	LDA BCD
478	.$a6f	ADC BCD
479	.$a72	STA BCD
480	.$a75	LDA BCD+1
481	.$a78	ADC BCD+1
482	.$a7b	STA BCD+1
483	.$a7e	DEX
484	.$a7f	BNE BCDBIT1
485	.$a81	LDX #3
486	.$a83	BCDBIT2
487	.$a83	ASL TMP_ZP
488	.$a85	ROL TMP_ZP+1
489	.$a87	LDA BCD
490	.$a8a	ADC BCD
491	.$a8d	STA BCD
492	.$a90	LDA BCD+1
493	.$a93	ADC BCD+1
494	.$a96	STA BCD+1
495	.$a99	LDA BCD+2
496	.$a9c	ADC BCD+2
497	.$a9f	STA BCD+2
498	.$aa2	DEX
499	.$aa3	BNE BCDBIT2
500	.$aa5	CLD
501	.$aa6	RTS
502	.$aa7	BCD
503	.$aa7	.WORD 0 0
504	.$aab	NUMFLAG
505	.$aab	.BYTE 0
508	.$aac	CLRCHNEW
509	.$aac	LDA CHLOCKFLAG
510	.$aaf	BNE SKIPCLRCH
511	.$ab1	JMP CLRCH
512	.$ab4	SKIPCLRCH
513	.$ab4	RTS
516	.$ab5	SUPERFIDEX CPY #0
517	.$ab7	BNE SUPERFIDEXNOV
518	.$ab9	SEC
519	.$aba	SBC #$1
520	.$abc	CMP #$7F
521	.$abe	BNE SUPERFIDEXNOV
522	.$ac0	JMP ILLEGALQUANTITY
523	.$ac3	SUPERFIDEXNOV
524	.$ac3	DEY
525	.$ac4	RTS
528	.$ac5	ILLEGALQUANTITY
532	.$ac5	JMP ERRIQ
646	.$ac8	INITVARS
647	.$ac8	JSR INITSTRVARS
648	.$acb	LDA #0
649	.$acd	STA VAR_P%
650	.$ad0	STA VAR_P%+1
651	.$ad3	RTS
655	.$ad4	CONSTANTS
661	.$ad4	DATAS
662	.$ad4	.BYTE $FF
664	.$ad5	CONSTANTS_END
667	.$ad5	VARIABLES
669	.$ad5	VAR_P% .WORD 0
670	.$ad7	STRINGVARS_START
672	.$ad7	VAR_TI$ .WORD EMPTYSTR
673	.$ad9	STRINGVARS_END
674	.$ad9	STRINGARRAYS_START
675	.$ad9	STRINGARRAYS_END
676	.$ad9	VARIABLES_END
678	.$ad9	Y_REG .REAL 0.0
679	.$ade	C_REG .REAL 0.0
680	.$ae3	D_REG .REAL 0.0
681	.$ae8	E_REG .REAL 0.0
682	.$aed	F_REG .REAL 0.0
683	.$af2	A_REG .WORD 0
684	.$af4	B_REG .WORD 0
685	.$af6	CMD_NUM .BYTE 0
686	.$af7	CHANNEL .BYTE 0
687	.$af8	SP_SAVE .BYTE 0
688	.$af9	TMP2_REG .WORD 0
689	.$afb	TMP3_REG .WORD 0
690	.$afd	TMP4_REG .WORD 0
691	.$aff	AS_TMP .WORD 0
692	.$b01	BPOINTER_TMP .WORD 0
693	.$b03	BASICTEXTP .BYTE 0
694	.$b04	STORE1 .WORD 0
695	.$b06	STORE2 .WORD 0
696	.$b08	STORE3 .WORD 0
697	.$b0a	STORE4 .WORD 0
698	.$b0c	GCSTART .WORD 0
699	.$b0e	GCLEN .WORD 0
700	.$b10	GCWORK .WORD 0
701	.$b12	INPUTLENGTH .BYTE 0
702	.$b13	TMP_FREG .REAL 0
703	.$b18	TMP2_FREG .REAL 0
704	.$b1d	TMP_FLAG .BYTE 0
705	.$b1e	INT_FLAG .BYTE 0
706	.$b1f	REAL_CONST_ONE .REAL 1.0
707	.$b24	REAL_CONST_ZERO .REAL 0.0
708	.$b29	REAL_CONST_MINUS_ONE .REAL -1.0
709	.$b2e	CHLOCKFLAG .BYTE 0
710	.$b2f	EMPTYSTR .BYTE 0
711	.$b30	FPSTACKP .WORD FPSTACK
712	.$b32	FORSTACKP .WORD FORSTACK
713	.$b34	DATASP .WORD DATAS
714	.$b36	LASTVAR .WORD 0
715	.$b38	LASTVARP .WORD 0
716	.$b3a	HIGHP .WORD STRBUF
717	.$b3c	STRBUFP .WORD STRBUF
718	.$b3e	ENDSTRBUF .WORD 0
719	.$b40	INPUTQUEUEP .BYTE 0
720	.$b41	PROGRAMEND
721	.$b41	INPUTQUEUE .ARRAY $0F
722	.$b50	FPSTACK .ARRAY 100
723	.$bb4	FORSTACK .ARRAY 340
724	.$d08	STRBUF .BYTE 0
