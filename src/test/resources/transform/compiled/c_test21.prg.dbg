117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
128	.$81f	LDA #0
129	.$821	STA VAR_A
130	.$824	STA VAR_A+1
131	.$827	STA VAR_A+2
132	.$82a	STA VAR_A+3
133	.$82d	STA VAR_A+4
135	.$830	LDX #4
136	.$832	dcloop401_1:
137	.$832	LDA CONST_1R,X
138	.$835	STA VAR_I,X
139	.$838	DEX
140	.$839	BPL dcloop401_1
142	.$83b	LDA #<CONST_2R
143	.$83d	LDY #>CONST_2R
144	.$83f	JSR REALFACPUSH
146	.$842	LDA #<CONST_1R
147	.$844	LDY #>CONST_1R
148	.$846	JSR REALFACPUSH
150	.$849	LDA #<VAR_I
151	.$84b	LDY #>VAR_I
152	.$84d	STA A_REG
153	.$850	STY A_REG+1
154	.$853	LDA #<FORLOOP0
155	.$855	STA JUMP_TARGET
156	.$857	LDA #>FORLOOP0
157	.$859	STA JUMP_TARGET+1
158	.$85b	JSR INITFOR
159	.$85e	FORLOOP0:
161	.$85e	LINE_20:
163	.$85e	LDA #<VAR_I
164	.$860	LDY #>VAR_I
165	.$862	JSR REALFAC
166	.$865	LDA #<VAR_A
167	.$867	LDY #>VAR_A
168	.$869	JSR FASTFADDMEM
173	.$86c	LDX #<VAR_A
174	.$86e	LDY #>VAR_A
176	.$870	JSR FACMEM
178	.$873	LINE_30:
180	.$873	LDA #0
181	.$875	STA A_REG
182	.$878	STA A_REG+1
183	.$87b	JSR NEXT
185	.$87e	LDA A_REG
186	.$881	BNE RBEQ_0
187	.$883	JMP (JUMP_TARGET)
189	.$886	RBEQ_0:
190	.$886	LDA #<VAR_A
191	.$888	LDY #>VAR_A
192	.$88a	JSR COPY2_XYA_XREG
196	.$88d	JSR REALOUTBRK
198	.$890	JSR END
199	.$893	RTS
202	.$894	END   LDX SP_SAVE
203	.$897	TXS
210	.$898	RTS
213	.$899	START  LDA ENDSTRBUF+1
214	.$89c	BNE ENDGIVEN
215	.$89e	LDA BASICEND
216	.$8a0	STA ENDSTRBUF
217	.$8a3	LDA BASICEND+1
218	.$8a5	STA ENDSTRBUF+1
219	.$8a8	ENDGIVEN LDA #<FPSTACK
220	.$8aa	LDY #>FPSTACK
221	.$8ac	STA FPSTACKP
222	.$8af	STY FPSTACKP+1
223	.$8b2	LDA #<FORSTACK
224	.$8b4	LDY #>FORSTACK
225	.$8b6	STA FORSTACKP
226	.$8b9	STY FORSTACKP+1
227	.$8bc	LDA #<STRBUF
228	.$8be	LDY #>STRBUF
229	.$8c0	STA STRBUFP
230	.$8c3	STY STRBUFP+1
231	.$8c6	STA HIGHP
232	.$8c9	STY HIGHP+1
233	.$8cc	LDA #0
234	.$8ce	STA CHLOCKFLAG
235	.$8d1	STA LASTVAR
236	.$8d4	STA LASTVAR+1
237	.$8d7	JSR INITVARS
238	.$8da	LDA #0
239	.$8dc	STA CMD_NUM
240	.$8df	STA CHANNEL
241	.$8e2	TAY
242	.$8e3	TAX
246	.$8e4	STA KEYNDX
252	.$8e6	JSR RESTORE
253	.$8e9	CLC
257	.$8ea	RTS
260	.$8eb	INITNARRAY
261	.$8eb	STA TMP_ZP
262	.$8ed	STY TMP_ZP+1
263	.$8ef	LDY #0
264	.$8f1	TYA
265	.$8f2	NINITLOOP STA (TMP_ZP),Y
266	.$8f4	INC TMP_ZP
267	.$8f6	BNE NLOOPNOV
268	.$8f8	INC TMP_ZP+1
269	.$8fa	NLOOPNOV LDX TMP2_ZP
270	.$8fc	BNE NLOOPNOV2
271	.$8fe	DEC TMP2_ZP+1
272	.$900	NLOOPNOV2 DEC TMP2_ZP
273	.$902	BNE NINITLOOP
274	.$904	LDX TMP2_ZP+1
275	.$906	BNE NINITLOOP
276	.$908	RTS
279	.$909	INITSTRARRAY
280	.$909	STA TMP_ZP
281	.$90b	STY TMP_ZP+1
282	.$90d	SINITLOOP LDY #0
283	.$90f	LDA #<EMPTYSTR
284	.$911	STA (TMP_ZP),Y
285	.$913	LDA #>EMPTYSTR
286	.$915	INY
287	.$916	STA (TMP_ZP),Y
288	.$918	CLC
289	.$919	LDA TMP_ZP
290	.$91b	ADC #2
291	.$91d	STA TMP_ZP
292	.$91f	BCC SLOOPNOV1
293	.$921	INC TMP_ZP+1
294	.$923	SLOOPNOV1 SEC
295	.$924	LDA TMP2_ZP
296	.$926	SBC #2
297	.$928	STA TMP2_ZP
298	.$92a	BCS SLOOPNOV2
299	.$92c	DEC TMP2_ZP+1
300	.$92e	SLOOPNOV2 LDA TMP2_ZP
301	.$930	BNE SINITLOOP
302	.$932	LDA TMP2_ZP+1
303	.$934	BNE SINITLOOP
304	.$936	RTS
307	.$937	INITSPARAMS STA TMP3_ZP
308	.$939	STY TMP3_ZP+1
309	.$93b	SEC
310	.$93c	SBC #2
311	.$93e	STA TMP_ZP
312	.$940	TYA
313	.$941	SBC #0
314	.$943	STA TMP_ZP+1
315	.$945	LDY #0
316	.$947	LDA (TMP_ZP),Y
317	.$949	STA TMP2_ZP
318	.$94b	INY
319	.$94c	LDA (TMP_ZP),Y
320	.$94e	STA TMP2_ZP+1
321	.$950	LDA TMP3_ZP
322	.$952	LDY TMP3_ZP+1
323	.$954	RTS
326	.$955	INITSTRVARS LDA #<STRINGVARS_START  
327	.$957	LDY #>STRINGVARS_START
328	.$959	CMP #<STRINGVARS_END
329	.$95b	BNE INITIT1
330	.$95d	CPY #>STRINGVARS_END
331	.$95f	BNE INITIT1
332	.$961	JMP INITSA2     
333	.$964	INITIT1  STA TMP_ZP
334	.$966	STY TMP_ZP+1
335	.$968	LDY #0
336	.$96a	INITSTRLOOP LDA #<EMPTYSTR
337	.$96c	STA (TMP_ZP),Y
338	.$96e	INY
339	.$96f	LDA #>EMPTYSTR
340	.$971	STA (TMP_ZP),Y
341	.$973	DEY
342	.$974	LDA TMP_ZP
343	.$976	CLC
344	.$977	ADC #2
345	.$979	STA TMP_ZP
346	.$97b	LDA TMP_ZP+1
347	.$97d	ADC #0
348	.$97f	STA TMP_ZP+1
349	.$981	CMP #>STRINGVARS_END
350	.$983	BNE INITSTRLOOP
351	.$985	LDA TMP_ZP
352	.$987	CMP #<STRINGVARS_END
353	.$989	BNE INITSTRLOOP
354	.$98b	INITSA2  LDA #<STRINGARRAYS_START 
355	.$98d	LDY #>STRINGARRAYS_START
356	.$98f	CMP #<STRINGARRAYS_END
357	.$991	BNE ARRAYLOOP
358	.$993	CPY #>STRINGARRAYS_END
359	.$995	BNE ARRAYLOOP
360	.$997	RTS       
361	.$998	ARRAYLOOP CLC
362	.$999	ADC #3
363	.$99b	BCC ARRAYSKIP1
364	.$99d	INY
365	.$99e	ARRAYSKIP1 CPY #>STRINGARRAYS_END
366	.$9a0	BEQ ARRAYSC
367	.$9a2	BCC ARRAYSKIP2
368	.$9a4	JMP ARRAYQUIT
369	.$9a7	ARRAYSC  CMP #<STRINGARRAYS_END
370	.$9a9	BCS ARRAYQUIT
371	.$9ab	ARRAYSKIP2 STA TMP_REG
372	.$9ad	STY TMP_REG+1
373	.$9af	JSR INITSPARAMS
374	.$9b2	LDA TMP_REG
375	.$9b4	LDY TMP_REG+1
376	.$9b6	JSR INITSTRARRAY
377	.$9b9	LDA TMP_ZP
378	.$9bb	LDY TMP_ZP+1
379	.$9bd	JMP ARRAYLOOP
380	.$9c0	ARRAYQUIT RTS
383	.$9c1	RESTORE  LDA #<DATAS
384	.$9c3	LDY #>DATAS
385	.$9c5	STA DATASP
386	.$9c8	STY DATASP+1
387	.$9cb	RTS
390	.$9cc	REROUTE  LDA CMD_NUM  
391	.$9cf	BEQ REROUTECMD
392	.$9d1	TAX
393	.$9d2	STA CHANNEL
394	.$9d5	JMP CHKOUT
395	.$9d8	REROUTECMD RTS
398	.$9d9	RESETROUTE LDA CMD_NUM  
399	.$9dc	BEQ RESETROUTECMD
400	.$9de	JMP CLRCHNEW
401	.$9e1	RESETROUTECMD
402	.$9e1	RTS
405	.$9e2	INTOUTFASTZ LDX #32    
406	.$9e4	LDA TMP_ZP+1
407	.$9e6	BPL INTISPOS
408	.$9e8	CLC
409	.$9e9	LDA TMP_ZP
410	.$9eb	EOR #$FF
411	.$9ed	ADC #1
412	.$9ef	STA TMP_ZP
413	.$9f1	LDA TMP_ZP+1
414	.$9f3	EOR #$FF
415	.$9f5	ADC #0
416	.$9f7	STA TMP_ZP+1
417	.$9f9	LDX #45    
418	.$9fb	INTISPOS
419	.$9fb	TXA
420	.$9fc	JSR CHROUT
421	.$9ff	JSR CONVPOSINT
422	.$a02	LDA NUMFLAG
423	.$a05	BNE ALLINTOUTDONE
424	.$a07	LDA #48
425	.$a09	JSR CHROUT
426	.$a0c	ALLINTOUTDONE
427	.$a0c	RTS
430	.$a0d	NUMBEROUT
431	.$a0d	BEQ NUMZERO
432	.$a0f	ORA #$30
433	.$a11	STA NUMFLAG
434	.$a14	JMP CHROUT
435	.$a17	NUMZERO
436	.$a17	LDX NUMFLAG
437	.$a1a	BEQ STILLZERO
438	.$a1c	ORA #$30
439	.$a1e	JMP CHROUT
440	.$a21	STILLZERO
441	.$a21	RTS
444	.$a22	CONVPOSINT
445	.$a22	JSR INT2BCD
446	.$a25	LDX #0
447	.$a27	STX NUMFLAG
448	.$a2a	AND #$0F
449	.$a2c	JSR NUMBEROUT
450	.$a2f	LDA BCD+1
451	.$a32	LSR
452	.$a33	LSR
453	.$a34	LSR
454	.$a35	LSR
455	.$a36	JSR NUMBEROUT
456	.$a39	LDA BCD+1
457	.$a3c	AND #$0F
458	.$a3e	TAY
459	.$a3f	JSR NUMBEROUT
460	.$a42	LDA BCD
461	.$a45	LSR
462	.$a46	LSR
463	.$a47	LSR
464	.$a48	LSR
465	.$a49	JSR NUMBEROUT
466	.$a4c	LDA BCD
467	.$a4f	AND #$0F
468	.$a51	JSR NUMBEROUT
469	.$a54	RTS
472	.$a55	INT2BCD
473	.$a55	SED
474	.$a56	LDA #0
475	.$a58	STA BCD
476	.$a5b	STA BCD+1
477	.$a5e	STA BCD+2
478	.$a61	ASL TMP_ZP
479	.$a63	ROL TMP_ZP+1
480	.$a65	LDA BCD
481	.$a68	ADC BCD
482	.$a6b	STA BCD
483	.$a6e	ASL TMP_ZP
484	.$a70	ROL TMP_ZP+1
485	.$a72	ADC BCD
486	.$a75	STA BCD
487	.$a78	ASL TMP_ZP
488	.$a7a	ROL TMP_ZP+1
489	.$a7c	ADC BCD
490	.$a7f	STA BCD
491	.$a82	ASL TMP_ZP
492	.$a84	ROL TMP_ZP+1
493	.$a86	ADC BCD
494	.$a89	STA BCD
495	.$a8c	ASL TMP_ZP
496	.$a8e	ROL TMP_ZP+1
497	.$a90	ADC BCD
498	.$a93	STA BCD
499	.$a96	ASL TMP_ZP
500	.$a98	ROL TMP_ZP+1
501	.$a9a	ADC BCD
502	.$a9d	STA BCD
503	.$aa0	LDX #7
504	.$aa2	BCDBIT1
505	.$aa2	ASL TMP_ZP
506	.$aa4	ROL TMP_ZP+1
507	.$aa6	LDA BCD
508	.$aa9	ADC BCD
509	.$aac	STA BCD
510	.$aaf	LDA BCD+1
511	.$ab2	ADC BCD+1
512	.$ab5	STA BCD+1
513	.$ab8	DEX
514	.$ab9	BNE BCDBIT1
515	.$abb	LDX #3
516	.$abd	BCDBIT2
517	.$abd	ASL TMP_ZP
518	.$abf	ROL TMP_ZP+1
519	.$ac1	LDA BCD
520	.$ac4	ADC BCD
521	.$ac7	STA BCD
522	.$aca	LDA BCD+1
523	.$acd	ADC BCD+1
524	.$ad0	STA BCD+1
525	.$ad3	LDA BCD+2
526	.$ad6	ADC BCD+2
527	.$ad9	STA BCD+2
528	.$adc	DEX
529	.$add	BNE BCDBIT2
530	.$adf	CLD
531	.$ae0	RTS
532	.$ae1	BCD
533	.$ae1	.WORD 0 0
534	.$ae5	NUMFLAG
535	.$ae5	.BYTE 0
538	.$ae6	REALOUTFAST JSR FACINT
539	.$ae9	STA TMP_ZP+1
540	.$aeb	STY TMP_ZP
541	.$aed	JMP INTOUTFASTZ
544	.$af0	CHECKFORFASTOUT
545	.$af0	JSR REROUTE
546	.$af3	JSR XREGFAC
547	.$af6	LDA FACEXP
548	.$af8	CMP #$90
549	.$afa	BCS REALOUTINT
550	.$afc	CMP #$81
551	.$afe	BCC REALOUTINT
552	.$b00	MAYBEREALOUTFAST
553	.$b00	LDA FACEXP+3
554	.$b02	BNE REALOUTINT
555	.$b04	LDA FACEXP+4
556	.$b06	BNE REALOUTINT
557	.$b08	LDA FACEXP
558	.$b0a	SEC
559	.$b0b	SBC #129
560	.$b0d	ASL
561	.$b0e	TAX
562	.$b0f	LDA FACEXP+1
563	.$b11	AND MANTMASK,X
564	.$b14	BNE REALOUTINT
565	.$b16	INX
566	.$b17	LDA FACEXP+2
567	.$b19	AND MANTMASK,X
568	.$b1c	BNE REALOUTINT
569	.$b1e	JMP REALOUTFAST
570	.$b21	REALOUTINT LDY #0
571	.$b23	JSR FACSTR
572	.$b26	LDY #0
573	.$b28	LDA LOFBUF,Y
574	.$b2b	STRLOOPRO JSR CHROUT
575	.$b2e	INY
576	.$b2f	LDA LOFBUF,Y
577	.$b32	BNE STRLOOPRO
578	.$b34	RTS
579	.$b35	MANTMASK
580	.$b35	.BYTE 127 255 63 255 31 255 15 255 7 255 3 255 1 255 0 255 0 127 0 63 0 31 0 15 0 7 0 3 0 1
583	.$b53	REALOUTBRK  LDA X_REG
584	.$b55	BNE RNOTNULLBRK
585	.$b57	JMP PRINTNULLBRK
586	.$b5a	RNOTNULLBRK JSR CHECKFORFASTOUT
587	.$b5d	LDA #$0D
588	.$b5f	JSR CHROUT
589	.$b62	JMP RESETROUTE
592	.$b65	PRINTNULLBRK
593	.$b65	JSR REROUTE
594	.$b68	LDA #$20
595	.$b6a	JSR CHROUT
596	.$b6d	LDA #$30
597	.$b6f	JSR CHROUT
598	.$b72	LDA #$0D
599	.$b74	JSR CHROUT
600	.$b77	JMP RESETROUTE
603	.$b7a	ADJUSTSTACK LDA FORSTACKP 
604	.$b7d	STA TMP_ZP
605	.$b7f	LDA FORSTACKP+1
606	.$b82	STA TMP_ZP+1
607	.$b84	ADSEARCHFOR LDA TMP_ZP
608	.$b86	CMP #<FORSTACK
609	.$b88	BNE ADJUST2
610	.$b8a	LDA TMP_ZP+1
611	.$b8c	CMP #>FORSTACK
612	.$b8e	BNE ADJUST2
613	.$b90	RTS    
614	.$b91	ADJUST2  LDA TMP_ZP
615	.$b93	SEC
616	.$b94	SBC #2
617	.$b96	STA TMP_ZP
618	.$b98	BCS ADNOPV1N1
619	.$b9a	DEC TMP_ZP+1
620	.$b9c	ADNOPV1N1 LDY #0
621	.$b9e	LDA (TMP_ZP),Y
622	.$ba0	BNE ADNOGOSUB
623	.$ba2	RTS    
624	.$ba3	ADNOGOSUB
625	.$ba3	INY
626	.$ba4	LDA TMP_ZP
627	.$ba6	SEC
628	.$ba7	SBC (TMP_ZP),Y
629	.$ba9	STA TMP_ZP
630	.$bab	BCS ADNOPV1N2
631	.$bad	DEC TMP_ZP+1
632	.$baf	ADNOPV1N2 DEY
633	.$bb0	LDA A_REG
634	.$bb3	ADCMPFOR CMP (TMP_ZP),Y
635	.$bb5	BNE ADSEARCHFOR
636	.$bb7	LDA A_REG+1
637	.$bba	INY
638	.$bbb	CMP (TMP_ZP),Y
639	.$bbd	BEQ ADFOUNDFOR
640	.$bbf	JMP ADSEARCHFOR
641	.$bc2	ADLOW0  LDX A_REG+1
642	.$bc5	BEQ ADFOUNDFOR
643	.$bc7	BNE ADCMPFOR
644	.$bc9	ADFOUNDFOR LDA TMP_ZP  
645	.$bcb	STA FORSTACKP
646	.$bce	LDA TMP_ZP+1
647	.$bd0	STA FORSTACKP+1
648	.$bd3	RTS
651	.$bd4	INITFOR  JSR ADJUSTSTACK
652	.$bd7	LDA FORSTACKP
653	.$bda	STA TMP_ZP
654	.$bdc	LDA FORSTACKP+1
655	.$bdf	STA TMP_ZP+1
656	.$be1	LDY #0
657	.$be3	LDA A_REG
658	.$be6	STA (TMP_ZP),Y
659	.$be8	INY
660	.$be9	LDA A_REG+1
661	.$bec	STA (TMP_ZP),Y
662	.$bee	INY
663	.$bef	LDA JUMP_TARGET
664	.$bf1	STA (TMP_ZP),Y
665	.$bf3	INY
666	.$bf4	LDA JUMP_TARGET+1
667	.$bf6	STA (TMP_ZP),Y
668	.$bf8	INY
669	.$bf9	STY TMP3_ZP
670	.$bfb	JSR INCTMPZP
671	.$bfe	JSR POPREAL
672	.$c01	LDX TMP_ZP
673	.$c03	LDY TMP_ZP+1
675	.$c05	JSR FACMEM
676	.$c08	JSR SGNFAC
677	.$c0b	STA TMP_FLAG
678	.$c0e	LDY #5
679	.$c10	STY TMP3_ZP
680	.$c12	JSR INCTMPZP
681	.$c15	JSR POPREAL
682	.$c18	LDX TMP_ZP
683	.$c1a	LDY TMP_ZP+1
685	.$c1c	JSR FACMEM
686	.$c1f	LDY #5
687	.$c21	STY TMP3_ZP
688	.$c23	JSR INCTMPZP
689	.$c26	LDY #0
690	.$c28	LDA TMP_FLAG
691	.$c2b	STA (TMP_ZP),Y
692	.$c2d	INY
693	.$c2e	LDA #1
694	.$c30	STA (TMP_ZP),Y
695	.$c32	INY
696	.$c33	LDA #15
697	.$c35	STA (TMP_ZP),Y
698	.$c37	LDY #3
699	.$c39	STY TMP3_ZP
700	.$c3b	JSR INCTMPZP
701	.$c3e	LDA TMP_ZP
702	.$c40	STA FORSTACKP
703	.$c43	LDA TMP_ZP+1
704	.$c45	STA FORSTACKP+1
705	.$c48	RTS
708	.$c49	NEXT  LDA FORSTACKP
709	.$c4c	STA TMP_ZP
710	.$c4e	LDA FORSTACKP+1
711	.$c51	STA TMP_ZP+1
712	.$c53	SEARCHFOR LDA TMP_ZP+1
713	.$c55	STA TMP3_REG+1
714	.$c58	LDA TMP_ZP
715	.$c5a	STA TMP3_REG
716	.$c5d	SEC
717	.$c5e	SBC #2
718	.$c60	STA TMP_ZP
719	.$c62	BCS NOPV1N1
720	.$c64	DEC TMP_ZP+1
721	.$c66	NOPV1N1  LDY #0
722	.$c68	LDA (TMP_ZP),Y
723	.$c6a	BNE NOGOSUB
724	.$c6c	JMP NEXTWOFOR
725	.$c6f	NOGOSUB
726	.$c6f	INY
727	.$c70	LDA TMP_ZP
728	.$c72	SEC
729	.$c73	SBC (TMP_ZP),Y
730	.$c75	STA TMP_ZP
731	.$c77	BCS NOPV1N2
732	.$c79	DEC TMP_ZP+1
733	.$c7b	NOPV1N2  DEY
734	.$c7c	LDA A_REG
735	.$c7f	BEQ LOW0
736	.$c81	CMPFOR  CMP (TMP_ZP),Y
737	.$c83	BNE SEARCHFOR
738	.$c85	LDA A_REG+1
739	.$c88	INY
740	.$c89	CMP (TMP_ZP),Y
741	.$c8b	BEQ FOUNDFOR
742	.$c8d	JMP SEARCHFOR
743	.$c90	LOW0  LDX A_REG+1
744	.$c93	BEQ FOUNDFOR
745	.$c95	BNE CMPFOR
746	.$c97	FOUNDFOR LDA TMP_ZP
747	.$c99	STA TMP2_REG
748	.$c9c	LDA TMP_ZP+1
749	.$c9e	STA TMP2_REG+1
750	.$ca1	VARREAL
751	.$ca1	LDY #0
752	.$ca3	STY A_REG+1 
753	.$ca6	LDA (TMP_ZP),Y
754	.$ca8	TAX
755	.$ca9	INY
756	.$caa	LDA (TMP_ZP),Y
757	.$cac	TAY
758	.$cad	TXA
759	.$cae	JSR REALFAC
760	.$cb1	CALCNEXT LDA TMP_ZP
761	.$cb3	CLC
762	.$cb4	ADC #4
763	.$cb6	STA TMP_ZP
764	.$cb8	BCC NOPV2IN
765	.$cba	INC TMP_ZP+1
766	.$cbc	NOPV2IN  STA TMP_REG
767	.$cbe	LDY TMP_ZP+1
768	.$cc0	STY TMP_REG+1
769	.$cc2	JSR FASTFADDMEM
771	.$cc5	LDA TMP2_REG
772	.$cc8	STA TMP_ZP
773	.$cca	LDA TMP2_REG+1
774	.$ccd	STA TMP_ZP+1
775	.$ccf	STOREREAL
776	.$ccf	LDY #0
777	.$cd1	LDA (TMP_ZP),Y
778	.$cd3	TAX
779	.$cd4	INY
780	.$cd5	LDA (TMP_ZP),Y
781	.$cd7	TAY
782	.$cd8	JSR FACMEM 
783	.$cdb	CMPFORXX LDA #5
784	.$cdd	STA TMP3_ZP
785	.$cdf	LDA TMP_REG
786	.$ce1	CLC
787	.$ce2	ADC #5
788	.$ce4	STA TMP_REG
789	.$ce6	BCC NOPV3
790	.$ce8	INC TMP_REG+1
791	.$cea	NOPV3  LDY TMP_REG+1
792	.$cec	JSR CMPFAC  
793	.$cef	BEQ LOOPING
794	.$cf1	PHA
795	.$cf2	LDY #14
796	.$cf4	LDA (TMP_ZP),Y
797	.$cf6	BEQ STEPZERO
798	.$cf8	ROL
799	.$cf9	BCC STEPPOS
800	.$cfb	STEPNEG  PLA
801	.$cfc	ROL
802	.$cfd	BCC LOOPING
803	.$cff	BCS EXITLOOP
804	.$d01	STEPPOS  PLA
805	.$d02	ROL
806	.$d03	BCC EXITLOOP
807	.$d05	LOOPING  LDA TMP3_REG
808	.$d08	STA FORSTACKP
809	.$d0b	LDA TMP3_REG+1
810	.$d0e	STA FORSTACKP+1
811	.$d11	LDA TMP2_REG
812	.$d14	CLC
813	.$d15	ADC #2
814	.$d17	STA TMP2_REG
815	.$d1a	BCC NOPV4IN
816	.$d1c	INC TMP2_REG+1
817	.$d1f	NOPV4IN  LDY #0
818	.$d21	STY A_REG
819	.$d24	STA TMP_ZP
820	.$d26	LDA TMP2_REG+1
821	.$d29	STA TMP_ZP+1
822	.$d2b	LDA (TMP_ZP),Y
823	.$d2d	STA JUMP_TARGET
824	.$d2f	INY
825	.$d30	LDA (TMP_ZP),Y
826	.$d32	STA JUMP_TARGET+1
827	.$d34	RTS
828	.$d35	STEPZERO PLA
829	.$d36	JMP LOOPING
830	.$d39	EXITLOOP LDA TMP2_REG
831	.$d3c	STA FORSTACKP
832	.$d3f	LDA TMP2_REG+1
833	.$d42	STA FORSTACKP+1
834	.$d45	LDA #1
835	.$d47	STA A_REG
836	.$d4a	RTS
839	.$d4b	REALFACPUSH STA TMP_ZP
840	.$d4d	STY TMP_ZP+1
841	.$d4f	LDX FPSTACKP
842	.$d52	LDY FPSTACKP+1
843	.$d55	STX TMP2_ZP
844	.$d57	STY TMP2_ZP+1
845	.$d59	LDY #0
846	.$d5b	LDA (TMP_ZP),Y
847	.$d5d	STA (TMP2_ZP),Y
848	.$d5f	INY
849	.$d60	LDA (TMP_ZP),Y
850	.$d62	STA (TMP2_ZP),Y
851	.$d64	INY
852	.$d65	LDA (TMP_ZP),Y
853	.$d67	STA (TMP2_ZP),Y
854	.$d69	INY
855	.$d6a	LDA (TMP_ZP),Y
856	.$d6c	STA (TMP2_ZP),Y
857	.$d6e	INY
858	.$d6f	LDA (TMP_ZP),Y
859	.$d71	STA (TMP2_ZP),Y
860	.$d73	TXA    
861	.$d74	CLC
862	.$d75	ADC #5
863	.$d77	STA FPSTACKP
864	.$d7a	BCC NOPVRFPXX
865	.$d7c	INC FPSTACKP+1
866	.$d7f	NOPVRFPXX RTS
869	.$d80	POPREAL  LDA FPSTACKP
870	.$d83	SEC
871	.$d84	SBC #5
872	.$d86	STA FPSTACKP
873	.$d89	BCS NOPVPR
874	.$d8b	DEC FPSTACKP+1
875	.$d8e	NOPVPR  LDA FPSTACKP
876	.$d91	LDY FPSTACKP+1
877	.$d94	JMP REALFAC
880	.$d97	INCTMPZP LDA TMP_ZP
881	.$d99	CLC
882	.$d9a	ADC TMP3_ZP
883	.$d9c	STA TMP_ZP
884	.$d9e	BCC NOPV2
885	.$da0	INC TMP_ZP+1
886	.$da2	NOPV2  RTS
889	.$da3	COPY2_XYA_XREG
890	.$da3	STA TMP3_ZP
891	.$da5	STY TMP3_ZP+1
892	.$da7	COPY2_XY_XREG
893	.$da7	LDX #<X_REG  
894	.$da9	LDY #0
895	.$dab	LDA (TMP3_ZP),Y
896	.$dad	STA X_REG
897	.$daf	INY
898	.$db0	LDA (TMP3_ZP),Y
899	.$db2	STA X_REG+1
900	.$db4	INY
901	.$db5	LDA (TMP3_ZP),Y
902	.$db7	STA X_REG+2
903	.$db9	INY
904	.$dba	LDA (TMP3_ZP),Y
905	.$dbc	STA X_REG+3
906	.$dbe	INY
907	.$dbf	LDA (TMP3_ZP),Y
908	.$dc1	STA X_REG+4
909	.$dc3	RTS
912	.$dc4	CLRCHNEW
913	.$dc4	LDA CHLOCKFLAG
914	.$dc7	BNE SKIPCLRCH
915	.$dc9	JMP CLRCH
916	.$dcc	SKIPCLRCH
917	.$dcc	RTS
920	.$dcd	NEXTWOFOR
924	.$dcd	LDX #$0A
925	.$dcf	JMP ERRALL
928	.$dd2	ILLEGALQUANTITY
932	.$dd2	JMP ERRIQ
935	.$dd5	XREGFAC  LDA X_REG+4
936	.$dd7	STA FACLO
937	.$dd9	LDA X_REG+3
938	.$ddb	STA FACMO
939	.$ddd	LDA X_REG+2
940	.$ddf	STA FACMOH
941	.$de1	LDA X_REG+1
942	.$de3	STA FACSGN
943	.$de5	ORA #$80
944	.$de7	STA FACHO
945	.$de9	LDA X_REG
946	.$deb	STA FACEXP
947	.$ded	LDA #0
948	.$def	STA FACOV
949	.$df1	RTS
1063	.$df2	FASTFADDMEM
1064	.$df2	JSR MEMARG
1065	.$df5	FASTFADDARG
1066	.$df5	BNE FADDRET2     
1067	.$df7	JMP ARGFAC
1068	.$dfa	FADDRET2 LDA ARGEXP
1069	.$dfc	BNE FADDRET1     
1070	.$dfe	RTS
1071	.$dff	FADDRET1 SEC
1072	.$e00	SBC FACEXP
1073	.$e02	BEQ FFADD_EXPEQ     
1074	.$e04	BCC FFADD_SHFARG1   
1078	.$e06	LDY ARGEXP
1079	.$e08	STY FACEXP
1080	.$e0a	LDY ARGSGN
1081	.$e0c	STY FACSGN
1082	.$e0e	LDX #0
1083	.$e10	STX OLDOV        
1084	.$e12	LDX #FAC         
1086	.$e14	SEC
1087	.$e15	SBC #$08
1088	.$e17	BMI FFADD_SHFFAC2
1090	.$e19	FFADD_SHFFAC1
1091	.$e19	LDY FACLO        
1092	.$e1b	STY FACOV
1093	.$e1d	LDY FACMO        
1094	.$e1f	STY FACMO+1
1095	.$e21	LDY FACMOH       
1096	.$e23	STY FACMOH+1
1097	.$e25	LDY FACHO        
1098	.$e27	STY FACHO+1
1099	.$e29	LDY #0
1100	.$e2b	STY FACHO        
1101	.$e2d	SBC #$08         
1102	.$e2f	BPL FFADD_SHFFAC1   
1103	.$e31	FFADD_SHFFAC2
1104	.$e31	ADC #$08         
1105	.$e33	BEQ FFADD_SHFFAC4   
1106	.$e35	TAY
1107	.$e36	LDA FACOV
1108	.$e38	FFADD_SHFFAC3
1109	.$e38	LSR FACHO        
1110	.$e3a	ROR FACMOH       
1111	.$e3c	ROR FACMO        
1112	.$e3e	ROR FACLO        
1113	.$e40	ROR              
1114	.$e41	DEY
1115	.$e42	BNE FFADD_SHFFAC3
1116	.$e44	JMP FFADD_MANADD2   
1117	.$e47	FFADD_SHFFAC4
1118	.$e47	LDA FACOV        
1119	.$e49	JMP FFADD_MANADD2
1120	.$e4c	FFADD_EXPEQ
1121	.$e4c	LDX FACOV
1122	.$e4e	STX OLDOV
1125	.$e50	JMP FFADD_MANADD1
1126	.$e53	FFADD_SHFARG2
1127	.$e53	LDA FACOV        
1128	.$e55	JMP FFADD_MANADD1
1129	.$e58	FFADD_SHFARG1
1130	.$e58	LDX FACOV
1131	.$e5a	STX OLDOV        
1132	.$e5c	LDX #$00         
1135	.$e5e	ADC #$08
1136	.$e60	BPL FFADD_SHFARG6   
1137	.$e62	FFADD_SHFARG3
1138	.$e62	LDX ARGLO        
1139	.$e64	LDY ARGMO        
1140	.$e66	STY ARGMO+1
1141	.$e68	LDY ARGMOH       
1142	.$e6a	STY ARGMOH+1
1143	.$e6c	LDY ARGHO        
1144	.$e6e	STY ARGHO+1
1145	.$e70	LDY #0
1146	.$e72	STY ARGHO        
1147	.$e74	FFADD_SHFARG4
1148	.$e74	ADC #$08
1149	.$e76	BMI FFADD_SHFARG3
1150	.$e78	BEQ FFADD_SHFARG3
1151	.$e7a	FFADD_SHFARG6
1152	.$e7a	SBC #$08
1153	.$e7c	BEQ FFADD_SHFARG2   
1154	.$e7e	TAY
1155	.$e7f	TXA              
1156	.$e80	FFADD_SHFARG5
1157	.$e80	LSR ARGHO
1158	.$e82	ROR ARGMOH
1159	.$e84	ROR ARGMO
1160	.$e86	ROR ARGLO
1161	.$e88	ROR           
1162	.$e89	INY
1163	.$e8a	BNE FFADD_SHFARG5
1164	.$e8c	FFADD_MANADD1
1165	.$e8c	LDX #ARGEXP      
1166	.$e8e	FFADD_MANADD2
1167	.$e8e	BIT ARISGN
1168	.$e90	BMI FFADD_MANSUB1   
1169	.$e92	CLC
1170	.$e93	ADC OLDOV
1171	.$e95	STA FACOV
1172	.$e97	LDA FACLO
1173	.$e99	ADC ARGLO
1174	.$e9b	STA FACLO
1175	.$e9d	LDA FACMO
1176	.$e9f	ADC ARGMO
1177	.$ea1	STA FACMO
1178	.$ea3	LDA FACMOH
1179	.$ea5	ADC ARGMOH
1180	.$ea7	STA FACMOH
1181	.$ea9	LDA FACHO
1182	.$eab	ADC ARGHO
1183	.$ead	STA FACHO
1184	.$eaf	BCC FFADD_RNDRTS
1185	.$eb1	INC FACEXP
1186	.$eb3	BEQ FFADD_OVERR
1188	.$eb5	ROR FACHO
1189	.$eb7	ROR FACMOH
1190	.$eb9	ROR FACMO
1191	.$ebb	ROR FACLO
1192	.$ebd	ROR FACOV
1193	.$ebf	FFADD_RNDRTS
1194	.$ebf	RTS
1195	.$ec0	FFADD_OVERR
1196	.$ec0	JMP ILLEGALQUANTITY
1197	.$ec3	FFADD_MANSUB1
1198	.$ec3	LDY #FACEXP
1199	.$ec5	CPX #ARGEXP
1200	.$ec7	BEQ FFADD_MANSUB2
1201	.$ec9	LDY #ARGEXP
1202	.$ecb	FFADD_MANSUB2
1203	.$ecb	SEC              
1204	.$ecc	EOR #$FF
1205	.$ece	ADC OLDOV
1206	.$ed0	STA FACOV
1207	.$ed2	LDA 4,Y
1208	.$ed5	SBC 4,X
1209	.$ed7	STA FACLO
1210	.$ed9	LDA 3,Y
1211	.$edc	SBC 3,X
1212	.$ede	STA FACMO
1213	.$ee0	LDA 2,Y
1214	.$ee3	SBC 2,X
1215	.$ee5	STA FACMOH
1216	.$ee7	LDA 1,Y
1217	.$eea	SBC 1,X
1218	.$eec	STA FACHO
1219	.$eee	BCS FCNORMAL
1220	.$ef0	LDA FACSGN
1221	.$ef2	EOR #$FF
1222	.$ef4	STA FACSGN
1223	.$ef6	LDA FACHO
1224	.$ef8	EOR #$FF
1225	.$efa	STA FACHO
1226	.$efc	LDA FACMOH
1227	.$efe	EOR #$FF
1228	.$f00	STA FACMOH
1229	.$f02	LDA FACMO
1230	.$f04	EOR #$FF
1231	.$f06	STA FACMO
1232	.$f08	LDA FACLO
1233	.$f0a	EOR #$FF
1234	.$f0c	STA FACLO
1235	.$f0e	LDA FACOV
1236	.$f10	EOR #$FF
1237	.$f12	CLC
1238	.$f13	ADC #1
1239	.$f15	STA FACOV
1240	.$f17	BNE FCNORMAL
1241	.$f19	INC FACLO
1242	.$f1b	BNE FCNORMAL
1243	.$f1d	INC FACMO
1244	.$f1f	BNE FCNORMAL
1245	.$f21	INC FACMOH
1246	.$f23	BNE FCNORMAL
1247	.$f25	INC FACHO
1248	.$f27	FCNORMAL   BIT FACHO
1249	.$f29	BMI FFADD_RET       
1250	.$f2b	LDA #0           
1251	.$f2d	CLC
1252	.$f2e	FFADD_NORM3
1253	.$f2e	LDX FACHO
1254	.$f30	BNE FFADD_NORM1
1255	.$f32	LDX FACHO+1
1256	.$f34	STX FACHO
1257	.$f36	LDX FACMOH+1
1258	.$f38	STX FACMOH
1259	.$f3a	LDX FACMO+1
1260	.$f3c	STX FACMO
1261	.$f3e	LDX FACOV
1262	.$f40	STX FACLO
1263	.$f42	LDX #0
1264	.$f44	STX FACOV
1265	.$f46	ADC #$08
1266	.$f48	CMP #$20
1267	.$f4a	BNE FFADD_NORM3
1268	.$f4c	JMP FFADD_ZEROFAC
1269	.$f4f	FFADD_NORM2
1270	.$f4f	CLC
1271	.$f50	ADC #1
1272	.$f52	ASL FACOV
1273	.$f54	ROL FACLO
1274	.$f56	ROL FACMO
1275	.$f58	ROL FACMOH
1276	.$f5a	ROL FACHO
1277	.$f5c	FFADD_NORM1
1278	.$f5c	BPL FFADD_NORM2     
1279	.$f5e	SEC
1280	.$f5f	SBC FACEXP
1281	.$f61	BCS FFADD_ZEROFAC
1282	.$f63	EOR #$FF
1283	.$f65	CLC
1284	.$f66	ADC #1
1285	.$f68	STA FACEXP
1286	.$f6a	FFADD_RET   RTS
1287	.$f6b	FFADD_ZEROFAC
1288	.$f6b	LDX #0
1289	.$f6d	STX FACEXP
1290	.$f6f	STX FACSGN
1291	.$f71	RTS
1294	.$f72	INITVARS
1295	.$f72	JSR INITSTRVARS
1296	.$f75	LDA #0
1297	.$f77	LDY #4
1298	.$f79	REALINITLOOP0:
1299	.$f79	STA VAR_A,Y
1300	.$f7c	STA VAR_I,Y
1301	.$f7f	DEY
1302	.$f80	BMI REALLOOPEXIT0
1303	.$f82	JMP REALINITLOOP0
1304	.$f85	REALLOOPEXIT0:
1305	.$f85	RTS
1309	.$f86	CONSTANTS
1315	.$f86	CONST_1R .REAL 1.0
1318	.$f8b	CONST_2R .REAL 100.0
1321	.$f90	DATAS
1322	.$f90	.BYTE $FF
1324	.$f91	CONSTANTS_END
1327	.$f91	VARIABLES
1329	.$f91	VAR_A .REAL 0.0
1331	.$f96	VAR_I .REAL 0.0
1332	.$f9b	STRINGVARS_START
1334	.$f9b	VAR_TI$ .WORD EMPTYSTR
1335	.$f9d	STRINGVARS_END
1336	.$f9d	STRINGARRAYS_START
1337	.$f9d	STRINGARRAYS_END
1338	.$f9d	VARIABLES_END
1340	.$f9d	Y_REG .REAL 0.0
1341	.$fa2	C_REG .REAL 0.0
1342	.$fa7	D_REG .REAL 0.0
1343	.$fac	E_REG .REAL 0.0
1344	.$fb1	F_REG .REAL 0.0
1345	.$fb6	A_REG .WORD 0
1346	.$fb8	B_REG .WORD 0
1347	.$fba	CMD_NUM .BYTE 0
1348	.$fbb	CHANNEL .BYTE 0
1349	.$fbc	SP_SAVE .BYTE 0
1350	.$fbd	TMP2_REG .WORD 0
1351	.$fbf	TMP3_REG .WORD 0
1352	.$fc1	TMP4_REG .WORD 0
1353	.$fc3	AS_TMP .WORD 0
1354	.$fc5	BPOINTER_TMP .WORD 0
1355	.$fc7	BASICTEXTP .BYTE 0
1356	.$fc8	STORE1 .WORD 0
1357	.$fca	STORE2 .WORD 0
1358	.$fcc	STORE3 .WORD 0
1359	.$fce	STORE4 .WORD 0
1360	.$fd0	GCSTART .WORD 0
1361	.$fd2	GCLEN .WORD 0
1362	.$fd4	GCWORK .WORD 0
1363	.$fd6	INPUTLENGTH .BYTE 0
1364	.$fd7	TMP_FREG .REAL 0
1365	.$fdc	TMP2_FREG .REAL 0
1366	.$fe1	TMP_FLAG .BYTE 0
1367	.$fe2	INT_FLAG .BYTE 0
1368	.$fe3	REAL_CONST_ONE .REAL 1.0
1369	.$fe8	REAL_CONST_ZERO .REAL 0.0
1370	.$fed	REAL_CONST_MINUS_ONE .REAL -1.0
1371	.$ff2	CHLOCKFLAG .BYTE 0
1372	.$ff3	EMPTYSTR .BYTE 0
1373	.$ff4	FPSTACKP .WORD FPSTACK
1374	.$ff6	FORSTACKP .WORD FORSTACK
1375	.$ff8	DATASP .WORD DATAS
1376	.$ffa	LASTVAR .WORD 0
1377	.$ffc	LASTVARP .WORD 0
1378	.$ffe	HIGHP .WORD STRBUF
1379	.$1000	STRBUFP .WORD STRBUF
1380	.$1002	ENDSTRBUF .WORD 0
1381	.$1004	INPUTQUEUEP .BYTE 0
1382	.$1005	PROGRAMEND
1383	.$1005	INPUTQUEUE .ARRAY $0F
1384	.$1014	FPSTACK .ARRAY 100
1385	.$1078	FORSTACK .ARRAY 340
1386	.$11cc	STRBUF .BYTE 0
