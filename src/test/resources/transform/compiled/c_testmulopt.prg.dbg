117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
127	.$81f	LDX #4
128	.$821	dcloop235_1:
129	.$821	LDA CONST_0R,X
130	.$824	STA VAR_I,X
131	.$827	LDA CONST_1R,X
132	.$82a	STA VAR_Z,X
133	.$82d	DEX
134	.$82e	BPL dcloop235_1
138	.$830	LINE_20:
140	.$830	LDA #<VAR_Z
141	.$832	LDY #>VAR_Z
142	.$834	JSR REALFACPUSH
144	.$837	LDA #<VAR_I
145	.$839	LDY #>VAR_I
147	.$83b	JSR REALFAC
148	.$83e	JSR FACYREG
149	.$841	LDY #5
150	.$843	LDA #0
151	.$845	STY A_REG
152	.$848	STA A_REG+1
157	.$84b	JSR SHL
158	.$84e	JSR FACXREG
160	.$851	LDY #4
161	.$853	LDA #0
162	.$855	STY A_REG
163	.$858	STA A_REG+1
164	.$85b	JSR YREGFAC
167	.$85e	JSR SHL
169	.$861	LDA #<X_REG
170	.$863	LDY #>X_REG
172	.$865	JSR FASTFADDMEM
175	.$868	JSR FACXREG
177	.$86b	LDA #<CONST_4R
178	.$86d	LDY #>CONST_4R
179	.$86f	JSR REALFAC
182	.$872	LDA #<X_REG
183	.$874	LDY #>X_REG
185	.$876	JSR FASTFADDMEM
188	.$879	JSR FACXREG
190	.$87c	JSR POPREAL
191	.$87f	JSR FACWORD
193	.$882	STY MOVBSELF1+1
194	.$885	STA MOVBSELF1+2
195	.$888	JSR XREGFAC
198	.$88b	JSR FACWORD
199	.$88e	MOVBSELF1:
200	.$88e	STY $FFFF
202	.$891	LINE_25:
204	.$891	LDA #<VAR_Z
205	.$893	LDY #>VAR_Z
206	.$895	JSR REALFAC
209	.$898	JSR FACWORD
210	.$89b	STY MOVBSELF2+1
211	.$89e	STA MOVBSELF2+2
212	.$8a1	MOVBSELF2:
213	.$8a1	LDA $FFFF
214	.$8a4	CMP #184
215	.$8a6	BCC PEEKLT0
216	.$8a8	BEQ PEEKEQ0
217	.$8aa	LDA #$FF
218	.$8ac	JMP PEEKDONE0
219	.$8af	PEEKLT0:
220	.$8af	LDA #$01
221	.$8b1	JMP PEEKDONE0
222	.$8b4	PEEKEQ0:
223	.$8b4	LDA #0
224	.$8b6	PEEKDONE0:
228	.$8b6	NEQ_NEQ0:
229	.$8b6	NEQ_SKIP0:
230	.$8b6	COMP_SKP0:
231	.$8b6	BEQ LINE_SKIP1
232	.$8b8	LINE_NSKIP1:
235	.$8b8	LDA #<CONST_7
236	.$8ba	LDY #>CONST_7
237	.$8bc	JSR STROUTBRKWL
241	.$8bf	LINE_SKIP1:
244	.$8bf	LINE_30:
245	.$8bf	LDX #4
246	.$8c1	dcloop899_1:
247	.$8c1	LDA CONST_8R,X
248	.$8c4	STA VAR_I,X
249	.$8c7	LDA CONST_0R,X
250	.$8ca	STA VAR_Z,X
251	.$8cd	DEX
252	.$8ce	BPL dcloop899_1
255	.$8d0	LDA #<VAR_I
256	.$8d2	LDY #>VAR_I
257	.$8d4	JSR COPY2_XYA_XREG
261	.$8d7	JSR REALOUT
262	.$8da	JSR CRSRRIGHT
263	.$8dd	JSR TABOUT
264	.$8e0	LDA #<VAR_Z
265	.$8e2	LDY #>VAR_Z
266	.$8e4	JSR COPY2_XYA_XREG
270	.$8e7	JSR REALOUTBRK
272	.$8ea	JSR END
273	.$8ed	RTS
276	.$8ee	END   LDX SP_SAVE
277	.$8f1	TXS
284	.$8f2	RTS
287	.$8f3	START  LDA ENDSTRBUF+1
288	.$8f6	BNE ENDGIVEN
289	.$8f8	LDA BASICEND
290	.$8fa	STA ENDSTRBUF
291	.$8fd	LDA BASICEND+1
292	.$8ff	STA ENDSTRBUF+1
293	.$902	ENDGIVEN LDA #<FPSTACK
294	.$904	LDY #>FPSTACK
295	.$906	STA FPSTACKP
296	.$909	STY FPSTACKP+1
297	.$90c	LDA #<FORSTACK
298	.$90e	LDY #>FORSTACK
299	.$910	STA FORSTACKP
300	.$913	STY FORSTACKP+1
301	.$916	LDA #<STRBUF
302	.$918	LDY #>STRBUF
303	.$91a	STA STRBUFP
304	.$91d	STY STRBUFP+1
305	.$920	STA HIGHP
306	.$923	STY HIGHP+1
307	.$926	LDA #0
308	.$928	STA CHLOCKFLAG
309	.$92b	STA LASTVAR
310	.$92e	STA LASTVAR+1
311	.$931	JSR INITVARS
312	.$934	LDA #0
313	.$936	STA CMD_NUM
314	.$939	STA CHANNEL
315	.$93c	TAY
316	.$93d	TAX
320	.$93e	STA KEYNDX
326	.$940	JSR RESTORE
327	.$943	CLC
331	.$944	RTS
334	.$945	INITNARRAY
335	.$945	STA TMP_ZP
336	.$947	STY TMP_ZP+1
337	.$949	LDY #0
338	.$94b	TYA
339	.$94c	NINITLOOP STA (TMP_ZP),Y
340	.$94e	INC TMP_ZP
341	.$950	BNE NLOOPNOV
342	.$952	INC TMP_ZP+1
343	.$954	NLOOPNOV LDX TMP2_ZP
344	.$956	BNE NLOOPNOV2
345	.$958	DEC TMP2_ZP+1
346	.$95a	NLOOPNOV2 DEC TMP2_ZP
347	.$95c	BNE NINITLOOP
348	.$95e	LDX TMP2_ZP+1
349	.$960	BNE NINITLOOP
350	.$962	RTS
353	.$963	INITSTRARRAY
354	.$963	STA TMP_ZP
355	.$965	STY TMP_ZP+1
356	.$967	SINITLOOP LDY #0
357	.$969	LDA #<EMPTYSTR
358	.$96b	STA (TMP_ZP),Y
359	.$96d	LDA #>EMPTYSTR
360	.$96f	INY
361	.$970	STA (TMP_ZP),Y
362	.$972	CLC
363	.$973	LDA TMP_ZP
364	.$975	ADC #2
365	.$977	STA TMP_ZP
366	.$979	BCC SLOOPNOV1
367	.$97b	INC TMP_ZP+1
368	.$97d	SLOOPNOV1 SEC
369	.$97e	LDA TMP2_ZP
370	.$980	SBC #2
371	.$982	STA TMP2_ZP
372	.$984	BCS SLOOPNOV2
373	.$986	DEC TMP2_ZP+1
374	.$988	SLOOPNOV2 LDA TMP2_ZP
375	.$98a	BNE SINITLOOP
376	.$98c	LDA TMP2_ZP+1
377	.$98e	BNE SINITLOOP
378	.$990	RTS
381	.$991	INITSPARAMS STA TMP3_ZP
382	.$993	STY TMP3_ZP+1
383	.$995	SEC
384	.$996	SBC #2
385	.$998	STA TMP_ZP
386	.$99a	TYA
387	.$99b	SBC #0
388	.$99d	STA TMP_ZP+1
389	.$99f	LDY #0
390	.$9a1	LDA (TMP_ZP),Y
391	.$9a3	STA TMP2_ZP
392	.$9a5	INY
393	.$9a6	LDA (TMP_ZP),Y
394	.$9a8	STA TMP2_ZP+1
395	.$9aa	LDA TMP3_ZP
396	.$9ac	LDY TMP3_ZP+1
397	.$9ae	RTS
400	.$9af	INITSTRVARS LDA #<STRINGVARS_START  
401	.$9b1	LDY #>STRINGVARS_START
402	.$9b3	CMP #<STRINGVARS_END
403	.$9b5	BNE INITIT1
404	.$9b7	CPY #>STRINGVARS_END
405	.$9b9	BNE INITIT1
406	.$9bb	JMP INITSA2     
407	.$9be	INITIT1  STA TMP_ZP
408	.$9c0	STY TMP_ZP+1
409	.$9c2	LDY #0
410	.$9c4	INITSTRLOOP LDA #<EMPTYSTR
411	.$9c6	STA (TMP_ZP),Y
412	.$9c8	INY
413	.$9c9	LDA #>EMPTYSTR
414	.$9cb	STA (TMP_ZP),Y
415	.$9cd	DEY
416	.$9ce	LDA TMP_ZP
417	.$9d0	CLC
418	.$9d1	ADC #2
419	.$9d3	STA TMP_ZP
420	.$9d5	LDA TMP_ZP+1
421	.$9d7	ADC #0
422	.$9d9	STA TMP_ZP+1
423	.$9db	CMP #>STRINGVARS_END
424	.$9dd	BNE INITSTRLOOP
425	.$9df	LDA TMP_ZP
426	.$9e1	CMP #<STRINGVARS_END
427	.$9e3	BNE INITSTRLOOP
428	.$9e5	INITSA2  LDA #<STRINGARRAYS_START 
429	.$9e7	LDY #>STRINGARRAYS_START
430	.$9e9	CMP #<STRINGARRAYS_END
431	.$9eb	BNE ARRAYLOOP
432	.$9ed	CPY #>STRINGARRAYS_END
433	.$9ef	BNE ARRAYLOOP
434	.$9f1	RTS       
435	.$9f2	ARRAYLOOP CLC
436	.$9f3	ADC #3
437	.$9f5	BCC ARRAYSKIP1
438	.$9f7	INY
439	.$9f8	ARRAYSKIP1 CPY #>STRINGARRAYS_END
440	.$9fa	BEQ ARRAYSC
441	.$9fc	BCC ARRAYSKIP2
442	.$9fe	JMP ARRAYQUIT
443	.$a01	ARRAYSC  CMP #<STRINGARRAYS_END
444	.$a03	BCS ARRAYQUIT
445	.$a05	ARRAYSKIP2 STA TMP_REG
446	.$a07	STY TMP_REG+1
447	.$a09	JSR INITSPARAMS
448	.$a0c	LDA TMP_REG
449	.$a0e	LDY TMP_REG+1
450	.$a10	JSR INITSTRARRAY
451	.$a13	LDA TMP_ZP
452	.$a15	LDY TMP_ZP+1
453	.$a17	JMP ARRAYLOOP
454	.$a1a	ARRAYQUIT RTS
457	.$a1b	RESTORE  LDA #<DATAS
458	.$a1d	LDY #>DATAS
459	.$a1f	STA DATASP
460	.$a22	STY DATASP+1
461	.$a25	RTS
464	.$a26	TABSPC     BCC DOSPC
465	.$a28	TXA
466	.$a29	SBC $09
467	.$a2b	BCC TABSPCQUIT
468	.$a2d	TAX
469	.$a2e	DOSPC  INX
470	.$a2f	TABSPCLOOP  DEX
471	.$a30	BNE TABSPCRIGHT
472	.$a32	TABSPCQUIT RTS
473	.$a33	TABSPCRIGHT JSR CRSRRIGHT
474	.$a36	JMP TABSPCLOOP
477	.$a39	REROUTE  LDA CMD_NUM  
478	.$a3c	BEQ REROUTECMD
479	.$a3e	TAX
480	.$a3f	STA CHANNEL
481	.$a42	JMP CHKOUT
482	.$a45	REROUTECMD RTS
485	.$a46	RESETROUTE LDA CMD_NUM  
486	.$a49	BEQ RESETROUTECMD
487	.$a4b	JMP CLRCHNEW
488	.$a4e	RESETROUTECMD
489	.$a4e	RTS
492	.$a4f	INTOUTFASTZ LDX #32    
493	.$a51	LDA TMP_ZP+1
494	.$a53	BPL INTISPOS
495	.$a55	CLC
496	.$a56	LDA TMP_ZP
497	.$a58	EOR #$FF
498	.$a5a	ADC #1
499	.$a5c	STA TMP_ZP
500	.$a5e	LDA TMP_ZP+1
501	.$a60	EOR #$FF
502	.$a62	ADC #0
503	.$a64	STA TMP_ZP+1
504	.$a66	LDX #45    
505	.$a68	INTISPOS
506	.$a68	TXA
507	.$a69	JSR CHROUT
508	.$a6c	JSR CONVPOSINT
509	.$a6f	LDA NUMFLAG
510	.$a72	BNE ALLINTOUTDONE
511	.$a74	LDA #48
512	.$a76	JSR CHROUT
513	.$a79	ALLINTOUTDONE
514	.$a79	RTS
517	.$a7a	NUMBEROUT
518	.$a7a	BEQ NUMZERO
519	.$a7c	ORA #$30
520	.$a7e	STA NUMFLAG
521	.$a81	JMP CHROUT
522	.$a84	NUMZERO
523	.$a84	LDX NUMFLAG
524	.$a87	BEQ STILLZERO
525	.$a89	ORA #$30
526	.$a8b	JMP CHROUT
527	.$a8e	STILLZERO
528	.$a8e	RTS
531	.$a8f	CONVPOSINT
532	.$a8f	JSR INT2BCD
533	.$a92	LDX #0
534	.$a94	STX NUMFLAG
535	.$a97	AND #$0F
536	.$a99	JSR NUMBEROUT
537	.$a9c	LDA BCD+1
538	.$a9f	LSR
539	.$aa0	LSR
540	.$aa1	LSR
541	.$aa2	LSR
542	.$aa3	JSR NUMBEROUT
543	.$aa6	LDA BCD+1
544	.$aa9	AND #$0F
545	.$aab	TAY
546	.$aac	JSR NUMBEROUT
547	.$aaf	LDA BCD
548	.$ab2	LSR
549	.$ab3	LSR
550	.$ab4	LSR
551	.$ab5	LSR
552	.$ab6	JSR NUMBEROUT
553	.$ab9	LDA BCD
554	.$abc	AND #$0F
555	.$abe	JSR NUMBEROUT
556	.$ac1	RTS
559	.$ac2	INT2BCD
560	.$ac2	SED
561	.$ac3	LDA #0
562	.$ac5	STA BCD
563	.$ac8	STA BCD+1
564	.$acb	STA BCD+2
565	.$ace	ASL TMP_ZP
566	.$ad0	ROL TMP_ZP+1
567	.$ad2	LDA BCD
568	.$ad5	ADC BCD
569	.$ad8	STA BCD
570	.$adb	ASL TMP_ZP
571	.$add	ROL TMP_ZP+1
572	.$adf	ADC BCD
573	.$ae2	STA BCD
574	.$ae5	ASL TMP_ZP
575	.$ae7	ROL TMP_ZP+1
576	.$ae9	ADC BCD
577	.$aec	STA BCD
578	.$aef	ASL TMP_ZP
579	.$af1	ROL TMP_ZP+1
580	.$af3	ADC BCD
581	.$af6	STA BCD
582	.$af9	ASL TMP_ZP
583	.$afb	ROL TMP_ZP+1
584	.$afd	ADC BCD
585	.$b00	STA BCD
586	.$b03	ASL TMP_ZP
587	.$b05	ROL TMP_ZP+1
588	.$b07	ADC BCD
589	.$b0a	STA BCD
590	.$b0d	LDX #7
591	.$b0f	BCDBIT1
592	.$b0f	ASL TMP_ZP
593	.$b11	ROL TMP_ZP+1
594	.$b13	LDA BCD
595	.$b16	ADC BCD
596	.$b19	STA BCD
597	.$b1c	LDA BCD+1
598	.$b1f	ADC BCD+1
599	.$b22	STA BCD+1
600	.$b25	DEX
601	.$b26	BNE BCDBIT1
602	.$b28	LDX #3
603	.$b2a	BCDBIT2
604	.$b2a	ASL TMP_ZP
605	.$b2c	ROL TMP_ZP+1
606	.$b2e	LDA BCD
607	.$b31	ADC BCD
608	.$b34	STA BCD
609	.$b37	LDA BCD+1
610	.$b3a	ADC BCD+1
611	.$b3d	STA BCD+1
612	.$b40	LDA BCD+2
613	.$b43	ADC BCD+2
614	.$b46	STA BCD+2
615	.$b49	DEX
616	.$b4a	BNE BCDBIT2
617	.$b4c	CLD
618	.$b4d	RTS
619	.$b4e	BCD
620	.$b4e	.WORD 0 0
621	.$b52	NUMFLAG
622	.$b52	.BYTE 0
625	.$b53	REALOUTFAST JSR FACINT
626	.$b56	STA TMP_ZP+1
627	.$b58	STY TMP_ZP
628	.$b5a	JMP INTOUTFASTZ
631	.$b5d	CHECKFORFASTOUT
632	.$b5d	JSR REROUTE
633	.$b60	JSR XREGFAC
634	.$b63	LDA FACEXP
635	.$b65	CMP #$90
636	.$b67	BCS REALOUTINT
637	.$b69	CMP #$81
638	.$b6b	BCC REALOUTINT
639	.$b6d	MAYBEREALOUTFAST
640	.$b6d	LDA FACEXP+3
641	.$b6f	BNE REALOUTINT
642	.$b71	LDA FACEXP+4
643	.$b73	BNE REALOUTINT
644	.$b75	LDA FACEXP
645	.$b77	SEC
646	.$b78	SBC #129
647	.$b7a	ASL
648	.$b7b	TAX
649	.$b7c	LDA FACEXP+1
650	.$b7e	AND MANTMASK,X
651	.$b81	BNE REALOUTINT
652	.$b83	INX
653	.$b84	LDA FACEXP+2
654	.$b86	AND MANTMASK,X
655	.$b89	BNE REALOUTINT
656	.$b8b	JMP REALOUTFAST
657	.$b8e	REALOUTINT LDY #0
658	.$b90	JSR FACSTR
659	.$b93	LDY #0
660	.$b95	LDA LOFBUF,Y
661	.$b98	STRLOOPRO JSR CHROUT
662	.$b9b	INY
663	.$b9c	LDA LOFBUF,Y
664	.$b9f	BNE STRLOOPRO
665	.$ba1	RTS
666	.$ba2	MANTMASK
667	.$ba2	.BYTE 127 255 63 255 31 255 15 255 7 255 3 255 1 255 0 255 0 127 0 63 0 31 0 15 0 7 0 3 0 1
670	.$bc0	REALOUT  LDA X_REG
671	.$bc2	BNE RNOTNULL
672	.$bc4	JMP PRINTNULL
673	.$bc7	RNOTNULL JSR CHECKFORFASTOUT
674	.$bca	JMP RESETROUTE
677	.$bcd	REALOUTBRK  LDA X_REG
678	.$bcf	BNE RNOTNULLBRK
679	.$bd1	JMP PRINTNULLBRK
680	.$bd4	RNOTNULLBRK JSR CHECKFORFASTOUT
681	.$bd7	LDA #$0D
682	.$bd9	JSR CHROUT
683	.$bdc	JMP RESETROUTE
686	.$bdf	PRINTNULL JSR REROUTE
687	.$be2	LDA #$20
688	.$be4	JSR CHROUT
689	.$be7	LDA #$30
690	.$be9	JSR CHROUT
691	.$bec	JMP RESETROUTE
694	.$bef	PRINTNULLBRK
695	.$bef	JSR REROUTE
696	.$bf2	LDA #$20
697	.$bf4	JSR CHROUT
698	.$bf7	LDA #$30
699	.$bf9	JSR CHROUT
700	.$bfc	LDA #$0D
701	.$bfe	JSR CHROUT
702	.$c01	JMP RESETROUTE
705	.$c04	STROUTBRKWL STA A_REG
706	.$c07	STY A_REG+1
707	.$c0a	STROUTBRK JSR REROUTE
708	.$c0d	LDA A_REG
709	.$c10	STA INDEX1
710	.$c12	LDA A_REG+1
711	.$c15	STA INDEX1+1
712	.$c17	LDY #0
713	.$c19	LDA (INDEX1),Y
714	.$c1b	TAX
715	.$c1c	INC INDEX1
716	.$c1e	BNE PRINTSTR2
717	.$c20	INC INDEX1+1
718	.$c22	PRINTSTR2 JSR PRINTSTRS
719	.$c25	LDA HIGHP   
720	.$c28	STA STRBUFP
721	.$c2b	LDA HIGHP+1
722	.$c2e	STA STRBUFP+1
723	.$c31	LDA #$0D
724	.$c33	JSR CHROUT
725	.$c36	JMP RESETROUTE  
728	.$c39	TABOUT  JSR REROUTE
729	.$c3c	LDA CMD_NUM
730	.$c3f	BEQ NORMALTABOUT  
731	.$c41	CMP #3
732	.$c43	BEQ NORMALTABOUT2  
733	.$c45	JMP TABOUTCHANNEL2
734	.$c48	NORMALTABOUT2
735	.$c48	JSR CLRCHNEW
736	.$c4b	NORMALTABOUT
737	.$c4b	SEC
738	.$c4c	JSR CRSRPOS
739	.$c4f	TYA
740	.$c50	SEC
741	.$c51	TABSUB   SBC #$0A
742	.$c53	BCS TABSUB
743	.$c55	EOR #$FF
744	.$c57	ADC #$01
745	.$c59	TAX
746	.$c5a	INX
747	.$c5b	TABLOOP  DEX
748	.$c5c	BNE TABRIGHT
749	.$c5e	RTS
750	.$c5f	TABRIGHT JSR CRSRRIGHT
751	.$c62	JMP TABLOOP
754	.$c65	REALFACPUSH STA TMP_ZP
755	.$c67	STY TMP_ZP+1
756	.$c69	LDX FPSTACKP
757	.$c6c	LDY FPSTACKP+1
758	.$c6f	STX TMP2_ZP
759	.$c71	STY TMP2_ZP+1
760	.$c73	LDY #0
761	.$c75	LDA (TMP_ZP),Y
762	.$c77	STA (TMP2_ZP),Y
763	.$c79	INY
764	.$c7a	LDA (TMP_ZP),Y
765	.$c7c	STA (TMP2_ZP),Y
766	.$c7e	INY
767	.$c7f	LDA (TMP_ZP),Y
768	.$c81	STA (TMP2_ZP),Y
769	.$c83	INY
770	.$c84	LDA (TMP_ZP),Y
771	.$c86	STA (TMP2_ZP),Y
772	.$c88	INY
773	.$c89	LDA (TMP_ZP),Y
774	.$c8b	STA (TMP2_ZP),Y
775	.$c8d	TXA    
776	.$c8e	CLC
777	.$c8f	ADC #5
778	.$c91	STA FPSTACKP
779	.$c94	BCC NOPVRFPXX
780	.$c96	INC FPSTACKP+1
781	.$c99	NOPVRFPXX RTS
784	.$c9a	POPREAL  LDA FPSTACKP
785	.$c9d	SEC
786	.$c9e	SBC #5
787	.$ca0	STA FPSTACKP
788	.$ca3	BCS NOPVPR
789	.$ca5	DEC FPSTACKP+1
790	.$ca8	NOPVPR  LDA FPSTACKP
791	.$cab	LDY FPSTACKP+1
792	.$cae	JMP REALFAC
795	.$cb1	SHL   LDA FACEXP
796	.$cb3	BEQ SHLOK
797	.$cb5	CLC
798	.$cb6	ADC A_REG
799	.$cb9	BCC SHLOK
800	.$cbb	LDA #0
801	.$cbd	STA FACSGN
802	.$cbf	STA FACLO
803	.$cc1	STA FACMO
804	.$cc3	STA FACMOH
805	.$cc5	STA FACHO
806	.$cc7	LDA #$FF
807	.$cc9	SHLOK  STA FACEXP
808	.$ccb	RTS
811	.$ccc	COPY2_XYA_XREG
812	.$ccc	STA TMP3_ZP
813	.$cce	STY TMP3_ZP+1
814	.$cd0	COPY2_XY_XREG
815	.$cd0	LDX #<X_REG  
816	.$cd2	LDY #0
817	.$cd4	LDA (TMP3_ZP),Y
818	.$cd6	STA X_REG
819	.$cd8	INY
820	.$cd9	LDA (TMP3_ZP),Y
821	.$cdb	STA X_REG+1
822	.$cdd	INY
823	.$cde	LDA (TMP3_ZP),Y
824	.$ce0	STA X_REG+2
825	.$ce2	INY
826	.$ce3	LDA (TMP3_ZP),Y
827	.$ce5	STA X_REG+3
828	.$ce7	INY
829	.$ce8	LDA (TMP3_ZP),Y
830	.$cea	STA X_REG+4
831	.$cec	RTS
835	.$ced	FACWORD
836	.$ced	LDA FACEXP   
837	.$cef	BNE DOFACWORD
838	.$cf1	STA FACSGN   
839	.$cf3	DOFACWORD:
840	.$cf3	JMP XFACWORD
844	.$cf6	INITOUTCHANNEL
845	.$cf6	LDA CHLOCKFLAG
846	.$cf9	BEQ INITOUT2
847	.$cfb	CMP #$FF
848	.$cfd	BNE SKIPINITCH
849	.$cff	INITOUT2
850	.$cff	LDA #<C_REG
851	.$d01	LDY #>C_REG
852	.$d03	JSR REALFAC
853	.$d06	JSR FACWORD
854	.$d09	TYA
855	.$d0a	TAX
856	.$d0b	CPX CMD_NUM
857	.$d0e	BNE CMDNEQUAL
858	.$d10	LDY #0
859	.$d12	STY CMD_NUM   
860	.$d15	CMDNEQUAL STA CHANNEL
861	.$d18	STA CHLOCKFLAG
862	.$d1b	JMP CHKOUT
863	.$d1e	SKIPINITCH
864	.$d1e	RTS
867	.$d1f	CLRCHNEW
868	.$d1f	LDA CHLOCKFLAG
869	.$d22	BNE SKIPCLRCH
870	.$d24	JMP CLRCH
871	.$d27	SKIPCLRCH
872	.$d27	RTS
875	.$d28	TABOUTCHANNEL
876	.$d28	JSR INITOUTCHANNEL
877	.$d2b	LDA CHANNEL
878	.$d2e	CMP #3  
879	.$d30	BEQ TABOUTSCREEN
880	.$d32	TABOUTCHANNEL2
881	.$d32	LDA IOCHANNEL
882	.$d34	STA STORE1
883	.$d37	LDA #1
884	.$d39	STA IOCHANNEL  
885	.$d3b	LDX #10
886	.$d3d	JMP EXITCHANNEL
887	.$d40	TABOUTSCREEN
888	.$d40	JSR CLRCHNEW
889	.$d43	JMP TABOUT
892	.$d46	EXITCHANNEL CLC
893	.$d47	JSR TABSPC
894	.$d4a	JSR CLRCHNEW
895	.$d4d	LDA STORE1
896	.$d50	STA IOCHANNEL
897	.$d52	RTS
900	.$d53	ILLEGALQUANTITY
904	.$d53	JMP ERRIQ
907	.$d56	FACXREG  LDA FACLO
908	.$d58	STA X_REG+4
909	.$d5a	LDA FACMO
910	.$d5c	STA X_REG+3
911	.$d5e	LDA FACMOH
912	.$d60	STA X_REG+2
913	.$d62	LDA FACSGN
914	.$d64	ORA #$7F
915	.$d66	AND FACHO
916	.$d68	STA X_REG+1
917	.$d6a	LDA FACEXP
918	.$d6c	STA X_REG
919	.$d6e	LDA #0   
920	.$d70	STA FACOV
921	.$d72	RTS
924	.$d73	FACYREG  LDA FACLO
925	.$d75	STA Y_REG+4
926	.$d78	LDA FACMO
927	.$d7a	STA Y_REG+3
928	.$d7d	LDA FACMOH
929	.$d7f	STA Y_REG+2
930	.$d82	LDA FACSGN
931	.$d84	ORA #$7F
932	.$d86	AND FACHO
933	.$d88	STA Y_REG+1
934	.$d8b	LDA FACEXP
935	.$d8d	STA Y_REG
936	.$d90	LDA #0   
937	.$d92	STA FACOV
938	.$d94	RTS
941	.$d95	XREGFAC  LDA X_REG+4
942	.$d97	STA FACLO
943	.$d99	LDA X_REG+3
944	.$d9b	STA FACMO
945	.$d9d	LDA X_REG+2
946	.$d9f	STA FACMOH
947	.$da1	LDA X_REG+1
948	.$da3	STA FACSGN
949	.$da5	ORA #$80
950	.$da7	STA FACHO
951	.$da9	LDA X_REG
952	.$dab	STA FACEXP
953	.$dad	LDA #0
954	.$daf	STA FACOV
955	.$db1	RTS
958	.$db2	YREGFAC  LDA Y_REG+4
959	.$db5	STA FACLO
960	.$db7	LDA Y_REG+3
961	.$dba	STA FACMO
962	.$dbc	LDA Y_REG+2
963	.$dbf	STA FACMOH
964	.$dc1	LDA Y_REG+1
965	.$dc4	STA FACSGN
966	.$dc6	ORA #$80
967	.$dc8	STA FACHO
968	.$dca	LDA Y_REG
969	.$dcd	STA FACEXP
970	.$dcf	LDA #0
971	.$dd1	STA FACOV
972	.$dd3	RTS
1086	.$dd4	FASTFADDMEM
1087	.$dd4	JSR MEMARG
1088	.$dd7	FASTFADDARG
1089	.$dd7	BNE FADDRET2     
1090	.$dd9	JMP ARGFAC
1091	.$ddc	FADDRET2 LDA ARGEXP
1092	.$dde	BNE FADDRET1     
1093	.$de0	RTS
1094	.$de1	FADDRET1 SEC
1095	.$de2	SBC FACEXP
1096	.$de4	BEQ FFADD_EXPEQ     
1097	.$de6	BCC FFADD_SHFARG1   
1101	.$de8	LDY ARGEXP
1102	.$dea	STY FACEXP
1103	.$dec	LDY ARGSGN
1104	.$dee	STY FACSGN
1105	.$df0	LDX #0
1106	.$df2	STX OLDOV        
1107	.$df4	LDX #FAC         
1109	.$df6	SEC
1110	.$df7	SBC #$08
1111	.$df9	BMI FFADD_SHFFAC2
1113	.$dfb	FFADD_SHFFAC1
1114	.$dfb	LDY FACLO        
1115	.$dfd	STY FACOV
1116	.$dff	LDY FACMO        
1117	.$e01	STY FACMO+1
1118	.$e03	LDY FACMOH       
1119	.$e05	STY FACMOH+1
1120	.$e07	LDY FACHO        
1121	.$e09	STY FACHO+1
1122	.$e0b	LDY #0
1123	.$e0d	STY FACHO        
1124	.$e0f	SBC #$08         
1125	.$e11	BPL FFADD_SHFFAC1   
1126	.$e13	FFADD_SHFFAC2
1127	.$e13	ADC #$08         
1128	.$e15	BEQ FFADD_SHFFAC4   
1129	.$e17	TAY
1130	.$e18	LDA FACOV
1131	.$e1a	FFADD_SHFFAC3
1132	.$e1a	LSR FACHO        
1133	.$e1c	ROR FACMOH       
1134	.$e1e	ROR FACMO        
1135	.$e20	ROR FACLO        
1136	.$e22	ROR              
1137	.$e23	DEY
1138	.$e24	BNE FFADD_SHFFAC3
1139	.$e26	JMP FFADD_MANADD2   
1140	.$e29	FFADD_SHFFAC4
1141	.$e29	LDA FACOV        
1142	.$e2b	JMP FFADD_MANADD2
1143	.$e2e	FFADD_EXPEQ
1144	.$e2e	LDX FACOV
1145	.$e30	STX OLDOV
1148	.$e32	JMP FFADD_MANADD1
1149	.$e35	FFADD_SHFARG2
1150	.$e35	LDA FACOV        
1151	.$e37	JMP FFADD_MANADD1
1152	.$e3a	FFADD_SHFARG1
1153	.$e3a	LDX FACOV
1154	.$e3c	STX OLDOV        
1155	.$e3e	LDX #$00         
1158	.$e40	ADC #$08
1159	.$e42	BPL FFADD_SHFARG6   
1160	.$e44	FFADD_SHFARG3
1161	.$e44	LDX ARGLO        
1162	.$e46	LDY ARGMO        
1163	.$e48	STY ARGMO+1
1164	.$e4a	LDY ARGMOH       
1165	.$e4c	STY ARGMOH+1
1166	.$e4e	LDY ARGHO        
1167	.$e50	STY ARGHO+1
1168	.$e52	LDY #0
1169	.$e54	STY ARGHO        
1170	.$e56	FFADD_SHFARG4
1171	.$e56	ADC #$08
1172	.$e58	BMI FFADD_SHFARG3
1173	.$e5a	BEQ FFADD_SHFARG3
1174	.$e5c	FFADD_SHFARG6
1175	.$e5c	SBC #$08
1176	.$e5e	BEQ FFADD_SHFARG2   
1177	.$e60	TAY
1178	.$e61	TXA              
1179	.$e62	FFADD_SHFARG5
1180	.$e62	LSR ARGHO
1181	.$e64	ROR ARGMOH
1182	.$e66	ROR ARGMO
1183	.$e68	ROR ARGLO
1184	.$e6a	ROR           
1185	.$e6b	INY
1186	.$e6c	BNE FFADD_SHFARG5
1187	.$e6e	FFADD_MANADD1
1188	.$e6e	LDX #ARGEXP      
1189	.$e70	FFADD_MANADD2
1190	.$e70	BIT ARISGN
1191	.$e72	BMI FFADD_MANSUB1   
1192	.$e74	CLC
1193	.$e75	ADC OLDOV
1194	.$e77	STA FACOV
1195	.$e79	LDA FACLO
1196	.$e7b	ADC ARGLO
1197	.$e7d	STA FACLO
1198	.$e7f	LDA FACMO
1199	.$e81	ADC ARGMO
1200	.$e83	STA FACMO
1201	.$e85	LDA FACMOH
1202	.$e87	ADC ARGMOH
1203	.$e89	STA FACMOH
1204	.$e8b	LDA FACHO
1205	.$e8d	ADC ARGHO
1206	.$e8f	STA FACHO
1207	.$e91	BCC FFADD_RNDRTS
1208	.$e93	INC FACEXP
1209	.$e95	BEQ FFADD_OVERR
1211	.$e97	ROR FACHO
1212	.$e99	ROR FACMOH
1213	.$e9b	ROR FACMO
1214	.$e9d	ROR FACLO
1215	.$e9f	ROR FACOV
1216	.$ea1	FFADD_RNDRTS
1217	.$ea1	RTS
1218	.$ea2	FFADD_OVERR
1219	.$ea2	JMP ILLEGALQUANTITY
1220	.$ea5	FFADD_MANSUB1
1221	.$ea5	LDY #FACEXP
1222	.$ea7	CPX #ARGEXP
1223	.$ea9	BEQ FFADD_MANSUB2
1224	.$eab	LDY #ARGEXP
1225	.$ead	FFADD_MANSUB2
1226	.$ead	SEC              
1227	.$eae	EOR #$FF
1228	.$eb0	ADC OLDOV
1229	.$eb2	STA FACOV
1230	.$eb4	LDA 4,Y
1231	.$eb7	SBC 4,X
1232	.$eb9	STA FACLO
1233	.$ebb	LDA 3,Y
1234	.$ebe	SBC 3,X
1235	.$ec0	STA FACMO
1236	.$ec2	LDA 2,Y
1237	.$ec5	SBC 2,X
1238	.$ec7	STA FACMOH
1239	.$ec9	LDA 1,Y
1240	.$ecc	SBC 1,X
1241	.$ece	STA FACHO
1242	.$ed0	BCS FCNORMAL
1243	.$ed2	LDA FACSGN
1244	.$ed4	EOR #$FF
1245	.$ed6	STA FACSGN
1246	.$ed8	LDA FACHO
1247	.$eda	EOR #$FF
1248	.$edc	STA FACHO
1249	.$ede	LDA FACMOH
1250	.$ee0	EOR #$FF
1251	.$ee2	STA FACMOH
1252	.$ee4	LDA FACMO
1253	.$ee6	EOR #$FF
1254	.$ee8	STA FACMO
1255	.$eea	LDA FACLO
1256	.$eec	EOR #$FF
1257	.$eee	STA FACLO
1258	.$ef0	LDA FACOV
1259	.$ef2	EOR #$FF
1260	.$ef4	CLC
1261	.$ef5	ADC #1
1262	.$ef7	STA FACOV
1263	.$ef9	BNE FCNORMAL
1264	.$efb	INC FACLO
1265	.$efd	BNE FCNORMAL
1266	.$eff	INC FACMO
1267	.$f01	BNE FCNORMAL
1268	.$f03	INC FACMOH
1269	.$f05	BNE FCNORMAL
1270	.$f07	INC FACHO
1271	.$f09	FCNORMAL   BIT FACHO
1272	.$f0b	BMI FFADD_RET       
1273	.$f0d	LDA #0           
1274	.$f0f	CLC
1275	.$f10	FFADD_NORM3
1276	.$f10	LDX FACHO
1277	.$f12	BNE FFADD_NORM1
1278	.$f14	LDX FACHO+1
1279	.$f16	STX FACHO
1280	.$f18	LDX FACMOH+1
1281	.$f1a	STX FACMOH
1282	.$f1c	LDX FACMO+1
1283	.$f1e	STX FACMO
1284	.$f20	LDX FACOV
1285	.$f22	STX FACLO
1286	.$f24	LDX #0
1287	.$f26	STX FACOV
1288	.$f28	ADC #$08
1289	.$f2a	CMP #$20
1290	.$f2c	BNE FFADD_NORM3
1291	.$f2e	JMP FFADD_ZEROFAC
1292	.$f31	FFADD_NORM2
1293	.$f31	CLC
1294	.$f32	ADC #1
1295	.$f34	ASL FACOV
1296	.$f36	ROL FACLO
1297	.$f38	ROL FACMO
1298	.$f3a	ROL FACMOH
1299	.$f3c	ROL FACHO
1300	.$f3e	FFADD_NORM1
1301	.$f3e	BPL FFADD_NORM2     
1302	.$f40	SEC
1303	.$f41	SBC FACEXP
1304	.$f43	BCS FFADD_ZEROFAC
1305	.$f45	EOR #$FF
1306	.$f47	CLC
1307	.$f48	ADC #1
1308	.$f4a	STA FACEXP
1309	.$f4c	FFADD_RET   RTS
1310	.$f4d	FFADD_ZEROFAC
1311	.$f4d	LDX #0
1312	.$f4f	STX FACEXP
1313	.$f51	STX FACSGN
1314	.$f53	RTS
1317	.$f54	INITVARS
1318	.$f54	JSR INITSTRVARS
1319	.$f57	LDA #0
1320	.$f59	LDY #4
1321	.$f5b	REALINITLOOP0:
1322	.$f5b	STA VAR_I,Y
1323	.$f5e	STA VAR_Z,Y
1324	.$f61	DEY
1325	.$f62	BMI REALLOOPEXIT0
1326	.$f64	JMP REALINITLOOP0
1327	.$f67	REALLOOPEXIT0:
1328	.$f67	RTS
1332	.$f68	CONSTANTS
1335	.$f68	CONST_0R .REAL 1.0
1338	.$f6d	CONST_1R .REAL 2.0
1347	.$f72	CONST_4R .REAL 136.0
1355	.$f77	CONST_7 .BYTE 5
1356	.$f78	.STRG "nope!"
1359	.$f7d	CONST_8R .REAL 3.0
1362	.$f82	DATAS
1363	.$f82	.BYTE $FF
1365	.$f83	CONSTANTS_END
1368	.$f83	VARIABLES
1370	.$f83	VAR_I .REAL 0.0
1372	.$f88	VAR_Z .REAL 0.0
1373	.$f8d	STRINGVARS_START
1375	.$f8d	VAR_TI$ .WORD EMPTYSTR
1376	.$f8f	STRINGVARS_END
1377	.$f8f	STRINGARRAYS_START
1378	.$f8f	STRINGARRAYS_END
1379	.$f8f	VARIABLES_END
1381	.$f8f	Y_REG .REAL 0.0
1382	.$f94	C_REG .REAL 0.0
1383	.$f99	D_REG .REAL 0.0
1384	.$f9e	E_REG .REAL 0.0
1385	.$fa3	F_REG .REAL 0.0
1386	.$fa8	A_REG .WORD 0
1387	.$faa	B_REG .WORD 0
1388	.$fac	CMD_NUM .BYTE 0
1389	.$fad	CHANNEL .BYTE 0
1390	.$fae	SP_SAVE .BYTE 0
1391	.$faf	TMP2_REG .WORD 0
1392	.$fb1	TMP3_REG .WORD 0
1393	.$fb3	TMP4_REG .WORD 0
1394	.$fb5	AS_TMP .WORD 0
1395	.$fb7	BPOINTER_TMP .WORD 0
1396	.$fb9	BASICTEXTP .BYTE 0
1397	.$fba	STORE1 .WORD 0
1398	.$fbc	STORE2 .WORD 0
1399	.$fbe	STORE3 .WORD 0
1400	.$fc0	STORE4 .WORD 0
1401	.$fc2	GCSTART .WORD 0
1402	.$fc4	GCLEN .WORD 0
1403	.$fc6	GCWORK .WORD 0
1404	.$fc8	INPUTLENGTH .BYTE 0
1405	.$fc9	TMP_FREG .REAL 0
1406	.$fce	TMP2_FREG .REAL 0
1407	.$fd3	TMP_FLAG .BYTE 0
1408	.$fd4	INT_FLAG .BYTE 0
1409	.$fd5	REAL_CONST_ONE .REAL 1.0
1410	.$fda	REAL_CONST_ZERO .REAL 0.0
1411	.$fdf	REAL_CONST_MINUS_ONE .REAL -1.0
1412	.$fe4	CHLOCKFLAG .BYTE 0
1413	.$fe5	EMPTYSTR .BYTE 0
1414	.$fe6	FPSTACKP .WORD FPSTACK
1415	.$fe8	FORSTACKP .WORD FORSTACK
1416	.$fea	DATASP .WORD DATAS
1417	.$fec	LASTVAR .WORD 0
1418	.$fee	LASTVARP .WORD 0
1419	.$ff0	HIGHP .WORD STRBUF
1420	.$ff2	STRBUFP .WORD STRBUF
1421	.$ff4	ENDSTRBUF .WORD 0
1422	.$ff6	INPUTQUEUEP .BYTE 0
1423	.$ff7	PROGRAMEND
1424	.$ff7	INPUTQUEUE .ARRAY $0F
1425	.$1006	FPSTACK .ARRAY 100
1426	.$106a	FORSTACK .ARRAY 340
1427	.$11be	STRBUF .BYTE 0
