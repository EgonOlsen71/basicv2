117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
128	.$81f	LDA #<CONST_0
129	.$821	LDY #>CONST_0
130	.$823	STA TMP_ZP
131	.$825	STY TMP_ZP+1
133	.$827	JSR WRITETID
134	.$82a	LDX #4
135	.$82c	dcloop235_1:
136	.$82c	LDA CONST_1R,X
137	.$82f	STA VAR_CP,X
138	.$832	DEX
139	.$833	BPL dcloop235_1
142	.$835	LINE_20:
144	.$835	LDY #0
145	.$837	STY 53281
147	.$83a	LDY #7
148	.$83c	STY 646
151	.$83f	LINE_30:
153	.$83f	LDA #147
154	.$841	JSR SINGLECHROUTMAX
157	.$844	LDA #<CONST_5
158	.$846	LDY #>CONST_5
159	.$848	JSR STROUTBRKWL
163	.$84b	LINE_40:
165	.$84b	LDA #0
166	.$84d	STA VAR_AM
167	.$850	STA VAR_AM+1
168	.$853	STA VAR_AM+2
169	.$856	STA VAR_AM+3
170	.$859	STA VAR_AM+4
173	.$85c	LINE_50:
175	.$85c	JSR GOSUB
176	.$85f	JSR LINE_1000
178	.$862	LINE_60:
180	.$862	LDA VAR_PR
181	.$865	BEQ EQ_SKIP0
182	.$867	EQ_EQ0:
183	.$867	JMP LINE_SKIP4
184	.$86a	EQ_SKIP0:
185	.$86a	COMP_SKP0:
189	.$86a	LINE_NSKIP4:
191	.$86a	JMP LINE_100
193	.$86d	LINE_SKIP4:
196	.$86d	LINE_70:
198	.$86d	LDA #<VAR_PR
199	.$86f	LDY #>VAR_PR
200	.$871	JSR COPY2_XYA_XREG
204	.$874	JSR REALOUT
205	.$877	JSR CRSRRIGHT
206	.$87a	LDA #44
207	.$87c	JSR SINGLECHROUTMAX
211	.$87f	LINE_80:
213	.$87f	JSR ONETOFAC
215	.$882	LDA #<VAR_AM
216	.$884	LDY #>VAR_AM
217	.$886	JSR FASTFADDMEM
222	.$889	LDX #<VAR_AM
223	.$88b	LDY #>VAR_AM
225	.$88d	JSR FACMEM
227	.$890	LINE_90:
229	.$890	JMP LINE_50
231	.$893	LINE_100:
233	.$893	LDA #<CONST_8
234	.$895	LDY #>CONST_8
235	.$897	JSR STROUTWL
237	.$89a	LDA #<VAR_AM
238	.$89c	LDY #>VAR_AM
239	.$89e	JSR COPY2_XYA_XREG
243	.$8a1	JSR REALOUTBRK
246	.$8a4	LINE_110:
248	.$8a4	JSR READTID
249	.$8a7	LDA VAR_TI$
250	.$8aa	LDY VAR_TI$+1
251	.$8ad	JSR STROUTBRKWL
254	.$8b0	JSR END
255	.$8b3	RTS
257	.$8b4	LINE_1000:
259	.$8b4	LDA #<VAR_CP
260	.$8b6	LDY #>VAR_CP
261	.$8b8	JSR COPY2_XYA_XREG
265	.$8bb	LDA #<VAR_SV%[]
266	.$8bd	LDY #>VAR_SV%[]
267	.$8bf	JSR ARRAYACCESS_INTEGER_S
269	.$8c2	LDA X_REG
270	.$8c4	BEQ EQ_EQ1
271	.$8c6	LDA #0
273	.$8c8	JMP EQ_SKIP1
274	.$8cb	EQ_EQ1:
275	.$8cb	LDA #$1
276	.$8cd	EQ_SKIP1:
277	.$8cd	COMP_SKP1:
278	.$8cd	BEQ LINE_SKIP5
281	.$8cf	LINE_NSKIP5:
283	.$8cf	JMP LINE_1100
285	.$8d2	LINE_SKIP5:
288	.$8d2	LINE_1010:
290	.$8d2	JSR ONETOFAC
292	.$8d5	LDA #<VAR_CP
293	.$8d7	LDY #>VAR_CP
294	.$8d9	JSR FASTFADDMEM
299	.$8dc	LDX #<VAR_CP
300	.$8de	LDY #>VAR_CP
302	.$8e0	JSR FACMEM
304	.$8e3	LINE_1020:
306	.$8e3	LDX #4
307	.$8e5	dceloop2824_1:
308	.$8e5	LDA CONST_9R,X
309	.$8e8	CMP VAR_CP,X
310	.$8eb	BNE LINE_SKIP6
311	.$8ed	DEX
312	.$8ee	BPL dceloop2824_1
314	.$8f0	LINE_NSKIP6:
317	.$8f0	LDA #0
318	.$8f2	STA VAR_PR
319	.$8f5	STA VAR_PR+1
320	.$8f8	STA VAR_PR+2
321	.$8fb	STA VAR_PR+3
322	.$8fe	STA VAR_PR+4
324	.$901	JMP RETURN
326	.$904	LINE_SKIP6:
329	.$904	LINE_1030:
331	.$904	JMP LINE_1000
333	.$907	LINE_1100:
335	.$907	LDA #<VAR_CP
336	.$909	LDY #>VAR_CP
337	.$90b	JSR COPY2_XYA_XREG
341	.$90e	LDY #1
342	.$910	LDA #0
343	.$912	STY AS_TMP
344	.$915	STA AS_TMP+1
345	.$918	LDA #<VAR_SV%[]
346	.$91a	LDY #>VAR_SV%[]
347	.$91c	STA G_REG
348	.$91e	STY G_REG+1
349	.$920	JSR ARRAYSTORE_INT_INTEGER
351	.$923	LDX #4
352	.$925	dcloop2061_1:
353	.$925	LDA VAR_CP,X
354	.$928	STA VAR_ML,X
355	.$92b	DEX
356	.$92c	BPL dcloop2061_1
359	.$92e	LINE_1110:
361	.$92e	LDA #<CONST_9R
362	.$930	LDY #>CONST_9R
363	.$932	JSR REALFAC
364	.$935	LDA #<VAR_ML
365	.$937	LDY #>VAR_ML
366	.$939	JSR CMPFAC
368	.$93c	BEQ GTEQ_GTEQ3
369	.$93e	BCS GTEQ_GTEQ3
370	.$940	LDA #0
371	.$942	JMP GTEQ_SKIP3
372	.$945	GTEQ_GTEQ3:
373	.$945	LDA #$1
374	.$947	GTEQ_SKIP3:
375	.$947	COMP_SKP3:
376	.$947	BEQ LINE_SKIP7
379	.$949	LINE_NSKIP7:
381	.$949	LDX #4
382	.$94b	dcloop2393_1:
383	.$94b	LDA VAR_CP,X
384	.$94e	STA VAR_PR,X
385	.$951	DEX
386	.$952	BPL dcloop2393_1
388	.$954	JMP RETURN
390	.$957	LINE_SKIP7:
393	.$957	LINE_1120:
395	.$957	LDA #<VAR_ML
396	.$959	LDY #>VAR_ML
397	.$95b	JSR COPY2_XYA_XREG
401	.$95e	LDY #1
402	.$960	LDA #0
403	.$962	STY AS_TMP
404	.$965	STA AS_TMP+1
405	.$968	LDA #<VAR_SV%[]
406	.$96a	LDY #>VAR_SV%[]
407	.$96c	STA G_REG
408	.$96e	STY G_REG+1
409	.$970	JSR ARRAYSTORE_INT_INTEGER
411	.$973	LDA #<VAR_CP
412	.$975	LDY #>VAR_CP
413	.$977	JSR REALFAC
414	.$97a	LDA #<VAR_ML
415	.$97c	LDY #>VAR_ML
416	.$97e	JSR FASTFADDMEM
421	.$981	LDX #<VAR_ML
422	.$983	LDY #>VAR_ML
424	.$985	JSR FACMEM
426	.$988	LINE_1130:
428	.$988	JMP LINE_1110
429	.$98b	JSR END
430	.$98e	RTS
433	.$98f	END   LDX SP_SAVE
434	.$992	TXS
441	.$993	RTS
444	.$994	START  LDA ENDSTRBUF+1
445	.$997	BNE ENDGIVEN
446	.$999	LDA BASICEND
447	.$99b	STA ENDSTRBUF
448	.$99e	LDA BASICEND+1
449	.$9a0	STA ENDSTRBUF+1
450	.$9a3	ENDGIVEN LDA #<FPSTACK
451	.$9a5	LDY #>FPSTACK
452	.$9a7	STA FPSTACKP
453	.$9aa	STY FPSTACKP+1
454	.$9ad	LDA #<FORSTACK
455	.$9af	LDY #>FORSTACK
456	.$9b1	STA FORSTACKP
457	.$9b4	STY FORSTACKP+1
458	.$9b7	LDA #<STRBUF
459	.$9b9	LDY #>STRBUF
460	.$9bb	STA STRBUFP
461	.$9be	STY STRBUFP+1
462	.$9c1	STA HIGHP
463	.$9c4	STY HIGHP+1
464	.$9c7	LDA #0
465	.$9c9	STA CHLOCKFLAG
466	.$9cc	STA LASTVAR
467	.$9cf	STA LASTVAR+1
468	.$9d2	JSR INITVARS
469	.$9d5	LDA #0
470	.$9d7	STA CMD_NUM
471	.$9da	STA CHANNEL
472	.$9dd	TAY
473	.$9de	TAX
477	.$9df	STA KEYNDX
483	.$9e1	JSR RESTORE
484	.$9e4	CLC
488	.$9e5	RTS
491	.$9e6	INITNARRAY
492	.$9e6	STA TMP_ZP
493	.$9e8	STY TMP_ZP+1
494	.$9ea	LDY #0
495	.$9ec	TYA
496	.$9ed	NINITLOOP STA (TMP_ZP),Y
497	.$9ef	INC TMP_ZP
498	.$9f1	BNE NLOOPNOV
499	.$9f3	INC TMP_ZP+1
500	.$9f5	NLOOPNOV LDX TMP2_ZP
501	.$9f7	BNE NLOOPNOV2
502	.$9f9	DEC TMP2_ZP+1
503	.$9fb	NLOOPNOV2 DEC TMP2_ZP
504	.$9fd	BNE NINITLOOP
505	.$9ff	LDX TMP2_ZP+1
506	.$a01	BNE NINITLOOP
507	.$a03	RTS
510	.$a04	INITSTRARRAY
511	.$a04	STA TMP_ZP
512	.$a06	STY TMP_ZP+1
513	.$a08	SINITLOOP LDY #0
514	.$a0a	LDA #<EMPTYSTR
515	.$a0c	STA (TMP_ZP),Y
516	.$a0e	LDA #>EMPTYSTR
517	.$a10	INY
518	.$a11	STA (TMP_ZP),Y
519	.$a13	CLC
520	.$a14	LDA TMP_ZP
521	.$a16	ADC #2
522	.$a18	STA TMP_ZP
523	.$a1a	BCC SLOOPNOV1
524	.$a1c	INC TMP_ZP+1
525	.$a1e	SLOOPNOV1 SEC
526	.$a1f	LDA TMP2_ZP
527	.$a21	SBC #2
528	.$a23	STA TMP2_ZP
529	.$a25	BCS SLOOPNOV2
530	.$a27	DEC TMP2_ZP+1
531	.$a29	SLOOPNOV2 LDA TMP2_ZP
532	.$a2b	BNE SINITLOOP
533	.$a2d	LDA TMP2_ZP+1
534	.$a2f	BNE SINITLOOP
535	.$a31	RTS
538	.$a32	INITSPARAMS STA TMP3_ZP
539	.$a34	STY TMP3_ZP+1
540	.$a36	SEC
541	.$a37	SBC #2
542	.$a39	STA TMP_ZP
543	.$a3b	TYA
544	.$a3c	SBC #0
545	.$a3e	STA TMP_ZP+1
546	.$a40	LDY #0
547	.$a42	LDA (TMP_ZP),Y
548	.$a44	STA TMP2_ZP
549	.$a46	INY
550	.$a47	LDA (TMP_ZP),Y
551	.$a49	STA TMP2_ZP+1
552	.$a4b	LDA TMP3_ZP
553	.$a4d	LDY TMP3_ZP+1
554	.$a4f	RTS
557	.$a50	INITSTRVARS LDA #<STRINGVARS_START  
558	.$a52	LDY #>STRINGVARS_START
559	.$a54	CMP #<STRINGVARS_END
560	.$a56	BNE INITIT1
561	.$a58	CPY #>STRINGVARS_END
562	.$a5a	BNE INITIT1
563	.$a5c	JMP INITSA2     
564	.$a5f	INITIT1  STA TMP_ZP
565	.$a61	STY TMP_ZP+1
566	.$a63	LDY #0
567	.$a65	INITSTRLOOP LDA #<EMPTYSTR
568	.$a67	STA (TMP_ZP),Y
569	.$a69	INY
570	.$a6a	LDA #>EMPTYSTR
571	.$a6c	STA (TMP_ZP),Y
572	.$a6e	DEY
573	.$a6f	LDA TMP_ZP
574	.$a71	CLC
575	.$a72	ADC #2
576	.$a74	STA TMP_ZP
577	.$a76	LDA TMP_ZP+1
578	.$a78	ADC #0
579	.$a7a	STA TMP_ZP+1
580	.$a7c	CMP #>STRINGVARS_END
581	.$a7e	BNE INITSTRLOOP
582	.$a80	LDA TMP_ZP
583	.$a82	CMP #<STRINGVARS_END
584	.$a84	BNE INITSTRLOOP
585	.$a86	INITSA2  LDA #<STRINGARRAYS_START 
586	.$a88	LDY #>STRINGARRAYS_START
587	.$a8a	CMP #<STRINGARRAYS_END
588	.$a8c	BNE ARRAYLOOP
589	.$a8e	CPY #>STRINGARRAYS_END
590	.$a90	BNE ARRAYLOOP
591	.$a92	RTS       
592	.$a93	ARRAYLOOP CLC
593	.$a94	ADC #3
594	.$a96	BCC ARRAYSKIP1
595	.$a98	INY
596	.$a99	ARRAYSKIP1 CPY #>STRINGARRAYS_END
597	.$a9b	BEQ ARRAYSC
598	.$a9d	BCC ARRAYSKIP2
599	.$a9f	JMP ARRAYQUIT
600	.$aa2	ARRAYSC  CMP #<STRINGARRAYS_END
601	.$aa4	BCS ARRAYQUIT
602	.$aa6	ARRAYSKIP2 STA TMP_REG
603	.$aa8	STY TMP_REG+1
604	.$aaa	JSR INITSPARAMS
605	.$aad	LDA TMP_REG
606	.$aaf	LDY TMP_REG+1
607	.$ab1	JSR INITSTRARRAY
608	.$ab4	LDA TMP_ZP
609	.$ab6	LDY TMP_ZP+1
610	.$ab8	JMP ARRAYLOOP
611	.$abb	ARRAYQUIT RTS
614	.$abc	RESTORE  LDA #<DATAS
615	.$abe	LDY #>DATAS
616	.$ac0	STA DATASP
617	.$ac3	STY DATASP+1
618	.$ac6	RTS
621	.$ac7	WRITETID LDY #0
622	.$ac9	LDA (TMP_ZP),Y
623	.$acb	CMP #$6
624	.$acd	BEQ FORMATOK
625	.$acf	JMP ILLEGALQUANTITY
626	.$ad2	FORMATOK INC TMP_ZP
627	.$ad4	BNE WRITE2
628	.$ad6	INC TMP_ZP+1
629	.$ad8	WRITE2  LDA TMP_ZP
630	.$ada	STA INDEX1
631	.$adc	LDA TMP_ZP+1
632	.$ade	STA INDEX1+1
634	.$ae0	JMP WRITETIS
641	.$ae3	READTID  LDA $FE
642	.$ae5	PHA
644	.$ae6	STA FACOV
645	.$ae8	JSR TI2FAC
646	.$aeb	LDY #0
647	.$aed	STY LOWDS+1
648	.$aef	DEY
649	.$af0	STY FACOV+1
650	.$af2	LDY #$06
651	.$af4	STY LOWDS
652	.$af6	LDY #$24
653	.$af8	JSR GETTI
658	.$afb	LDA #$FE
659	.$afd	STA TMP_ZP
660	.$aff	LDA #0
661	.$b01	STA TMP_ZP+1
662	.$b03	LDA #$6
663	.$b05	SEI    
664	.$b06	STA $FE
665	.$b08	LDA #<VAR_TI$
666	.$b0a	LDY #>VAR_TI$
667	.$b0c	JSR COPYSTRING
668	.$b0f	PLA
669	.$b10	STA $FE
670	.$b12	CLI
671	.$b13	RTS
674	.$b14	SAVEPOINTERS
675	.$b14	LDA TMP_ZP   
676	.$b16	STA STORE1
677	.$b19	LDA TMP_ZP+1
678	.$b1b	STA STORE1+1
679	.$b1e	LDA TMP2_ZP
680	.$b20	STA STORE2
681	.$b23	LDA TMP2_ZP+1
682	.$b25	STA STORE2+1
683	.$b28	LDA TMP3_ZP
684	.$b2a	STA STORE3
685	.$b2d	LDA TMP3_ZP+1
686	.$b2f	STA STORE3+1
687	.$b32	RTS
690	.$b33	RESTOREPOINTERS
691	.$b33	LDA STORE3+1  
692	.$b36	STA TMP3_ZP+1
693	.$b38	LDA STORE3
694	.$b3b	STA TMP3_ZP
695	.$b3d	LDA STORE2+1
696	.$b40	STA TMP2_ZP+1
697	.$b42	LDA STORE2
698	.$b45	STA TMP2_ZP
699	.$b47	LDA STORE1+1
700	.$b4a	STA TMP_ZP+1
701	.$b4c	LDA STORE1
702	.$b4f	STA TMP_ZP
703	.$b51	RTS
710	.$b52	COMPACTMAX
711	.$b52	LDA #$FF
712	.$b54	LDY #$0
713	.$b56	JMP COMPACTF
716	.$b59	COMPACT
717	.$b59	LDY #0
718	.$b5b	GCBUFNE  LDA (TMP_ZP),Y  
719	.$b5d	COMPACTF STA TMP4_REG  
720	.$b60	LDY STRBUFP+1  
721	.$b63	STY TMP4_REG+1  
722	.$b66	INY     
723	.$b67	BEQ ENDMEM   
724	.$b69	CPY ENDSTRBUF+1  
725	.$b6c	BCC RGCEXIT   
726	.$b6e	ENDMEM  LDA STRBUFP
727	.$b71	CLC
728	.$b72	ADC TMP4_REG
729	.$b75	STA TMP4_REG
730	.$b78	BCC RGCNOOV1
731	.$b7a	INC TMP4_REG+1
732	.$b7d	RGCNOOV1 CLC
733	.$b7e	LDA TMP4_REG
734	.$b81	ADC #3
735	.$b83	STA TMP4_REG
736	.$b86	BCC RGCNOOV2
737	.$b88	INC TMP4_REG+1
738	.$b8b	RGCNOOV2 LDA TMP4_REG+1  
739	.$b8e	CMP ENDSTRBUF+1
740	.$b91	BEQ RGCLOW1
741	.$b93	BCS GCEXECOMP  
742	.$b95	JMP RGCEXIT
743	.$b98	RGCLOW1  LDA TMP4_REG
744	.$b9b	CMP ENDSTRBUF
745	.$b9e	BCS GCEXECOMP  
746	.$ba0	RGCEXIT  RTS     
747	.$ba1	GCEXECOMP LDA STRBUFP
748	.$ba4	STA STORE4
749	.$ba7	LDA STRBUFP+1
750	.$baa	STA STORE4+1
751	.$bad	JSR GCEXE
752	.$bb0	JMP CHECKMEMORY
755	.$bb3	GCEXE  JSR SAVEPOINTERS
756	.$bb6	LDA #0
757	.$bb8	STA LASTVAR
758	.$bbb	STA LASTVAR+1  
759	.$bbe	LDA #<STRBUF
760	.$bc0	STA TMP_ZP
761	.$bc2	STA GCSTART
762	.$bc5	LDA #>STRBUF
763	.$bc7	STA TMP_ZP+1  
764	.$bc9	STA GCSTART+1
765	.$bcc	GCLOOP  LDY #0
766	.$bce	LDA TMP_ZP
767	.$bd0	STA GCWORK
768	.$bd3	LDA TMP_ZP+1
769	.$bd5	STA GCWORK+1  
770	.$bd8	LDA (TMP_ZP),Y
771	.$bda	STA GCLEN   
772	.$bdd	INC TMP_ZP
773	.$bdf	BNE GCLOOPNOOV
774	.$be1	INC TMP_ZP+1
775	.$be3	GCLOOPNOOV LDA TMP_ZP
776	.$be5	CLC
777	.$be6	ADC GCLEN
778	.$be9	STA TMP_ZP
779	.$beb	BCC GCLOOPNOOV2
780	.$bed	INC TMP_ZP+1  
781	.$bef	GCLOOPNOOV2 LDY #0
782	.$bf1	LDA (TMP_ZP),Y
783	.$bf3	STA TMP2_ZP
784	.$bf5	INY
785	.$bf6	LDA (TMP_ZP),Y
786	.$bf8	STA TMP2_ZP+1  
787	.$bfa	LDA TMP_ZP
788	.$bfc	CLC
789	.$bfd	ADC #2
790	.$bff	STA TMP_ZP
791	.$c01	BCC GCLOOPNOOV3
792	.$c03	INC TMP_ZP+1  
793	.$c05	GCLOOPNOOV3 LDY #0
794	.$c07	LDA (TMP2_ZP),Y
795	.$c09	CMP GCWORK
796	.$c0c	BNE GCKLOOP
797	.$c0e	INY
798	.$c0f	LDA (TMP2_ZP),Y
799	.$c11	CMP GCWORK+1
800	.$c14	BEQ MEMFREE
801	.$c16	GCKLOOP  LDA TMP_ZP+1  
802	.$c18	CMP HIGHP+1
803	.$c1b	BEQ GCHECKLOW
804	.$c1d	BCC GCLOOP
805	.$c1f	JMP GCDONE
806	.$c22	GCHECKLOW LDA TMP_ZP
807	.$c24	CMP HIGHP
808	.$c27	BCS GCDONE
809	.$c29	JMP GCLOOP
810	.$c2c	MEMFREE  LDA GCSTART   
811	.$c2f	CMP GCWORK   
812	.$c32	BNE COPYDOWN
813	.$c34	LDA GCSTART+1
814	.$c37	CMP GCWORK+1
815	.$c3a	BNE COPYDOWN
816	.$c3c	LDA TMP_ZP   
817	.$c3e	STA GCSTART
818	.$c41	LDA TMP_ZP+1
819	.$c43	STA GCSTART+1
820	.$c46	JMP GCKLOOP   
821	.$c49	COPYDOWN LDA GCSTART   
822	.$c4c	STA TMP_REG
823	.$c4e	LDA GCSTART+1
824	.$c51	STA TMP_REG+1  
825	.$c53	LDA GCWORK
826	.$c56	STA TMP2_REG
827	.$c59	LDA GCWORK+1
828	.$c5c	STA TMP2_REG+1  
829	.$c5f	LDA TMP_ZP
830	.$c61	SEC
831	.$c62	SBC GCWORK
832	.$c65	STA TMP3_REG
833	.$c68	LDA TMP_ZP+1
834	.$c6a	SBC GCWORK+1
835	.$c6d	STA TMP3_REG+1  
836	.$c70	LDA GCSTART
837	.$c73	CLC
838	.$c74	ADC TMP3_REG
839	.$c77	STA GCSTART
840	.$c7a	LDA GCSTART+1
841	.$c7d	ADC TMP3_REG+1
842	.$c80	STA GCSTART+1  
843	.$c83	JSR QUICKCOPY  
844	.$c86	LDY #0
845	.$c88	LDA TMP_REG
846	.$c8a	STA (TMP2_ZP),Y
847	.$c8c	INY
848	.$c8d	LDA TMP_REG+1
849	.$c8f	STA (TMP2_ZP),Y  
850	.$c91	JMP GCKLOOP
851	.$c94	GCDONE  LDA GCSTART
852	.$c97	STA HIGHP
853	.$c9a	STA STRBUFP
854	.$c9d	LDA GCSTART+1
855	.$ca0	STA HIGHP+1
856	.$ca3	STA STRBUFP+1  
857	.$ca6	GCSKIP  JSR RESTOREPOINTERS
858	.$ca9	RTS     
861	.$caa	CHECKMEMORY
862	.$caa	LDA STRBUFP+1  
863	.$cad	CMP STORE4+1  
864	.$cb0	BCC STILLFITSCM  
868	.$cb2	BEQ CHECKMEMLOWCM
869	.$cb4	JMP OUTOFMEMORY  
870	.$cb7	CHECKMEMLOWCM
871	.$cb7	LDA STRBUFP   
872	.$cba	CMP STORE4
873	.$cbd	BCC STILLFITSCM
874	.$cbf	JMP OUTOFMEMORY  
875	.$cc2	STILLFITSCM RTS
878	.$cc3	QUICKCOPY LDA TMP_REG  
879	.$cc5	STA TMEM+1
880	.$cc8	LDA TMP_REG+1
881	.$cca	STA TMEM+2
882	.$ccd	LDA TMP2_REG
883	.$cd0	STA SMEM+1
884	.$cd3	LDA TMP2_REG+1
885	.$cd6	STA SMEM+2
886	.$cd9	LDY #$0
887	.$cdb	LDX TMP3_REG
888	.$cde	BNE QCLOOP
889	.$ce0	LDA TMP3_REG+1
890	.$ce3	BEQ QCEXIT  
891	.$ce5	QCLOOP
892	.$ce5	SMEM  LDA $0000,Y
893	.$ce8	TMEM  STA $0000,Y
894	.$ceb	INY
895	.$cec	BNE YNOOV
896	.$cee	INC TMEM+2
897	.$cf1	INC SMEM+2
898	.$cf4	YNOOV  DEX
899	.$cf5	BNE QCLOOP
900	.$cf7	LDA TMP3_REG+1
901	.$cfa	BEQ QCEXIT
902	.$cfc	DEC TMP3_REG+1
903	.$cff	JMP QCLOOP
904	.$d02	QCEXIT  RTS
907	.$d03	COPYSTRING STA TMP2_ZP
908	.$d05	STY TMP2_ZP+1
909	.$d07	CPY TMP_ZP+1
910	.$d09	BNE CONTCOPY
911	.$d0b	LDA TMP2_ZP
912	.$d0d	CMP TMP_ZP
913	.$d0f	BNE CONTCOPY
914	.$d11	RTS     
915	.$d12	CONTCOPY JSR COMPACT   
916	.$d15	LDY #0
917	.$d17	STY TMP_FLAG
918	.$d1a	LDA (TMP_ZP),Y
919	.$d1c	BNE NOTEMPTYSTR
920	.$d1e	LDA #<EMPTYSTR  
921	.$d20	STA TMP_ZP
922	.$d22	LDA #>EMPTYSTR
923	.$d24	STA TMP_ZP+1
924	.$d26	JMP ISCONST
925	.$d29	NOTEMPTYSTR TAX     
926	.$d2a	LDA (TMP2_ZP),Y
927	.$d2c	STA TMP3_ZP
928	.$d2e	INY
929	.$d2f	LDA (TMP2_ZP),Y
930	.$d31	STA TMP3_ZP+1
931	.$d33	DEY
932	.$d34	LDA TMP_ZP+1  
933	.$d36	CMP #>CONSTANTS_END
934	.$d38	BEQ CHECKLOW1
935	.$d3a	BCS INVAR
936	.$d3c	JMP CHECKNEXT
937	.$d3f	CHECKLOW1 LDA TMP_ZP
938	.$d41	CMP #<CONSTANTS_END
939	.$d43	BCS INVAR
940	.$d45	CHECKNEXT LDA TMP_ZP+1  
941	.$d47	CMP #>CONSTANTS
942	.$d49	BEQ CHECKLOW3
943	.$d4b	BCC INVAR
944	.$d4d	JMP ISCONST
945	.$d50	CHECKLOW3 LDA TMP_ZP
946	.$d52	CMP #<CONSTANTS
947	.$d54	BCC INVAR   
948	.$d56	ISCONST  JSR CHECKLASTVAR 
949	.$d59	LDA TMP_ZP
950	.$d5b	STA (TMP2_ZP),Y  
951	.$d5d	INY
952	.$d5e	LDA TMP_ZP+1
953	.$d60	STA (TMP2_ZP),Y
954	.$d62	LDA HIGHP   
955	.$d65	STA STRBUFP
956	.$d68	LDA HIGHP+1
957	.$d6b	STA STRBUFP+1
958	.$d6e	RTS
959	.$d6f	INVAR  INY
960	.$d70	LDA (TMP2_ZP),Y  
961	.$d72	CMP #>CONSTANTS_END
962	.$d74	BEQ CHECKLOW2
963	.$d76	BCS INVAR2
964	.$d78	JMP PUPDATEPTR
965	.$d7b	CHECKLOW2 DEY
966	.$d7c	LDA (TMP2_ZP),Y
967	.$d7e	CMP #<CONSTANTS_END
968	.$d80	BCS INVAR2
969	.$d82	JMP PUPDATEPTR
970	.$d85	INVAR2  LDY #0   
971	.$d87	LDA (TMP3_ZP),Y
972	.$d89	STA TMP_REG
973	.$d8b	TXA
974	.$d8c	CMP TMP_REG  
975	.$d8e	BEQ UPDATEHP2 
978	.$d90	PUPDATEPTR JSR CHECKLASTVAR
979	.$d93	LDY #1   
980	.$d95	STY TMP_FLAG 
981	.$d98	JMP UPDATEPTR 
982	.$d9b	UPDATEHP2 LDA HIGHP  
983	.$d9e	STA STRBUFP
984	.$da1	LDA HIGHP+1
985	.$da4	STA STRBUFP+1
986	.$da7	JMP STRFITS
987	.$daa	COPYONLY LDY #0
988	.$dac	STY TMP_FLAG
989	.$daf	JMP CHECKMEM
990	.$db2	ALTCOPY  JMP COPYSTRING2
991	.$db5	UPDATEPTR LDA TMP_ZP+1 
992	.$db7	CMP HIGHP+1  
993	.$dba	BEQ CHECKXT1
994	.$dbc	BCS ALTCOPY
995	.$dbe	JMP CHECKMEM
996	.$dc1	CHECKXT1 LDA TMP_ZP
997	.$dc3	CMP HIGHP
998	.$dc6	BCS ALTCOPY
999	.$dc8	CHECKMEM
1000	.$dc8	MEMOK  LDY #0
1001	.$dca	LDA STRBUFP  
1002	.$dcd	STA (TMP2_ZP),Y 
1003	.$dcf	STA TMP3_ZP
1004	.$dd1	LDA STRBUFP+1
1005	.$dd4	INY
1006	.$dd5	STA (TMP2_ZP),Y
1007	.$dd7	STA TMP3_ZP+1
1008	.$dd9	TXA
1009	.$dda	CLC
1010	.$ddb	ADC STRBUFP
1011	.$dde	PHP
1012	.$ddf	CLC
1013	.$de0	ADC #3
1014	.$de2	STA STRBUFP
1015	.$de5	BCC NOCS1
1016	.$de7	INC STRBUFP+1
1017	.$dea	NOCS1  PLP
1018	.$deb	BCC STRFITS
1019	.$ded	INC STRBUFP+1
1020	.$df0	STRFITS  LDY TMP_FLAG 
1021	.$df3	BEQ NOHPUPDATE 
1022	.$df5	LDA HIGHP+1
1023	.$df8	CMP STRBUFP+1
1024	.$dfb	BCC UPDATEHIGHP
1025	.$dfd	BEQ CHECKNEXTHP
1026	.$dff	JMP NOHPUPDATE
1027	.$e02	CHECKNEXTHP LDA HIGHP
1028	.$e05	CMP STRBUFP
1029	.$e08	BCC UPDATEHIGHP
1030	.$e0a	JMP NOHPUPDATE
1031	.$e0d	UPDATEHIGHP LDA STRBUFP
1032	.$e10	STA HIGHP
1033	.$e13	LDA STRBUFP+1
1034	.$e16	STA HIGHP+1  
1035	.$e19	JSR REMEMBERLASTVAR
1036	.$e1c	JSR STOREVARREF
1037	.$e1f	NOHPUPDATE LDY #0
1038	.$e21	LDA (TMP_ZP),Y 
1039	.$e23	STA (TMP3_ZP),Y
1040	.$e25	TAY    
1041	.$e26	BEQ EXITCOPY 
1042	.$e28	LOOP  LDA (TMP_ZP),Y 
1043	.$e2a	STA (TMP3_ZP),Y
1044	.$e2c	DEY
1045	.$e2d	BNE LOOP
1046	.$e2f	EXITCOPY RTS
1051	.$e30	COPYSTRING2 LDY #0
1052	.$e32	LDA (TMP_ZP),Y
1053	.$e34	STA TMP_REG
1054	.$e36	TAX
1055	.$e37	LDA HIGHP
1056	.$e3a	STA TMP3_ZP
1057	.$e3c	STA (TMP2_ZP),Y
1058	.$e3e	LDA HIGHP+1
1059	.$e41	STA TMP3_ZP+1
1060	.$e43	INY
1061	.$e44	STA (TMP2_ZP),Y
1062	.$e46	JSR REMEMBERLASTVAR
1065	.$e49	LDA TMP_ZP
1066	.$e4b	CMP TMP3_ZP
1067	.$e4d	BNE DOLOOP
1068	.$e4f	LDA TMP_ZP+1
1069	.$e51	CMP TMP3_ZP+1
1070	.$e53	BEQ SKIPCP2
1071	.$e55	DOLOOP  DEY
1072	.$e56	TXA
1073	.$e57	STA (TMP3_ZP),Y
1074	.$e59	INY
1075	.$e5a	ASLOOP  LDA (TMP_ZP),Y
1076	.$e5c	STA (TMP3_ZP),Y
1077	.$e5e	INY
1078	.$e5f	DEX
1079	.$e60	BNE ASLOOP
1080	.$e62	SKIPCP2  LDA HIGHP
1081	.$e65	CLC
1082	.$e66	ADC TMP_REG
1083	.$e68	PHP
1084	.$e69	CLC
1085	.$e6a	ADC #3
1086	.$e6c	STA HIGHP
1087	.$e6f	STA STRBUFP
1088	.$e72	BCC SKIPLOWAS1
1089	.$e74	INC HIGHP+1
1090	.$e77	SKIPLOWAS1 PLP
1091	.$e78	BCC SKIPLOWAS2
1092	.$e7a	INC HIGHP+1
1093	.$e7d	SKIPLOWAS2 LDA HIGHP+1
1094	.$e80	STA STRBUFP+1
1095	.$e83	JSR STOREVARREF
1096	.$e86	RTS
1100	.$e87	CHECKLASTVAR
1101	.$e87	LDA TMP2_ZP
1102	.$e89	CMP LASTVAR
1103	.$e8c	BNE NOTSAMEVAR
1104	.$e8e	LDA TMP2_ZP+1
1105	.$e90	CMP LASTVAR+1
1106	.$e93	BNE NOTSAMEVAR
1107	.$e95	LDA LASTVARP   
1108	.$e98	STA HIGHP
1109	.$e9b	STA STRBUFP
1110	.$e9e	LDA LASTVARP+1
1111	.$ea1	STA HIGHP+1
1112	.$ea4	STA STRBUFP+1
1113	.$ea7	NOTSAMEVAR RTS
1117	.$ea8	REMEMBERLASTVAR
1118	.$ea8	LDA TMP2_ZP
1119	.$eaa	STA LASTVAR
1120	.$ead	LDA TMP2_ZP+1
1121	.$eaf	STA LASTVAR+1
1122	.$eb2	LDA TMP3_ZP
1123	.$eb4	STA LASTVARP
1124	.$eb7	LDA TMP3_ZP+1
1125	.$eb9	STA LASTVARP+1 
1126	.$ebc	RTS
1131	.$ebd	STOREVARREF
1132	.$ebd	TYA
1133	.$ebe	PHA    
1134	.$ebf	LDA TMP_ZP
1135	.$ec1	PHA
1136	.$ec2	LDA TMP_ZP+1
1137	.$ec4	PHA
1138	.$ec5	LDA HIGHP+1
1139	.$ec8	STA TMP_ZP+1
1140	.$eca	LDA HIGHP
1141	.$ecd	SEC
1142	.$ece	SBC #2
1143	.$ed0	STA TMP_ZP
1144	.$ed2	BCS RLVNOOV
1145	.$ed4	DEC TMP_ZP+1
1146	.$ed6	RLVNOOV  LDA TMP2_ZP
1147	.$ed8	LDY #0
1148	.$eda	STA (TMP_ZP),Y
1149	.$edc	LDA TMP2_ZP+1
1150	.$ede	INY
1151	.$edf	STA (TMP_ZP),Y 
1152	.$ee1	PLA
1153	.$ee2	STA TMP_ZP+1
1154	.$ee4	PLA
1155	.$ee5	STA TMP_ZP  
1156	.$ee7	PLA
1157	.$ee8	TAY    
1158	.$ee9	RTS
1161	.$eea	REROUTE  LDA CMD_NUM  
1162	.$eed	BEQ REROUTECMD
1163	.$eef	TAX
1164	.$ef0	STA CHANNEL
1165	.$ef3	JMP CHKOUT
1166	.$ef6	REROUTECMD RTS
1169	.$ef7	RESETROUTE LDA CMD_NUM  
1170	.$efa	BEQ RESETROUTECMD
1171	.$efc	JMP CLRCHNEW
1172	.$eff	RESETROUTECMD
1173	.$eff	RTS
1176	.$f00	INTOUTFASTZ LDX #32    
1177	.$f02	LDA TMP_ZP+1
1178	.$f04	BPL INTISPOS
1179	.$f06	CLC
1180	.$f07	LDA TMP_ZP
1181	.$f09	EOR #$FF
1182	.$f0b	ADC #1
1183	.$f0d	STA TMP_ZP
1184	.$f0f	LDA TMP_ZP+1
1185	.$f11	EOR #$FF
1186	.$f13	ADC #0
1187	.$f15	STA TMP_ZP+1
1188	.$f17	LDX #45    
1189	.$f19	INTISPOS
1190	.$f19	TXA
1191	.$f1a	JSR CHROUT
1192	.$f1d	JSR CONVPOSINT
1193	.$f20	LDA NUMFLAG
1194	.$f23	BNE ALLINTOUTDONE
1195	.$f25	LDA #48
1196	.$f27	JSR CHROUT
1197	.$f2a	ALLINTOUTDONE
1198	.$f2a	RTS
1201	.$f2b	NUMBEROUT
1202	.$f2b	BEQ NUMZERO
1203	.$f2d	ORA #$30
1204	.$f2f	STA NUMFLAG
1205	.$f32	JMP CHROUT
1206	.$f35	NUMZERO
1207	.$f35	LDX NUMFLAG
1208	.$f38	BEQ STILLZERO
1209	.$f3a	ORA #$30
1210	.$f3c	JMP CHROUT
1211	.$f3f	STILLZERO
1212	.$f3f	RTS
1215	.$f40	CONVPOSINT
1216	.$f40	JSR INT2BCD
1217	.$f43	LDX #0
1218	.$f45	STX NUMFLAG
1219	.$f48	AND #$0F
1220	.$f4a	JSR NUMBEROUT
1221	.$f4d	LDA BCD+1
1222	.$f50	LSR
1223	.$f51	LSR
1224	.$f52	LSR
1225	.$f53	LSR
1226	.$f54	JSR NUMBEROUT
1227	.$f57	LDA BCD+1
1228	.$f5a	AND #$0F
1229	.$f5c	TAY
1230	.$f5d	JSR NUMBEROUT
1231	.$f60	LDA BCD
1232	.$f63	LSR
1233	.$f64	LSR
1234	.$f65	LSR
1235	.$f66	LSR
1236	.$f67	JSR NUMBEROUT
1237	.$f6a	LDA BCD
1238	.$f6d	AND #$0F
1239	.$f6f	JSR NUMBEROUT
1240	.$f72	RTS
1243	.$f73	INT2BCD
1244	.$f73	SED
1245	.$f74	LDA #0
1246	.$f76	STA BCD
1247	.$f79	STA BCD+1
1248	.$f7c	STA BCD+2
1249	.$f7f	ASL TMP_ZP
1250	.$f81	ROL TMP_ZP+1
1251	.$f83	LDA BCD
1252	.$f86	ADC BCD
1253	.$f89	STA BCD
1254	.$f8c	ASL TMP_ZP
1255	.$f8e	ROL TMP_ZP+1
1256	.$f90	ADC BCD
1257	.$f93	STA BCD
1258	.$f96	ASL TMP_ZP
1259	.$f98	ROL TMP_ZP+1
1260	.$f9a	ADC BCD
1261	.$f9d	STA BCD
1262	.$fa0	ASL TMP_ZP
1263	.$fa2	ROL TMP_ZP+1
1264	.$fa4	ADC BCD
1265	.$fa7	STA BCD
1266	.$faa	ASL TMP_ZP
1267	.$fac	ROL TMP_ZP+1
1268	.$fae	ADC BCD
1269	.$fb1	STA BCD
1270	.$fb4	ASL TMP_ZP
1271	.$fb6	ROL TMP_ZP+1
1272	.$fb8	ADC BCD
1273	.$fbb	STA BCD
1274	.$fbe	LDX #7
1275	.$fc0	BCDBIT1
1276	.$fc0	ASL TMP_ZP
1277	.$fc2	ROL TMP_ZP+1
1278	.$fc4	LDA BCD
1279	.$fc7	ADC BCD
1280	.$fca	STA BCD
1281	.$fcd	LDA BCD+1
1282	.$fd0	ADC BCD+1
1283	.$fd3	STA BCD+1
1284	.$fd6	DEX
1285	.$fd7	BNE BCDBIT1
1286	.$fd9	LDX #3
1287	.$fdb	BCDBIT2
1288	.$fdb	ASL TMP_ZP
1289	.$fdd	ROL TMP_ZP+1
1290	.$fdf	LDA BCD
1291	.$fe2	ADC BCD
1292	.$fe5	STA BCD
1293	.$fe8	LDA BCD+1
1294	.$feb	ADC BCD+1
1295	.$fee	STA BCD+1
1296	.$ff1	LDA BCD+2
1297	.$ff4	ADC BCD+2
1298	.$ff7	STA BCD+2
1299	.$ffa	DEX
1300	.$ffb	BNE BCDBIT2
1301	.$ffd	CLD
1302	.$ffe	RTS
1303	.$fff	BCD
1304	.$fff	.WORD 0 0
1305	.$1003	NUMFLAG
1306	.$1003	.BYTE 0
1309	.$1004	REALOUTFAST JSR FACINT
1310	.$1007	STA TMP_ZP+1
1311	.$1009	STY TMP_ZP
1312	.$100b	JMP INTOUTFASTZ
1315	.$100e	CHECKFORFASTOUT
1316	.$100e	JSR REROUTE
1317	.$1011	JSR XREGFAC
1318	.$1014	LDA FACEXP
1319	.$1016	CMP #$90
1320	.$1018	BCS REALOUTINT
1321	.$101a	CMP #$81
1322	.$101c	BCC REALOUTINT
1323	.$101e	MAYBEREALOUTFAST
1324	.$101e	LDA FACEXP+3
1325	.$1020	BNE REALOUTINT
1326	.$1022	LDA FACEXP+4
1327	.$1024	BNE REALOUTINT
1328	.$1026	LDA FACEXP
1329	.$1028	SEC
1330	.$1029	SBC #129
1331	.$102b	ASL
1332	.$102c	TAX
1333	.$102d	LDA FACEXP+1
1334	.$102f	AND MANTMASK,X
1335	.$1032	BNE REALOUTINT
1336	.$1034	INX
1337	.$1035	LDA FACEXP+2
1338	.$1037	AND MANTMASK,X
1339	.$103a	BNE REALOUTINT
1340	.$103c	JMP REALOUTFAST
1341	.$103f	REALOUTINT LDY #0
1342	.$1041	JSR FACSTR
1343	.$1044	LDY #0
1344	.$1046	LDA LOFBUF,Y
1345	.$1049	STRLOOPRO JSR CHROUT
1346	.$104c	INY
1347	.$104d	LDA LOFBUF,Y
1348	.$1050	BNE STRLOOPRO
1349	.$1052	RTS
1350	.$1053	MANTMASK
1351	.$1053	.BYTE 127 255 63 255 31 255 15 255 7 255 3 255 1 255 0 255 0 127 0 63 0 31 0 15 0 7 0 3 0 1
1354	.$1071	REALOUT  LDA X_REG
1355	.$1073	BNE RNOTNULL
1356	.$1075	JMP PRINTNULL
1357	.$1078	RNOTNULL JSR CHECKFORFASTOUT
1358	.$107b	JMP RESETROUTE
1361	.$107e	REALOUTBRK  LDA X_REG
1362	.$1080	BNE RNOTNULLBRK
1363	.$1082	JMP PRINTNULLBRK
1364	.$1085	RNOTNULLBRK JSR CHECKFORFASTOUT
1365	.$1088	LDA #$0D
1366	.$108a	JSR CHROUT
1367	.$108d	JMP RESETROUTE
1370	.$1090	PRINTNULL JSR REROUTE
1371	.$1093	LDA #$20
1372	.$1095	JSR CHROUT
1373	.$1098	LDA #$30
1374	.$109a	JSR CHROUT
1375	.$109d	JMP RESETROUTE
1378	.$10a0	PRINTNULLBRK
1379	.$10a0	JSR REROUTE
1380	.$10a3	LDA #$20
1381	.$10a5	JSR CHROUT
1382	.$10a8	LDA #$30
1383	.$10aa	JSR CHROUT
1384	.$10ad	LDA #$0D
1385	.$10af	JSR CHROUT
1386	.$10b2	JMP RESETROUTE
1389	.$10b5	STROUTWL STA A_REG
1390	.$10b8	STY A_REG+1
1391	.$10bb	STROUT  JSR REROUTE
1392	.$10be	LDA A_REG
1393	.$10c1	STA INDEX1
1394	.$10c3	LDA A_REG+1
1395	.$10c6	STA INDEX1+1
1396	.$10c8	LDY #0
1397	.$10ca	LDA (INDEX1),Y
1398	.$10cc	TAX
1399	.$10cd	INC INDEX1
1400	.$10cf	BNE PRINTSTR
1401	.$10d1	INC INDEX1+1
1402	.$10d3	PRINTSTR JSR PRINTSTRS
1403	.$10d6	LDA HIGHP   
1404	.$10d9	STA STRBUFP
1405	.$10dc	LDA HIGHP+1
1406	.$10df	STA STRBUFP+1
1407	.$10e2	JSR RESETROUTE
1408	.$10e5	RTS
1411	.$10e6	SINGLECHROUTMAX
1412	.$10e6	JSR SINGLECHROUT
1413	.$10e9	JMP COMPACTMAX
1416	.$10ec	SINGLECHROUT
1417	.$10ec	STA TMP_ZP
1418	.$10ee	JSR REROUTE
1419	.$10f1	LDA TMP_ZP
1420	.$10f3	JSR CHROUT
1421	.$10f6	JMP RESETROUTE
1424	.$10f9	STROUTBRKWL STA A_REG
1425	.$10fc	STY A_REG+1
1426	.$10ff	STROUTBRK JSR REROUTE
1427	.$1102	LDA A_REG
1428	.$1105	STA INDEX1
1429	.$1107	LDA A_REG+1
1430	.$110a	STA INDEX1+1
1431	.$110c	LDY #0
1432	.$110e	LDA (INDEX1),Y
1433	.$1110	TAX
1434	.$1111	INC INDEX1
1435	.$1113	BNE PRINTSTR2
1436	.$1115	INC INDEX1+1
1437	.$1117	PRINTSTR2 JSR PRINTSTRS
1438	.$111a	LDA HIGHP   
1439	.$111d	STA STRBUFP
1440	.$1120	LDA HIGHP+1
1441	.$1123	STA STRBUFP+1
1442	.$1126	LDA #$0D
1443	.$1128	JSR CHROUT
1444	.$112b	JMP RESETROUTE  
1447	.$112e	ARRAYACCESS_INTEGER_S
1448	.$112e	STA G_REG
1449	.$1130	STY G_REG+1
1450	.$1132	ARRAYACCESS_INTEGER
1451	.$1132	JSR XREGFAC
1452	.$1135	ARRAYACCESS_INTEGER_NX
1453	.$1135	JSR FACINT
1454	.$1138	ARRAYACCESS_INTEGER_INT
1455	.$1138	LDX G_REG
1456	.$113a	STX TMP_ZP
1457	.$113c	LDX G_REG+1
1458	.$113e	STX TMP_ZP+1
1459	.$1140	TAX
1460	.$1141	TYA
1461	.$1142	ASL
1462	.$1143	STA TMP2_ZP
1463	.$1145	TXA
1464	.$1146	ROL
1465	.$1147	STA TMP2_ZP+1
1466	.$1149	LDA TMP_ZP
1467	.$114b	CLC
1468	.$114c	ADC TMP2_ZP
1469	.$114e	STA TMP_ZP
1470	.$1150	LDA TMP_ZP+1
1471	.$1152	ADC TMP2_ZP+1
1472	.$1154	STA TMP_ZP+1
1473	.$1156	AIIDI  LDY #1
1474	.$1158	LDA (TMP_ZP),Y
1475	.$115a	TAX
1476	.$115b	DEY
1477	.$115c	LDA (TMP_ZP),Y
1478	.$115e	TAY
1479	.$115f	TXA
1480	.$1160	STY TMP2_ZP  
1481	.$1162	STA TMP2_ZP+1
1482	.$1164	JSR INTFAC
1483	.$1167	JMP FACXREG 
1486	.$116a	ARRAYSTORE_INT_INTEGER
1487	.$116a	JSR XREGFAC
1488	.$116d	JSR FACINT
1489	.$1170	ARRAYSTORE_INT_INTEGER_AC
1490	.$1170	LDX G_REG
1491	.$1172	STX TMP_ZP
1492	.$1174	LDX G_REG+1
1493	.$1176	STX TMP_ZP+1
1494	.$1178	TAX
1495	.$1179	TYA
1496	.$117a	ASL
1497	.$117b	STA TMP2_ZP
1498	.$117d	TXA
1499	.$117e	ROL
1500	.$117f	STA TMP2_ZP+1
1501	.$1181	LDA TMP_ZP
1502	.$1183	CLC
1503	.$1184	ADC TMP2_ZP
1504	.$1186	STA TMP_ZP
1505	.$1188	LDA TMP_ZP+1
1506	.$118a	ADC TMP2_ZP+1
1507	.$118c	STA TMP_ZP+1
1508	.$118e	LDY #1
1509	.$1190	LDA AS_TMP+1
1510	.$1193	STA (TMP_ZP),Y
1511	.$1195	DEY
1512	.$1196	LDA AS_TMP
1513	.$1199	STA (TMP_ZP),Y
1514	.$119b	RTS
1517	.$119c	RETURN  LDA FORSTACKP
1518	.$119f	STA TMP_ZP
1519	.$11a1	LDA FORSTACKP+1
1520	.$11a4	STA TMP_ZP+1
1521	.$11a6	SEARCHGOSUB LDA TMP_ZP
1522	.$11a8	SEC
1523	.$11a9	SBC #2
1524	.$11ab	STA TMP_ZP
1525	.$11ad	BCS NOPV1SG
1526	.$11af	DEC TMP_ZP+1
1527	.$11b1	NOPV1SG  LDY #0
1528	.$11b3	LDA (TMP_ZP),Y
1529	.$11b5	BEQ FOUNDGOSUB
1530	.$11b7	INY
1531	.$11b8	LDA (TMP_ZP),Y
1532	.$11ba	STA TMP3_ZP
1533	.$11bc	LDA TMP_ZP
1534	.$11be	SEC
1535	.$11bf	SBC (TMP_ZP),Y
1536	.$11c1	STA TMP_ZP
1537	.$11c3	BCS NOPV1GS
1538	.$11c5	DEC TMP_ZP+1
1539	.$11c7	NOPV1GS  JMP SEARCHGOSUB
1540	.$11ca	FOUNDGOSUB
1541	.$11ca	LDA TMP_ZP
1542	.$11cc	STA FORSTACKP
1543	.$11cf	LDA TMP_ZP+1
1544	.$11d1	STA FORSTACKP+1
1545	.$11d4	RTS
1548	.$11d5	GOSUB  LDA FORSTACKP
1549	.$11d8	STA TMP_ZP
1550	.$11da	LDA FORSTACKP+1
1551	.$11dd	STA TMP_ZP+1
1552	.$11df	LDY #0
1553	.$11e1	TYA
1554	.$11e2	STA (TMP_ZP),Y
1555	.$11e4	INY
1556	.$11e5	STA (TMP_ZP),Y
1557	.$11e7	INY
1558	.$11e8	TYA
1559	.$11e9	CLC
1560	.$11ea	ADC TMP_ZP
1561	.$11ec	STA FORSTACKP
1562	.$11ef	BCC GOSUBNOOV
1563	.$11f1	INC FORSTACKP+1
1564	.$11f4	GOSUBNOOV RTS
1567	.$11f5	COPY2_XYA_XREG
1568	.$11f5	STA TMP3_ZP
1569	.$11f7	STY TMP3_ZP+1
1570	.$11f9	COPY2_XY_XREG
1571	.$11f9	LDX #<X_REG  
1572	.$11fb	LDY #0
1573	.$11fd	LDA (TMP3_ZP),Y
1574	.$11ff	STA X_REG
1575	.$1201	INY
1576	.$1202	LDA (TMP3_ZP),Y
1577	.$1204	STA X_REG+1
1578	.$1206	INY
1579	.$1207	LDA (TMP3_ZP),Y
1580	.$1209	STA X_REG+2
1581	.$120b	INY
1582	.$120c	LDA (TMP3_ZP),Y
1583	.$120e	STA X_REG+3
1584	.$1210	INY
1585	.$1211	LDA (TMP3_ZP),Y
1586	.$1213	STA X_REG+4
1587	.$1215	RTS
1590	.$1216	ONETOFAC    LDX #129
1591	.$1218	STX FAC
1592	.$121a	DEX
1593	.$121b	STX FAC+1
1594	.$121d	LDX #0
1595	.$121f	STX FAC+2
1596	.$1221	STX FAC+3
1597	.$1223	STX FAC+4
1598	.$1225	STX FAC+5
1599	.$1227	STX FAC+15
1600	.$1229	RTS
1603	.$122a	CLRCHNEW
1604	.$122a	LDA CHLOCKFLAG
1605	.$122d	BNE SKIPCLRCH
1606	.$122f	JMP CLRCH
1607	.$1232	SKIPCLRCH
1608	.$1232	RTS
1611	.$1233	OUTOFMEMORY
1615	.$1233	LDX #$10
1616	.$1235	JMP ERRALL
1619	.$1238	ILLEGALQUANTITY
1623	.$1238	JMP ERRIQ
1626	.$123b	FACXREG  LDA FACLO
1627	.$123d	STA X_REG+4
1628	.$123f	LDA FACMO
1629	.$1241	STA X_REG+3
1630	.$1243	LDA FACMOH
1631	.$1245	STA X_REG+2
1632	.$1247	LDA FACSGN
1633	.$1249	ORA #$7F
1634	.$124b	AND FACHO
1635	.$124d	STA X_REG+1
1636	.$124f	LDA FACEXP
1637	.$1251	STA X_REG
1638	.$1253	LDA #0   
1639	.$1255	STA FACOV
1640	.$1257	RTS
1643	.$1258	XREGFAC  LDA X_REG+4
1644	.$125a	STA FACLO
1645	.$125c	LDA X_REG+3
1646	.$125e	STA FACMO
1647	.$1260	LDA X_REG+2
1648	.$1262	STA FACMOH
1649	.$1264	LDA X_REG+1
1650	.$1266	STA FACSGN
1651	.$1268	ORA #$80
1652	.$126a	STA FACHO
1653	.$126c	LDA X_REG
1654	.$126e	STA FACEXP
1655	.$1270	LDA #0
1656	.$1272	STA FACOV
1657	.$1274	RTS
1771	.$1275	FASTFADDMEM
1772	.$1275	JSR MEMARG
1773	.$1278	FASTFADDARG
1774	.$1278	BNE FADDRET2     
1775	.$127a	JMP ARGFAC
1776	.$127d	FADDRET2 LDA ARGEXP
1777	.$127f	BNE FADDRET1     
1778	.$1281	RTS
1779	.$1282	FADDRET1 SEC
1780	.$1283	SBC FACEXP
1781	.$1285	BEQ FFADD_EXPEQ     
1782	.$1287	BCC FFADD_SHFARG1   
1786	.$1289	LDY ARGEXP
1787	.$128b	STY FACEXP
1788	.$128d	LDY ARGSGN
1789	.$128f	STY FACSGN
1790	.$1291	LDX #0
1791	.$1293	STX OLDOV        
1792	.$1295	LDX #FAC         
1794	.$1297	SEC
1795	.$1298	SBC #$08
1796	.$129a	BMI FFADD_SHFFAC2
1798	.$129c	FFADD_SHFFAC1
1799	.$129c	LDY FACLO        
1800	.$129e	STY FACOV
1801	.$12a0	LDY FACMO        
1802	.$12a2	STY FACMO+1
1803	.$12a4	LDY FACMOH       
1804	.$12a6	STY FACMOH+1
1805	.$12a8	LDY FACHO        
1806	.$12aa	STY FACHO+1
1807	.$12ac	LDY #0
1808	.$12ae	STY FACHO        
1809	.$12b0	SBC #$08         
1810	.$12b2	BPL FFADD_SHFFAC1   
1811	.$12b4	FFADD_SHFFAC2
1812	.$12b4	ADC #$08         
1813	.$12b6	BEQ FFADD_SHFFAC4   
1814	.$12b8	TAY
1815	.$12b9	LDA FACOV
1816	.$12bb	FFADD_SHFFAC3
1817	.$12bb	LSR FACHO        
1818	.$12bd	ROR FACMOH       
1819	.$12bf	ROR FACMO        
1820	.$12c1	ROR FACLO        
1821	.$12c3	ROR              
1822	.$12c4	DEY
1823	.$12c5	BNE FFADD_SHFFAC3
1824	.$12c7	JMP FFADD_MANADD2   
1825	.$12ca	FFADD_SHFFAC4
1826	.$12ca	LDA FACOV        
1827	.$12cc	JMP FFADD_MANADD2
1828	.$12cf	FFADD_EXPEQ
1829	.$12cf	LDX FACOV
1830	.$12d1	STX OLDOV
1833	.$12d3	JMP FFADD_MANADD1
1834	.$12d6	FFADD_SHFARG2
1835	.$12d6	LDA FACOV        
1836	.$12d8	JMP FFADD_MANADD1
1837	.$12db	FFADD_SHFARG1
1838	.$12db	LDX FACOV
1839	.$12dd	STX OLDOV        
1840	.$12df	LDX #$00         
1843	.$12e1	ADC #$08
1844	.$12e3	BPL FFADD_SHFARG6   
1845	.$12e5	FFADD_SHFARG3
1846	.$12e5	LDX ARGLO        
1847	.$12e7	LDY ARGMO        
1848	.$12e9	STY ARGMO+1
1849	.$12eb	LDY ARGMOH       
1850	.$12ed	STY ARGMOH+1
1851	.$12ef	LDY ARGHO        
1852	.$12f1	STY ARGHO+1
1853	.$12f3	LDY #0
1854	.$12f5	STY ARGHO        
1855	.$12f7	FFADD_SHFARG4
1856	.$12f7	ADC #$08
1857	.$12f9	BMI FFADD_SHFARG3
1858	.$12fb	BEQ FFADD_SHFARG3
1859	.$12fd	FFADD_SHFARG6
1860	.$12fd	SBC #$08
1861	.$12ff	BEQ FFADD_SHFARG2   
1862	.$1301	TAY
1863	.$1302	TXA              
1864	.$1303	FFADD_SHFARG5
1865	.$1303	LSR ARGHO
1866	.$1305	ROR ARGMOH
1867	.$1307	ROR ARGMO
1868	.$1309	ROR ARGLO
1869	.$130b	ROR           
1870	.$130c	INY
1871	.$130d	BNE FFADD_SHFARG5
1872	.$130f	FFADD_MANADD1
1873	.$130f	LDX #ARGEXP      
1874	.$1311	FFADD_MANADD2
1875	.$1311	BIT ARISGN
1876	.$1313	BMI FFADD_MANSUB1   
1877	.$1315	CLC
1878	.$1316	ADC OLDOV
1879	.$1318	STA FACOV
1880	.$131a	LDA FACLO
1881	.$131c	ADC ARGLO
1882	.$131e	STA FACLO
1883	.$1320	LDA FACMO
1884	.$1322	ADC ARGMO
1885	.$1324	STA FACMO
1886	.$1326	LDA FACMOH
1887	.$1328	ADC ARGMOH
1888	.$132a	STA FACMOH
1889	.$132c	LDA FACHO
1890	.$132e	ADC ARGHO
1891	.$1330	STA FACHO
1892	.$1332	BCC FFADD_RNDRTS
1893	.$1334	INC FACEXP
1894	.$1336	BEQ FFADD_OVERR
1896	.$1338	ROR FACHO
1897	.$133a	ROR FACMOH
1898	.$133c	ROR FACMO
1899	.$133e	ROR FACLO
1900	.$1340	ROR FACOV
1901	.$1342	FFADD_RNDRTS
1902	.$1342	RTS
1903	.$1343	FFADD_OVERR
1904	.$1343	JMP ILLEGALQUANTITY
1905	.$1346	FFADD_MANSUB1
1906	.$1346	LDY #FACEXP
1907	.$1348	CPX #ARGEXP
1908	.$134a	BEQ FFADD_MANSUB2
1909	.$134c	LDY #ARGEXP
1910	.$134e	FFADD_MANSUB2
1911	.$134e	SEC              
1912	.$134f	EOR #$FF
1913	.$1351	ADC OLDOV
1914	.$1353	STA FACOV
1915	.$1355	LDA 4,Y
1916	.$1358	SBC 4,X
1917	.$135a	STA FACLO
1918	.$135c	LDA 3,Y
1919	.$135f	SBC 3,X
1920	.$1361	STA FACMO
1921	.$1363	LDA 2,Y
1922	.$1366	SBC 2,X
1923	.$1368	STA FACMOH
1924	.$136a	LDA 1,Y
1925	.$136d	SBC 1,X
1926	.$136f	STA FACHO
1927	.$1371	BCS FCNORMAL
1928	.$1373	LDA FACSGN
1929	.$1375	EOR #$FF
1930	.$1377	STA FACSGN
1931	.$1379	LDA FACHO
1932	.$137b	EOR #$FF
1933	.$137d	STA FACHO
1934	.$137f	LDA FACMOH
1935	.$1381	EOR #$FF
1936	.$1383	STA FACMOH
1937	.$1385	LDA FACMO
1938	.$1387	EOR #$FF
1939	.$1389	STA FACMO
1940	.$138b	LDA FACLO
1941	.$138d	EOR #$FF
1942	.$138f	STA FACLO
1943	.$1391	LDA FACOV
1944	.$1393	EOR #$FF
1945	.$1395	CLC
1946	.$1396	ADC #1
1947	.$1398	STA FACOV
1948	.$139a	BNE FCNORMAL
1949	.$139c	INC FACLO
1950	.$139e	BNE FCNORMAL
1951	.$13a0	INC FACMO
1952	.$13a2	BNE FCNORMAL
1953	.$13a4	INC FACMOH
1954	.$13a6	BNE FCNORMAL
1955	.$13a8	INC FACHO
1956	.$13aa	FCNORMAL   BIT FACHO
1957	.$13ac	BMI FFADD_RET       
1958	.$13ae	LDA #0           
1959	.$13b0	CLC
1960	.$13b1	FFADD_NORM3
1961	.$13b1	LDX FACHO
1962	.$13b3	BNE FFADD_NORM1
1963	.$13b5	LDX FACHO+1
1964	.$13b7	STX FACHO
1965	.$13b9	LDX FACMOH+1
1966	.$13bb	STX FACMOH
1967	.$13bd	LDX FACMO+1
1968	.$13bf	STX FACMO
1969	.$13c1	LDX FACOV
1970	.$13c3	STX FACLO
1971	.$13c5	LDX #0
1972	.$13c7	STX FACOV
1973	.$13c9	ADC #$08
1974	.$13cb	CMP #$20
1975	.$13cd	BNE FFADD_NORM3
1976	.$13cf	JMP FFADD_ZEROFAC
1977	.$13d2	FFADD_NORM2
1978	.$13d2	CLC
1979	.$13d3	ADC #1
1980	.$13d5	ASL FACOV
1981	.$13d7	ROL FACLO
1982	.$13d9	ROL FACMO
1983	.$13db	ROL FACMOH
1984	.$13dd	ROL FACHO
1985	.$13df	FFADD_NORM1
1986	.$13df	BPL FFADD_NORM2     
1987	.$13e1	SEC
1988	.$13e2	SBC FACEXP
1989	.$13e4	BCS FFADD_ZEROFAC
1990	.$13e6	EOR #$FF
1991	.$13e8	CLC
1992	.$13e9	ADC #1
1993	.$13eb	STA FACEXP
1994	.$13ed	FFADD_RET   RTS
1995	.$13ee	FFADD_ZEROFAC
1996	.$13ee	LDX #0
1997	.$13f0	STX FACEXP
1998	.$13f2	STX FACSGN
1999	.$13f4	RTS
2002	.$13f5	INITVARS
2003	.$13f5	JSR INITSTRVARS
2004	.$13f8	LDA #0
2005	.$13fa	LDY #4
2006	.$13fc	REALINITLOOP0:
2007	.$13fc	STA VAR_CP,Y
2008	.$13ff	STA VAR_AM,Y
2009	.$1402	STA VAR_PR,Y
2010	.$1405	STA VAR_ML,Y
2011	.$1408	DEY
2012	.$1409	BMI REALLOOPEXIT0
2013	.$140b	JMP REALINITLOOP0
2014	.$140e	REALLOOPEXIT0:
2015	.$140e	LDA #<VAR_SV%[]
2016	.$1410	LDY #>VAR_SV%[]
2017	.$1412	JSR INITSPARAMS
2018	.$1415	JSR INITNARRAY
2019	.$1418	LDA #0
2020	.$141a	RTS
2024	.$141b	CONSTANTS
2026	.$141b	CONST_0 .BYTE 6
2027	.$141c	.STRG "000000"
2030	.$1422	CONST_1R .REAL 2.0
2041	.$1427	CONST_5 .BYTE 30
2042	.$1428	.STRG "prime numbers up to 255:{down}"
2050	.$1441	CONST_8 .BYTE 37
2051	.$1442	.STRG "{down}number of primes (expected 54):"
2054	.$1462	CONST_9R .REAL 256.0
2057	.$1467	DATAS
2058	.$1467	.BYTE $FF
2060	.$1468	CONSTANTS_END
2063	.$1468	VARIABLES
2065	.$1468	VAR_CP .REAL 0.0
2067	.$146d	VAR_AM .REAL 0.0
2069	.$1472	VAR_PR .REAL 0.0
2071	.$1477	.BYTE 0
2072	.$1478	.WORD 514
2073	.$147a	VAR_SV%[] .ARRAY 514
2075	.$167c	VAR_ML .REAL 0.0
2076	.$1681	STRINGVARS_START
2078	.$1681	VAR_TI$ .WORD EMPTYSTR
2079	.$1683	STRINGVARS_END
2080	.$1683	STRINGARRAYS_START
2081	.$1683	STRINGARRAYS_END
2082	.$1683	VARIABLES_END
2084	.$1683	Y_REG .REAL 0.0
2085	.$1688	C_REG .REAL 0.0
2086	.$168d	D_REG .REAL 0.0
2087	.$1692	E_REG .REAL 0.0
2088	.$1697	F_REG .REAL 0.0
2089	.$169c	A_REG .WORD 0
2090	.$169e	B_REG .WORD 0
2091	.$16a0	CMD_NUM .BYTE 0
2092	.$16a1	CHANNEL .BYTE 0
2093	.$16a2	SP_SAVE .BYTE 0
2094	.$16a3	TMP2_REG .WORD 0
2095	.$16a5	TMP3_REG .WORD 0
2096	.$16a7	TMP4_REG .WORD 0
2097	.$16a9	AS_TMP .WORD 0
2098	.$16ab	BPOINTER_TMP .WORD 0
2099	.$16ad	BASICTEXTP .BYTE 0
2100	.$16ae	STORE1 .WORD 0
2101	.$16b0	STORE2 .WORD 0
2102	.$16b2	STORE3 .WORD 0
2103	.$16b4	STORE4 .WORD 0
2104	.$16b6	GCSTART .WORD 0
2105	.$16b8	GCLEN .WORD 0
2106	.$16ba	GCWORK .WORD 0
2107	.$16bc	INPUTLENGTH .BYTE 0
2108	.$16bd	TMP_FREG .REAL 0
2109	.$16c2	TMP2_FREG .REAL 0
2110	.$16c7	TMP_FLAG .BYTE 0
2111	.$16c8	INT_FLAG .BYTE 0
2112	.$16c9	REAL_CONST_ONE .REAL 1.0
2113	.$16ce	REAL_CONST_ZERO .REAL 0.0
2114	.$16d3	REAL_CONST_MINUS_ONE .REAL -1.0
2115	.$16d8	CHLOCKFLAG .BYTE 0
2116	.$16d9	EMPTYSTR .BYTE 0
2117	.$16da	FPSTACKP .WORD FPSTACK
2118	.$16dc	FORSTACKP .WORD FORSTACK
2119	.$16de	DATASP .WORD DATAS
2120	.$16e0	LASTVAR .WORD 0
2121	.$16e2	LASTVARP .WORD 0
2122	.$16e4	HIGHP .WORD STRBUF
2123	.$16e6	STRBUFP .WORD STRBUF
2124	.$16e8	ENDSTRBUF .WORD 0
2125	.$16ea	INPUTQUEUEP .BYTE 0
2126	.$16eb	PROGRAMEND
2127	.$16eb	INPUTQUEUE .ARRAY $0F
2128	.$16fa	FPSTACK .ARRAY 100
2129	.$175e	FORSTACK .ARRAY 340
2130	.$18b2	STRBUF .BYTE 0
