PROGRAMSTART:
JSR START
0:
10:
NOP
NOP
NOP
MOV Y,#16{INTEGER}
MOV MX{REAL},Y
NOP
MOV B,#000000{STRING}
MOV TI${STRING},B
20:
NOP
MOVB 53281,#0{INTEGER}
NOP
MOVB 646,#7{INTEGER}
NOP
JSR COMPACTMAX
MOV Y,#147{INTEGER}
CHGCTX #1
JSR CHR
JSR STROUT
NOP
MOV A,#calculating mandelbrot fractal...{STRING}
JSR STROUT
JSR LINEBREAK
40:
NOP
MOV Y,#0{INTEGER}
MOV PY{REAL},Y
NOP
MOV Y,#19.0{REAL}
PUSH Y
NOP
MOV Y,#1{INTEGER}
PUSH Y
MOV A,(PY{REAL})
JSR INITFOR
50:
NOP
MOV Y,#0.4{REAL}
MOV X,PY{REAL}
DIV X,Y
MOV Y,#20.0{REAL}
DIV X,Y
MOV Y,#1{INTEGER}
SUB X,Y
MOV YY{REAL},X
60:
NOP
MOV Y,#0{INTEGER}
MOV PX{REAL},Y
NOP
MOV Y,#29.0{REAL}
PUSH Y
NOP
MOV Y,#1{INTEGER}
PUSH Y
MOV A,(PX{REAL})
JSR INITFOR
70:
NOP
MOV Y,#0.3{REAL}
MOV X,PX{REAL}
DIV X,Y
MOV Y,#30.0{REAL}
DIV X,Y
MOV Y,#2.2{REAL}
SUB X,Y
MOV XX{REAL},X
NOP
MOV Y,#0{INTEGER}
MOV XQ{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV YQ{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV X{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV Y{REAL},Y
NOP
MOV Y,#0{INTEGER}
MOV IT{REAL},Y
80:
NOP
MOV Y,YQ{REAL}
MOV X,XQ{REAL}
ADD X,Y
MOV Y,#4{INTEGER}
GTEQ X,Y
PUSH X
MOV Y,#16.0{REAL}
MOV X,IT{REAL}
GTEQ X,Y
POP Y
OR X,Y
CMP X,#0{REAL}
JNE NSKIP0
JMP SKIP0
NSKIP0:
JMP 150
NOP
SKIP0:
90:
NOP
MOV Y,Y{REAL}
MOV X,X{REAL}
MUL X,Y
MOV A,#1{INTEGER}
SHL X,A
MOV Y,YY{REAL}
ADD X,Y
MOV Y{REAL},X
100:
NOP
MOV Y,YQ{REAL}
MOV X,XQ{REAL}
SUB X,Y
MOV Y,XX{REAL}
ADD X,Y
MOV X{REAL},X
110:
NOP
MOV Y,X{REAL}
MOV X,X{REAL}
MUL X,Y
MOV XQ{REAL},X
NOP
MOV Y,Y{REAL}
MOV X,Y{REAL}
MUL X,Y
MOV YQ{REAL},X
120:
NOP
MOV Y,#1{INTEGER}
MOV X,IT{REAL}
ADD X,Y
MOV IT{REAL},X
130:
NOP
JMP 80
150:
NOP
MOV Y,#1{INTEGER}
MOV X,PY{REAL}
ADD X,Y
MOV A,#5{INTEGER}
MOV Y,X
SHL X,A
MOV A,#3{INTEGER}
SHL Y,A
ADD X,Y
MOV Y,PX{REAL}
ADD X,Y
MOV Y,#4{INTEGER}
ADD X,Y
MOV AD{REAL},X
NOP
MOV Y,AD{REAL}
MOV X,#1024{INTEGER}
ADD X,Y
MOV Y,X
MOVB (Y),#160{INTEGER}
NOP
MOV Y,AD{REAL}
MOV X,#55296{INTEGER}
ADD X,Y
PUSH X
MOV Y,IT{REAL}
MOV X,#16.0{REAL}
SUB X,Y
POP Y
MOVB (Y),X
160:
NOP
MOV A,#0{INTEGER}
JSR NEXT
CMP A,#0{INTEGER}
JE ($JUMP)
NOP
MOV A,#0{INTEGER}
JSR NEXT
CMP A,#0{INTEGER}
JE ($JUMP)
170:
NOP
MOV A,#{down*20}finished in {STRING}
JSR STROUT
NOP
MOV A,TI${STRING}
JSR STROUT
JSR LINEBREAK
NOP
JSR END
RTS
