117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_1:
127	.$81f	LDX #4
128	.$821	dcloop401_1:
129	.$821	LDA CONST_0R,X
130	.$824	STA VAR_F,X
131	.$827	LDA CONST_1R,X
132	.$82a	STA VAR_F,X
133	.$82d	DEX
134	.$82e	BPL dcloop401_1
138	.$830	LINE_2:
141	.$830	LINE_3:
143	.$830	LDA #<CONST_2
144	.$832	LDY #>CONST_2
145	.$834	JSR COPY2_XYA_XREG
148	.$837	TXA
149	.$838	LDY #>X_REG
152	.$83a	JSR REALFACPUSH
154	.$83d	LDA #<VAR_F
155	.$83f	LDY #>VAR_F
156	.$841	JSR REALFAC
157	.$844	LDA #<CONST_3
158	.$846	LDY #>CONST_3
159	.$848	JSR FASTFMULMEM
162	.$84b	JSR FACXREG
164	.$84e	JSR POPREAL2X
166	.$851	JSR FASTFADDARG
170	.$854	LDX #<VAR_J
171	.$856	LDY #>VAR_J
173	.$858	JSR FACMEM
175	.$85b	LINE_4:
177	.$85b	LDA #<VAR_J
178	.$85d	LDY #>VAR_J
179	.$85f	JSR COPY2_XYA_XREG
183	.$862	JSR REALOUT
184	.$865	JSR CRSRRIGHT
185	.$868	JSR TABOUT
186	.$86b	LDA #<VAR_F
187	.$86d	LDY #>VAR_F
188	.$86f	JSR COPY2_XYA_XREG
192	.$872	JSR REALOUTBRK
194	.$875	JSR END
195	.$878	RTS
198	.$879	END   LDX SP_SAVE
199	.$87c	TXS
206	.$87d	RTS
209	.$87e	START  LDA ENDSTRBUF+1
210	.$881	BNE ENDGIVEN
211	.$883	LDA BASICEND
212	.$885	STA ENDSTRBUF
213	.$888	LDA BASICEND+1
214	.$88a	STA ENDSTRBUF+1
215	.$88d	ENDGIVEN LDA #<FPSTACK
216	.$88f	LDY #>FPSTACK
217	.$891	STA FPSTACKP
218	.$894	STY FPSTACKP+1
219	.$897	LDA #<FORSTACK
220	.$899	LDY #>FORSTACK
221	.$89b	STA FORSTACKP
222	.$89e	STY FORSTACKP+1
223	.$8a1	LDA #<STRBUF
224	.$8a3	LDY #>STRBUF
225	.$8a5	STA STRBUFP
226	.$8a8	STY STRBUFP+1
227	.$8ab	STA HIGHP
228	.$8ae	STY HIGHP+1
229	.$8b1	LDA #0
230	.$8b3	STA CHLOCKFLAG
231	.$8b6	STA LASTVAR
232	.$8b9	STA LASTVAR+1
233	.$8bc	JSR INITVARS
234	.$8bf	LDA #0
235	.$8c1	STA CMD_NUM
236	.$8c4	STA CHANNEL
237	.$8c7	TAY
238	.$8c8	TAX
242	.$8c9	STA KEYNDX
248	.$8cb	JSR RESTORE
249	.$8ce	CLC
253	.$8cf	RTS
256	.$8d0	INITNARRAY
257	.$8d0	STA TMP_ZP
258	.$8d2	STY TMP_ZP+1
259	.$8d4	LDY #0
260	.$8d6	TYA
261	.$8d7	NINITLOOP STA (TMP_ZP),Y
262	.$8d9	INC TMP_ZP
263	.$8db	BNE NLOOPNOV
264	.$8dd	INC TMP_ZP+1
265	.$8df	NLOOPNOV LDX TMP2_ZP
266	.$8e1	BNE NLOOPNOV2
267	.$8e3	DEC TMP2_ZP+1
268	.$8e5	NLOOPNOV2 DEC TMP2_ZP
269	.$8e7	BNE NINITLOOP
270	.$8e9	LDX TMP2_ZP+1
271	.$8eb	BNE NINITLOOP
272	.$8ed	RTS
275	.$8ee	INITSTRARRAY
276	.$8ee	STA TMP_ZP
277	.$8f0	STY TMP_ZP+1
278	.$8f2	SINITLOOP LDY #0
279	.$8f4	LDA #<EMPTYSTR
280	.$8f6	STA (TMP_ZP),Y
281	.$8f8	LDA #>EMPTYSTR
282	.$8fa	INY
283	.$8fb	STA (TMP_ZP),Y
284	.$8fd	CLC
285	.$8fe	LDA TMP_ZP
286	.$900	ADC #2
287	.$902	STA TMP_ZP
288	.$904	BCC SLOOPNOV1
289	.$906	INC TMP_ZP+1
290	.$908	SLOOPNOV1 SEC
291	.$909	LDA TMP2_ZP
292	.$90b	SBC #2
293	.$90d	STA TMP2_ZP
294	.$90f	BCS SLOOPNOV2
295	.$911	DEC TMP2_ZP+1
296	.$913	SLOOPNOV2 LDA TMP2_ZP
297	.$915	BNE SINITLOOP
298	.$917	LDA TMP2_ZP+1
299	.$919	BNE SINITLOOP
300	.$91b	RTS
303	.$91c	INITSPARAMS STA TMP3_ZP
304	.$91e	STY TMP3_ZP+1
305	.$920	SEC
306	.$921	SBC #2
307	.$923	STA TMP_ZP
308	.$925	TYA
309	.$926	SBC #0
310	.$928	STA TMP_ZP+1
311	.$92a	LDY #0
312	.$92c	LDA (TMP_ZP),Y
313	.$92e	STA TMP2_ZP
314	.$930	INY
315	.$931	LDA (TMP_ZP),Y
316	.$933	STA TMP2_ZP+1
317	.$935	LDA TMP3_ZP
318	.$937	LDY TMP3_ZP+1
319	.$939	RTS
322	.$93a	INITSTRVARS LDA #<STRINGVARS_START  
323	.$93c	LDY #>STRINGVARS_START
324	.$93e	CMP #<STRINGVARS_END
325	.$940	BNE INITIT1
326	.$942	CPY #>STRINGVARS_END
327	.$944	BNE INITIT1
328	.$946	JMP INITSA2     
329	.$949	INITIT1  STA TMP_ZP
330	.$94b	STY TMP_ZP+1
331	.$94d	LDY #0
332	.$94f	INITSTRLOOP LDA #<EMPTYSTR
333	.$951	STA (TMP_ZP),Y
334	.$953	INY
335	.$954	LDA #>EMPTYSTR
336	.$956	STA (TMP_ZP),Y
337	.$958	DEY
338	.$959	LDA TMP_ZP
339	.$95b	CLC
340	.$95c	ADC #2
341	.$95e	STA TMP_ZP
342	.$960	LDA TMP_ZP+1
343	.$962	ADC #0
344	.$964	STA TMP_ZP+1
345	.$966	CMP #>STRINGVARS_END
346	.$968	BNE INITSTRLOOP
347	.$96a	LDA TMP_ZP
348	.$96c	CMP #<STRINGVARS_END
349	.$96e	BNE INITSTRLOOP
350	.$970	INITSA2  LDA #<STRINGARRAYS_START 
351	.$972	LDY #>STRINGARRAYS_START
352	.$974	CMP #<STRINGARRAYS_END
353	.$976	BNE ARRAYLOOP
354	.$978	CPY #>STRINGARRAYS_END
355	.$97a	BNE ARRAYLOOP
356	.$97c	RTS       
357	.$97d	ARRAYLOOP CLC
358	.$97e	ADC #3
359	.$980	BCC ARRAYSKIP1
360	.$982	INY
361	.$983	ARRAYSKIP1 CPY #>STRINGARRAYS_END
362	.$985	BEQ ARRAYSC
363	.$987	BCC ARRAYSKIP2
364	.$989	JMP ARRAYQUIT
365	.$98c	ARRAYSC  CMP #<STRINGARRAYS_END
366	.$98e	BCS ARRAYQUIT
367	.$990	ARRAYSKIP2 STA TMP_REG
368	.$992	STY TMP_REG+1
369	.$994	JSR INITSPARAMS
370	.$997	LDA TMP_REG
371	.$999	LDY TMP_REG+1
372	.$99b	JSR INITSTRARRAY
373	.$99e	LDA TMP_ZP
374	.$9a0	LDY TMP_ZP+1
375	.$9a2	JMP ARRAYLOOP
376	.$9a5	ARRAYQUIT RTS
379	.$9a6	RESTORE  LDA #<DATAS
380	.$9a8	LDY #>DATAS
381	.$9aa	STA DATASP
382	.$9ad	STY DATASP+1
383	.$9b0	RTS
386	.$9b1	TABSPC     BCC DOSPC
387	.$9b3	TXA
388	.$9b4	SBC $09
389	.$9b6	BCC TABSPCQUIT
390	.$9b8	TAX
391	.$9b9	DOSPC  INX
392	.$9ba	TABSPCLOOP  DEX
393	.$9bb	BNE TABSPCRIGHT
394	.$9bd	TABSPCQUIT RTS
395	.$9be	TABSPCRIGHT JSR CRSRRIGHT
396	.$9c1	JMP TABSPCLOOP
399	.$9c4	REROUTE  LDA CMD_NUM  
400	.$9c7	BEQ REROUTECMD
401	.$9c9	TAX
402	.$9ca	STA CHANNEL
403	.$9cd	JMP CHKOUT
404	.$9d0	REROUTECMD RTS
407	.$9d1	RESETROUTE LDA CMD_NUM  
408	.$9d4	BEQ RESETROUTECMD
409	.$9d6	JMP CLRCHNEW
410	.$9d9	RESETROUTECMD
411	.$9d9	RTS
414	.$9da	INTOUTFASTZ LDX #32    
415	.$9dc	LDA TMP_ZP+1
416	.$9de	BPL INTISPOS
417	.$9e0	CLC
418	.$9e1	LDA TMP_ZP
419	.$9e3	EOR #$FF
420	.$9e5	ADC #1
421	.$9e7	STA TMP_ZP
422	.$9e9	LDA TMP_ZP+1
423	.$9eb	EOR #$FF
424	.$9ed	ADC #0
425	.$9ef	STA TMP_ZP+1
426	.$9f1	LDX #45    
427	.$9f3	INTISPOS
428	.$9f3	TXA
429	.$9f4	JSR CHROUT
430	.$9f7	JSR CONVPOSINT
431	.$9fa	LDA NUMFLAG
432	.$9fd	BNE ALLINTOUTDONE
433	.$9ff	LDA #48
434	.$a01	JSR CHROUT
435	.$a04	ALLINTOUTDONE
436	.$a04	RTS
439	.$a05	NUMBEROUT
440	.$a05	BEQ NUMZERO
441	.$a07	ORA #$30
442	.$a09	STA NUMFLAG
443	.$a0c	JMP CHROUT
444	.$a0f	NUMZERO
445	.$a0f	LDX NUMFLAG
446	.$a12	BEQ STILLZERO
447	.$a14	ORA #$30
448	.$a16	JMP CHROUT
449	.$a19	STILLZERO
450	.$a19	RTS
453	.$a1a	CONVPOSINT
454	.$a1a	JSR INT2BCD
455	.$a1d	LDX #0
456	.$a1f	STX NUMFLAG
457	.$a22	AND #$0F
458	.$a24	JSR NUMBEROUT
459	.$a27	LDA BCD+1
460	.$a2a	LSR
461	.$a2b	LSR
462	.$a2c	LSR
463	.$a2d	LSR
464	.$a2e	JSR NUMBEROUT
465	.$a31	LDA BCD+1
466	.$a34	AND #$0F
467	.$a36	TAY
468	.$a37	JSR NUMBEROUT
469	.$a3a	LDA BCD
470	.$a3d	LSR
471	.$a3e	LSR
472	.$a3f	LSR
473	.$a40	LSR
474	.$a41	JSR NUMBEROUT
475	.$a44	LDA BCD
476	.$a47	AND #$0F
477	.$a49	JSR NUMBEROUT
478	.$a4c	RTS
481	.$a4d	INT2BCD
482	.$a4d	SED
483	.$a4e	LDA #0
484	.$a50	STA BCD
485	.$a53	STA BCD+1
486	.$a56	STA BCD+2
487	.$a59	ASL TMP_ZP
488	.$a5b	ROL TMP_ZP+1
489	.$a5d	LDA BCD
490	.$a60	ADC BCD
491	.$a63	STA BCD
492	.$a66	ASL TMP_ZP
493	.$a68	ROL TMP_ZP+1
494	.$a6a	ADC BCD
495	.$a6d	STA BCD
496	.$a70	ASL TMP_ZP
497	.$a72	ROL TMP_ZP+1
498	.$a74	ADC BCD
499	.$a77	STA BCD
500	.$a7a	ASL TMP_ZP
501	.$a7c	ROL TMP_ZP+1
502	.$a7e	ADC BCD
503	.$a81	STA BCD
504	.$a84	ASL TMP_ZP
505	.$a86	ROL TMP_ZP+1
506	.$a88	ADC BCD
507	.$a8b	STA BCD
508	.$a8e	ASL TMP_ZP
509	.$a90	ROL TMP_ZP+1
510	.$a92	ADC BCD
511	.$a95	STA BCD
512	.$a98	LDX #7
513	.$a9a	BCDBIT1
514	.$a9a	ASL TMP_ZP
515	.$a9c	ROL TMP_ZP+1
516	.$a9e	LDA BCD
517	.$aa1	ADC BCD
518	.$aa4	STA BCD
519	.$aa7	LDA BCD+1
520	.$aaa	ADC BCD+1
521	.$aad	STA BCD+1
522	.$ab0	DEX
523	.$ab1	BNE BCDBIT1
524	.$ab3	LDX #3
525	.$ab5	BCDBIT2
526	.$ab5	ASL TMP_ZP
527	.$ab7	ROL TMP_ZP+1
528	.$ab9	LDA BCD
529	.$abc	ADC BCD
530	.$abf	STA BCD
531	.$ac2	LDA BCD+1
532	.$ac5	ADC BCD+1
533	.$ac8	STA BCD+1
534	.$acb	LDA BCD+2
535	.$ace	ADC BCD+2
536	.$ad1	STA BCD+2
537	.$ad4	DEX
538	.$ad5	BNE BCDBIT2
539	.$ad7	CLD
540	.$ad8	RTS
541	.$ad9	BCD
542	.$ad9	.WORD 0 0
543	.$add	NUMFLAG
544	.$add	.BYTE 0
547	.$ade	REALOUTFAST JSR FACINT
548	.$ae1	STA TMP_ZP+1
549	.$ae3	STY TMP_ZP
550	.$ae5	JMP INTOUTFASTZ
553	.$ae8	CHECKFORFASTOUT
554	.$ae8	JSR REROUTE
555	.$aeb	JSR XREGFAC
556	.$aee	LDA FACEXP
557	.$af0	CMP #$90
558	.$af2	BCS REALOUTINT
559	.$af4	CMP #$81
560	.$af6	BCC REALOUTINT
561	.$af8	MAYBEREALOUTFAST
562	.$af8	LDA FACEXP+3
563	.$afa	BNE REALOUTINT
564	.$afc	LDA FACEXP+4
565	.$afe	BNE REALOUTINT
566	.$b00	LDA FACEXP
567	.$b02	SEC
568	.$b03	SBC #129
569	.$b05	ASL
570	.$b06	TAX
571	.$b07	LDA FACEXP+1
572	.$b09	AND MANTMASK,X
573	.$b0c	BNE REALOUTINT
574	.$b0e	INX
575	.$b0f	LDA FACEXP+2
576	.$b11	AND MANTMASK,X
577	.$b14	BNE REALOUTINT
578	.$b16	JMP REALOUTFAST
579	.$b19	REALOUTINT LDY #0
580	.$b1b	JSR FACSTR
581	.$b1e	LDY #0
582	.$b20	LDA LOFBUF,Y
583	.$b23	STRLOOPRO JSR CHROUT
584	.$b26	INY
585	.$b27	LDA LOFBUF,Y
586	.$b2a	BNE STRLOOPRO
587	.$b2c	RTS
588	.$b2d	MANTMASK
589	.$b2d	.BYTE 127 255 63 255 31 255 15 255 7 255 3 255 1 255 0 255 0 127 0 63 0 31 0 15 0 7 0 3 0 1
592	.$b4b	REALOUT  LDA X_REG
593	.$b4d	BNE RNOTNULL
594	.$b4f	JMP PRINTNULL
595	.$b52	RNOTNULL JSR CHECKFORFASTOUT
596	.$b55	JMP RESETROUTE
599	.$b58	REALOUTBRK  LDA X_REG
600	.$b5a	BNE RNOTNULLBRK
601	.$b5c	JMP PRINTNULLBRK
602	.$b5f	RNOTNULLBRK JSR CHECKFORFASTOUT
603	.$b62	LDA #$0D
604	.$b64	JSR CHROUT
605	.$b67	JMP RESETROUTE
608	.$b6a	PRINTNULL JSR REROUTE
609	.$b6d	LDA #$20
610	.$b6f	JSR CHROUT
611	.$b72	LDA #$30
612	.$b74	JSR CHROUT
613	.$b77	JMP RESETROUTE
616	.$b7a	PRINTNULLBRK
617	.$b7a	JSR REROUTE
618	.$b7d	LDA #$20
619	.$b7f	JSR CHROUT
620	.$b82	LDA #$30
621	.$b84	JSR CHROUT
622	.$b87	LDA #$0D
623	.$b89	JSR CHROUT
624	.$b8c	JMP RESETROUTE
627	.$b8f	TABOUT  JSR REROUTE
628	.$b92	LDA CMD_NUM
629	.$b95	BEQ NORMALTABOUT  
630	.$b97	CMP #3
631	.$b99	BEQ NORMALTABOUT2  
632	.$b9b	JMP TABOUTCHANNEL2
633	.$b9e	NORMALTABOUT2
634	.$b9e	JSR CLRCHNEW
635	.$ba1	NORMALTABOUT
636	.$ba1	SEC
637	.$ba2	JSR CRSRPOS
638	.$ba5	TYA
639	.$ba6	SEC
640	.$ba7	TABSUB   SBC #$0A
641	.$ba9	BCS TABSUB
642	.$bab	EOR #$FF
643	.$bad	ADC #$01
644	.$baf	TAX
645	.$bb0	INX
646	.$bb1	TABLOOP  DEX
647	.$bb2	BNE TABRIGHT
648	.$bb4	RTS
649	.$bb5	TABRIGHT JSR CRSRRIGHT
650	.$bb8	JMP TABLOOP
653	.$bbb	REALFACPUSH STA TMP_ZP
654	.$bbd	STY TMP_ZP+1
655	.$bbf	LDX FPSTACKP
656	.$bc2	LDY FPSTACKP+1
657	.$bc5	STX TMP2_ZP
658	.$bc7	STY TMP2_ZP+1
659	.$bc9	LDY #0
660	.$bcb	LDA (TMP_ZP),Y
661	.$bcd	STA (TMP2_ZP),Y
662	.$bcf	INY
663	.$bd0	LDA (TMP_ZP),Y
664	.$bd2	STA (TMP2_ZP),Y
665	.$bd4	INY
666	.$bd5	LDA (TMP_ZP),Y
667	.$bd7	STA (TMP2_ZP),Y
668	.$bd9	INY
669	.$bda	LDA (TMP_ZP),Y
670	.$bdc	STA (TMP2_ZP),Y
671	.$bde	INY
672	.$bdf	LDA (TMP_ZP),Y
673	.$be1	STA (TMP2_ZP),Y
674	.$be3	TXA    
675	.$be4	CLC
676	.$be5	ADC #5
677	.$be7	STA FPSTACKP
678	.$bea	BCC NOPVRFPXX
679	.$bec	INC FPSTACKP+1
680	.$bef	NOPVRFPXX RTS
683	.$bf0	POPREAL2X LDA FPSTACKP
684	.$bf3	SEC
685	.$bf4	SBC #5
686	.$bf6	STA FPSTACKP
687	.$bf9	BCS NOPVPR2X
688	.$bfb	DEC FPSTACKP+1
689	.$bfe	NOPVPR2X LDA FPSTACKP
690	.$c01	LDY FPSTACKP+1
691	.$c04	JSR REALFAC
692	.$c07	JSR XREGARG
693	.$c0a	RTS
696	.$c0b	COPY2_XYA_XREG
697	.$c0b	STA TMP3_ZP
698	.$c0d	STY TMP3_ZP+1
699	.$c0f	COPY2_XY_XREG
700	.$c0f	LDX #<X_REG  
701	.$c11	LDY #0
702	.$c13	LDA (TMP3_ZP),Y
703	.$c15	STA X_REG
704	.$c17	INY
705	.$c18	LDA (TMP3_ZP),Y
706	.$c1a	STA X_REG+1
707	.$c1c	INY
708	.$c1d	LDA (TMP3_ZP),Y
709	.$c1f	STA X_REG+2
710	.$c21	INY
711	.$c22	LDA (TMP3_ZP),Y
712	.$c24	STA X_REG+3
713	.$c26	INY
714	.$c27	LDA (TMP3_ZP),Y
715	.$c29	STA X_REG+4
716	.$c2b	RTS
720	.$c2c	FACWORD
721	.$c2c	LDA FACEXP   
722	.$c2e	BNE DOFACWORD
723	.$c30	STA FACSGN   
724	.$c32	DOFACWORD:
725	.$c32	JMP XFACWORD
729	.$c35	INITOUTCHANNEL
730	.$c35	LDA CHLOCKFLAG
731	.$c38	BEQ INITOUT2
732	.$c3a	CMP #$FF
733	.$c3c	BNE SKIPINITCH
734	.$c3e	INITOUT2
735	.$c3e	LDA #<C_REG
736	.$c40	LDY #>C_REG
737	.$c42	JSR REALFAC
738	.$c45	JSR FACWORD
739	.$c48	TYA
740	.$c49	TAX
741	.$c4a	CPX CMD_NUM
742	.$c4d	BNE CMDNEQUAL
743	.$c4f	LDY #0
744	.$c51	STY CMD_NUM   
745	.$c54	CMDNEQUAL STA CHANNEL
746	.$c57	STA CHLOCKFLAG
747	.$c5a	JMP CHKOUT
748	.$c5d	SKIPINITCH
749	.$c5d	RTS
752	.$c5e	CLRCHNEW
753	.$c5e	LDA CHLOCKFLAG
754	.$c61	BNE SKIPCLRCH
755	.$c63	JMP CLRCH
756	.$c66	SKIPCLRCH
757	.$c66	RTS
760	.$c67	TABOUTCHANNEL
761	.$c67	JSR INITOUTCHANNEL
762	.$c6a	LDA CHANNEL
763	.$c6d	CMP #3  
764	.$c6f	BEQ TABOUTSCREEN
765	.$c71	TABOUTCHANNEL2
766	.$c71	LDA IOCHANNEL
767	.$c73	STA STORE1
768	.$c76	LDA #1
769	.$c78	STA IOCHANNEL  
770	.$c7a	LDX #10
771	.$c7c	JMP EXITCHANNEL
772	.$c7f	TABOUTSCREEN
773	.$c7f	JSR CLRCHNEW
774	.$c82	JMP TABOUT
777	.$c85	EXITCHANNEL CLC
778	.$c86	JSR TABSPC
779	.$c89	JSR CLRCHNEW
780	.$c8c	LDA STORE1
781	.$c8f	STA IOCHANNEL
782	.$c91	RTS
785	.$c92	ILLEGALQUANTITY
789	.$c92	JMP ERRIQ
792	.$c95	FACXREG  LDA FACLO
793	.$c97	STA X_REG+4
794	.$c99	LDA FACMO
795	.$c9b	STA X_REG+3
796	.$c9d	LDA FACMOH
797	.$c9f	STA X_REG+2
798	.$ca1	LDA FACSGN
799	.$ca3	ORA #$7F
800	.$ca5	AND FACHO
801	.$ca7	STA X_REG+1
802	.$ca9	LDA FACEXP
803	.$cab	STA X_REG
804	.$cad	LDA #0   
805	.$caf	STA FACOV
806	.$cb1	RTS
809	.$cb2	XREGFAC  LDA X_REG+4
810	.$cb4	STA FACLO
811	.$cb6	LDA X_REG+3
812	.$cb8	STA FACMO
813	.$cba	LDA X_REG+2
814	.$cbc	STA FACMOH
815	.$cbe	LDA X_REG+1
816	.$cc0	STA FACSGN
817	.$cc2	ORA #$80
818	.$cc4	STA FACHO
819	.$cc6	LDA X_REG
820	.$cc8	STA FACEXP
821	.$cca	LDA #0
822	.$ccc	STA FACOV
823	.$cce	RTS
826	.$ccf	XREGARG  LDA X_REG+4
827	.$cd1	STA ARGLO
828	.$cd3	LDA X_REG+3
829	.$cd5	STA ARGMO
830	.$cd7	LDA X_REG+2
831	.$cd9	STA ARGMOH
832	.$cdb	LDA X_REG+1
833	.$cdd	STA ARGSGN
834	.$cdf	EOR FACSGN
835	.$ce1	STA ARISGN
836	.$ce3	LDA ARGSGN
837	.$ce5	ORA #$80
838	.$ce7	STA ARGHO
839	.$ce9	LDA X_REG
840	.$ceb	STA ARGEXP
841	.$ced	LDA FACEXP
842	.$cef	RTS
956	.$cf0	FASTFADDMEM
957	.$cf0	JSR MEMARG
958	.$cf3	FASTFADDARG
959	.$cf3	BNE FADDRET2     
960	.$cf5	JMP ARGFAC
961	.$cf8	FADDRET2 LDA ARGEXP
962	.$cfa	BNE FADDRET1     
963	.$cfc	RTS
964	.$cfd	FADDRET1 SEC
965	.$cfe	SBC FACEXP
966	.$d00	BEQ FFADD_EXPEQ     
967	.$d02	BCC FFADD_SHFARG1   
971	.$d04	LDY ARGEXP
972	.$d06	STY FACEXP
973	.$d08	LDY ARGSGN
974	.$d0a	STY FACSGN
975	.$d0c	LDX #0
976	.$d0e	STX OLDOV        
977	.$d10	LDX #FAC         
979	.$d12	SEC
980	.$d13	SBC #$08
981	.$d15	BMI FFADD_SHFFAC2
983	.$d17	FFADD_SHFFAC1
984	.$d17	LDY FACLO        
985	.$d19	STY FACOV
986	.$d1b	LDY FACMO        
987	.$d1d	STY FACMO+1
988	.$d1f	LDY FACMOH       
989	.$d21	STY FACMOH+1
990	.$d23	LDY FACHO        
991	.$d25	STY FACHO+1
992	.$d27	LDY #0
993	.$d29	STY FACHO        
994	.$d2b	SBC #$08         
995	.$d2d	BPL FFADD_SHFFAC1   
996	.$d2f	FFADD_SHFFAC2
997	.$d2f	ADC #$08         
998	.$d31	BEQ FFADD_SHFFAC4   
999	.$d33	TAY
1000	.$d34	LDA FACOV
1001	.$d36	FFADD_SHFFAC3
1002	.$d36	LSR FACHO        
1003	.$d38	ROR FACMOH       
1004	.$d3a	ROR FACMO        
1005	.$d3c	ROR FACLO        
1006	.$d3e	ROR              
1007	.$d3f	DEY
1008	.$d40	BNE FFADD_SHFFAC3
1009	.$d42	JMP FFADD_MANADD2   
1010	.$d45	FFADD_SHFFAC4
1011	.$d45	LDA FACOV        
1012	.$d47	JMP FFADD_MANADD2
1013	.$d4a	FFADD_EXPEQ
1014	.$d4a	LDX FACOV
1015	.$d4c	STX OLDOV
1018	.$d4e	JMP FFADD_MANADD1
1019	.$d51	FFADD_SHFARG2
1020	.$d51	LDA FACOV        
1021	.$d53	JMP FFADD_MANADD1
1022	.$d56	FFADD_SHFARG1
1023	.$d56	LDX FACOV
1024	.$d58	STX OLDOV        
1025	.$d5a	LDX #$00         
1028	.$d5c	ADC #$08
1029	.$d5e	BPL FFADD_SHFARG6   
1030	.$d60	FFADD_SHFARG3
1031	.$d60	LDX ARGLO        
1032	.$d62	LDY ARGMO        
1033	.$d64	STY ARGMO+1
1034	.$d66	LDY ARGMOH       
1035	.$d68	STY ARGMOH+1
1036	.$d6a	LDY ARGHO        
1037	.$d6c	STY ARGHO+1
1038	.$d6e	LDY #0
1039	.$d70	STY ARGHO        
1040	.$d72	FFADD_SHFARG4
1041	.$d72	ADC #$08
1042	.$d74	BMI FFADD_SHFARG3
1043	.$d76	BEQ FFADD_SHFARG3
1044	.$d78	FFADD_SHFARG6
1045	.$d78	SBC #$08
1046	.$d7a	BEQ FFADD_SHFARG2   
1047	.$d7c	TAY
1048	.$d7d	TXA              
1049	.$d7e	FFADD_SHFARG5
1050	.$d7e	LSR ARGHO
1051	.$d80	ROR ARGMOH
1052	.$d82	ROR ARGMO
1053	.$d84	ROR ARGLO
1054	.$d86	ROR           
1055	.$d87	INY
1056	.$d88	BNE FFADD_SHFARG5
1057	.$d8a	FFADD_MANADD1
1058	.$d8a	LDX #ARGEXP      
1059	.$d8c	FFADD_MANADD2
1060	.$d8c	BIT ARISGN
1061	.$d8e	BMI FFADD_MANSUB1   
1062	.$d90	CLC
1063	.$d91	ADC OLDOV
1064	.$d93	STA FACOV
1065	.$d95	LDA FACLO
1066	.$d97	ADC ARGLO
1067	.$d99	STA FACLO
1068	.$d9b	LDA FACMO
1069	.$d9d	ADC ARGMO
1070	.$d9f	STA FACMO
1071	.$da1	LDA FACMOH
1072	.$da3	ADC ARGMOH
1073	.$da5	STA FACMOH
1074	.$da7	LDA FACHO
1075	.$da9	ADC ARGHO
1076	.$dab	STA FACHO
1077	.$dad	BCC FFADD_RNDRTS
1078	.$daf	INC FACEXP
1079	.$db1	BEQ FFADD_OVERR
1081	.$db3	ROR FACHO
1082	.$db5	ROR FACMOH
1083	.$db7	ROR FACMO
1084	.$db9	ROR FACLO
1085	.$dbb	ROR FACOV
1086	.$dbd	FFADD_RNDRTS
1087	.$dbd	RTS
1088	.$dbe	FFADD_OVERR
1089	.$dbe	JMP ILLEGALQUANTITY
1090	.$dc1	FFADD_MANSUB1
1091	.$dc1	LDY #FACEXP
1092	.$dc3	CPX #ARGEXP
1093	.$dc5	BEQ FFADD_MANSUB2
1094	.$dc7	LDY #ARGEXP
1095	.$dc9	FFADD_MANSUB2
1096	.$dc9	SEC              
1097	.$dca	EOR #$FF
1098	.$dcc	ADC OLDOV
1099	.$dce	STA FACOV
1100	.$dd0	LDA 4,Y
1101	.$dd3	SBC 4,X
1102	.$dd5	STA FACLO
1103	.$dd7	LDA 3,Y
1104	.$dda	SBC 3,X
1105	.$ddc	STA FACMO
1106	.$dde	LDA 2,Y
1107	.$de1	SBC 2,X
1108	.$de3	STA FACMOH
1109	.$de5	LDA 1,Y
1110	.$de8	SBC 1,X
1111	.$dea	STA FACHO
1112	.$dec	BCS FCNORMAL
1113	.$dee	LDA FACSGN
1114	.$df0	EOR #$FF
1115	.$df2	STA FACSGN
1116	.$df4	LDA FACHO
1117	.$df6	EOR #$FF
1118	.$df8	STA FACHO
1119	.$dfa	LDA FACMOH
1120	.$dfc	EOR #$FF
1121	.$dfe	STA FACMOH
1122	.$e00	LDA FACMO
1123	.$e02	EOR #$FF
1124	.$e04	STA FACMO
1125	.$e06	LDA FACLO
1126	.$e08	EOR #$FF
1127	.$e0a	STA FACLO
1128	.$e0c	LDA FACOV
1129	.$e0e	EOR #$FF
1130	.$e10	CLC
1131	.$e11	ADC #1
1132	.$e13	STA FACOV
1133	.$e15	BNE FCNORMAL
1134	.$e17	INC FACLO
1135	.$e19	BNE FCNORMAL
1136	.$e1b	INC FACMO
1137	.$e1d	BNE FCNORMAL
1138	.$e1f	INC FACMOH
1139	.$e21	BNE FCNORMAL
1140	.$e23	INC FACHO
1141	.$e25	FCNORMAL   BIT FACHO
1142	.$e27	BMI FFADD_RET       
1143	.$e29	LDA #0           
1144	.$e2b	CLC
1145	.$e2c	FFADD_NORM3
1146	.$e2c	LDX FACHO
1147	.$e2e	BNE FFADD_NORM1
1148	.$e30	LDX FACHO+1
1149	.$e32	STX FACHO
1150	.$e34	LDX FACMOH+1
1151	.$e36	STX FACMOH
1152	.$e38	LDX FACMO+1
1153	.$e3a	STX FACMO
1154	.$e3c	LDX FACOV
1155	.$e3e	STX FACLO
1156	.$e40	LDX #0
1157	.$e42	STX FACOV
1158	.$e44	ADC #$08
1159	.$e46	CMP #$20
1160	.$e48	BNE FFADD_NORM3
1161	.$e4a	JMP FFADD_ZEROFAC
1162	.$e4d	FFADD_NORM2
1163	.$e4d	CLC
1164	.$e4e	ADC #1
1165	.$e50	ASL FACOV
1166	.$e52	ROL FACLO
1167	.$e54	ROL FACMO
1168	.$e56	ROL FACMOH
1169	.$e58	ROL FACHO
1170	.$e5a	FFADD_NORM1
1171	.$e5a	BPL FFADD_NORM2     
1172	.$e5c	SEC
1173	.$e5d	SBC FACEXP
1174	.$e5f	BCS FFADD_ZEROFAC
1175	.$e61	EOR #$FF
1176	.$e63	CLC
1177	.$e64	ADC #1
1178	.$e66	STA FACEXP
1179	.$e68	FFADD_RET   RTS
1180	.$e69	FFADD_ZEROFAC
1181	.$e69	LDX #0
1182	.$e6b	STX FACEXP
1183	.$e6d	STX FACSGN
1184	.$e6f	RTS
1187	.$e70	FASTFMULMEM
1188	.$e70	JSR MEMARG
1189	.$e73	FASTFMULARG
1190	.$e73	BEQ FFMUL_MULTRT    
1191	.$e75	LDA ARGEXP
1192	.$e77	BEQ FFMUL_ZEREMV    
1193	.$e79	CLC
1194	.$e7a	ADC FACEXP
1195	.$e7c	BCC FFMUL_TRYOFF
1196	.$e7e	CLC
1197	.$e7f	BPL FFMUL_ADJUST
1198	.$e81	JMP ILLEGALQUANTITY
1199	.$e84	FFMUL_ZEREMV
1200	.$e84	LDY #0
1201	.$e86	STY FACEXP       
1202	.$e88	STY FACSGN
1203	.$e8a	FFMUL_MULTRT
1204	.$e8a	RTS
1205	.$e8b	FFMUL_TRYOFF
1206	.$e8b	BPL FFMUL_ZEREMV    
1207	.$e8d	FFMUL_ADJUST
1208	.$e8d	ADC #$80         
1209	.$e8f	BEQ FFMUL_ZEREMV    
1210	.$e91	STA FACEXP
1211	.$e93	LDA ARISGN
1212	.$e95	STA FACSGN
1213	.$e97	LDY #0
1214	.$e99	STY RESHOP
1215	.$e9b	STY RESHO
1216	.$e9d	STY RESMOH
1217	.$e9f	STY RESMO
1218	.$ea1	STY RESLO
1219	.$ea3	STY RESOV
1220	.$ea5	STY FACHOP
1221	.$ea7	FFMUL_B0
1222	.$ea7	LSR ARGLO        
1223	.$ea9	BCC FFMUL_B1
1224	.$eab	LDA RESOV
1225	.$ead	CLC
1226	.$eae	ADC FACMOH       
1227	.$eb0	STA RESOV
1228	.$eb2	LDA RESLO
1229	.$eb4	ADC FACHO        
1230	.$eb6	STA RESLO
1231	.$eb8	LDA RESMO
1232	.$eba	ADC FACHOP       
1233	.$ebc	STA RESMO
1234	.$ebe	BCC FFMUL_B1
1235	.$ec0	INC RESMOH
1236	.$ec2	BNE FFMUL_B1
1237	.$ec4	INC RESHO
1238	.$ec6	BNE FFMUL_B1
1239	.$ec8	INC RESHOP
1240	.$eca	FFMUL_B1
1241	.$eca	LSR ARGMO        
1242	.$ecc	BCC FFMUL_B2
1243	.$ece	LDA RESOV
1244	.$ed0	CLC
1245	.$ed1	ADC FACMO        
1246	.$ed3	STA RESOV
1247	.$ed5	LDA RESLO
1248	.$ed7	ADC FACMOH       
1249	.$ed9	STA RESLO
1250	.$edb	LDA RESMO
1251	.$edd	ADC FACHO        
1252	.$edf	STA RESMO
1253	.$ee1	LDA RESMOH
1254	.$ee3	ADC FACHOP       
1255	.$ee5	STA RESMOH
1256	.$ee7	BCC FFMUL_B2
1257	.$ee9	INC RESHO
1258	.$eeb	BNE FFMUL_B2
1259	.$eed	INC RESHOP
1260	.$eef	FFMUL_B2
1261	.$eef	LSR ARGMOH       
1262	.$ef1	BCC FFMUL_B3
1263	.$ef3	LDA RESOV
1264	.$ef5	CLC
1265	.$ef6	ADC FACLO        
1266	.$ef8	STA RESOV
1267	.$efa	LDA RESLO
1268	.$efc	ADC FACMO        
1269	.$efe	STA RESLO
1270	.$f00	LDA RESMO
1271	.$f02	ADC FACMOH       
1272	.$f04	STA RESMO
1273	.$f06	LDA RESMOH
1274	.$f08	ADC FACHO        
1275	.$f0a	STA RESMOH
1276	.$f0c	LDA RESHO
1277	.$f0e	ADC FACHOP       
1278	.$f10	STA RESHO
1279	.$f12	BCC FFMUL_B3
1280	.$f14	INC RESHOP
1281	.$f16	FFMUL_B3
1282	.$f16	LSR ARGHO        
1283	.$f18	BCC FFMUL_ROTA
1284	.$f1a	LDA RESOV
1285	.$f1c	CLC
1286	.$f1d	ADC FACOV        
1287	.$f1f	STA RESOV
1288	.$f21	LDA RESLO
1289	.$f23	ADC FACLO        
1290	.$f25	STA RESLO
1291	.$f27	LDA RESMO
1292	.$f29	ADC FACMO        
1293	.$f2b	STA RESMO
1294	.$f2d	LDA RESMOH
1295	.$f2f	ADC FACMOH       
1296	.$f31	STA RESMOH
1297	.$f33	LDA RESHO
1298	.$f35	ADC FACHO        
1299	.$f37	STA RESHO
1300	.$f39	LDA RESHOP
1301	.$f3b	ADC FACHOP       
1302	.$f3d	STA RESHOP
1303	.$f3f	FFMUL_ROTA
1304	.$f3f	ASL FACOV
1305	.$f41	ROL FACLO
1306	.$f43	ROL FACMO
1307	.$f45	ROL FACMOH
1308	.$f47	ROL FACHO
1309	.$f49	ROL FACHOP
1310	.$f4b	BMI FFMUL_FIN
1311	.$f4d	JMP FFMUL_B0
1312	.$f50	FFMUL_FIN
1313	.$f50	LDA RESHOP
1314	.$f52	STA FACHO
1315	.$f54	LDA RESHO
1316	.$f56	STA FACMOH
1317	.$f58	LDA RESMOH
1318	.$f5a	STA FACMO
1319	.$f5c	LDA RESMO
1320	.$f5e	STA FACLO
1321	.$f60	LDA RESLO
1322	.$f62	STA FACOV
1323	.$f64	JMP FCNORMAL      
1324	.$f67	MUL10
1325	.$f67	JSR ARGFAC       
1326	.$f6a	TAX              
1327	.$f6b	BEQ FFMUL_MUL101    
1328	.$f6d	CLC
1329	.$f6e	ADC #2
1330	.$f70	BCS FFMUL_MUL102    
1331	.$f72	STA FACEXP       
1332	.$f74	LDY #0
1333	.$f76	STY ARISGN
1334	.$f78	JSR FASTFADDARG      
1335	.$f7b	INC FACEXP
1336	.$f7d	BEQ FFMUL_MUL102     
1337	.$f7f	FFMUL_MUL101
1338	.$f7f	RTS
1339	.$f80	FFMUL_MUL102
1340	.$f80	JMP ILLEGALQUANTITY
1341	.$f83	MUL6
1342	.$f83	JSR ARGFAC       
1343	.$f86	TAX              
1344	.$f87	BEQ FFMUL_MUL61     
1345	.$f89	INC FACEXP
1346	.$f8b	BEQ FFMUL_MUL62     
1347	.$f8d	LDY #0
1348	.$f8f	STY ARISGN
1349	.$f91	JSR FASTFADDARG      
1350	.$f94	INC FACEXP
1351	.$f96	BEQ FFMUL_MUL62     
1352	.$f98	FFMUL_MUL61
1353	.$f98	RTS
1354	.$f99	FFMUL_MUL62
1355	.$f99	JMP ILLEGALQUANTITY
1358	.$f9c	INITVARS
1359	.$f9c	JSR INITSTRVARS
1360	.$f9f	LDA #0
1361	.$fa1	LDY #4
1362	.$fa3	REALINITLOOP0:
1363	.$fa3	STA VAR_F,Y
1364	.$fa6	STA VAR_J,Y
1365	.$fa9	DEY
1366	.$faa	BMI REALLOOPEXIT0
1367	.$fac	JMP REALINITLOOP0
1368	.$faf	REALLOOPEXIT0:
1369	.$faf	RTS
1373	.$fb0	CONSTANTS
1376	.$fb0	CONST_0R .REAL 2.0
1379	.$fb5	CONST_1R .REAL 1.0
1382	.$fba	CONST_2 .REAL -16
1385	.$fbf	CONST_3 .REAL 9.0
1388	.$fc4	DATAS
1389	.$fc4	.BYTE $FF
1391	.$fc5	CONSTANTS_END
1394	.$fc5	VARIABLES
1396	.$fc5	VAR_F .REAL 0.0
1398	.$fca	VAR_J .REAL 0.0
1399	.$fcf	STRINGVARS_START
1401	.$fcf	VAR_TI$ .WORD EMPTYSTR
1402	.$fd1	STRINGVARS_END
1403	.$fd1	STRINGARRAYS_START
1404	.$fd1	STRINGARRAYS_END
1405	.$fd1	VARIABLES_END
1407	.$fd1	Y_REG .REAL 0.0
1408	.$fd6	C_REG .REAL 0.0
1409	.$fdb	D_REG .REAL 0.0
1410	.$fe0	E_REG .REAL 0.0
1411	.$fe5	F_REG .REAL 0.0
1412	.$fea	A_REG .WORD 0
1413	.$fec	B_REG .WORD 0
1414	.$fee	CMD_NUM .BYTE 0
1415	.$fef	CHANNEL .BYTE 0
1416	.$ff0	SP_SAVE .BYTE 0
1417	.$ff1	TMP2_REG .WORD 0
1418	.$ff3	TMP3_REG .WORD 0
1419	.$ff5	TMP4_REG .WORD 0
1420	.$ff7	AS_TMP .WORD 0
1421	.$ff9	BPOINTER_TMP .WORD 0
1422	.$ffb	BASICTEXTP .BYTE 0
1423	.$ffc	STORE1 .WORD 0
1424	.$ffe	STORE2 .WORD 0
1425	.$1000	STORE3 .WORD 0
1426	.$1002	STORE4 .WORD 0
1427	.$1004	GCSTART .WORD 0
1428	.$1006	GCLEN .WORD 0
1429	.$1008	GCWORK .WORD 0
1430	.$100a	INPUTLENGTH .BYTE 0
1431	.$100b	TMP_FREG .REAL 0
1432	.$1010	TMP2_FREG .REAL 0
1433	.$1015	TMP_FLAG .BYTE 0
1434	.$1016	INT_FLAG .BYTE 0
1435	.$1017	REAL_CONST_ONE .REAL 1.0
1436	.$101c	REAL_CONST_ZERO .REAL 0.0
1437	.$1021	REAL_CONST_MINUS_ONE .REAL -1.0
1438	.$1026	CHLOCKFLAG .BYTE 0
1439	.$1027	EMPTYSTR .BYTE 0
1440	.$1028	FPSTACKP .WORD FPSTACK
1441	.$102a	FORSTACKP .WORD FORSTACK
1442	.$102c	DATASP .WORD DATAS
1443	.$102e	LASTVAR .WORD 0
1444	.$1030	LASTVARP .WORD 0
1445	.$1032	HIGHP .WORD STRBUF
1446	.$1034	STRBUFP .WORD STRBUF
1447	.$1036	ENDSTRBUF .WORD 0
1448	.$1038	INPUTQUEUEP .BYTE 0
1449	.$1039	PROGRAMEND
1450	.$1039	INPUTQUEUE .ARRAY $0F
1451	.$1048	FPSTACK .ARRAY 100
1452	.$10ac	FORSTACK .ARRAY 340
1453	.$1200	STRBUF .BYTE 0
