117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
128	.$81f	LDX #4
129	.$821	dcloop567_1:
130	.$821	LDA CONST_0,X
131	.$824	STA VAR_C,X
132	.$827	DEX
133	.$828	BPL dcloop567_1
135	.$82a	JSR COMPACTMAX
136	.$82d	LDA #<VAR_C
137	.$82f	LDY #>VAR_C
138	.$831	JSR COPY2_XYA_YREG
143	.$834	JSR STR
144	.$837	JSR STROUTBRK
146	.$83a	LDA #<VAR_C
147	.$83c	LDY #>VAR_C
148	.$83e	JSR COPY2_XYA_XREG
152	.$841	JSR REALOUTBRK
155	.$844	LINE_20:
157	.$844	LDA #<CONST_0
158	.$846	LDY #>CONST_0
159	.$848	JSR COPY2_XYA_XREG
163	.$84b	JSR REALOUTBRK
165	.$84e	LDA #<CONST_1
166	.$850	LDY #>CONST_1
167	.$852	JSR STROUTBRKWL
170	.$855	LDX #4
171	.$857	dcloop733_1:
172	.$857	LDA CONST_0,X
173	.$85a	STA VAR_C,X
174	.$85d	DEX
175	.$85e	BPL dcloop733_1
177	.$860	JSR END
178	.$863	RTS
181	.$864	END   LDX SP_SAVE
182	.$867	TXS
189	.$868	RTS
192	.$869	START  LDA ENDSTRBUF+1
193	.$86c	BNE ENDGIVEN
194	.$86e	LDA BASICEND
195	.$870	STA ENDSTRBUF
196	.$873	LDA BASICEND+1
197	.$875	STA ENDSTRBUF+1
198	.$878	ENDGIVEN LDA #<FPSTACK
199	.$87a	LDY #>FPSTACK
200	.$87c	STA FPSTACKP
201	.$87f	STY FPSTACKP+1
202	.$882	LDA #<FORSTACK
203	.$884	LDY #>FORSTACK
204	.$886	STA FORSTACKP
205	.$889	STY FORSTACKP+1
206	.$88c	LDA #<STRBUF
207	.$88e	LDY #>STRBUF
208	.$890	STA STRBUFP
209	.$893	STY STRBUFP+1
210	.$896	STA HIGHP
211	.$899	STY HIGHP+1
212	.$89c	LDA #0
213	.$89e	STA CHLOCKFLAG
214	.$8a1	STA LASTVAR
215	.$8a4	STA LASTVAR+1
216	.$8a7	JSR INITVARS
217	.$8aa	LDA #0
218	.$8ac	STA CMD_NUM
219	.$8af	STA CHANNEL
220	.$8b2	TAY
221	.$8b3	TAX
225	.$8b4	STA KEYNDX
231	.$8b6	JSR RESTORE
232	.$8b9	CLC
236	.$8ba	RTS
239	.$8bb	INITNARRAY
240	.$8bb	STA TMP_ZP
241	.$8bd	STY TMP_ZP+1
242	.$8bf	LDY #0
243	.$8c1	TYA
244	.$8c2	NINITLOOP STA (TMP_ZP),Y
245	.$8c4	INC TMP_ZP
246	.$8c6	BNE NLOOPNOV
247	.$8c8	INC TMP_ZP+1
248	.$8ca	NLOOPNOV LDX TMP2_ZP
249	.$8cc	BNE NLOOPNOV2
250	.$8ce	DEC TMP2_ZP+1
251	.$8d0	NLOOPNOV2 DEC TMP2_ZP
252	.$8d2	BNE NINITLOOP
253	.$8d4	LDX TMP2_ZP+1
254	.$8d6	BNE NINITLOOP
255	.$8d8	RTS
258	.$8d9	INITSTRARRAY
259	.$8d9	STA TMP_ZP
260	.$8db	STY TMP_ZP+1
261	.$8dd	SINITLOOP LDY #0
262	.$8df	LDA #<EMPTYSTR
263	.$8e1	STA (TMP_ZP),Y
264	.$8e3	LDA #>EMPTYSTR
265	.$8e5	INY
266	.$8e6	STA (TMP_ZP),Y
267	.$8e8	CLC
268	.$8e9	LDA TMP_ZP
269	.$8eb	ADC #2
270	.$8ed	STA TMP_ZP
271	.$8ef	BCC SLOOPNOV1
272	.$8f1	INC TMP_ZP+1
273	.$8f3	SLOOPNOV1 SEC
274	.$8f4	LDA TMP2_ZP
275	.$8f6	SBC #2
276	.$8f8	STA TMP2_ZP
277	.$8fa	BCS SLOOPNOV2
278	.$8fc	DEC TMP2_ZP+1
279	.$8fe	SLOOPNOV2 LDA TMP2_ZP
280	.$900	BNE SINITLOOP
281	.$902	LDA TMP2_ZP+1
282	.$904	BNE SINITLOOP
283	.$906	RTS
286	.$907	INITSPARAMS STA TMP3_ZP
287	.$909	STY TMP3_ZP+1
288	.$90b	SEC
289	.$90c	SBC #2
290	.$90e	STA TMP_ZP
291	.$910	TYA
292	.$911	SBC #0
293	.$913	STA TMP_ZP+1
294	.$915	LDY #0
295	.$917	LDA (TMP_ZP),Y
296	.$919	STA TMP2_ZP
297	.$91b	INY
298	.$91c	LDA (TMP_ZP),Y
299	.$91e	STA TMP2_ZP+1
300	.$920	LDA TMP3_ZP
301	.$922	LDY TMP3_ZP+1
302	.$924	RTS
305	.$925	INITSTRVARS LDA #<STRINGVARS_START  
306	.$927	LDY #>STRINGVARS_START
307	.$929	CMP #<STRINGVARS_END
308	.$92b	BNE INITIT1
309	.$92d	CPY #>STRINGVARS_END
310	.$92f	BNE INITIT1
311	.$931	JMP INITSA2     
312	.$934	INITIT1  STA TMP_ZP
313	.$936	STY TMP_ZP+1
314	.$938	LDY #0
315	.$93a	INITSTRLOOP LDA #<EMPTYSTR
316	.$93c	STA (TMP_ZP),Y
317	.$93e	INY
318	.$93f	LDA #>EMPTYSTR
319	.$941	STA (TMP_ZP),Y
320	.$943	DEY
321	.$944	LDA TMP_ZP
322	.$946	CLC
323	.$947	ADC #2
324	.$949	STA TMP_ZP
325	.$94b	LDA TMP_ZP+1
326	.$94d	ADC #0
327	.$94f	STA TMP_ZP+1
328	.$951	CMP #>STRINGVARS_END
329	.$953	BNE INITSTRLOOP
330	.$955	LDA TMP_ZP
331	.$957	CMP #<STRINGVARS_END
332	.$959	BNE INITSTRLOOP
333	.$95b	INITSA2  LDA #<STRINGARRAYS_START 
334	.$95d	LDY #>STRINGARRAYS_START
335	.$95f	CMP #<STRINGARRAYS_END
336	.$961	BNE ARRAYLOOP
337	.$963	CPY #>STRINGARRAYS_END
338	.$965	BNE ARRAYLOOP
339	.$967	RTS       
340	.$968	ARRAYLOOP CLC
341	.$969	ADC #3
342	.$96b	BCC ARRAYSKIP1
343	.$96d	INY
344	.$96e	ARRAYSKIP1 CPY #>STRINGARRAYS_END
345	.$970	BEQ ARRAYSC
346	.$972	BCC ARRAYSKIP2
347	.$974	JMP ARRAYQUIT
348	.$977	ARRAYSC  CMP #<STRINGARRAYS_END
349	.$979	BCS ARRAYQUIT
350	.$97b	ARRAYSKIP2 STA TMP_REG
351	.$97d	STY TMP_REG+1
352	.$97f	JSR INITSPARAMS
353	.$982	LDA TMP_REG
354	.$984	LDY TMP_REG+1
355	.$986	JSR INITSTRARRAY
356	.$989	LDA TMP_ZP
357	.$98b	LDY TMP_ZP+1
358	.$98d	JMP ARRAYLOOP
359	.$990	ARRAYQUIT RTS
362	.$991	RESTORE  LDA #<DATAS
363	.$993	LDY #>DATAS
364	.$995	STA DATASP
365	.$998	STY DATASP+1
366	.$99b	RTS
369	.$99c	STR   JSR YREGFAC
370	.$99f	STRINT  LDY #1
371	.$9a1	JSR FACSTR
372	.$9a4	LDY #0
373	.$9a6	STY TMP_ZP+1
374	.$9a8	LDA #LOFBUF
375	.$9aa	STA TMP_ZP
376	.$9ac	DEY
377	.$9ad	STRLOOP  INY
378	.$9ae	LDA LOFBUFH,Y
379	.$9b1	BNE STRLOOP
380	.$9b3	STY LOFBUF
381	.$9b5	TYA
382	.$9b6	TAX   
383	.$9b7	LDA #<A_REG
384	.$9b9	LDY #>A_REG
385	.$9bb	STA TMP2_ZP
386	.$9bd	STY TMP2_ZP+1
387	.$9bf	JMP COPYONLY
390	.$9c2	SAVEPOINTERS
391	.$9c2	LDA TMP_ZP   
392	.$9c4	STA STORE1
393	.$9c7	LDA TMP_ZP+1
394	.$9c9	STA STORE1+1
395	.$9cc	LDA TMP2_ZP
396	.$9ce	STA STORE2
397	.$9d1	LDA TMP2_ZP+1
398	.$9d3	STA STORE2+1
399	.$9d6	LDA TMP3_ZP
400	.$9d8	STA STORE3
401	.$9db	LDA TMP3_ZP+1
402	.$9dd	STA STORE3+1
403	.$9e0	RTS
406	.$9e1	RESTOREPOINTERS
407	.$9e1	LDA STORE3+1  
408	.$9e4	STA TMP3_ZP+1
409	.$9e6	LDA STORE3
410	.$9e9	STA TMP3_ZP
411	.$9eb	LDA STORE2+1
412	.$9ee	STA TMP2_ZP+1
413	.$9f0	LDA STORE2
414	.$9f3	STA TMP2_ZP
415	.$9f5	LDA STORE1+1
416	.$9f8	STA TMP_ZP+1
417	.$9fa	LDA STORE1
418	.$9fd	STA TMP_ZP
419	.$9ff	RTS
426	.$a00	COMPACTMAX
427	.$a00	LDA #$FF
428	.$a02	LDY #$0
429	.$a04	JMP COMPACTF
432	.$a07	COMPACT
433	.$a07	LDY #0
434	.$a09	GCBUFNE  LDA (TMP_ZP),Y  
435	.$a0b	COMPACTF STA TMP4_REG  
436	.$a0e	LDY STRBUFP+1  
437	.$a11	STY TMP4_REG+1  
438	.$a14	INY     
439	.$a15	BEQ ENDMEM   
440	.$a17	CPY ENDSTRBUF+1  
441	.$a1a	BCC RGCEXIT   
442	.$a1c	ENDMEM  LDA STRBUFP
443	.$a1f	CLC
444	.$a20	ADC TMP4_REG
445	.$a23	STA TMP4_REG
446	.$a26	BCC RGCNOOV1
447	.$a28	INC TMP4_REG+1
448	.$a2b	RGCNOOV1 CLC
449	.$a2c	LDA TMP4_REG
450	.$a2f	ADC #3
451	.$a31	STA TMP4_REG
452	.$a34	BCC RGCNOOV2
453	.$a36	INC TMP4_REG+1
454	.$a39	RGCNOOV2 LDA TMP4_REG+1  
455	.$a3c	CMP ENDSTRBUF+1
456	.$a3f	BEQ RGCLOW1
457	.$a41	BCS GCEXECOMP  
458	.$a43	JMP RGCEXIT
459	.$a46	RGCLOW1  LDA TMP4_REG
460	.$a49	CMP ENDSTRBUF
461	.$a4c	BCS GCEXECOMP  
462	.$a4e	RGCEXIT  RTS     
463	.$a4f	GCEXECOMP LDA STRBUFP
464	.$a52	STA STORE4
465	.$a55	LDA STRBUFP+1
466	.$a58	STA STORE4+1
467	.$a5b	JSR GCEXE
468	.$a5e	JMP CHECKMEMORY
471	.$a61	GCEXE  JSR SAVEPOINTERS
472	.$a64	LDA #0
473	.$a66	STA LASTVAR
474	.$a69	STA LASTVAR+1  
475	.$a6c	LDA #<STRBUF
476	.$a6e	STA TMP_ZP
477	.$a70	STA GCSTART
478	.$a73	LDA #>STRBUF
479	.$a75	STA TMP_ZP+1  
480	.$a77	STA GCSTART+1
481	.$a7a	GCLOOP  LDY #0
482	.$a7c	LDA TMP_ZP
483	.$a7e	STA GCWORK
484	.$a81	LDA TMP_ZP+1
485	.$a83	STA GCWORK+1  
486	.$a86	LDA (TMP_ZP),Y
487	.$a88	STA GCLEN   
488	.$a8b	INC TMP_ZP
489	.$a8d	BNE GCLOOPNOOV
490	.$a8f	INC TMP_ZP+1
491	.$a91	GCLOOPNOOV LDA TMP_ZP
492	.$a93	CLC
493	.$a94	ADC GCLEN
494	.$a97	STA TMP_ZP
495	.$a99	BCC GCLOOPNOOV2
496	.$a9b	INC TMP_ZP+1  
497	.$a9d	GCLOOPNOOV2 LDY #0
498	.$a9f	LDA (TMP_ZP),Y
499	.$aa1	STA TMP2_ZP
500	.$aa3	INY
501	.$aa4	LDA (TMP_ZP),Y
502	.$aa6	STA TMP2_ZP+1  
503	.$aa8	LDA TMP_ZP
504	.$aaa	CLC
505	.$aab	ADC #2
506	.$aad	STA TMP_ZP
507	.$aaf	BCC GCLOOPNOOV3
508	.$ab1	INC TMP_ZP+1  
509	.$ab3	GCLOOPNOOV3 LDY #0
510	.$ab5	LDA (TMP2_ZP),Y
511	.$ab7	CMP GCWORK
512	.$aba	BNE GCKLOOP
513	.$abc	INY
514	.$abd	LDA (TMP2_ZP),Y
515	.$abf	CMP GCWORK+1
516	.$ac2	BEQ MEMFREE
517	.$ac4	GCKLOOP  LDA TMP_ZP+1  
518	.$ac6	CMP HIGHP+1
519	.$ac9	BEQ GCHECKLOW
520	.$acb	BCC GCLOOP
521	.$acd	JMP GCDONE
522	.$ad0	GCHECKLOW LDA TMP_ZP
523	.$ad2	CMP HIGHP
524	.$ad5	BCS GCDONE
525	.$ad7	JMP GCLOOP
526	.$ada	MEMFREE  LDA GCSTART   
527	.$add	CMP GCWORK   
528	.$ae0	BNE COPYDOWN
529	.$ae2	LDA GCSTART+1
530	.$ae5	CMP GCWORK+1
531	.$ae8	BNE COPYDOWN
532	.$aea	LDA TMP_ZP   
533	.$aec	STA GCSTART
534	.$aef	LDA TMP_ZP+1
535	.$af1	STA GCSTART+1
536	.$af4	JMP GCKLOOP   
537	.$af7	COPYDOWN LDA GCSTART   
538	.$afa	STA TMP_REG
539	.$afc	LDA GCSTART+1
540	.$aff	STA TMP_REG+1  
541	.$b01	LDA GCWORK
542	.$b04	STA TMP2_REG
543	.$b07	LDA GCWORK+1
544	.$b0a	STA TMP2_REG+1  
545	.$b0d	LDA TMP_ZP
546	.$b0f	SEC
547	.$b10	SBC GCWORK
548	.$b13	STA TMP3_REG
549	.$b16	LDA TMP_ZP+1
550	.$b18	SBC GCWORK+1
551	.$b1b	STA TMP3_REG+1  
552	.$b1e	LDA GCSTART
553	.$b21	CLC
554	.$b22	ADC TMP3_REG
555	.$b25	STA GCSTART
556	.$b28	LDA GCSTART+1
557	.$b2b	ADC TMP3_REG+1
558	.$b2e	STA GCSTART+1  
559	.$b31	JSR QUICKCOPY  
560	.$b34	LDY #0
561	.$b36	LDA TMP_REG
562	.$b38	STA (TMP2_ZP),Y
563	.$b3a	INY
564	.$b3b	LDA TMP_REG+1
565	.$b3d	STA (TMP2_ZP),Y  
566	.$b3f	JMP GCKLOOP
567	.$b42	GCDONE  LDA GCSTART
568	.$b45	STA HIGHP
569	.$b48	STA STRBUFP
570	.$b4b	LDA GCSTART+1
571	.$b4e	STA HIGHP+1
572	.$b51	STA STRBUFP+1  
573	.$b54	GCSKIP  JSR RESTOREPOINTERS
574	.$b57	RTS     
577	.$b58	CHECKMEMORY
578	.$b58	LDA STRBUFP+1  
579	.$b5b	CMP STORE4+1  
580	.$b5e	BCC STILLFITSCM  
584	.$b60	BEQ CHECKMEMLOWCM
585	.$b62	JMP OUTOFMEMORY  
586	.$b65	CHECKMEMLOWCM
587	.$b65	LDA STRBUFP   
588	.$b68	CMP STORE4
589	.$b6b	BCC STILLFITSCM
590	.$b6d	JMP OUTOFMEMORY  
591	.$b70	STILLFITSCM RTS
594	.$b71	QUICKCOPY LDA TMP_REG  
595	.$b73	STA TMEM+1
596	.$b76	LDA TMP_REG+1
597	.$b78	STA TMEM+2
598	.$b7b	LDA TMP2_REG
599	.$b7e	STA SMEM+1
600	.$b81	LDA TMP2_REG+1
601	.$b84	STA SMEM+2
602	.$b87	LDY #$0
603	.$b89	LDX TMP3_REG
604	.$b8c	BNE QCLOOP
605	.$b8e	LDA TMP3_REG+1
606	.$b91	BEQ QCEXIT  
607	.$b93	QCLOOP
608	.$b93	SMEM  LDA $0000,Y
609	.$b96	TMEM  STA $0000,Y
610	.$b99	INY
611	.$b9a	BNE YNOOV
612	.$b9c	INC TMEM+2
613	.$b9f	INC SMEM+2
614	.$ba2	YNOOV  DEX
615	.$ba3	BNE QCLOOP
616	.$ba5	LDA TMP3_REG+1
617	.$ba8	BEQ QCEXIT
618	.$baa	DEC TMP3_REG+1
619	.$bad	JMP QCLOOP
620	.$bb0	QCEXIT  RTS
623	.$bb1	COPYSTRING STA TMP2_ZP
624	.$bb3	STY TMP2_ZP+1
625	.$bb5	CPY TMP_ZP+1
626	.$bb7	BNE CONTCOPY
627	.$bb9	LDA TMP2_ZP
628	.$bbb	CMP TMP_ZP
629	.$bbd	BNE CONTCOPY
630	.$bbf	RTS     
631	.$bc0	CONTCOPY JSR COMPACT   
632	.$bc3	LDY #0
633	.$bc5	STY TMP_FLAG
634	.$bc8	LDA (TMP_ZP),Y
635	.$bca	BNE NOTEMPTYSTR
636	.$bcc	LDA #<EMPTYSTR  
637	.$bce	STA TMP_ZP
638	.$bd0	LDA #>EMPTYSTR
639	.$bd2	STA TMP_ZP+1
640	.$bd4	JMP ISCONST
641	.$bd7	NOTEMPTYSTR TAX     
642	.$bd8	LDA (TMP2_ZP),Y
643	.$bda	STA TMP3_ZP
644	.$bdc	INY
645	.$bdd	LDA (TMP2_ZP),Y
646	.$bdf	STA TMP3_ZP+1
647	.$be1	DEY
648	.$be2	LDA TMP_ZP+1  
649	.$be4	CMP #>CONSTANTS_END
650	.$be6	BEQ CHECKLOW1
651	.$be8	BCS INVAR
652	.$bea	JMP CHECKNEXT
653	.$bed	CHECKLOW1 LDA TMP_ZP
654	.$bef	CMP #<CONSTANTS_END
655	.$bf1	BCS INVAR
656	.$bf3	CHECKNEXT LDA TMP_ZP+1  
657	.$bf5	CMP #>CONSTANTS
658	.$bf7	BEQ CHECKLOW3
659	.$bf9	BCC INVAR
660	.$bfb	JMP ISCONST
661	.$bfe	CHECKLOW3 LDA TMP_ZP
662	.$c00	CMP #<CONSTANTS
663	.$c02	BCC INVAR   
664	.$c04	ISCONST  JSR CHECKLASTVAR 
665	.$c07	LDA TMP_ZP
666	.$c09	STA (TMP2_ZP),Y  
667	.$c0b	INY
668	.$c0c	LDA TMP_ZP+1
669	.$c0e	STA (TMP2_ZP),Y
670	.$c10	LDA HIGHP   
671	.$c13	STA STRBUFP
672	.$c16	LDA HIGHP+1
673	.$c19	STA STRBUFP+1
674	.$c1c	RTS
675	.$c1d	INVAR  INY
676	.$c1e	LDA (TMP2_ZP),Y  
677	.$c20	CMP #>CONSTANTS_END
678	.$c22	BEQ CHECKLOW2
679	.$c24	BCS INVAR2
680	.$c26	JMP PUPDATEPTR
681	.$c29	CHECKLOW2 DEY
682	.$c2a	LDA (TMP2_ZP),Y
683	.$c2c	CMP #<CONSTANTS_END
684	.$c2e	BCS INVAR2
685	.$c30	JMP PUPDATEPTR
686	.$c33	INVAR2  LDY #0   
687	.$c35	LDA (TMP3_ZP),Y
688	.$c37	STA TMP_REG
689	.$c39	TXA
690	.$c3a	CMP TMP_REG  
691	.$c3c	BEQ UPDATEHP2 
694	.$c3e	PUPDATEPTR JSR CHECKLASTVAR
695	.$c41	LDY #1   
696	.$c43	STY TMP_FLAG 
697	.$c46	JMP UPDATEPTR 
698	.$c49	UPDATEHP2 LDA HIGHP  
699	.$c4c	STA STRBUFP
700	.$c4f	LDA HIGHP+1
701	.$c52	STA STRBUFP+1
702	.$c55	JMP STRFITS
703	.$c58	COPYONLY LDY #0
704	.$c5a	STY TMP_FLAG
705	.$c5d	JMP CHECKMEM
706	.$c60	ALTCOPY  JMP COPYSTRING2
707	.$c63	UPDATEPTR LDA TMP_ZP+1 
708	.$c65	CMP HIGHP+1  
709	.$c68	BEQ CHECKXT1
710	.$c6a	BCS ALTCOPY
711	.$c6c	JMP CHECKMEM
712	.$c6f	CHECKXT1 LDA TMP_ZP
713	.$c71	CMP HIGHP
714	.$c74	BCS ALTCOPY
715	.$c76	CHECKMEM
716	.$c76	MEMOK  LDY #0
717	.$c78	LDA STRBUFP  
718	.$c7b	STA (TMP2_ZP),Y 
719	.$c7d	STA TMP3_ZP
720	.$c7f	LDA STRBUFP+1
721	.$c82	INY
722	.$c83	STA (TMP2_ZP),Y
723	.$c85	STA TMP3_ZP+1
724	.$c87	TXA
725	.$c88	CLC
726	.$c89	ADC STRBUFP
727	.$c8c	PHP
728	.$c8d	CLC
729	.$c8e	ADC #3
730	.$c90	STA STRBUFP
731	.$c93	BCC NOCS1
732	.$c95	INC STRBUFP+1
733	.$c98	NOCS1  PLP
734	.$c99	BCC STRFITS
735	.$c9b	INC STRBUFP+1
736	.$c9e	STRFITS  LDY TMP_FLAG 
737	.$ca1	BEQ NOHPUPDATE 
738	.$ca3	LDA HIGHP+1
739	.$ca6	CMP STRBUFP+1
740	.$ca9	BCC UPDATEHIGHP
741	.$cab	BEQ CHECKNEXTHP
742	.$cad	JMP NOHPUPDATE
743	.$cb0	CHECKNEXTHP LDA HIGHP
744	.$cb3	CMP STRBUFP
745	.$cb6	BCC UPDATEHIGHP
746	.$cb8	JMP NOHPUPDATE
747	.$cbb	UPDATEHIGHP LDA STRBUFP
748	.$cbe	STA HIGHP
749	.$cc1	LDA STRBUFP+1
750	.$cc4	STA HIGHP+1  
751	.$cc7	JSR REMEMBERLASTVAR
752	.$cca	JSR STOREVARREF
753	.$ccd	NOHPUPDATE LDY #0
754	.$ccf	LDA (TMP_ZP),Y 
755	.$cd1	STA (TMP3_ZP),Y
756	.$cd3	TAY    
757	.$cd4	BEQ EXITCOPY 
758	.$cd6	LOOP  LDA (TMP_ZP),Y 
759	.$cd8	STA (TMP3_ZP),Y
760	.$cda	DEY
761	.$cdb	BNE LOOP
762	.$cdd	EXITCOPY RTS
767	.$cde	COPYSTRING2 LDY #0
768	.$ce0	LDA (TMP_ZP),Y
769	.$ce2	STA TMP_REG
770	.$ce4	TAX
771	.$ce5	LDA HIGHP
772	.$ce8	STA TMP3_ZP
773	.$cea	STA (TMP2_ZP),Y
774	.$cec	LDA HIGHP+1
775	.$cef	STA TMP3_ZP+1
776	.$cf1	INY
777	.$cf2	STA (TMP2_ZP),Y
778	.$cf4	JSR REMEMBERLASTVAR
781	.$cf7	LDA TMP_ZP
782	.$cf9	CMP TMP3_ZP
783	.$cfb	BNE DOLOOP
784	.$cfd	LDA TMP_ZP+1
785	.$cff	CMP TMP3_ZP+1
786	.$d01	BEQ SKIPCP2
787	.$d03	DOLOOP  DEY
788	.$d04	TXA
789	.$d05	STA (TMP3_ZP),Y
790	.$d07	INY
791	.$d08	ASLOOP  LDA (TMP_ZP),Y
792	.$d0a	STA (TMP3_ZP),Y
793	.$d0c	INY
794	.$d0d	DEX
795	.$d0e	BNE ASLOOP
796	.$d10	SKIPCP2  LDA HIGHP
797	.$d13	CLC
798	.$d14	ADC TMP_REG
799	.$d16	PHP
800	.$d17	CLC
801	.$d18	ADC #3
802	.$d1a	STA HIGHP
803	.$d1d	STA STRBUFP
804	.$d20	BCC SKIPLOWAS1
805	.$d22	INC HIGHP+1
806	.$d25	SKIPLOWAS1 PLP
807	.$d26	BCC SKIPLOWAS2
808	.$d28	INC HIGHP+1
809	.$d2b	SKIPLOWAS2 LDA HIGHP+1
810	.$d2e	STA STRBUFP+1
811	.$d31	JSR STOREVARREF
812	.$d34	RTS
816	.$d35	CHECKLASTVAR
817	.$d35	LDA TMP2_ZP
818	.$d37	CMP LASTVAR
819	.$d3a	BNE NOTSAMEVAR
820	.$d3c	LDA TMP2_ZP+1
821	.$d3e	CMP LASTVAR+1
822	.$d41	BNE NOTSAMEVAR
823	.$d43	LDA LASTVARP   
824	.$d46	STA HIGHP
825	.$d49	STA STRBUFP
826	.$d4c	LDA LASTVARP+1
827	.$d4f	STA HIGHP+1
828	.$d52	STA STRBUFP+1
829	.$d55	NOTSAMEVAR RTS
833	.$d56	REMEMBERLASTVAR
834	.$d56	LDA TMP2_ZP
835	.$d58	STA LASTVAR
836	.$d5b	LDA TMP2_ZP+1
837	.$d5d	STA LASTVAR+1
838	.$d60	LDA TMP3_ZP
839	.$d62	STA LASTVARP
840	.$d65	LDA TMP3_ZP+1
841	.$d67	STA LASTVARP+1 
842	.$d6a	RTS
847	.$d6b	STOREVARREF
848	.$d6b	TYA
849	.$d6c	PHA    
850	.$d6d	LDA TMP_ZP
851	.$d6f	PHA
852	.$d70	LDA TMP_ZP+1
853	.$d72	PHA
854	.$d73	LDA HIGHP+1
855	.$d76	STA TMP_ZP+1
856	.$d78	LDA HIGHP
857	.$d7b	SEC
858	.$d7c	SBC #2
859	.$d7e	STA TMP_ZP
860	.$d80	BCS RLVNOOV
861	.$d82	DEC TMP_ZP+1
862	.$d84	RLVNOOV  LDA TMP2_ZP
863	.$d86	LDY #0
864	.$d88	STA (TMP_ZP),Y
865	.$d8a	LDA TMP2_ZP+1
866	.$d8c	INY
867	.$d8d	STA (TMP_ZP),Y 
868	.$d8f	PLA
869	.$d90	STA TMP_ZP+1
870	.$d92	PLA
871	.$d93	STA TMP_ZP  
872	.$d95	PLA
873	.$d96	TAY    
874	.$d97	RTS
877	.$d98	REROUTE  LDA CMD_NUM  
878	.$d9b	BEQ REROUTECMD
879	.$d9d	TAX
880	.$d9e	STA CHANNEL
881	.$da1	JMP CHKOUT
882	.$da4	REROUTECMD RTS
885	.$da5	RESETROUTE LDA CMD_NUM  
886	.$da8	BEQ RESETROUTECMD
887	.$daa	JMP CLRCHNEW
888	.$dad	RESETROUTECMD
889	.$dad	RTS
892	.$dae	INTOUTFASTZ LDX #32    
893	.$db0	LDA TMP_ZP+1
894	.$db2	BPL INTISPOS
895	.$db4	CLC
896	.$db5	LDA TMP_ZP
897	.$db7	EOR #$FF
898	.$db9	ADC #1
899	.$dbb	STA TMP_ZP
900	.$dbd	LDA TMP_ZP+1
901	.$dbf	EOR #$FF
902	.$dc1	ADC #0
903	.$dc3	STA TMP_ZP+1
904	.$dc5	LDX #45    
905	.$dc7	INTISPOS
906	.$dc7	TXA
907	.$dc8	JSR CHROUT
908	.$dcb	JSR CONVPOSINT
909	.$dce	LDA NUMFLAG
910	.$dd1	BNE ALLINTOUTDONE
911	.$dd3	LDA #48
912	.$dd5	JSR CHROUT
913	.$dd8	ALLINTOUTDONE
914	.$dd8	RTS
917	.$dd9	NUMBEROUT
918	.$dd9	BEQ NUMZERO
919	.$ddb	ORA #$30
920	.$ddd	STA NUMFLAG
921	.$de0	JMP CHROUT
922	.$de3	NUMZERO
923	.$de3	LDX NUMFLAG
924	.$de6	BEQ STILLZERO
925	.$de8	ORA #$30
926	.$dea	JMP CHROUT
927	.$ded	STILLZERO
928	.$ded	RTS
931	.$dee	CONVPOSINT
932	.$dee	JSR INT2BCD
933	.$df1	LDX #0
934	.$df3	STX NUMFLAG
935	.$df6	AND #$0F
936	.$df8	JSR NUMBEROUT
937	.$dfb	LDA BCD+1
938	.$dfe	LSR
939	.$dff	LSR
940	.$e00	LSR
941	.$e01	LSR
942	.$e02	JSR NUMBEROUT
943	.$e05	LDA BCD+1
944	.$e08	AND #$0F
945	.$e0a	TAY
946	.$e0b	JSR NUMBEROUT
947	.$e0e	LDA BCD
948	.$e11	LSR
949	.$e12	LSR
950	.$e13	LSR
951	.$e14	LSR
952	.$e15	JSR NUMBEROUT
953	.$e18	LDA BCD
954	.$e1b	AND #$0F
955	.$e1d	JSR NUMBEROUT
956	.$e20	RTS
959	.$e21	INT2BCD
960	.$e21	SED
961	.$e22	LDA #0
962	.$e24	STA BCD
963	.$e27	STA BCD+1
964	.$e2a	STA BCD+2
965	.$e2d	ASL TMP_ZP
966	.$e2f	ROL TMP_ZP+1
967	.$e31	LDA BCD
968	.$e34	ADC BCD
969	.$e37	STA BCD
970	.$e3a	ASL TMP_ZP
971	.$e3c	ROL TMP_ZP+1
972	.$e3e	ADC BCD
973	.$e41	STA BCD
974	.$e44	ASL TMP_ZP
975	.$e46	ROL TMP_ZP+1
976	.$e48	ADC BCD
977	.$e4b	STA BCD
978	.$e4e	ASL TMP_ZP
979	.$e50	ROL TMP_ZP+1
980	.$e52	ADC BCD
981	.$e55	STA BCD
982	.$e58	ASL TMP_ZP
983	.$e5a	ROL TMP_ZP+1
984	.$e5c	ADC BCD
985	.$e5f	STA BCD
986	.$e62	ASL TMP_ZP
987	.$e64	ROL TMP_ZP+1
988	.$e66	ADC BCD
989	.$e69	STA BCD
990	.$e6c	LDX #7
991	.$e6e	BCDBIT1
992	.$e6e	ASL TMP_ZP
993	.$e70	ROL TMP_ZP+1
994	.$e72	LDA BCD
995	.$e75	ADC BCD
996	.$e78	STA BCD
997	.$e7b	LDA BCD+1
998	.$e7e	ADC BCD+1
999	.$e81	STA BCD+1
1000	.$e84	DEX
1001	.$e85	BNE BCDBIT1
1002	.$e87	LDX #3
1003	.$e89	BCDBIT2
1004	.$e89	ASL TMP_ZP
1005	.$e8b	ROL TMP_ZP+1
1006	.$e8d	LDA BCD
1007	.$e90	ADC BCD
1008	.$e93	STA BCD
1009	.$e96	LDA BCD+1
1010	.$e99	ADC BCD+1
1011	.$e9c	STA BCD+1
1012	.$e9f	LDA BCD+2
1013	.$ea2	ADC BCD+2
1014	.$ea5	STA BCD+2
1015	.$ea8	DEX
1016	.$ea9	BNE BCDBIT2
1017	.$eab	CLD
1018	.$eac	RTS
1019	.$ead	BCD
1020	.$ead	.WORD 0 0
1021	.$eb1	NUMFLAG
1022	.$eb1	.BYTE 0
1025	.$eb2	REALOUTFAST JSR FACINT
1026	.$eb5	STA TMP_ZP+1
1027	.$eb7	STY TMP_ZP
1028	.$eb9	JMP INTOUTFASTZ
1031	.$ebc	CHECKFORFASTOUT
1032	.$ebc	JSR REROUTE
1033	.$ebf	JSR XREGFAC
1034	.$ec2	LDA FACEXP
1035	.$ec4	CMP #$90
1036	.$ec6	BCS REALOUTINT
1037	.$ec8	CMP #$81
1038	.$eca	BCC REALOUTINT
1039	.$ecc	MAYBEREALOUTFAST
1040	.$ecc	LDA FACEXP+3
1041	.$ece	BNE REALOUTINT
1042	.$ed0	LDA FACEXP+4
1043	.$ed2	BNE REALOUTINT
1044	.$ed4	LDA FACEXP
1045	.$ed6	SEC
1046	.$ed7	SBC #129
1047	.$ed9	ASL
1048	.$eda	TAX
1049	.$edb	LDA FACEXP+1
1050	.$edd	AND MANTMASK,X
1051	.$ee0	BNE REALOUTINT
1052	.$ee2	INX
1053	.$ee3	LDA FACEXP+2
1054	.$ee5	AND MANTMASK,X
1055	.$ee8	BNE REALOUTINT
1056	.$eea	JMP REALOUTFAST
1057	.$eed	REALOUTINT LDY #0
1058	.$eef	JSR FACSTR
1059	.$ef2	LDY #0
1060	.$ef4	LDA LOFBUF,Y
1061	.$ef7	STRLOOPRO JSR CHROUT
1062	.$efa	INY
1063	.$efb	LDA LOFBUF,Y
1064	.$efe	BNE STRLOOPRO
1065	.$f00	RTS
1066	.$f01	MANTMASK
1067	.$f01	.BYTE 127 255 63 255 31 255 15 255 7 255 3 255 1 255 0 255 0 127 0 63 0 31 0 15 0 7 0 3 0 1
1070	.$f1f	REALOUTBRK  LDA X_REG
1071	.$f21	BNE RNOTNULLBRK
1072	.$f23	JMP PRINTNULLBRK
1073	.$f26	RNOTNULLBRK JSR CHECKFORFASTOUT
1074	.$f29	LDA #$0D
1075	.$f2b	JSR CHROUT
1076	.$f2e	JMP RESETROUTE
1079	.$f31	PRINTNULLBRK
1080	.$f31	JSR REROUTE
1081	.$f34	LDA #$20
1082	.$f36	JSR CHROUT
1083	.$f39	LDA #$30
1084	.$f3b	JSR CHROUT
1085	.$f3e	LDA #$0D
1086	.$f40	JSR CHROUT
1087	.$f43	JMP RESETROUTE
1090	.$f46	STROUTBRKWL STA A_REG
1091	.$f49	STY A_REG+1
1092	.$f4c	STROUTBRK JSR REROUTE
1093	.$f4f	LDA A_REG
1094	.$f52	STA INDEX1
1095	.$f54	LDA A_REG+1
1096	.$f57	STA INDEX1+1
1097	.$f59	LDY #0
1098	.$f5b	LDA (INDEX1),Y
1099	.$f5d	TAX
1100	.$f5e	INC INDEX1
1101	.$f60	BNE PRINTSTR2
1102	.$f62	INC INDEX1+1
1103	.$f64	PRINTSTR2 JSR PRINTSTRS
1104	.$f67	LDA HIGHP   
1105	.$f6a	STA STRBUFP
1106	.$f6d	LDA HIGHP+1
1107	.$f70	STA STRBUFP+1
1108	.$f73	LDA #$0D
1109	.$f75	JSR CHROUT
1110	.$f78	JMP RESETROUTE  
1113	.$f7b	COPY2_XYA_XREG
1114	.$f7b	STA TMP3_ZP
1115	.$f7d	STY TMP3_ZP+1
1116	.$f7f	COPY2_XY_XREG
1117	.$f7f	LDX #<X_REG  
1118	.$f81	LDY #0
1119	.$f83	LDA (TMP3_ZP),Y
1120	.$f85	STA X_REG
1121	.$f87	INY
1122	.$f88	LDA (TMP3_ZP),Y
1123	.$f8a	STA X_REG+1
1124	.$f8c	INY
1125	.$f8d	LDA (TMP3_ZP),Y
1126	.$f8f	STA X_REG+2
1127	.$f91	INY
1128	.$f92	LDA (TMP3_ZP),Y
1129	.$f94	STA X_REG+3
1130	.$f96	INY
1131	.$f97	LDA (TMP3_ZP),Y
1132	.$f99	STA X_REG+4
1133	.$f9b	RTS
1136	.$f9c	COPY2_XYA_YREG
1137	.$f9c	STA TMP3_ZP
1138	.$f9e	STY TMP3_ZP+1
1139	.$fa0	COPY2_XY_YREG
1140	.$fa0	LDX #<Y_REG  
1141	.$fa2	LDY #0
1142	.$fa4	LDA (TMP3_ZP),Y
1143	.$fa6	STA Y_REG
1144	.$fa9	INY
1145	.$faa	LDA (TMP3_ZP),Y
1146	.$fac	STA Y_REG+1
1147	.$faf	INY
1148	.$fb0	LDA (TMP3_ZP),Y
1149	.$fb2	STA Y_REG+2
1150	.$fb5	INY
1151	.$fb6	LDA (TMP3_ZP),Y
1152	.$fb8	STA Y_REG+3
1153	.$fbb	INY
1154	.$fbc	LDA (TMP3_ZP),Y
1155	.$fbe	STA Y_REG+4
1156	.$fc1	RTS
1159	.$fc2	CLRCHNEW
1160	.$fc2	LDA CHLOCKFLAG
1161	.$fc5	BNE SKIPCLRCH
1162	.$fc7	JMP CLRCH
1163	.$fca	SKIPCLRCH
1164	.$fca	RTS
1167	.$fcb	OUTOFMEMORY
1171	.$fcb	LDX #$10
1172	.$fcd	JMP ERRALL
1175	.$fd0	XREGFAC  LDA X_REG+4
1176	.$fd2	STA FACLO
1177	.$fd4	LDA X_REG+3
1178	.$fd6	STA FACMO
1179	.$fd8	LDA X_REG+2
1180	.$fda	STA FACMOH
1181	.$fdc	LDA X_REG+1
1182	.$fde	STA FACSGN
1183	.$fe0	ORA #$80
1184	.$fe2	STA FACHO
1185	.$fe4	LDA X_REG
1186	.$fe6	STA FACEXP
1187	.$fe8	LDA #0
1188	.$fea	STA FACOV
1189	.$fec	RTS
1192	.$fed	YREGFAC  LDA Y_REG+4
1193	.$ff0	STA FACLO
1194	.$ff2	LDA Y_REG+3
1195	.$ff5	STA FACMO
1196	.$ff7	LDA Y_REG+2
1197	.$ffa	STA FACMOH
1198	.$ffc	LDA Y_REG+1
1199	.$fff	STA FACSGN
1200	.$1001	ORA #$80
1201	.$1003	STA FACHO
1202	.$1005	LDA Y_REG
1203	.$1008	STA FACEXP
1204	.$100a	LDA #0
1205	.$100c	STA FACOV
1206	.$100e	RTS
1320	.$100f	INITVARS
1321	.$100f	JSR INITSTRVARS
1322	.$1012	LDA #0
1323	.$1014	LDY #4
1324	.$1016	REALINITLOOP0:
1325	.$1016	STA VAR_C,Y
1326	.$1019	DEY
1327	.$101a	BMI REALLOOPEXIT0
1328	.$101c	JMP REALINITLOOP0
1329	.$101f	REALLOOPEXIT0:
1330	.$101f	RTS
1334	.$1020	CONSTANTS
1337	.$1020	CONST_0 .REAL 0.20292921
1339	.$1025	CONST_1 .BYTE 10
1340	.$1026	.STRG "0.20292921"
1343	.$1030	DATAS
1344	.$1030	.BYTE $FF
1346	.$1031	CONSTANTS_END
1349	.$1031	VARIABLES
1351	.$1031	VAR_C .REAL 0.0
1352	.$1036	STRINGVARS_START
1354	.$1036	VAR_TI$ .WORD EMPTYSTR
1355	.$1038	STRINGVARS_END
1356	.$1038	STRINGARRAYS_START
1357	.$1038	STRINGARRAYS_END
1358	.$1038	VARIABLES_END
1360	.$1038	Y_REG .REAL 0.0
1361	.$103d	C_REG .REAL 0.0
1362	.$1042	D_REG .REAL 0.0
1363	.$1047	E_REG .REAL 0.0
1364	.$104c	F_REG .REAL 0.0
1365	.$1051	A_REG .WORD 0
1366	.$1053	B_REG .WORD 0
1367	.$1055	CMD_NUM .BYTE 0
1368	.$1056	CHANNEL .BYTE 0
1369	.$1057	SP_SAVE .BYTE 0
1370	.$1058	TMP2_REG .WORD 0
1371	.$105a	TMP3_REG .WORD 0
1372	.$105c	TMP4_REG .WORD 0
1373	.$105e	AS_TMP .WORD 0
1374	.$1060	BPOINTER_TMP .WORD 0
1375	.$1062	BASICTEXTP .BYTE 0
1376	.$1063	STORE1 .WORD 0
1377	.$1065	STORE2 .WORD 0
1378	.$1067	STORE3 .WORD 0
1379	.$1069	STORE4 .WORD 0
1380	.$106b	GCSTART .WORD 0
1381	.$106d	GCLEN .WORD 0
1382	.$106f	GCWORK .WORD 0
1383	.$1071	INPUTLENGTH .BYTE 0
1384	.$1072	TMP_FREG .REAL 0
1385	.$1077	TMP2_FREG .REAL 0
1386	.$107c	TMP_FLAG .BYTE 0
1387	.$107d	INT_FLAG .BYTE 0
1388	.$107e	REAL_CONST_ONE .REAL 1.0
1389	.$1083	REAL_CONST_ZERO .REAL 0.0
1390	.$1088	REAL_CONST_MINUS_ONE .REAL -1.0
1391	.$108d	CHLOCKFLAG .BYTE 0
1392	.$108e	EMPTYSTR .BYTE 0
1393	.$108f	FPSTACKP .WORD FPSTACK
1394	.$1091	FORSTACKP .WORD FORSTACK
1395	.$1093	DATASP .WORD DATAS
1396	.$1095	LASTVAR .WORD 0
1397	.$1097	LASTVARP .WORD 0
1398	.$1099	HIGHP .WORD STRBUF
1399	.$109b	STRBUFP .WORD STRBUF
1400	.$109d	ENDSTRBUF .WORD 0
1401	.$109f	INPUTQUEUEP .BYTE 0
1402	.$10a0	PROGRAMEND
1403	.$10a0	INPUTQUEUE .ARRAY $0F
1404	.$10af	FPSTACK .ARRAY 100
1405	.$1113	FORSTACK .ARRAY 340
1406	.$1267	STRBUF .BYTE 0
