117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_10:
128	.$81f	LDA #<CONST_0
129	.$821	LDY #>CONST_0
130	.$823	STA TMP_ZP
131	.$825	STY TMP_ZP+1
132	.$827	LDA #<VAR_A$
133	.$829	LDY #>VAR_A$
134	.$82b	JSR COPYSTRING
136	.$82e	LDA #<CONST_1
137	.$830	LDY #>CONST_1
138	.$832	STA TMP_ZP
139	.$834	STY TMP_ZP+1
140	.$836	LDA #<VAR_B$
141	.$838	LDY #>VAR_B$
142	.$83a	JSR COPYSTRING
144	.$83d	LDA #<CONST_1
145	.$83f	LDY #>CONST_1
146	.$841	STA TMP_ZP
147	.$843	STY TMP_ZP+1
148	.$845	LDA #<VAR_C$
149	.$847	LDY #>VAR_C$
150	.$849	JSR COPYSTRING
152	.$84c	LDA #<CONST_2
153	.$84e	LDY #>CONST_2
154	.$850	STA TMP_ZP
155	.$852	STY TMP_ZP+1
157	.$854	JSR WRITETID
159	.$857	LINE_15:
161	.$857	LDA #0
162	.$859	STA VAR_I
163	.$85c	STA VAR_I+1
164	.$85f	STA VAR_I+2
165	.$862	STA VAR_I+3
166	.$865	STA VAR_I+4
168	.$868	LDA #<CONST_4R
169	.$86a	LDY #>CONST_4R
170	.$86c	JSR REALFACPUSH
172	.$86f	LDA #<CONST_5R
173	.$871	LDY #>CONST_5R
174	.$873	JSR REALFACPUSH
176	.$876	LDA #<VAR_I
177	.$878	LDY #>VAR_I
178	.$87a	STA A_REG
179	.$87d	STY A_REG+1
180	.$880	LDA #<FORLOOP0
181	.$882	STA JUMP_TARGET
182	.$884	LDA #>FORLOOP0
183	.$886	STA JUMP_TARGET+1
184	.$888	JSR INITFOR
185	.$88b	FORLOOP0:
187	.$88b	LINE_20:
189	.$88b	LDA #<CONST_1
190	.$88d	LDY #>CONST_1
191	.$88f	STA B_REG
192	.$892	STY B_REG+1
193	.$895	LDA #<CONST_0
194	.$897	LDY #>CONST_0
195	.$899	STA A_REG
196	.$89c	STY A_REG+1
198	.$89f	JSR SNEQ
199	.$8a2	JSR INTOUTBRK
202	.$8a5	LINE_40:
204	.$8a5	LDA #<CONST_1
205	.$8a7	LDY #>CONST_1
206	.$8a9	STA B_REG
207	.$8ac	STY B_REG+1
208	.$8af	LDA #<CONST_1
209	.$8b1	LDY #>CONST_1
210	.$8b3	STA A_REG
211	.$8b6	STY A_REG+1
213	.$8b9	JSR SEQ
214	.$8bc	JSR INTOUTBRK
216	.$8bf	LDA #<CONST_1
217	.$8c1	LDY #>CONST_1
218	.$8c3	STA B_REG
219	.$8c6	STY B_REG+1
220	.$8c9	LDA #<CONST_1
221	.$8cb	LDY #>CONST_1
222	.$8cd	STA A_REG
223	.$8d0	STY A_REG+1
225	.$8d3	JSR SEQ
226	.$8d6	JSR INTOUTBRK
228	.$8d9	LDA #147
229	.$8db	JSR SINGLECHROUTBRKMAX
234	.$8de	LINE_96:
236	.$8de	LDA #0
237	.$8e0	STA A_REG
238	.$8e3	STA A_REG+1
239	.$8e6	JSR NEXT
241	.$8e9	LDA A_REG
242	.$8ec	BNE RBEQ_0
243	.$8ee	JMP (JUMP_TARGET)
245	.$8f1	RBEQ_0:
247	.$8f1	LINE_120:
250	.$8f1	SEI
251	.$8f2	LDY TIMEADDR
252	.$8f4	LDX TIMEADDR+1
253	.$8f6	LDA TIMEADDR+2
254	.$8f8	CLI
256	.$8f9	SEC
257	.$8fa	JSR COPYTIME
258	.$8fd	JSR GETTIME
259	.$900	LDX #<VAR_TI
260	.$902	LDY #>VAR_TI
261	.$904	JSR FACMEM
262	.$907	LDA #<VAR_TI
263	.$909	LDY #>VAR_TI
264	.$90b	JSR COPY2_XYA_XREG
268	.$90e	JSR REALOUTBRK
270	.$911	JSR END
271	.$914	RTS
274	.$915	END   LDX SP_SAVE
275	.$918	TXS
282	.$919	RTS
285	.$91a	START  LDA ENDSTRBUF+1
286	.$91d	BNE ENDGIVEN
287	.$91f	LDA BASICEND
288	.$921	STA ENDSTRBUF
289	.$924	LDA BASICEND+1
290	.$926	STA ENDSTRBUF+1
291	.$929	ENDGIVEN LDA #<FPSTACK
292	.$92b	LDY #>FPSTACK
293	.$92d	STA FPSTACKP
294	.$930	STY FPSTACKP+1
295	.$933	LDA #<FORSTACK
296	.$935	LDY #>FORSTACK
297	.$937	STA FORSTACKP
298	.$93a	STY FORSTACKP+1
299	.$93d	LDA #<STRBUF
300	.$93f	LDY #>STRBUF
301	.$941	STA STRBUFP
302	.$944	STY STRBUFP+1
303	.$947	STA HIGHP
304	.$94a	STY HIGHP+1
305	.$94d	LDA #0
306	.$94f	STA CHLOCKFLAG
307	.$952	STA LASTVAR
308	.$955	STA LASTVAR+1
309	.$958	JSR INITVARS
310	.$95b	LDA #0
311	.$95d	STA CMD_NUM
312	.$960	STA CHANNEL
313	.$963	TAY
314	.$964	TAX
318	.$965	STA KEYNDX
324	.$967	JSR RESTORE
325	.$96a	CLC
329	.$96b	RTS
332	.$96c	INITNARRAY
333	.$96c	STA TMP_ZP
334	.$96e	STY TMP_ZP+1
335	.$970	LDY #0
336	.$972	TYA
337	.$973	NINITLOOP STA (TMP_ZP),Y
338	.$975	INC TMP_ZP
339	.$977	BNE NLOOPNOV
340	.$979	INC TMP_ZP+1
341	.$97b	NLOOPNOV LDX TMP2_ZP
342	.$97d	BNE NLOOPNOV2
343	.$97f	DEC TMP2_ZP+1
344	.$981	NLOOPNOV2 DEC TMP2_ZP
345	.$983	BNE NINITLOOP
346	.$985	LDX TMP2_ZP+1
347	.$987	BNE NINITLOOP
348	.$989	RTS
351	.$98a	INITSTRARRAY
352	.$98a	STA TMP_ZP
353	.$98c	STY TMP_ZP+1
354	.$98e	SINITLOOP LDY #0
355	.$990	LDA #<EMPTYSTR
356	.$992	STA (TMP_ZP),Y
357	.$994	LDA #>EMPTYSTR
358	.$996	INY
359	.$997	STA (TMP_ZP),Y
360	.$999	CLC
361	.$99a	LDA TMP_ZP
362	.$99c	ADC #2
363	.$99e	STA TMP_ZP
364	.$9a0	BCC SLOOPNOV1
365	.$9a2	INC TMP_ZP+1
366	.$9a4	SLOOPNOV1 SEC
367	.$9a5	LDA TMP2_ZP
368	.$9a7	SBC #2
369	.$9a9	STA TMP2_ZP
370	.$9ab	BCS SLOOPNOV2
371	.$9ad	DEC TMP2_ZP+1
372	.$9af	SLOOPNOV2 LDA TMP2_ZP
373	.$9b1	BNE SINITLOOP
374	.$9b3	LDA TMP2_ZP+1
375	.$9b5	BNE SINITLOOP
376	.$9b7	RTS
379	.$9b8	INITSPARAMS STA TMP3_ZP
380	.$9ba	STY TMP3_ZP+1
381	.$9bc	SEC
382	.$9bd	SBC #2
383	.$9bf	STA TMP_ZP
384	.$9c1	TYA
385	.$9c2	SBC #0
386	.$9c4	STA TMP_ZP+1
387	.$9c6	LDY #0
388	.$9c8	LDA (TMP_ZP),Y
389	.$9ca	STA TMP2_ZP
390	.$9cc	INY
391	.$9cd	LDA (TMP_ZP),Y
392	.$9cf	STA TMP2_ZP+1
393	.$9d1	LDA TMP3_ZP
394	.$9d3	LDY TMP3_ZP+1
395	.$9d5	RTS
398	.$9d6	INITSTRVARS LDA #<STRINGVARS_START  
399	.$9d8	LDY #>STRINGVARS_START
400	.$9da	CMP #<STRINGVARS_END
401	.$9dc	BNE INITIT1
402	.$9de	CPY #>STRINGVARS_END
403	.$9e0	BNE INITIT1
404	.$9e2	JMP INITSA2     
405	.$9e5	INITIT1  STA TMP_ZP
406	.$9e7	STY TMP_ZP+1
407	.$9e9	LDY #0
408	.$9eb	INITSTRLOOP LDA #<EMPTYSTR
409	.$9ed	STA (TMP_ZP),Y
410	.$9ef	INY
411	.$9f0	LDA #>EMPTYSTR
412	.$9f2	STA (TMP_ZP),Y
413	.$9f4	DEY
414	.$9f5	LDA TMP_ZP
415	.$9f7	CLC
416	.$9f8	ADC #2
417	.$9fa	STA TMP_ZP
418	.$9fc	LDA TMP_ZP+1
419	.$9fe	ADC #0
420	.$a00	STA TMP_ZP+1
421	.$a02	CMP #>STRINGVARS_END
422	.$a04	BNE INITSTRLOOP
423	.$a06	LDA TMP_ZP
424	.$a08	CMP #<STRINGVARS_END
425	.$a0a	BNE INITSTRLOOP
426	.$a0c	INITSA2  LDA #<STRINGARRAYS_START 
427	.$a0e	LDY #>STRINGARRAYS_START
428	.$a10	CMP #<STRINGARRAYS_END
429	.$a12	BNE ARRAYLOOP
430	.$a14	CPY #>STRINGARRAYS_END
431	.$a16	BNE ARRAYLOOP
432	.$a18	RTS       
433	.$a19	ARRAYLOOP CLC
434	.$a1a	ADC #3
435	.$a1c	BCC ARRAYSKIP1
436	.$a1e	INY
437	.$a1f	ARRAYSKIP1 CPY #>STRINGARRAYS_END
438	.$a21	BEQ ARRAYSC
439	.$a23	BCC ARRAYSKIP2
440	.$a25	JMP ARRAYQUIT
441	.$a28	ARRAYSC  CMP #<STRINGARRAYS_END
442	.$a2a	BCS ARRAYQUIT
443	.$a2c	ARRAYSKIP2 STA TMP_REG
444	.$a2e	STY TMP_REG+1
445	.$a30	JSR INITSPARAMS
446	.$a33	LDA TMP_REG
447	.$a35	LDY TMP_REG+1
448	.$a37	JSR INITSTRARRAY
449	.$a3a	LDA TMP_ZP
450	.$a3c	LDY TMP_ZP+1
451	.$a3e	JMP ARRAYLOOP
452	.$a41	ARRAYQUIT RTS
455	.$a42	RESTORE  LDA #<DATAS
456	.$a44	LDY #>DATAS
457	.$a46	STA DATASP
458	.$a49	STY DATASP+1
459	.$a4c	RTS
462	.$a4d	WRITETID LDY #0
463	.$a4f	LDA (TMP_ZP),Y
464	.$a51	CMP #$6
465	.$a53	BEQ FORMATOK
466	.$a55	JMP ILLEGALQUANTITY
467	.$a58	FORMATOK INC TMP_ZP
468	.$a5a	BNE WRITE2
469	.$a5c	INC TMP_ZP+1
470	.$a5e	WRITE2  LDA TMP_ZP
471	.$a60	STA INDEX1
472	.$a62	LDA TMP_ZP+1
473	.$a64	STA INDEX1+1
475	.$a66	JMP WRITETIS
482	.$a69	SAVEPOINTERS
483	.$a69	LDA TMP_ZP   
484	.$a6b	STA STORE1
485	.$a6e	LDA TMP_ZP+1
486	.$a70	STA STORE1+1
487	.$a73	LDA TMP2_ZP
488	.$a75	STA STORE2
489	.$a78	LDA TMP2_ZP+1
490	.$a7a	STA STORE2+1
491	.$a7d	LDA TMP3_ZP
492	.$a7f	STA STORE3
493	.$a82	LDA TMP3_ZP+1
494	.$a84	STA STORE3+1
495	.$a87	RTS
498	.$a88	RESTOREPOINTERS
499	.$a88	LDA STORE3+1  
500	.$a8b	STA TMP3_ZP+1
501	.$a8d	LDA STORE3
502	.$a90	STA TMP3_ZP
503	.$a92	LDA STORE2+1
504	.$a95	STA TMP2_ZP+1
505	.$a97	LDA STORE2
506	.$a9a	STA TMP2_ZP
507	.$a9c	LDA STORE1+1
508	.$a9f	STA TMP_ZP+1
509	.$aa1	LDA STORE1
510	.$aa4	STA TMP_ZP
511	.$aa6	RTS
518	.$aa7	COMPACTMAX
519	.$aa7	LDA #$FF
520	.$aa9	LDY #$0
521	.$aab	JMP COMPACTF
524	.$aae	COMPACT
525	.$aae	LDY #0
526	.$ab0	GCBUFNE  LDA (TMP_ZP),Y  
527	.$ab2	COMPACTF STA TMP4_REG  
528	.$ab5	LDY STRBUFP+1  
529	.$ab8	STY TMP4_REG+1  
530	.$abb	INY     
531	.$abc	BEQ ENDMEM   
532	.$abe	CPY ENDSTRBUF+1  
533	.$ac1	BCC RGCEXIT   
534	.$ac3	ENDMEM  LDA STRBUFP
535	.$ac6	CLC
536	.$ac7	ADC TMP4_REG
537	.$aca	STA TMP4_REG
538	.$acd	BCC RGCNOOV1
539	.$acf	INC TMP4_REG+1
540	.$ad2	RGCNOOV1 CLC
541	.$ad3	LDA TMP4_REG
542	.$ad6	ADC #3
543	.$ad8	STA TMP4_REG
544	.$adb	BCC RGCNOOV2
545	.$add	INC TMP4_REG+1
546	.$ae0	RGCNOOV2 LDA TMP4_REG+1  
547	.$ae3	CMP ENDSTRBUF+1
548	.$ae6	BEQ RGCLOW1
549	.$ae8	BCS GCEXECOMP  
550	.$aea	JMP RGCEXIT
551	.$aed	RGCLOW1  LDA TMP4_REG
552	.$af0	CMP ENDSTRBUF
553	.$af3	BCS GCEXECOMP  
554	.$af5	RGCEXIT  RTS     
555	.$af6	GCEXECOMP LDA STRBUFP
556	.$af9	STA STORE4
557	.$afc	LDA STRBUFP+1
558	.$aff	STA STORE4+1
559	.$b02	JSR GCEXE
560	.$b05	JMP CHECKMEMORY
563	.$b08	GCEXE  JSR SAVEPOINTERS
564	.$b0b	LDA #0
565	.$b0d	STA LASTVAR
566	.$b10	STA LASTVAR+1  
567	.$b13	LDA #<STRBUF
568	.$b15	STA TMP_ZP
569	.$b17	STA GCSTART
570	.$b1a	LDA #>STRBUF
571	.$b1c	STA TMP_ZP+1  
572	.$b1e	STA GCSTART+1
573	.$b21	GCLOOP  LDY #0
574	.$b23	LDA TMP_ZP
575	.$b25	STA GCWORK
576	.$b28	LDA TMP_ZP+1
577	.$b2a	STA GCWORK+1  
578	.$b2d	LDA (TMP_ZP),Y
579	.$b2f	STA GCLEN   
580	.$b32	INC TMP_ZP
581	.$b34	BNE GCLOOPNOOV
582	.$b36	INC TMP_ZP+1
583	.$b38	GCLOOPNOOV LDA TMP_ZP
584	.$b3a	CLC
585	.$b3b	ADC GCLEN
586	.$b3e	STA TMP_ZP
587	.$b40	BCC GCLOOPNOOV2
588	.$b42	INC TMP_ZP+1  
589	.$b44	GCLOOPNOOV2 LDY #0
590	.$b46	LDA (TMP_ZP),Y
591	.$b48	STA TMP2_ZP
592	.$b4a	INY
593	.$b4b	LDA (TMP_ZP),Y
594	.$b4d	STA TMP2_ZP+1  
595	.$b4f	LDA TMP_ZP
596	.$b51	CLC
597	.$b52	ADC #2
598	.$b54	STA TMP_ZP
599	.$b56	BCC GCLOOPNOOV3
600	.$b58	INC TMP_ZP+1  
601	.$b5a	GCLOOPNOOV3 LDY #0
602	.$b5c	LDA (TMP2_ZP),Y
603	.$b5e	CMP GCWORK
604	.$b61	BNE GCKLOOP
605	.$b63	INY
606	.$b64	LDA (TMP2_ZP),Y
607	.$b66	CMP GCWORK+1
608	.$b69	BEQ MEMFREE
609	.$b6b	GCKLOOP  LDA TMP_ZP+1  
610	.$b6d	CMP HIGHP+1
611	.$b70	BEQ GCHECKLOW
612	.$b72	BCC GCLOOP
613	.$b74	JMP GCDONE
614	.$b77	GCHECKLOW LDA TMP_ZP
615	.$b79	CMP HIGHP
616	.$b7c	BCS GCDONE
617	.$b7e	JMP GCLOOP
618	.$b81	MEMFREE  LDA GCSTART   
619	.$b84	CMP GCWORK   
620	.$b87	BNE COPYDOWN
621	.$b89	LDA GCSTART+1
622	.$b8c	CMP GCWORK+1
623	.$b8f	BNE COPYDOWN
624	.$b91	LDA TMP_ZP   
625	.$b93	STA GCSTART
626	.$b96	LDA TMP_ZP+1
627	.$b98	STA GCSTART+1
628	.$b9b	JMP GCKLOOP   
629	.$b9e	COPYDOWN LDA GCSTART   
630	.$ba1	STA TMP_REG
631	.$ba3	LDA GCSTART+1
632	.$ba6	STA TMP_REG+1  
633	.$ba8	LDA GCWORK
634	.$bab	STA TMP2_REG
635	.$bae	LDA GCWORK+1
636	.$bb1	STA TMP2_REG+1  
637	.$bb4	LDA TMP_ZP
638	.$bb6	SEC
639	.$bb7	SBC GCWORK
640	.$bba	STA TMP3_REG
641	.$bbd	LDA TMP_ZP+1
642	.$bbf	SBC GCWORK+1
643	.$bc2	STA TMP3_REG+1  
644	.$bc5	LDA GCSTART
645	.$bc8	CLC
646	.$bc9	ADC TMP3_REG
647	.$bcc	STA GCSTART
648	.$bcf	LDA GCSTART+1
649	.$bd2	ADC TMP3_REG+1
650	.$bd5	STA GCSTART+1  
651	.$bd8	JSR QUICKCOPY  
652	.$bdb	LDY #0
653	.$bdd	LDA TMP_REG
654	.$bdf	STA (TMP2_ZP),Y
655	.$be1	INY
656	.$be2	LDA TMP_REG+1
657	.$be4	STA (TMP2_ZP),Y  
658	.$be6	JMP GCKLOOP
659	.$be9	GCDONE  LDA GCSTART
660	.$bec	STA HIGHP
661	.$bef	STA STRBUFP
662	.$bf2	LDA GCSTART+1
663	.$bf5	STA HIGHP+1
664	.$bf8	STA STRBUFP+1  
665	.$bfb	GCSKIP  JSR RESTOREPOINTERS
666	.$bfe	RTS     
669	.$bff	CHECKMEMORY
670	.$bff	LDA STRBUFP+1  
671	.$c02	CMP STORE4+1  
672	.$c05	BCC STILLFITSCM  
676	.$c07	BEQ CHECKMEMLOWCM
677	.$c09	JMP OUTOFMEMORY  
678	.$c0c	CHECKMEMLOWCM
679	.$c0c	LDA STRBUFP   
680	.$c0f	CMP STORE4
681	.$c12	BCC STILLFITSCM
682	.$c14	JMP OUTOFMEMORY  
683	.$c17	STILLFITSCM RTS
686	.$c18	QUICKCOPY LDA TMP_REG  
687	.$c1a	STA TMEM+1
688	.$c1d	LDA TMP_REG+1
689	.$c1f	STA TMEM+2
690	.$c22	LDA TMP2_REG
691	.$c25	STA SMEM+1
692	.$c28	LDA TMP2_REG+1
693	.$c2b	STA SMEM+2
694	.$c2e	LDY #$0
695	.$c30	LDX TMP3_REG
696	.$c33	BNE QCLOOP
697	.$c35	LDA TMP3_REG+1
698	.$c38	BEQ QCEXIT  
699	.$c3a	QCLOOP
700	.$c3a	SMEM  LDA $0000,Y
701	.$c3d	TMEM  STA $0000,Y
702	.$c40	INY
703	.$c41	BNE YNOOV
704	.$c43	INC TMEM+2
705	.$c46	INC SMEM+2
706	.$c49	YNOOV  DEX
707	.$c4a	BNE QCLOOP
708	.$c4c	LDA TMP3_REG+1
709	.$c4f	BEQ QCEXIT
710	.$c51	DEC TMP3_REG+1
711	.$c54	JMP QCLOOP
712	.$c57	QCEXIT  RTS
715	.$c58	COPYSTRING STA TMP2_ZP
716	.$c5a	STY TMP2_ZP+1
717	.$c5c	CPY TMP_ZP+1
718	.$c5e	BNE CONTCOPY
719	.$c60	LDA TMP2_ZP
720	.$c62	CMP TMP_ZP
721	.$c64	BNE CONTCOPY
722	.$c66	RTS     
723	.$c67	CONTCOPY JSR COMPACT   
724	.$c6a	LDY #0
725	.$c6c	STY TMP_FLAG
726	.$c6f	LDA (TMP_ZP),Y
727	.$c71	BNE NOTEMPTYSTR
728	.$c73	LDA #<EMPTYSTR  
729	.$c75	STA TMP_ZP
730	.$c77	LDA #>EMPTYSTR
731	.$c79	STA TMP_ZP+1
732	.$c7b	JMP ISCONST
733	.$c7e	NOTEMPTYSTR TAX     
734	.$c7f	LDA (TMP2_ZP),Y
735	.$c81	STA TMP3_ZP
736	.$c83	INY
737	.$c84	LDA (TMP2_ZP),Y
738	.$c86	STA TMP3_ZP+1
739	.$c88	DEY
740	.$c89	LDA TMP_ZP+1  
741	.$c8b	CMP #>CONSTANTS_END
742	.$c8d	BEQ CHECKLOW1
743	.$c8f	BCS INVAR
744	.$c91	JMP CHECKNEXT
745	.$c94	CHECKLOW1 LDA TMP_ZP
746	.$c96	CMP #<CONSTANTS_END
747	.$c98	BCS INVAR
748	.$c9a	CHECKNEXT LDA TMP_ZP+1  
749	.$c9c	CMP #>CONSTANTS
750	.$c9e	BEQ CHECKLOW3
751	.$ca0	BCC INVAR
752	.$ca2	JMP ISCONST
753	.$ca5	CHECKLOW3 LDA TMP_ZP
754	.$ca7	CMP #<CONSTANTS
755	.$ca9	BCC INVAR   
756	.$cab	ISCONST  JSR CHECKLASTVAR 
757	.$cae	LDA TMP_ZP
758	.$cb0	STA (TMP2_ZP),Y  
759	.$cb2	INY
760	.$cb3	LDA TMP_ZP+1
761	.$cb5	STA (TMP2_ZP),Y
762	.$cb7	LDA HIGHP   
763	.$cba	STA STRBUFP
764	.$cbd	LDA HIGHP+1
765	.$cc0	STA STRBUFP+1
766	.$cc3	RTS
767	.$cc4	INVAR  INY
768	.$cc5	LDA (TMP2_ZP),Y  
769	.$cc7	CMP #>CONSTANTS_END
770	.$cc9	BEQ CHECKLOW2
771	.$ccb	BCS INVAR2
772	.$ccd	JMP PUPDATEPTR
773	.$cd0	CHECKLOW2 DEY
774	.$cd1	LDA (TMP2_ZP),Y
775	.$cd3	CMP #<CONSTANTS_END
776	.$cd5	BCS INVAR2
777	.$cd7	JMP PUPDATEPTR
778	.$cda	INVAR2  LDY #0   
779	.$cdc	LDA (TMP3_ZP),Y
780	.$cde	STA TMP_REG
781	.$ce0	TXA
782	.$ce1	CMP TMP_REG  
783	.$ce3	BEQ UPDATEHP2 
786	.$ce5	PUPDATEPTR JSR CHECKLASTVAR
787	.$ce8	LDY #1   
788	.$cea	STY TMP_FLAG 
789	.$ced	JMP UPDATEPTR 
790	.$cf0	UPDATEHP2 LDA HIGHP  
791	.$cf3	STA STRBUFP
792	.$cf6	LDA HIGHP+1
793	.$cf9	STA STRBUFP+1
794	.$cfc	JMP STRFITS
795	.$cff	COPYONLY LDY #0
796	.$d01	STY TMP_FLAG
797	.$d04	JMP CHECKMEM
798	.$d07	ALTCOPY  JMP COPYSTRING2
799	.$d0a	UPDATEPTR LDA TMP_ZP+1 
800	.$d0c	CMP HIGHP+1  
801	.$d0f	BEQ CHECKXT1
802	.$d11	BCS ALTCOPY
803	.$d13	JMP CHECKMEM
804	.$d16	CHECKXT1 LDA TMP_ZP
805	.$d18	CMP HIGHP
806	.$d1b	BCS ALTCOPY
807	.$d1d	CHECKMEM
808	.$d1d	MEMOK  LDY #0
809	.$d1f	LDA STRBUFP  
810	.$d22	STA (TMP2_ZP),Y 
811	.$d24	STA TMP3_ZP
812	.$d26	LDA STRBUFP+1
813	.$d29	INY
814	.$d2a	STA (TMP2_ZP),Y
815	.$d2c	STA TMP3_ZP+1
816	.$d2e	TXA
817	.$d2f	CLC
818	.$d30	ADC STRBUFP
819	.$d33	PHP
820	.$d34	CLC
821	.$d35	ADC #3
822	.$d37	STA STRBUFP
823	.$d3a	BCC NOCS1
824	.$d3c	INC STRBUFP+1
825	.$d3f	NOCS1  PLP
826	.$d40	BCC STRFITS
827	.$d42	INC STRBUFP+1
828	.$d45	STRFITS  LDY TMP_FLAG 
829	.$d48	BEQ NOHPUPDATE 
830	.$d4a	LDA HIGHP+1
831	.$d4d	CMP STRBUFP+1
832	.$d50	BCC UPDATEHIGHP
833	.$d52	BEQ CHECKNEXTHP
834	.$d54	JMP NOHPUPDATE
835	.$d57	CHECKNEXTHP LDA HIGHP
836	.$d5a	CMP STRBUFP
837	.$d5d	BCC UPDATEHIGHP
838	.$d5f	JMP NOHPUPDATE
839	.$d62	UPDATEHIGHP LDA STRBUFP
840	.$d65	STA HIGHP
841	.$d68	LDA STRBUFP+1
842	.$d6b	STA HIGHP+1  
843	.$d6e	JSR REMEMBERLASTVAR
844	.$d71	JSR STOREVARREF
845	.$d74	NOHPUPDATE LDY #0
846	.$d76	LDA (TMP_ZP),Y 
847	.$d78	STA (TMP3_ZP),Y
848	.$d7a	TAY    
849	.$d7b	BEQ EXITCOPY 
850	.$d7d	LOOP  LDA (TMP_ZP),Y 
851	.$d7f	STA (TMP3_ZP),Y
852	.$d81	DEY
853	.$d82	BNE LOOP
854	.$d84	EXITCOPY RTS
859	.$d85	COPYSTRING2 LDY #0
860	.$d87	LDA (TMP_ZP),Y
861	.$d89	STA TMP_REG
862	.$d8b	TAX
863	.$d8c	LDA HIGHP
864	.$d8f	STA TMP3_ZP
865	.$d91	STA (TMP2_ZP),Y
866	.$d93	LDA HIGHP+1
867	.$d96	STA TMP3_ZP+1
868	.$d98	INY
869	.$d99	STA (TMP2_ZP),Y
870	.$d9b	JSR REMEMBERLASTVAR
873	.$d9e	LDA TMP_ZP
874	.$da0	CMP TMP3_ZP
875	.$da2	BNE DOLOOP
876	.$da4	LDA TMP_ZP+1
877	.$da6	CMP TMP3_ZP+1
878	.$da8	BEQ SKIPCP2
879	.$daa	DOLOOP  DEY
880	.$dab	TXA
881	.$dac	STA (TMP3_ZP),Y
882	.$dae	INY
883	.$daf	ASLOOP  LDA (TMP_ZP),Y
884	.$db1	STA (TMP3_ZP),Y
885	.$db3	INY
886	.$db4	DEX
887	.$db5	BNE ASLOOP
888	.$db7	SKIPCP2  LDA HIGHP
889	.$dba	CLC
890	.$dbb	ADC TMP_REG
891	.$dbd	PHP
892	.$dbe	CLC
893	.$dbf	ADC #3
894	.$dc1	STA HIGHP
895	.$dc4	STA STRBUFP
896	.$dc7	BCC SKIPLOWAS1
897	.$dc9	INC HIGHP+1
898	.$dcc	SKIPLOWAS1 PLP
899	.$dcd	BCC SKIPLOWAS2
900	.$dcf	INC HIGHP+1
901	.$dd2	SKIPLOWAS2 LDA HIGHP+1
902	.$dd5	STA STRBUFP+1
903	.$dd8	JSR STOREVARREF
904	.$ddb	RTS
908	.$ddc	CHECKLASTVAR
909	.$ddc	LDA TMP2_ZP
910	.$dde	CMP LASTVAR
911	.$de1	BNE NOTSAMEVAR
912	.$de3	LDA TMP2_ZP+1
913	.$de5	CMP LASTVAR+1
914	.$de8	BNE NOTSAMEVAR
915	.$dea	LDA LASTVARP   
916	.$ded	STA HIGHP
917	.$df0	STA STRBUFP
918	.$df3	LDA LASTVARP+1
919	.$df6	STA HIGHP+1
920	.$df9	STA STRBUFP+1
921	.$dfc	NOTSAMEVAR RTS
925	.$dfd	REMEMBERLASTVAR
926	.$dfd	LDA TMP2_ZP
927	.$dff	STA LASTVAR
928	.$e02	LDA TMP2_ZP+1
929	.$e04	STA LASTVAR+1
930	.$e07	LDA TMP3_ZP
931	.$e09	STA LASTVARP
932	.$e0c	LDA TMP3_ZP+1
933	.$e0e	STA LASTVARP+1 
934	.$e11	RTS
939	.$e12	STOREVARREF
940	.$e12	TYA
941	.$e13	PHA    
942	.$e14	LDA TMP_ZP
943	.$e16	PHA
944	.$e17	LDA TMP_ZP+1
945	.$e19	PHA
946	.$e1a	LDA HIGHP+1
947	.$e1d	STA TMP_ZP+1
948	.$e1f	LDA HIGHP
949	.$e22	SEC
950	.$e23	SBC #2
951	.$e25	STA TMP_ZP
952	.$e27	BCS RLVNOOV
953	.$e29	DEC TMP_ZP+1
954	.$e2b	RLVNOOV  LDA TMP2_ZP
955	.$e2d	LDY #0
956	.$e2f	STA (TMP_ZP),Y
957	.$e31	LDA TMP2_ZP+1
958	.$e33	INY
959	.$e34	STA (TMP_ZP),Y 
960	.$e36	PLA
961	.$e37	STA TMP_ZP+1
962	.$e39	PLA
963	.$e3a	STA TMP_ZP  
964	.$e3c	PLA
965	.$e3d	TAY    
966	.$e3e	RTS
969	.$e3f	REROUTE  LDA CMD_NUM  
970	.$e42	BEQ REROUTECMD
971	.$e44	TAX
972	.$e45	STA CHANNEL
973	.$e48	JMP CHKOUT
974	.$e4b	REROUTECMD RTS
977	.$e4c	RESETROUTE LDA CMD_NUM  
978	.$e4f	BEQ RESETROUTECMD
979	.$e51	JMP CLRCHNEW
980	.$e54	RESETROUTECMD
981	.$e54	RTS
984	.$e55	INTOUTBRK   JMP REALOUTBRK
987	.$e58	INTOUTFASTZ LDX #32    
988	.$e5a	LDA TMP_ZP+1
989	.$e5c	BPL INTISPOS
990	.$e5e	CLC
991	.$e5f	LDA TMP_ZP
992	.$e61	EOR #$FF
993	.$e63	ADC #1
994	.$e65	STA TMP_ZP
995	.$e67	LDA TMP_ZP+1
996	.$e69	EOR #$FF
997	.$e6b	ADC #0
998	.$e6d	STA TMP_ZP+1
999	.$e6f	LDX #45    
1000	.$e71	INTISPOS
1001	.$e71	TXA
1002	.$e72	JSR CHROUT
1003	.$e75	JSR CONVPOSINT
1004	.$e78	LDA NUMFLAG
1005	.$e7b	BNE ALLINTOUTDONE
1006	.$e7d	LDA #48
1007	.$e7f	JSR CHROUT
1008	.$e82	ALLINTOUTDONE
1009	.$e82	RTS
1012	.$e83	NUMBEROUT
1013	.$e83	BEQ NUMZERO
1014	.$e85	ORA #$30
1015	.$e87	STA NUMFLAG
1016	.$e8a	JMP CHROUT
1017	.$e8d	NUMZERO
1018	.$e8d	LDX NUMFLAG
1019	.$e90	BEQ STILLZERO
1020	.$e92	ORA #$30
1021	.$e94	JMP CHROUT
1022	.$e97	STILLZERO
1023	.$e97	RTS
1026	.$e98	CONVPOSINT
1027	.$e98	JSR INT2BCD
1028	.$e9b	LDX #0
1029	.$e9d	STX NUMFLAG
1030	.$ea0	AND #$0F
1031	.$ea2	JSR NUMBEROUT
1032	.$ea5	LDA BCD+1
1033	.$ea8	LSR
1034	.$ea9	LSR
1035	.$eaa	LSR
1036	.$eab	LSR
1037	.$eac	JSR NUMBEROUT
1038	.$eaf	LDA BCD+1
1039	.$eb2	AND #$0F
1040	.$eb4	TAY
1041	.$eb5	JSR NUMBEROUT
1042	.$eb8	LDA BCD
1043	.$ebb	LSR
1044	.$ebc	LSR
1045	.$ebd	LSR
1046	.$ebe	LSR
1047	.$ebf	JSR NUMBEROUT
1048	.$ec2	LDA BCD
1049	.$ec5	AND #$0F
1050	.$ec7	JSR NUMBEROUT
1051	.$eca	RTS
1054	.$ecb	INT2BCD
1055	.$ecb	SED
1056	.$ecc	LDA #0
1057	.$ece	STA BCD
1058	.$ed1	STA BCD+1
1059	.$ed4	STA BCD+2
1060	.$ed7	ASL TMP_ZP
1061	.$ed9	ROL TMP_ZP+1
1062	.$edb	LDA BCD
1063	.$ede	ADC BCD
1064	.$ee1	STA BCD
1065	.$ee4	ASL TMP_ZP
1066	.$ee6	ROL TMP_ZP+1
1067	.$ee8	ADC BCD
1068	.$eeb	STA BCD
1069	.$eee	ASL TMP_ZP
1070	.$ef0	ROL TMP_ZP+1
1071	.$ef2	ADC BCD
1072	.$ef5	STA BCD
1073	.$ef8	ASL TMP_ZP
1074	.$efa	ROL TMP_ZP+1
1075	.$efc	ADC BCD
1076	.$eff	STA BCD
1077	.$f02	ASL TMP_ZP
1078	.$f04	ROL TMP_ZP+1
1079	.$f06	ADC BCD
1080	.$f09	STA BCD
1081	.$f0c	ASL TMP_ZP
1082	.$f0e	ROL TMP_ZP+1
1083	.$f10	ADC BCD
1084	.$f13	STA BCD
1085	.$f16	LDX #7
1086	.$f18	BCDBIT1
1087	.$f18	ASL TMP_ZP
1088	.$f1a	ROL TMP_ZP+1
1089	.$f1c	LDA BCD
1090	.$f1f	ADC BCD
1091	.$f22	STA BCD
1092	.$f25	LDA BCD+1
1093	.$f28	ADC BCD+1
1094	.$f2b	STA BCD+1
1095	.$f2e	DEX
1096	.$f2f	BNE BCDBIT1
1097	.$f31	LDX #3
1098	.$f33	BCDBIT2
1099	.$f33	ASL TMP_ZP
1100	.$f35	ROL TMP_ZP+1
1101	.$f37	LDA BCD
1102	.$f3a	ADC BCD
1103	.$f3d	STA BCD
1104	.$f40	LDA BCD+1
1105	.$f43	ADC BCD+1
1106	.$f46	STA BCD+1
1107	.$f49	LDA BCD+2
1108	.$f4c	ADC BCD+2
1109	.$f4f	STA BCD+2
1110	.$f52	DEX
1111	.$f53	BNE BCDBIT2
1112	.$f55	CLD
1113	.$f56	RTS
1114	.$f57	BCD
1115	.$f57	.WORD 0 0
1116	.$f5b	NUMFLAG
1117	.$f5b	.BYTE 0
1120	.$f5c	REALOUTFAST JSR FACINT
1121	.$f5f	STA TMP_ZP+1
1122	.$f61	STY TMP_ZP
1123	.$f63	JMP INTOUTFASTZ
1126	.$f66	CHECKFORFASTOUT
1127	.$f66	JSR REROUTE
1128	.$f69	JSR XREGFAC
1129	.$f6c	LDA FACEXP
1130	.$f6e	CMP #$90
1131	.$f70	BCS REALOUTINT
1132	.$f72	CMP #$81
1133	.$f74	BCC REALOUTINT
1134	.$f76	MAYBEREALOUTFAST
1135	.$f76	LDA FACEXP+3
1136	.$f78	BNE REALOUTINT
1137	.$f7a	LDA FACEXP+4
1138	.$f7c	BNE REALOUTINT
1139	.$f7e	LDA FACEXP
1140	.$f80	SEC
1141	.$f81	SBC #129
1142	.$f83	ASL
1143	.$f84	TAX
1144	.$f85	LDA FACEXP+1
1145	.$f87	AND MANTMASK,X
1146	.$f8a	BNE REALOUTINT
1147	.$f8c	INX
1148	.$f8d	LDA FACEXP+2
1149	.$f8f	AND MANTMASK,X
1150	.$f92	BNE REALOUTINT
1151	.$f94	JMP REALOUTFAST
1152	.$f97	REALOUTINT LDY #0
1153	.$f99	JSR FACSTR
1154	.$f9c	LDY #0
1155	.$f9e	LDA LOFBUF,Y
1156	.$fa1	STRLOOPRO JSR CHROUT
1157	.$fa4	INY
1158	.$fa5	LDA LOFBUF,Y
1159	.$fa8	BNE STRLOOPRO
1160	.$faa	RTS
1161	.$fab	MANTMASK
1162	.$fab	.BYTE 127 255 63 255 31 255 15 255 7 255 3 255 1 255 0 255 0 127 0 63 0 31 0 15 0 7 0 3 0 1
1165	.$fc9	REALOUTBRK  LDA X_REG
1166	.$fcb	BNE RNOTNULLBRK
1167	.$fcd	JMP PRINTNULLBRK
1168	.$fd0	RNOTNULLBRK JSR CHECKFORFASTOUT
1169	.$fd3	LDA #$0D
1170	.$fd5	JSR CHROUT
1171	.$fd8	JMP RESETROUTE
1174	.$fdb	PRINTNULLBRK
1175	.$fdb	JSR REROUTE
1176	.$fde	LDA #$20
1177	.$fe0	JSR CHROUT
1178	.$fe3	LDA #$30
1179	.$fe5	JSR CHROUT
1180	.$fe8	LDA #$0D
1181	.$fea	JSR CHROUT
1182	.$fed	JMP RESETROUTE
1185	.$ff0	SINGLECHROUTBRKMAX
1186	.$ff0	JSR SINGLECHROUTBRK
1187	.$ff3	JMP COMPACTMAX
1190	.$ff6	SINGLECHROUTBRK
1191	.$ff6	STA TMP_ZP
1192	.$ff8	JSR REROUTE
1193	.$ffb	LDA TMP_ZP
1194	.$ffd	JSR CHROUT
1195	.$1000	LDA #$0D
1196	.$1002	JSR CHROUT
1197	.$1005	JMP RESETROUTE
1200	.$1008	ADJUSTSTACK LDA FORSTACKP 
1201	.$100b	STA TMP_ZP
1202	.$100d	LDA FORSTACKP+1
1203	.$1010	STA TMP_ZP+1
1204	.$1012	ADSEARCHFOR LDA TMP_ZP
1205	.$1014	CMP #<FORSTACK
1206	.$1016	BNE ADJUST2
1207	.$1018	LDA TMP_ZP+1
1208	.$101a	CMP #>FORSTACK
1209	.$101c	BNE ADJUST2
1210	.$101e	RTS    
1211	.$101f	ADJUST2  LDA TMP_ZP
1212	.$1021	SEC
1213	.$1022	SBC #2
1214	.$1024	STA TMP_ZP
1215	.$1026	BCS ADNOPV1N1
1216	.$1028	DEC TMP_ZP+1
1217	.$102a	ADNOPV1N1 LDY #0
1218	.$102c	LDA (TMP_ZP),Y
1219	.$102e	BNE ADNOGOSUB
1220	.$1030	RTS    
1221	.$1031	ADNOGOSUB
1222	.$1031	INY
1223	.$1032	LDA TMP_ZP
1224	.$1034	SEC
1225	.$1035	SBC (TMP_ZP),Y
1226	.$1037	STA TMP_ZP
1227	.$1039	BCS ADNOPV1N2
1228	.$103b	DEC TMP_ZP+1
1229	.$103d	ADNOPV1N2 DEY
1230	.$103e	LDA A_REG
1231	.$1041	ADCMPFOR CMP (TMP_ZP),Y
1232	.$1043	BNE ADSEARCHFOR
1233	.$1045	LDA A_REG+1
1234	.$1048	INY
1235	.$1049	CMP (TMP_ZP),Y
1236	.$104b	BEQ ADFOUNDFOR
1237	.$104d	JMP ADSEARCHFOR
1238	.$1050	ADLOW0  LDX A_REG+1
1239	.$1053	BEQ ADFOUNDFOR
1240	.$1055	BNE ADCMPFOR
1241	.$1057	ADFOUNDFOR LDA TMP_ZP  
1242	.$1059	STA FORSTACKP
1243	.$105c	LDA TMP_ZP+1
1244	.$105e	STA FORSTACKP+1
1245	.$1061	RTS
1248	.$1062	INITFOR  JSR ADJUSTSTACK
1249	.$1065	LDA FORSTACKP
1250	.$1068	STA TMP_ZP
1251	.$106a	LDA FORSTACKP+1
1252	.$106d	STA TMP_ZP+1
1253	.$106f	LDY #0
1254	.$1071	LDA A_REG
1255	.$1074	STA (TMP_ZP),Y
1256	.$1076	INY
1257	.$1077	LDA A_REG+1
1258	.$107a	STA (TMP_ZP),Y
1259	.$107c	INY
1260	.$107d	LDA JUMP_TARGET
1261	.$107f	STA (TMP_ZP),Y
1262	.$1081	INY
1263	.$1082	LDA JUMP_TARGET+1
1264	.$1084	STA (TMP_ZP),Y
1265	.$1086	INY
1266	.$1087	STY TMP3_ZP
1267	.$1089	JSR INCTMPZP
1268	.$108c	JSR POPREAL
1269	.$108f	LDX TMP_ZP
1270	.$1091	LDY TMP_ZP+1
1272	.$1093	JSR FACMEM
1273	.$1096	JSR SGNFAC
1274	.$1099	STA TMP_FLAG
1275	.$109c	LDY #5
1276	.$109e	STY TMP3_ZP
1277	.$10a0	JSR INCTMPZP
1278	.$10a3	JSR POPREAL
1279	.$10a6	LDX TMP_ZP
1280	.$10a8	LDY TMP_ZP+1
1282	.$10aa	JSR FACMEM
1283	.$10ad	LDY #5
1284	.$10af	STY TMP3_ZP
1285	.$10b1	JSR INCTMPZP
1286	.$10b4	LDY #0
1287	.$10b6	LDA TMP_FLAG
1288	.$10b9	STA (TMP_ZP),Y
1289	.$10bb	INY
1290	.$10bc	LDA #1
1291	.$10be	STA (TMP_ZP),Y
1292	.$10c0	INY
1293	.$10c1	LDA #15
1294	.$10c3	STA (TMP_ZP),Y
1295	.$10c5	LDY #3
1296	.$10c7	STY TMP3_ZP
1297	.$10c9	JSR INCTMPZP
1298	.$10cc	LDA TMP_ZP
1299	.$10ce	STA FORSTACKP
1300	.$10d1	LDA TMP_ZP+1
1301	.$10d3	STA FORSTACKP+1
1302	.$10d6	RTS
1305	.$10d7	NEXT  LDA FORSTACKP
1306	.$10da	STA TMP_ZP
1307	.$10dc	LDA FORSTACKP+1
1308	.$10df	STA TMP_ZP+1
1309	.$10e1	SEARCHFOR LDA TMP_ZP+1
1310	.$10e3	STA TMP3_REG+1
1311	.$10e6	LDA TMP_ZP
1312	.$10e8	STA TMP3_REG
1313	.$10eb	SEC
1314	.$10ec	SBC #2
1315	.$10ee	STA TMP_ZP
1316	.$10f0	BCS NOPV1N1
1317	.$10f2	DEC TMP_ZP+1
1318	.$10f4	NOPV1N1  LDY #0
1319	.$10f6	LDA (TMP_ZP),Y
1320	.$10f8	BNE NOGOSUB
1321	.$10fa	JMP NEXTWOFOR
1322	.$10fd	NOGOSUB
1323	.$10fd	INY
1324	.$10fe	LDA TMP_ZP
1325	.$1100	SEC
1326	.$1101	SBC (TMP_ZP),Y
1327	.$1103	STA TMP_ZP
1328	.$1105	BCS NOPV1N2
1329	.$1107	DEC TMP_ZP+1
1330	.$1109	NOPV1N2  DEY
1331	.$110a	LDA A_REG
1332	.$110d	BEQ LOW0
1333	.$110f	CMPFOR  CMP (TMP_ZP),Y
1334	.$1111	BNE SEARCHFOR
1335	.$1113	LDA A_REG+1
1336	.$1116	INY
1337	.$1117	CMP (TMP_ZP),Y
1338	.$1119	BEQ FOUNDFOR
1339	.$111b	JMP SEARCHFOR
1340	.$111e	LOW0  LDX A_REG+1
1341	.$1121	BEQ FOUNDFOR
1342	.$1123	BNE CMPFOR
1343	.$1125	FOUNDFOR LDA TMP_ZP
1344	.$1127	STA TMP2_REG
1345	.$112a	LDA TMP_ZP+1
1346	.$112c	STA TMP2_REG+1
1347	.$112f	VARREAL
1348	.$112f	LDY #0
1349	.$1131	STY A_REG+1 
1350	.$1134	LDA (TMP_ZP),Y
1351	.$1136	TAX
1352	.$1137	INY
1353	.$1138	LDA (TMP_ZP),Y
1354	.$113a	TAY
1355	.$113b	TXA
1356	.$113c	JSR REALFAC
1357	.$113f	CALCNEXT LDA TMP_ZP
1358	.$1141	CLC
1359	.$1142	ADC #4
1360	.$1144	STA TMP_ZP
1361	.$1146	BCC NOPV2IN
1362	.$1148	INC TMP_ZP+1
1363	.$114a	NOPV2IN  STA TMP_REG
1364	.$114c	LDY TMP_ZP+1
1365	.$114e	STY TMP_REG+1
1366	.$1150	JSR FASTFADDMEM
1368	.$1153	LDA TMP2_REG
1369	.$1156	STA TMP_ZP
1370	.$1158	LDA TMP2_REG+1
1371	.$115b	STA TMP_ZP+1
1372	.$115d	STOREREAL
1373	.$115d	LDY #0
1374	.$115f	LDA (TMP_ZP),Y
1375	.$1161	TAX
1376	.$1162	INY
1377	.$1163	LDA (TMP_ZP),Y
1378	.$1165	TAY
1379	.$1166	JSR FACMEM 
1380	.$1169	CMPFORXX LDA #5
1381	.$116b	STA TMP3_ZP
1382	.$116d	LDA TMP_REG
1383	.$116f	CLC
1384	.$1170	ADC #5
1385	.$1172	STA TMP_REG
1386	.$1174	BCC NOPV3
1387	.$1176	INC TMP_REG+1
1388	.$1178	NOPV3  LDY TMP_REG+1
1389	.$117a	JSR CMPFAC  
1390	.$117d	BEQ LOOPING
1391	.$117f	PHA
1392	.$1180	LDY #14
1393	.$1182	LDA (TMP_ZP),Y
1394	.$1184	BEQ STEPZERO
1395	.$1186	ROL
1396	.$1187	BCC STEPPOS
1397	.$1189	STEPNEG  PLA
1398	.$118a	ROL
1399	.$118b	BCC LOOPING
1400	.$118d	BCS EXITLOOP
1401	.$118f	STEPPOS  PLA
1402	.$1190	ROL
1403	.$1191	BCC EXITLOOP
1404	.$1193	LOOPING  LDA TMP3_REG
1405	.$1196	STA FORSTACKP
1406	.$1199	LDA TMP3_REG+1
1407	.$119c	STA FORSTACKP+1
1408	.$119f	LDA TMP2_REG
1409	.$11a2	CLC
1410	.$11a3	ADC #2
1411	.$11a5	STA TMP2_REG
1412	.$11a8	BCC NOPV4IN
1413	.$11aa	INC TMP2_REG+1
1414	.$11ad	NOPV4IN  LDY #0
1415	.$11af	STY A_REG
1416	.$11b2	STA TMP_ZP
1417	.$11b4	LDA TMP2_REG+1
1418	.$11b7	STA TMP_ZP+1
1419	.$11b9	LDA (TMP_ZP),Y
1420	.$11bb	STA JUMP_TARGET
1421	.$11bd	INY
1422	.$11be	LDA (TMP_ZP),Y
1423	.$11c0	STA JUMP_TARGET+1
1424	.$11c2	RTS
1425	.$11c3	STEPZERO PLA
1426	.$11c4	JMP LOOPING
1427	.$11c7	EXITLOOP LDA TMP2_REG
1428	.$11ca	STA FORSTACKP
1429	.$11cd	LDA TMP2_REG+1
1430	.$11d0	STA FORSTACKP+1
1431	.$11d3	LDA #1
1432	.$11d5	STA A_REG
1433	.$11d8	RTS
1436	.$11d9	ZEROSET  LDA #0
1437	.$11db	STA X_REG
1438	.$11dd	STA X_REG+1
1439	.$11df	STA X_REG+2
1440	.$11e1	STA X_REG+3
1441	.$11e3	STA X_REG+4
1442	.$11e5	RTS
1445	.$11e6	SEQ   JSR CMPSTR
1446	.$11e9	LDA TMP3_ZP
1447	.$11eb	BNE NOTSEQ
1448	.$11ed	LDA #<REAL_CONST_MINUS_ONE
1449	.$11ef	STA TMP3_ZP
1450	.$11f1	LDA #>REAL_CONST_MINUS_ONE
1451	.$11f3	STA TMP3_ZP+1
1452	.$11f5	JMP COPY2_XY_XREG
1453	.$11f8	NOTSEQ  JMP ZEROSET
1456	.$11fb	SNEQ  JSR CMPSTR
1457	.$11fe	LDA TMP3_ZP
1458	.$1200	BEQ NOTSEQ
1459	.$1202	LDA #<REAL_CONST_MINUS_ONE
1460	.$1204	STA TMP3_ZP
1461	.$1206	LDA #>REAL_CONST_MINUS_ONE
1462	.$1208	STA TMP3_ZP+1
1463	.$120a	JMP COPY2_XY_XREG
1466	.$120d	CMPSTR  LDY #0   
1467	.$120f	LDX #1
1468	.$1211	LDA A_REG
1469	.$1214	STA TMP_ZP
1470	.$1216	LDA A_REG+1
1471	.$1219	STA TMP_ZP+1
1472	.$121b	LDA B_REG
1473	.$121e	STA TMP2_ZP
1474	.$1220	LDA B_REG+1
1475	.$1223	STA TMP2_ZP+1
1476	.$1225	CMP TMP_ZP+1
1477	.$1227	BNE CMPSTRSK1
1478	.$1229	LDA TMP2_ZP
1479	.$122b	CMP TMP_ZP
1480	.$122d	BNE CMPSTRSK1
1481	.$122f	LDX #0
1482	.$1231	JMP STRCMPRES
1483	.$1234	CMPSTRSK1 LDA (TMP_ZP),Y
1484	.$1236	CMP (TMP2_ZP),Y
1485	.$1238	BNE STRCMPRES
1486	.$123a	TAX
1487	.$123b	BNE NOTZCTR
1488	.$123d	LDX #0
1489	.$123f	JMP STRCMPRES
1490	.$1242	NOTZCTR  INC TMP_ZP
1491	.$1244	BNE SCSKP1
1492	.$1246	INC TMP_ZP+1
1493	.$1248	SCSKP1  INC TMP2_ZP
1494	.$124a	BNE CMPSTRLOOP
1495	.$124c	INC TMP2_ZP+1
1496	.$124e	CMPSTRLOOP LDA (TMP_ZP),Y
1497	.$1250	CMP (TMP2_ZP),Y
1498	.$1252	BNE STRCMPRES
1499	.$1254	INY
1500	.$1255	DEX
1501	.$1256	BNE CMPSTRLOOP
1502	.$1258	STRCMPRES STX TMP3_ZP
1503	.$125a	RTS
1506	.$125b	REALFACPUSH STA TMP_ZP
1507	.$125d	STY TMP_ZP+1
1508	.$125f	LDX FPSTACKP
1509	.$1262	LDY FPSTACKP+1
1510	.$1265	STX TMP2_ZP
1511	.$1267	STY TMP2_ZP+1
1512	.$1269	LDY #0
1513	.$126b	LDA (TMP_ZP),Y
1514	.$126d	STA (TMP2_ZP),Y
1515	.$126f	INY
1516	.$1270	LDA (TMP_ZP),Y
1517	.$1272	STA (TMP2_ZP),Y
1518	.$1274	INY
1519	.$1275	LDA (TMP_ZP),Y
1520	.$1277	STA (TMP2_ZP),Y
1521	.$1279	INY
1522	.$127a	LDA (TMP_ZP),Y
1523	.$127c	STA (TMP2_ZP),Y
1524	.$127e	INY
1525	.$127f	LDA (TMP_ZP),Y
1526	.$1281	STA (TMP2_ZP),Y
1527	.$1283	TXA    
1528	.$1284	CLC
1529	.$1285	ADC #5
1530	.$1287	STA FPSTACKP
1531	.$128a	BCC NOPVRFPXX
1532	.$128c	INC FPSTACKP+1
1533	.$128f	NOPVRFPXX RTS
1536	.$1290	POPREAL  LDA FPSTACKP
1537	.$1293	SEC
1538	.$1294	SBC #5
1539	.$1296	STA FPSTACKP
1540	.$1299	BCS NOPVPR
1541	.$129b	DEC FPSTACKP+1
1542	.$129e	NOPVPR  LDA FPSTACKP
1543	.$12a1	LDY FPSTACKP+1
1544	.$12a4	JMP REALFAC
1547	.$12a7	INCTMPZP LDA TMP_ZP
1548	.$12a9	CLC
1549	.$12aa	ADC TMP3_ZP
1550	.$12ac	STA TMP_ZP
1551	.$12ae	BCC NOPV2
1552	.$12b0	INC TMP_ZP+1
1553	.$12b2	NOPV2  RTS
1556	.$12b3	COPY2_XYA_XREG
1557	.$12b3	STA TMP3_ZP
1558	.$12b5	STY TMP3_ZP+1
1559	.$12b7	COPY2_XY_XREG
1560	.$12b7	LDX #<X_REG  
1561	.$12b9	LDY #0
1562	.$12bb	LDA (TMP3_ZP),Y
1563	.$12bd	STA X_REG
1564	.$12bf	INY
1565	.$12c0	LDA (TMP3_ZP),Y
1566	.$12c2	STA X_REG+1
1567	.$12c4	INY
1568	.$12c5	LDA (TMP3_ZP),Y
1569	.$12c7	STA X_REG+2
1570	.$12c9	INY
1571	.$12ca	LDA (TMP3_ZP),Y
1572	.$12cc	STA X_REG+3
1573	.$12ce	INY
1574	.$12cf	LDA (TMP3_ZP),Y
1575	.$12d1	STA X_REG+4
1576	.$12d3	RTS
1579	.$12d4	CLRCHNEW
1580	.$12d4	LDA CHLOCKFLAG
1581	.$12d7	BNE SKIPCLRCH
1582	.$12d9	JMP CLRCH
1583	.$12dc	SKIPCLRCH
1584	.$12dc	RTS
1587	.$12dd	NEXTWOFOR
1591	.$12dd	LDX #$0A
1592	.$12df	JMP ERRALL
1595	.$12e2	OUTOFMEMORY
1599	.$12e2	LDX #$10
1600	.$12e4	JMP ERRALL
1603	.$12e7	ILLEGALQUANTITY
1607	.$12e7	JMP ERRIQ
1610	.$12ea	XREGFAC  LDA X_REG+4
1611	.$12ec	STA FACLO
1612	.$12ee	LDA X_REG+3
1613	.$12f0	STA FACMO
1614	.$12f2	LDA X_REG+2
1615	.$12f4	STA FACMOH
1616	.$12f6	LDA X_REG+1
1617	.$12f8	STA FACSGN
1618	.$12fa	ORA #$80
1619	.$12fc	STA FACHO
1620	.$12fe	LDA X_REG
1621	.$1300	STA FACEXP
1622	.$1302	LDA #0
1623	.$1304	STA FACOV
1624	.$1306	RTS
1738	.$1307	FASTFADDMEM
1739	.$1307	JSR MEMARG
1740	.$130a	FASTFADDARG
1741	.$130a	BNE FADDRET2     
1742	.$130c	JMP ARGFAC
1743	.$130f	FADDRET2 LDA ARGEXP
1744	.$1311	BNE FADDRET1     
1745	.$1313	RTS
1746	.$1314	FADDRET1 SEC
1747	.$1315	SBC FACEXP
1748	.$1317	BEQ FFADD_EXPEQ     
1749	.$1319	BCC FFADD_SHFARG1   
1753	.$131b	LDY ARGEXP
1754	.$131d	STY FACEXP
1755	.$131f	LDY ARGSGN
1756	.$1321	STY FACSGN
1757	.$1323	LDX #0
1758	.$1325	STX OLDOV        
1759	.$1327	LDX #FAC         
1761	.$1329	SEC
1762	.$132a	SBC #$08
1763	.$132c	BMI FFADD_SHFFAC2
1765	.$132e	FFADD_SHFFAC1
1766	.$132e	LDY FACLO        
1767	.$1330	STY FACOV
1768	.$1332	LDY FACMO        
1769	.$1334	STY FACMO+1
1770	.$1336	LDY FACMOH       
1771	.$1338	STY FACMOH+1
1772	.$133a	LDY FACHO        
1773	.$133c	STY FACHO+1
1774	.$133e	LDY #0
1775	.$1340	STY FACHO        
1776	.$1342	SBC #$08         
1777	.$1344	BPL FFADD_SHFFAC1   
1778	.$1346	FFADD_SHFFAC2
1779	.$1346	ADC #$08         
1780	.$1348	BEQ FFADD_SHFFAC4   
1781	.$134a	TAY
1782	.$134b	LDA FACOV
1783	.$134d	FFADD_SHFFAC3
1784	.$134d	LSR FACHO        
1785	.$134f	ROR FACMOH       
1786	.$1351	ROR FACMO        
1787	.$1353	ROR FACLO        
1788	.$1355	ROR              
1789	.$1356	DEY
1790	.$1357	BNE FFADD_SHFFAC3
1791	.$1359	JMP FFADD_MANADD2   
1792	.$135c	FFADD_SHFFAC4
1793	.$135c	LDA FACOV        
1794	.$135e	JMP FFADD_MANADD2
1795	.$1361	FFADD_EXPEQ
1796	.$1361	LDX FACOV
1797	.$1363	STX OLDOV
1800	.$1365	JMP FFADD_MANADD1
1801	.$1368	FFADD_SHFARG2
1802	.$1368	LDA FACOV        
1803	.$136a	JMP FFADD_MANADD1
1804	.$136d	FFADD_SHFARG1
1805	.$136d	LDX FACOV
1806	.$136f	STX OLDOV        
1807	.$1371	LDX #$00         
1810	.$1373	ADC #$08
1811	.$1375	BPL FFADD_SHFARG6   
1812	.$1377	FFADD_SHFARG3
1813	.$1377	LDX ARGLO        
1814	.$1379	LDY ARGMO        
1815	.$137b	STY ARGMO+1
1816	.$137d	LDY ARGMOH       
1817	.$137f	STY ARGMOH+1
1818	.$1381	LDY ARGHO        
1819	.$1383	STY ARGHO+1
1820	.$1385	LDY #0
1821	.$1387	STY ARGHO        
1822	.$1389	FFADD_SHFARG4
1823	.$1389	ADC #$08
1824	.$138b	BMI FFADD_SHFARG3
1825	.$138d	BEQ FFADD_SHFARG3
1826	.$138f	FFADD_SHFARG6
1827	.$138f	SBC #$08
1828	.$1391	BEQ FFADD_SHFARG2   
1829	.$1393	TAY
1830	.$1394	TXA              
1831	.$1395	FFADD_SHFARG5
1832	.$1395	LSR ARGHO
1833	.$1397	ROR ARGMOH
1834	.$1399	ROR ARGMO
1835	.$139b	ROR ARGLO
1836	.$139d	ROR           
1837	.$139e	INY
1838	.$139f	BNE FFADD_SHFARG5
1839	.$13a1	FFADD_MANADD1
1840	.$13a1	LDX #ARGEXP      
1841	.$13a3	FFADD_MANADD2
1842	.$13a3	BIT ARISGN
1843	.$13a5	BMI FFADD_MANSUB1   
1844	.$13a7	CLC
1845	.$13a8	ADC OLDOV
1846	.$13aa	STA FACOV
1847	.$13ac	LDA FACLO
1848	.$13ae	ADC ARGLO
1849	.$13b0	STA FACLO
1850	.$13b2	LDA FACMO
1851	.$13b4	ADC ARGMO
1852	.$13b6	STA FACMO
1853	.$13b8	LDA FACMOH
1854	.$13ba	ADC ARGMOH
1855	.$13bc	STA FACMOH
1856	.$13be	LDA FACHO
1857	.$13c0	ADC ARGHO
1858	.$13c2	STA FACHO
1859	.$13c4	BCC FFADD_RNDRTS
1860	.$13c6	INC FACEXP
1861	.$13c8	BEQ FFADD_OVERR
1863	.$13ca	ROR FACHO
1864	.$13cc	ROR FACMOH
1865	.$13ce	ROR FACMO
1866	.$13d0	ROR FACLO
1867	.$13d2	ROR FACOV
1868	.$13d4	FFADD_RNDRTS
1869	.$13d4	RTS
1870	.$13d5	FFADD_OVERR
1871	.$13d5	JMP ILLEGALQUANTITY
1872	.$13d8	FFADD_MANSUB1
1873	.$13d8	LDY #FACEXP
1874	.$13da	CPX #ARGEXP
1875	.$13dc	BEQ FFADD_MANSUB2
1876	.$13de	LDY #ARGEXP
1877	.$13e0	FFADD_MANSUB2
1878	.$13e0	SEC              
1879	.$13e1	EOR #$FF
1880	.$13e3	ADC OLDOV
1881	.$13e5	STA FACOV
1882	.$13e7	LDA 4,Y
1883	.$13ea	SBC 4,X
1884	.$13ec	STA FACLO
1885	.$13ee	LDA 3,Y
1886	.$13f1	SBC 3,X
1887	.$13f3	STA FACMO
1888	.$13f5	LDA 2,Y
1889	.$13f8	SBC 2,X
1890	.$13fa	STA FACMOH
1891	.$13fc	LDA 1,Y
1892	.$13ff	SBC 1,X
1893	.$1401	STA FACHO
1894	.$1403	BCS FCNORMAL
1895	.$1405	LDA FACSGN
1896	.$1407	EOR #$FF
1897	.$1409	STA FACSGN
1898	.$140b	LDA FACHO
1899	.$140d	EOR #$FF
1900	.$140f	STA FACHO
1901	.$1411	LDA FACMOH
1902	.$1413	EOR #$FF
1903	.$1415	STA FACMOH
1904	.$1417	LDA FACMO
1905	.$1419	EOR #$FF
1906	.$141b	STA FACMO
1907	.$141d	LDA FACLO
1908	.$141f	EOR #$FF
1909	.$1421	STA FACLO
1910	.$1423	LDA FACOV
1911	.$1425	EOR #$FF
1912	.$1427	CLC
1913	.$1428	ADC #1
1914	.$142a	STA FACOV
1915	.$142c	BNE FCNORMAL
1916	.$142e	INC FACLO
1917	.$1430	BNE FCNORMAL
1918	.$1432	INC FACMO
1919	.$1434	BNE FCNORMAL
1920	.$1436	INC FACMOH
1921	.$1438	BNE FCNORMAL
1922	.$143a	INC FACHO
1923	.$143c	FCNORMAL   BIT FACHO
1924	.$143e	BMI FFADD_RET       
1925	.$1440	LDA #0           
1926	.$1442	CLC
1927	.$1443	FFADD_NORM3
1928	.$1443	LDX FACHO
1929	.$1445	BNE FFADD_NORM1
1930	.$1447	LDX FACHO+1
1931	.$1449	STX FACHO
1932	.$144b	LDX FACMOH+1
1933	.$144d	STX FACMOH
1934	.$144f	LDX FACMO+1
1935	.$1451	STX FACMO
1936	.$1453	LDX FACOV
1937	.$1455	STX FACLO
1938	.$1457	LDX #0
1939	.$1459	STX FACOV
1940	.$145b	ADC #$08
1941	.$145d	CMP #$20
1942	.$145f	BNE FFADD_NORM3
1943	.$1461	JMP FFADD_ZEROFAC
1944	.$1464	FFADD_NORM2
1945	.$1464	CLC
1946	.$1465	ADC #1
1947	.$1467	ASL FACOV
1948	.$1469	ROL FACLO
1949	.$146b	ROL FACMO
1950	.$146d	ROL FACMOH
1951	.$146f	ROL FACHO
1952	.$1471	FFADD_NORM1
1953	.$1471	BPL FFADD_NORM2     
1954	.$1473	SEC
1955	.$1474	SBC FACEXP
1956	.$1476	BCS FFADD_ZEROFAC
1957	.$1478	EOR #$FF
1958	.$147a	CLC
1959	.$147b	ADC #1
1960	.$147d	STA FACEXP
1961	.$147f	FFADD_RET   RTS
1962	.$1480	FFADD_ZEROFAC
1963	.$1480	LDX #0
1964	.$1482	STX FACEXP
1965	.$1484	STX FACSGN
1966	.$1486	RTS
1969	.$1487	INITVARS
1970	.$1487	JSR INITSTRVARS
1971	.$148a	LDA #0
1972	.$148c	LDY #4
1973	.$148e	REALINITLOOP0:
1974	.$148e	STA VAR_I,Y
1975	.$1491	STA VAR_TI,Y
1976	.$1494	DEY
1977	.$1495	BMI REALLOOPEXIT0
1978	.$1497	JMP REALINITLOOP0
1979	.$149a	REALLOOPEXIT0:
1980	.$149a	RTS
1984	.$149b	CONSTANTS
1986	.$149b	CONST_0 .BYTE 5
1987	.$149c	.STRG "hello"
1989	.$14a1	CONST_1 .BYTE 5
1990	.$14a2	.STRG "world"
1992	.$14a7	CONST_2 .BYTE 6
1993	.$14a8	.STRG "000000"
1999	.$14ae	CONST_4R .REAL 500.0
2002	.$14b3	CONST_5R .REAL 1.0
2008	.$14b8	DATAS
2009	.$14b8	.BYTE $FF
2011	.$14b9	CONSTANTS_END
2014	.$14b9	VARIABLES
2016	.$14b9	VAR_I .REAL 0.0
2018	.$14be	VAR_TI .REAL 0.0
2019	.$14c3	STRINGVARS_START
2021	.$14c3	VAR_A$ .WORD EMPTYSTR
2023	.$14c5	VAR_B$ .WORD EMPTYSTR
2025	.$14c7	VAR_C$ .WORD EMPTYSTR
2027	.$14c9	VAR_TI$ .WORD EMPTYSTR
2028	.$14cb	STRINGVARS_END
2029	.$14cb	STRINGARRAYS_START
2030	.$14cb	STRINGARRAYS_END
2031	.$14cb	VARIABLES_END
2033	.$14cb	Y_REG .REAL 0.0
2034	.$14d0	C_REG .REAL 0.0
2035	.$14d5	D_REG .REAL 0.0
2036	.$14da	E_REG .REAL 0.0
2037	.$14df	F_REG .REAL 0.0
2038	.$14e4	A_REG .WORD 0
2039	.$14e6	B_REG .WORD 0
2040	.$14e8	CMD_NUM .BYTE 0
2041	.$14e9	CHANNEL .BYTE 0
2042	.$14ea	SP_SAVE .BYTE 0
2043	.$14eb	TMP2_REG .WORD 0
2044	.$14ed	TMP3_REG .WORD 0
2045	.$14ef	TMP4_REG .WORD 0
2046	.$14f1	AS_TMP .WORD 0
2047	.$14f3	BPOINTER_TMP .WORD 0
2048	.$14f5	BASICTEXTP .BYTE 0
2049	.$14f6	STORE1 .WORD 0
2050	.$14f8	STORE2 .WORD 0
2051	.$14fa	STORE3 .WORD 0
2052	.$14fc	STORE4 .WORD 0
2053	.$14fe	GCSTART .WORD 0
2054	.$1500	GCLEN .WORD 0
2055	.$1502	GCWORK .WORD 0
2056	.$1504	INPUTLENGTH .BYTE 0
2057	.$1505	TMP_FREG .REAL 0
2058	.$150a	TMP2_FREG .REAL 0
2059	.$150f	TMP_FLAG .BYTE 0
2060	.$1510	INT_FLAG .BYTE 0
2061	.$1511	REAL_CONST_ONE .REAL 1.0
2062	.$1516	REAL_CONST_ZERO .REAL 0.0
2063	.$151b	REAL_CONST_MINUS_ONE .REAL -1.0
2064	.$1520	CHLOCKFLAG .BYTE 0
2065	.$1521	EMPTYSTR .BYTE 0
2066	.$1522	FPSTACKP .WORD FPSTACK
2067	.$1524	FORSTACKP .WORD FORSTACK
2068	.$1526	DATASP .WORD DATAS
2069	.$1528	LASTVAR .WORD 0
2070	.$152a	LASTVARP .WORD 0
2071	.$152c	HIGHP .WORD STRBUF
2072	.$152e	STRBUFP .WORD STRBUF
2073	.$1530	ENDSTRBUF .WORD 0
2074	.$1532	INPUTQUEUEP .BYTE 0
2075	.$1533	PROGRAMEND
2076	.$1533	INPUTQUEUE .ARRAY $0F
2077	.$1542	FPSTACK .ARRAY 100
2078	.$15a6	FORSTACK .ARRAY 340
2079	.$16fa	STRBUF .BYTE 0
