117	.$818	TSX
118	.$819	STX SP_SAVE
120	.$81c	PROGRAMSTART:
121	.$81c	JSR START
123	.$81f	LINE_0:
126	.$81f	LINE_5:
128	.$81f	LDA #<CONST_0R
129	.$821	LDY #>CONST_0R
130	.$823	JSR REALFACPUSH
132	.$826	LDA #<CONST_1R
133	.$828	LDY #>CONST_1R
134	.$82a	JSR REALFACPUSH
136	.$82d	LDA #<CONST_2R
137	.$82f	LDY #>CONST_2R
138	.$831	JSR REALFACPUSH
140	.$834	LDA #<CONST_3
141	.$836	LDY #>CONST_3
142	.$838	STA B_REG
143	.$83b	STY B_REG+1
144	.$83e	LDY B_REG
145	.$841	LDA B_REG+1
146	.$844	STY G_REG
147	.$846	STA G_REG+1
148	.$848	JSR POPREAL
149	.$84b	LDX #<D_REG
150	.$84d	LDY #>D_REG
152	.$84f	JSR FACMEM
153	.$852	JSR POPREAL
154	.$855	LDX #<C_REG
155	.$857	LDY #>C_REG
157	.$859	JSR FACMEM
158	.$85c	JSR POPREALXREG
161	.$85f	LDA #<CONST_4R
162	.$861	LDY #>CONST_4R
163	.$863	JSR COPY2_XYA_YREG
167	.$866	JSR OPEN
168	.$869	LDA #<CONST_0R
169	.$86b	LDY #>CONST_0R
170	.$86d	JSR COPY2_XYA_XREG
174	.$870	JSR CLOSE
176	.$873	LINE_10:
178	.$873	LDA #<CONST_0R
179	.$875	LDY #>CONST_0R
180	.$877	JSR REALFACPUSH
182	.$87a	LDA #<CONST_1R
183	.$87c	LDY #>CONST_1R
184	.$87e	JSR REALFACPUSH
186	.$881	LDA #<CONST_5R
187	.$883	LDY #>CONST_5R
188	.$885	JSR REALFACPUSH
190	.$888	LDA #<CONST_6
191	.$88a	LDY #>CONST_6
192	.$88c	STA B_REG
193	.$88f	STY B_REG+1
194	.$892	LDY B_REG
195	.$895	LDA B_REG+1
196	.$898	STY G_REG
197	.$89a	STA G_REG+1
198	.$89c	JSR POPREAL
199	.$89f	LDX #<D_REG
200	.$8a1	LDY #>D_REG
202	.$8a3	JSR FACMEM
203	.$8a6	JSR POPREAL
204	.$8a9	LDX #<C_REG
205	.$8ab	LDY #>C_REG
207	.$8ad	JSR FACMEM
208	.$8b0	JSR POPREALXREG
211	.$8b3	LDA #<CONST_4R
212	.$8b5	LDY #>CONST_4R
213	.$8b7	JSR COPY2_XYA_YREG
217	.$8ba	JSR OPEN
219	.$8bd	LINE_20:
221	.$8bd	LDA #<CONST_0R
222	.$8bf	LDY #>CONST_0R
223	.$8c1	JSR COPY2_XYA_XREG
227	.$8c4	JSR CMD
228	.$8c7	LDA #<CONST_7
229	.$8c9	LDY #>CONST_7
230	.$8cb	JSR STROUTBRKWL
234	.$8ce	LINE_30:
236	.$8ce	LDA #<CONST_8
237	.$8d0	LDY #>CONST_8
238	.$8d2	JSR STROUTBRKWL
242	.$8d5	LINE_40:
244	.$8d5	LDA #<CONST_9
245	.$8d7	LDY #>CONST_9
246	.$8d9	JSR STROUTWL
248	.$8dc	JSR TABOUT
249	.$8df	LDA #<CONST_10
250	.$8e1	LDY #>CONST_10
251	.$8e3	JSR STROUTWL
253	.$8e6	JSR TABOUT
254	.$8e9	LDA #<CONST_11
255	.$8eb	LDY #>CONST_11
256	.$8ed	JSR COPY2_XYA_XREG
260	.$8f0	JSR REALOUT
261	.$8f3	JSR CRSRRIGHT
262	.$8f6	LDA #<CONST_12
263	.$8f8	LDY #>CONST_12
264	.$8fa	JSR COPY2_XYA_XREG
268	.$8fd	JSR REALOUT
269	.$900	JSR CHECKCMD
270	.$903	JSR LINEBREAK
272	.$906	LINE_50:
274	.$906	JSR LOCKCHANNEL
275	.$909	LDA #<CONST_0R
276	.$90b	LDY #>CONST_0R
277	.$90d	JSR REALFACPUSH
279	.$910	LDA #<CONST_13
280	.$912	LDY #>CONST_13
281	.$914	STA A_REG
282	.$917	STY A_REG+1
283	.$91a	JSR POPREAL
284	.$91d	LDX #<C_REG
285	.$91f	LDY #>C_REG
287	.$921	JSR FACMEM
288	.$924	JSR STROUTCHANNEL
289	.$927	JSR LINEBREAKCHANNEL
290	.$92a	JSR UNLOCKCHANNEL
292	.$92d	LINE_55:
294	.$92d	LDA #<CONST_14
295	.$92f	LDY #>CONST_14
296	.$931	JSR STROUTBRKWL
300	.$934	LINE_60:
302	.$934	LDA #<CONST_0R
303	.$936	LDY #>CONST_0R
304	.$938	JSR COPY2_XYA_XREG
308	.$93b	JSR CLOSE
309	.$93e	JSR END
310	.$941	RTS
313	.$942	END   LDX SP_SAVE
314	.$945	TXS
321	.$946	RTS
324	.$947	START  LDA ENDSTRBUF+1
325	.$94a	BNE ENDGIVEN
326	.$94c	LDA BASICEND
327	.$94e	STA ENDSTRBUF
328	.$951	LDA BASICEND+1
329	.$953	STA ENDSTRBUF+1
330	.$956	ENDGIVEN LDA #<FPSTACK
331	.$958	LDY #>FPSTACK
332	.$95a	STA FPSTACKP
333	.$95d	STY FPSTACKP+1
334	.$960	LDA #<FORSTACK
335	.$962	LDY #>FORSTACK
336	.$964	STA FORSTACKP
337	.$967	STY FORSTACKP+1
338	.$96a	LDA #<STRBUF
339	.$96c	LDY #>STRBUF
340	.$96e	STA STRBUFP
341	.$971	STY STRBUFP+1
342	.$974	STA HIGHP
343	.$977	STY HIGHP+1
344	.$97a	LDA #0
345	.$97c	STA CHLOCKFLAG
346	.$97f	STA LASTVAR
347	.$982	STA LASTVAR+1
348	.$985	JSR INITVARS
349	.$988	LDA #0
350	.$98a	STA CMD_NUM
351	.$98d	STA CHANNEL
352	.$990	TAY
353	.$991	TAX
357	.$992	STA KEYNDX
363	.$994	JSR RESTORE
364	.$997	CLC
368	.$998	RTS
371	.$999	INITNARRAY
372	.$999	STA TMP_ZP
373	.$99b	STY TMP_ZP+1
374	.$99d	LDY #0
375	.$99f	TYA
376	.$9a0	NINITLOOP STA (TMP_ZP),Y
377	.$9a2	INC TMP_ZP
378	.$9a4	BNE NLOOPNOV
379	.$9a6	INC TMP_ZP+1
380	.$9a8	NLOOPNOV LDX TMP2_ZP
381	.$9aa	BNE NLOOPNOV2
382	.$9ac	DEC TMP2_ZP+1
383	.$9ae	NLOOPNOV2 DEC TMP2_ZP
384	.$9b0	BNE NINITLOOP
385	.$9b2	LDX TMP2_ZP+1
386	.$9b4	BNE NINITLOOP
387	.$9b6	RTS
390	.$9b7	INITSTRARRAY
391	.$9b7	STA TMP_ZP
392	.$9b9	STY TMP_ZP+1
393	.$9bb	SINITLOOP LDY #0
394	.$9bd	LDA #<EMPTYSTR
395	.$9bf	STA (TMP_ZP),Y
396	.$9c1	LDA #>EMPTYSTR
397	.$9c3	INY
398	.$9c4	STA (TMP_ZP),Y
399	.$9c6	CLC
400	.$9c7	LDA TMP_ZP
401	.$9c9	ADC #2
402	.$9cb	STA TMP_ZP
403	.$9cd	BCC SLOOPNOV1
404	.$9cf	INC TMP_ZP+1
405	.$9d1	SLOOPNOV1 SEC
406	.$9d2	LDA TMP2_ZP
407	.$9d4	SBC #2
408	.$9d6	STA TMP2_ZP
409	.$9d8	BCS SLOOPNOV2
410	.$9da	DEC TMP2_ZP+1
411	.$9dc	SLOOPNOV2 LDA TMP2_ZP
412	.$9de	BNE SINITLOOP
413	.$9e0	LDA TMP2_ZP+1
414	.$9e2	BNE SINITLOOP
415	.$9e4	RTS
418	.$9e5	INITSPARAMS STA TMP3_ZP
419	.$9e7	STY TMP3_ZP+1
420	.$9e9	SEC
421	.$9ea	SBC #2
422	.$9ec	STA TMP_ZP
423	.$9ee	TYA
424	.$9ef	SBC #0
425	.$9f1	STA TMP_ZP+1
426	.$9f3	LDY #0
427	.$9f5	LDA (TMP_ZP),Y
428	.$9f7	STA TMP2_ZP
429	.$9f9	INY
430	.$9fa	LDA (TMP_ZP),Y
431	.$9fc	STA TMP2_ZP+1
432	.$9fe	LDA TMP3_ZP
433	.$a00	LDY TMP3_ZP+1
434	.$a02	RTS
437	.$a03	INITSTRVARS LDA #<STRINGVARS_START  
438	.$a05	LDY #>STRINGVARS_START
439	.$a07	CMP #<STRINGVARS_END
440	.$a09	BNE INITIT1
441	.$a0b	CPY #>STRINGVARS_END
442	.$a0d	BNE INITIT1
443	.$a0f	JMP INITSA2     
444	.$a12	INITIT1  STA TMP_ZP
445	.$a14	STY TMP_ZP+1
446	.$a16	LDY #0
447	.$a18	INITSTRLOOP LDA #<EMPTYSTR
448	.$a1a	STA (TMP_ZP),Y
449	.$a1c	INY
450	.$a1d	LDA #>EMPTYSTR
451	.$a1f	STA (TMP_ZP),Y
452	.$a21	DEY
453	.$a22	LDA TMP_ZP
454	.$a24	CLC
455	.$a25	ADC #2
456	.$a27	STA TMP_ZP
457	.$a29	LDA TMP_ZP+1
458	.$a2b	ADC #0
459	.$a2d	STA TMP_ZP+1
460	.$a2f	CMP #>STRINGVARS_END
461	.$a31	BNE INITSTRLOOP
462	.$a33	LDA TMP_ZP
463	.$a35	CMP #<STRINGVARS_END
464	.$a37	BNE INITSTRLOOP
465	.$a39	INITSA2  LDA #<STRINGARRAYS_START 
466	.$a3b	LDY #>STRINGARRAYS_START
467	.$a3d	CMP #<STRINGARRAYS_END
468	.$a3f	BNE ARRAYLOOP
469	.$a41	CPY #>STRINGARRAYS_END
470	.$a43	BNE ARRAYLOOP
471	.$a45	RTS       
472	.$a46	ARRAYLOOP CLC
473	.$a47	ADC #3
474	.$a49	BCC ARRAYSKIP1
475	.$a4b	INY
476	.$a4c	ARRAYSKIP1 CPY #>STRINGARRAYS_END
477	.$a4e	BEQ ARRAYSC
478	.$a50	BCC ARRAYSKIP2
479	.$a52	JMP ARRAYQUIT
480	.$a55	ARRAYSC  CMP #<STRINGARRAYS_END
481	.$a57	BCS ARRAYQUIT
482	.$a59	ARRAYSKIP2 STA TMP_REG
483	.$a5b	STY TMP_REG+1
484	.$a5d	JSR INITSPARAMS
485	.$a60	LDA TMP_REG
486	.$a62	LDY TMP_REG+1
487	.$a64	JSR INITSTRARRAY
488	.$a67	LDA TMP_ZP
489	.$a69	LDY TMP_ZP+1
490	.$a6b	JMP ARRAYLOOP
491	.$a6e	ARRAYQUIT RTS
494	.$a6f	RESTORE  LDA #<DATAS
495	.$a71	LDY #>DATAS
496	.$a73	STA DATASP
497	.$a76	STY DATASP+1
498	.$a79	RTS
501	.$a7a	TABSPC     BCC DOSPC
502	.$a7c	TXA
503	.$a7d	SBC $09
504	.$a7f	BCC TABSPCQUIT
505	.$a81	TAX
506	.$a82	DOSPC  INX
507	.$a83	TABSPCLOOP  DEX
508	.$a84	BNE TABSPCRIGHT
509	.$a86	TABSPCQUIT RTS
510	.$a87	TABSPCRIGHT JSR CRSRRIGHT
511	.$a8a	JMP TABSPCLOOP
514	.$a8d	REROUTE  LDA CMD_NUM  
515	.$a90	BEQ REROUTECMD
516	.$a92	TAX
517	.$a93	STA CHANNEL
518	.$a96	JMP CHKOUT
519	.$a99	REROUTECMD RTS
522	.$a9a	RESETROUTE LDA CMD_NUM  
523	.$a9d	BEQ RESETROUTECMD
524	.$a9f	JMP CLRCHNEW
525	.$aa2	RESETROUTECMD
526	.$aa2	RTS
529	.$aa3	INTOUTFASTZ LDX #32    
530	.$aa5	LDA TMP_ZP+1
531	.$aa7	BPL INTISPOS
532	.$aa9	CLC
533	.$aaa	LDA TMP_ZP
534	.$aac	EOR #$FF
535	.$aae	ADC #1
536	.$ab0	STA TMP_ZP
537	.$ab2	LDA TMP_ZP+1
538	.$ab4	EOR #$FF
539	.$ab6	ADC #0
540	.$ab8	STA TMP_ZP+1
541	.$aba	LDX #45    
542	.$abc	INTISPOS
543	.$abc	TXA
544	.$abd	JSR CHROUT
545	.$ac0	JSR CONVPOSINT
546	.$ac3	LDA NUMFLAG
547	.$ac6	BNE ALLINTOUTDONE
548	.$ac8	LDA #48
549	.$aca	JSR CHROUT
550	.$acd	ALLINTOUTDONE
551	.$acd	RTS
554	.$ace	NUMBEROUT
555	.$ace	BEQ NUMZERO
556	.$ad0	ORA #$30
557	.$ad2	STA NUMFLAG
558	.$ad5	JMP CHROUT
559	.$ad8	NUMZERO
560	.$ad8	LDX NUMFLAG
561	.$adb	BEQ STILLZERO
562	.$add	ORA #$30
563	.$adf	JMP CHROUT
564	.$ae2	STILLZERO
565	.$ae2	RTS
568	.$ae3	CONVPOSINT
569	.$ae3	JSR INT2BCD
570	.$ae6	LDX #0
571	.$ae8	STX NUMFLAG
572	.$aeb	AND #$0F
573	.$aed	JSR NUMBEROUT
574	.$af0	LDA BCD+1
575	.$af3	LSR
576	.$af4	LSR
577	.$af5	LSR
578	.$af6	LSR
579	.$af7	JSR NUMBEROUT
580	.$afa	LDA BCD+1
581	.$afd	AND #$0F
582	.$aff	TAY
583	.$b00	JSR NUMBEROUT
584	.$b03	LDA BCD
585	.$b06	LSR
586	.$b07	LSR
587	.$b08	LSR
588	.$b09	LSR
589	.$b0a	JSR NUMBEROUT
590	.$b0d	LDA BCD
591	.$b10	AND #$0F
592	.$b12	JSR NUMBEROUT
593	.$b15	RTS
596	.$b16	INT2BCD
597	.$b16	SED
598	.$b17	LDA #0
599	.$b19	STA BCD
600	.$b1c	STA BCD+1
601	.$b1f	STA BCD+2
602	.$b22	ASL TMP_ZP
603	.$b24	ROL TMP_ZP+1
604	.$b26	LDA BCD
605	.$b29	ADC BCD
606	.$b2c	STA BCD
607	.$b2f	ASL TMP_ZP
608	.$b31	ROL TMP_ZP+1
609	.$b33	ADC BCD
610	.$b36	STA BCD
611	.$b39	ASL TMP_ZP
612	.$b3b	ROL TMP_ZP+1
613	.$b3d	ADC BCD
614	.$b40	STA BCD
615	.$b43	ASL TMP_ZP
616	.$b45	ROL TMP_ZP+1
617	.$b47	ADC BCD
618	.$b4a	STA BCD
619	.$b4d	ASL TMP_ZP
620	.$b4f	ROL TMP_ZP+1
621	.$b51	ADC BCD
622	.$b54	STA BCD
623	.$b57	ASL TMP_ZP
624	.$b59	ROL TMP_ZP+1
625	.$b5b	ADC BCD
626	.$b5e	STA BCD
627	.$b61	LDX #7
628	.$b63	BCDBIT1
629	.$b63	ASL TMP_ZP
630	.$b65	ROL TMP_ZP+1
631	.$b67	LDA BCD
632	.$b6a	ADC BCD
633	.$b6d	STA BCD
634	.$b70	LDA BCD+1
635	.$b73	ADC BCD+1
636	.$b76	STA BCD+1
637	.$b79	DEX
638	.$b7a	BNE BCDBIT1
639	.$b7c	LDX #3
640	.$b7e	BCDBIT2
641	.$b7e	ASL TMP_ZP
642	.$b80	ROL TMP_ZP+1
643	.$b82	LDA BCD
644	.$b85	ADC BCD
645	.$b88	STA BCD
646	.$b8b	LDA BCD+1
647	.$b8e	ADC BCD+1
648	.$b91	STA BCD+1
649	.$b94	LDA BCD+2
650	.$b97	ADC BCD+2
651	.$b9a	STA BCD+2
652	.$b9d	DEX
653	.$b9e	BNE BCDBIT2
654	.$ba0	CLD
655	.$ba1	RTS
656	.$ba2	BCD
657	.$ba2	.WORD 0 0
658	.$ba6	NUMFLAG
659	.$ba6	.BYTE 0
662	.$ba7	REALOUTFAST JSR FACINT
663	.$baa	STA TMP_ZP+1
664	.$bac	STY TMP_ZP
665	.$bae	JMP INTOUTFASTZ
668	.$bb1	CHECKFORFASTOUT
669	.$bb1	JSR REROUTE
670	.$bb4	JSR XREGFAC
671	.$bb7	LDA FACEXP
672	.$bb9	CMP #$90
673	.$bbb	BCS REALOUTINT
674	.$bbd	CMP #$81
675	.$bbf	BCC REALOUTINT
676	.$bc1	MAYBEREALOUTFAST
677	.$bc1	LDA FACEXP+3
678	.$bc3	BNE REALOUTINT
679	.$bc5	LDA FACEXP+4
680	.$bc7	BNE REALOUTINT
681	.$bc9	LDA FACEXP
682	.$bcb	SEC
683	.$bcc	SBC #129
684	.$bce	ASL
685	.$bcf	TAX
686	.$bd0	LDA FACEXP+1
687	.$bd2	AND MANTMASK,X
688	.$bd5	BNE REALOUTINT
689	.$bd7	INX
690	.$bd8	LDA FACEXP+2
691	.$bda	AND MANTMASK,X
692	.$bdd	BNE REALOUTINT
693	.$bdf	JMP REALOUTFAST
694	.$be2	REALOUTINT LDY #0
695	.$be4	JSR FACSTR
696	.$be7	LDY #0
697	.$be9	LDA LOFBUF,Y
698	.$bec	STRLOOPRO JSR CHROUT
699	.$bef	INY
700	.$bf0	LDA LOFBUF,Y
701	.$bf3	BNE STRLOOPRO
702	.$bf5	RTS
703	.$bf6	MANTMASK
704	.$bf6	.BYTE 127 255 63 255 31 255 15 255 7 255 3 255 1 255 0 255 0 127 0 63 0 31 0 15 0 7 0 3 0 1
707	.$c14	REALOUT  LDA X_REG
708	.$c16	BNE RNOTNULL
709	.$c18	JMP PRINTNULL
710	.$c1b	RNOTNULL JSR CHECKFORFASTOUT
711	.$c1e	JMP RESETROUTE
714	.$c21	LINEBREAK JSR REROUTE
715	.$c24	LDA #$0D
716	.$c26	JSR CHROUT
717	.$c29	JMP RESETROUTE
720	.$c2c	PRINTNULL JSR REROUTE
721	.$c2f	LDA #$20
722	.$c31	JSR CHROUT
723	.$c34	LDA #$30
724	.$c36	JSR CHROUT
725	.$c39	JMP RESETROUTE
728	.$c3c	STROUTWL STA A_REG
729	.$c3f	STY A_REG+1
730	.$c42	STROUT  JSR REROUTE
731	.$c45	LDA A_REG
732	.$c48	STA INDEX1
733	.$c4a	LDA A_REG+1
734	.$c4d	STA INDEX1+1
735	.$c4f	LDY #0
736	.$c51	LDA (INDEX1),Y
737	.$c53	TAX
738	.$c54	INC INDEX1
739	.$c56	BNE PRINTSTR
740	.$c58	INC INDEX1+1
741	.$c5a	PRINTSTR JSR PRINTSTRS
742	.$c5d	LDA HIGHP   
743	.$c60	STA STRBUFP
744	.$c63	LDA HIGHP+1
745	.$c66	STA STRBUFP+1
746	.$c69	JSR RESETROUTE
747	.$c6c	RTS
750	.$c6d	STROUTBRKWL STA A_REG
751	.$c70	STY A_REG+1
752	.$c73	STROUTBRK JSR REROUTE
753	.$c76	LDA A_REG
754	.$c79	STA INDEX1
755	.$c7b	LDA A_REG+1
756	.$c7e	STA INDEX1+1
757	.$c80	LDY #0
758	.$c82	LDA (INDEX1),Y
759	.$c84	TAX
760	.$c85	INC INDEX1
761	.$c87	BNE PRINTSTR2
762	.$c89	INC INDEX1+1
763	.$c8b	PRINTSTR2 JSR PRINTSTRS
764	.$c8e	LDA HIGHP   
765	.$c91	STA STRBUFP
766	.$c94	LDA HIGHP+1
767	.$c97	STA STRBUFP+1
768	.$c9a	LDA #$0D
769	.$c9c	JSR CHROUT
770	.$c9f	JMP RESETROUTE  
773	.$ca2	TABOUT  JSR REROUTE
774	.$ca5	LDA CMD_NUM
775	.$ca8	BEQ NORMALTABOUT  
776	.$caa	CMP #3
777	.$cac	BEQ NORMALTABOUT2  
778	.$cae	JMP TABOUTCHANNEL2
779	.$cb1	NORMALTABOUT2
780	.$cb1	JSR CLRCHNEW
781	.$cb4	NORMALTABOUT
782	.$cb4	SEC
783	.$cb5	JSR CRSRPOS
784	.$cb8	TYA
785	.$cb9	SEC
786	.$cba	TABSUB   SBC #$0A
787	.$cbc	BCS TABSUB
788	.$cbe	EOR #$FF
789	.$cc0	ADC #$01
790	.$cc2	TAX
791	.$cc3	INX
792	.$cc4	TABLOOP  DEX
793	.$cc5	BNE TABRIGHT
794	.$cc7	RTS
795	.$cc8	TABRIGHT JSR CRSRRIGHT
796	.$ccb	JMP TABLOOP
799	.$cce	REALFACPUSH STA TMP_ZP
800	.$cd0	STY TMP_ZP+1
801	.$cd2	LDX FPSTACKP
802	.$cd5	LDY FPSTACKP+1
803	.$cd8	STX TMP2_ZP
804	.$cda	STY TMP2_ZP+1
805	.$cdc	LDY #0
806	.$cde	LDA (TMP_ZP),Y
807	.$ce0	STA (TMP2_ZP),Y
808	.$ce2	INY
809	.$ce3	LDA (TMP_ZP),Y
810	.$ce5	STA (TMP2_ZP),Y
811	.$ce7	INY
812	.$ce8	LDA (TMP_ZP),Y
813	.$cea	STA (TMP2_ZP),Y
814	.$cec	INY
815	.$ced	LDA (TMP_ZP),Y
816	.$cef	STA (TMP2_ZP),Y
817	.$cf1	INY
818	.$cf2	LDA (TMP_ZP),Y
819	.$cf4	STA (TMP2_ZP),Y
820	.$cf6	TXA    
821	.$cf7	CLC
822	.$cf8	ADC #5
823	.$cfa	STA FPSTACKP
824	.$cfd	BCC NOPVRFPXX
825	.$cff	INC FPSTACKP+1
826	.$d02	NOPVRFPXX RTS
829	.$d03	POPREAL  LDA FPSTACKP
830	.$d06	SEC
831	.$d07	SBC #5
832	.$d09	STA FPSTACKP
833	.$d0c	BCS NOPVPR
834	.$d0e	DEC FPSTACKP+1
835	.$d11	NOPVPR  LDA FPSTACKP
836	.$d14	LDY FPSTACKP+1
837	.$d17	JMP REALFAC
840	.$d1a	POPREALXREG LDA FPSTACKP
841	.$d1d	SEC
842	.$d1e	SBC #5
843	.$d20	STA FPSTACKP
844	.$d23	BCS NOPVPRXR
845	.$d25	DEC FPSTACKP+1
846	.$d28	NOPVPRXR LDA FPSTACKP
847	.$d2b	LDY FPSTACKP+1
848	.$d2e	STA TMP_ZP
849	.$d30	STY TMP_ZP+1
850	.$d32	LDY #$4
851	.$d34	LDA (TMP_ZP),Y
852	.$d36	STA X_REG+4
853	.$d38	STA FACLO
854	.$d3a	DEY
855	.$d3b	LDA (TMP_ZP),Y
856	.$d3d	STA X_REG+3
857	.$d3f	STA FACMO
858	.$d41	DEY
859	.$d42	LDA (TMP_ZP),Y
860	.$d44	STA X_REG+2
861	.$d46	STA FACMOH
862	.$d48	DEY
863	.$d49	LDA (TMP_ZP),Y
864	.$d4b	STA X_REG+1
865	.$d4d	STA FACSGN
866	.$d4f	ORA #$80
867	.$d51	STA FACHO
868	.$d53	DEY
869	.$d54	LDA (TMP_ZP),Y
870	.$d56	STA X_REG
871	.$d58	STA FACEXP
872	.$d5a	STY FACOV
873	.$d5c	RTS
876	.$d5d	COPY2_XYA_XREG
877	.$d5d	STA TMP3_ZP
878	.$d5f	STY TMP3_ZP+1
879	.$d61	COPY2_XY_XREG
880	.$d61	LDX #<X_REG  
881	.$d63	LDY #0
882	.$d65	LDA (TMP3_ZP),Y
883	.$d67	STA X_REG
884	.$d69	INY
885	.$d6a	LDA (TMP3_ZP),Y
886	.$d6c	STA X_REG+1
887	.$d6e	INY
888	.$d6f	LDA (TMP3_ZP),Y
889	.$d71	STA X_REG+2
890	.$d73	INY
891	.$d74	LDA (TMP3_ZP),Y
892	.$d76	STA X_REG+3
893	.$d78	INY
894	.$d79	LDA (TMP3_ZP),Y
895	.$d7b	STA X_REG+4
896	.$d7d	RTS
899	.$d7e	COPY2_XYA_YREG
900	.$d7e	STA TMP3_ZP
901	.$d80	STY TMP3_ZP+1
902	.$d82	COPY2_XY_YREG
903	.$d82	LDX #<Y_REG  
904	.$d84	LDY #0
905	.$d86	LDA (TMP3_ZP),Y
906	.$d88	STA Y_REG
907	.$d8b	INY
908	.$d8c	LDA (TMP3_ZP),Y
909	.$d8e	STA Y_REG+1
910	.$d91	INY
911	.$d92	LDA (TMP3_ZP),Y
912	.$d94	STA Y_REG+2
913	.$d97	INY
914	.$d98	LDA (TMP3_ZP),Y
915	.$d9a	STA Y_REG+3
916	.$d9d	INY
917	.$d9e	LDA (TMP3_ZP),Y
918	.$da0	STA Y_REG+4
919	.$da3	RTS
923	.$da4	FACWORD
924	.$da4	LDA FACEXP   
925	.$da6	BNE DOFACWORD
926	.$da8	STA FACSGN   
927	.$daa	DOFACWORD:
928	.$daa	JMP XFACWORD
932	.$dad	LOCKCHANNEL
933	.$dad	PHA
934	.$dae	LDA #$FF
935	.$db0	STA CHLOCKFLAG
936	.$db3	PLA
937	.$db4	RTS
940	.$db5	UNLOCKCHANNEL
941	.$db5	PHA
942	.$db6	LDA #0
943	.$db8	STA CHLOCKFLAG
944	.$dbb	PLA
945	.$dbc	JMP CLRCH
948	.$dbf	INITOUTCHANNEL
949	.$dbf	LDA CHLOCKFLAG
950	.$dc2	BEQ INITOUT2
951	.$dc4	CMP #$FF
952	.$dc6	BNE SKIPINITCH
953	.$dc8	INITOUT2
954	.$dc8	LDA #<C_REG
955	.$dca	LDY #>C_REG
956	.$dcc	JSR REALFAC
957	.$dcf	JSR FACWORD
958	.$dd2	TYA
959	.$dd3	TAX
960	.$dd4	CPX CMD_NUM
961	.$dd7	BNE CMDNEQUAL
962	.$dd9	LDY #0
963	.$ddb	STY CMD_NUM   
964	.$dde	CMDNEQUAL STA CHANNEL
965	.$de1	STA CHLOCKFLAG
966	.$de4	JMP CHKOUT
967	.$de7	SKIPINITCH
968	.$de7	RTS
971	.$de8	CLRCHNEW
972	.$de8	LDA CHLOCKFLAG
973	.$deb	BNE SKIPCLRCH
974	.$ded	JMP CLRCH
975	.$df0	SKIPCLRCH
976	.$df0	RTS
979	.$df1	STROUTCHANNEL
980	.$df1	JSR INITOUTCHANNEL
981	.$df4	JSR STROUT
982	.$df7	JMP CLRCHNEW
985	.$dfa	LINEBREAKCHANNEL
986	.$dfa	JSR INITOUTCHANNEL
987	.$dfd	JSR LINEBREAK
988	.$e00	JMP CLRCHNEW
991	.$e03	TABOUTCHANNEL
992	.$e03	JSR INITOUTCHANNEL
993	.$e06	LDA CHANNEL
994	.$e09	CMP #3  
995	.$e0b	BEQ TABOUTSCREEN
996	.$e0d	TABOUTCHANNEL2
997	.$e0d	LDA IOCHANNEL
998	.$e0f	STA STORE1
999	.$e12	LDA #1
1000	.$e14	STA IOCHANNEL  
1001	.$e16	LDX #10
1002	.$e18	JMP EXITCHANNEL
1003	.$e1b	TABOUTSCREEN
1004	.$e1b	JSR CLRCHNEW
1005	.$e1e	JMP TABOUT
1008	.$e21	EXITCHANNEL CLC
1009	.$e22	JSR TABSPC
1010	.$e25	JSR CLRCHNEW
1011	.$e28	LDA STORE1
1012	.$e2b	STA IOCHANNEL
1013	.$e2d	RTS
1016	.$e2e	CMD   JSR XREGFAC
1017	.$e31	JSR FACWORD
1018	.$e34	STY CMD_NUM
1019	.$e37	RTS
1022	.$e38	CHECKCMD LDA CMD_NUM  
1023	.$e3b	BEQ NOCMD
1024	.$e3d	JSR REROUTE
1025	.$e40	LDA #$20
1026	.$e42	JMP CHROUT
1027	.$e45	JSR RESETROUTE
1028	.$e48	NOCMD  RTS
1031	.$e49	OPEN  JSR SETEMPTYSTR 
1032	.$e4c	JSR YREGFAC
1033	.$e4f	JSR FACWORD
1034	.$e52	STY TMP_REG  
1035	.$e54	JSR XREGFAC
1036	.$e57	JSR FACWORD
1037	.$e5a	STY LOGICADDR 
1038	.$e5c	DEC TMP_REG
1039	.$e5e	BEQ ALLPARAMS
1040	.$e60	LDA #<C_REG
1041	.$e62	LDY #>C_REG
1042	.$e64	JSR REALFAC
1043	.$e67	JSR FACWORD
1044	.$e6a	STY DEVICENUM 
1045	.$e6c	DEC TMP_REG
1046	.$e6e	BEQ ALLPARAMS
1047	.$e70	LDA #<D_REG
1048	.$e72	LDY #>D_REG
1049	.$e74	JSR REALFAC
1050	.$e77	JSR FACWORD
1051	.$e7a	STY SECADDR  
1052	.$e7c	DEC TMP_REG
1053	.$e7e	BEQ ALLPARAMS
1054	.$e80	JSR SETNAMEPRT
1055	.$e83	ALLPARAMS
1059	.$e83	JSR OPENCH
1060	.$e86	BCS OPENERR
1061	.$e88	RTS
1062	.$e89	OPENERR  STA TMP2_ZP
1063	.$e8b	LDA LOGICADDR
1064	.$e8d	JSR CLOSECH
1068	.$e90	LDX TMP2_ZP
1069	.$e92	JMP ERRALL
1072	.$e95	SETEMPTYSTR
1073	.$e95	LDA #<EMPTYSTR
1074	.$e97	STA FILEADDR
1075	.$e99	LDA #>EMPTYSTR
1076	.$e9b	STA FILEADDR+1
1077	.$e9d	LDA #0
1078	.$e9f	STA FILELEN
1079	.$ea1	STA LOGICADDR
1080	.$ea3	STA DEVICENUM
1081	.$ea5	STA SECADDR
1082	.$ea7	RTS
1085	.$ea8	SETNAMEPRT LDA G_REG
1086	.$eaa	LDY G_REG+1
1087	.$eac	STA TMP_ZP
1088	.$eae	STY TMP_ZP+1
1089	.$eb0	LDY #0
1090	.$eb2	LDA (TMP_ZP),Y 
1091	.$eb4	STA FILELEN
1092	.$eb6	INC G_REG
1093	.$eb8	BNE SNPNOOV
1094	.$eba	INC G_REG+1
1095	.$ebc	SNPNOOV  LDA G_REG
1096	.$ebe	LDY G_REG+1
1097	.$ec0	STA FILEADDR  
1098	.$ec2	STY FILEADDR+1 
1099	.$ec4	RTS
1102	.$ec5	CLOSE  JSR XREGFAC
1103	.$ec8	JSR FACWORD
1104	.$ecb	TYA    
1105	.$ecc	JSR CLOSECH
1109	.$ecf	RTS
1112	.$ed0	XREGFAC  LDA X_REG+4
1113	.$ed2	STA FACLO
1114	.$ed4	LDA X_REG+3
1115	.$ed6	STA FACMO
1116	.$ed8	LDA X_REG+2
1117	.$eda	STA FACMOH
1118	.$edc	LDA X_REG+1
1119	.$ede	STA FACSGN
1120	.$ee0	ORA #$80
1121	.$ee2	STA FACHO
1122	.$ee4	LDA X_REG
1123	.$ee6	STA FACEXP
1124	.$ee8	LDA #0
1125	.$eea	STA FACOV
1126	.$eec	RTS
1129	.$eed	YREGFAC  LDA Y_REG+4
1130	.$ef0	STA FACLO
1131	.$ef2	LDA Y_REG+3
1132	.$ef5	STA FACMO
1133	.$ef7	LDA Y_REG+2
1134	.$efa	STA FACMOH
1135	.$efc	LDA Y_REG+1
1136	.$eff	STA FACSGN
1137	.$f01	ORA #$80
1138	.$f03	STA FACHO
1139	.$f05	LDA Y_REG
1140	.$f08	STA FACEXP
1141	.$f0a	LDA #0
1142	.$f0c	STA FACOV
1143	.$f0e	RTS
1257	.$f0f	INITVARS
1258	.$f0f	JSR INITSTRVARS
1259	.$f12	LDA #0
1260	.$f14	RTS
1264	.$f15	CONSTANTS
1267	.$f15	CONST_0R .REAL 1.0
1270	.$f1a	CONST_1R .REAL 8.0
1273	.$f1f	CONST_2R .REAL 15.0
1275	.$f24	CONST_3 .BYTE 6
1276	.$f25	.STRG "s:hurz"
1279	.$f2b	CONST_4R .REAL 4.0
1282	.$f30	CONST_5R .REAL 10.0
1284	.$f35	CONST_6 .BYTE 10
1285	.$f36	.STRG "hurz,ser,w"
1287	.$f40	CONST_7 .BYTE 9
1288	.$f41	.STRG "something"
1290	.$f4a	CONST_8 .BYTE 5
1291	.$f4b	.STRG "hello"
1293	.$f50	CONST_9 .BYTE 5
1294	.$f51	.STRG "world"
1296	.$f56	CONST_10 .BYTE 4
1297	.$f57	.STRG "yeah"
1300	.$f5b	CONST_11 .REAL 222.22
1303	.$f60	CONST_12 .REAL 3434.333
1305	.$f65	CONST_13 .BYTE 4
1306	.$f66	.STRG "yepp"
1308	.$f6a	CONST_14 .BYTE 4
1309	.$f6b	.STRG "nope"
1312	.$f6f	DATAS
1313	.$f6f	.BYTE $FF
1315	.$f70	CONSTANTS_END
1318	.$f70	VARIABLES
1319	.$f70	STRINGVARS_START
1321	.$f70	VAR_TI$ .WORD EMPTYSTR
1322	.$f72	STRINGVARS_END
1323	.$f72	STRINGARRAYS_START
1324	.$f72	STRINGARRAYS_END
1325	.$f72	VARIABLES_END
1327	.$f72	Y_REG .REAL 0.0
1328	.$f77	C_REG .REAL 0.0
1329	.$f7c	D_REG .REAL 0.0
1330	.$f81	E_REG .REAL 0.0
1331	.$f86	F_REG .REAL 0.0
1332	.$f8b	A_REG .WORD 0
1333	.$f8d	B_REG .WORD 0
1334	.$f8f	CMD_NUM .BYTE 0
1335	.$f90	CHANNEL .BYTE 0
1336	.$f91	SP_SAVE .BYTE 0
1337	.$f92	TMP2_REG .WORD 0
1338	.$f94	TMP3_REG .WORD 0
1339	.$f96	TMP4_REG .WORD 0
1340	.$f98	AS_TMP .WORD 0
1341	.$f9a	BPOINTER_TMP .WORD 0
1342	.$f9c	BASICTEXTP .BYTE 0
1343	.$f9d	STORE1 .WORD 0
1344	.$f9f	STORE2 .WORD 0
1345	.$fa1	STORE3 .WORD 0
1346	.$fa3	STORE4 .WORD 0
1347	.$fa5	GCSTART .WORD 0
1348	.$fa7	GCLEN .WORD 0
1349	.$fa9	GCWORK .WORD 0
1350	.$fab	INPUTLENGTH .BYTE 0
1351	.$fac	TMP_FREG .REAL 0
1352	.$fb1	TMP2_FREG .REAL 0
1353	.$fb6	TMP_FLAG .BYTE 0
1354	.$fb7	INT_FLAG .BYTE 0
1355	.$fb8	REAL_CONST_ONE .REAL 1.0
1356	.$fbd	REAL_CONST_ZERO .REAL 0.0
1357	.$fc2	REAL_CONST_MINUS_ONE .REAL -1.0
1358	.$fc7	CHLOCKFLAG .BYTE 0
1359	.$fc8	EMPTYSTR .BYTE 0
1360	.$fc9	FPSTACKP .WORD FPSTACK
1361	.$fcb	FORSTACKP .WORD FORSTACK
1362	.$fcd	DATASP .WORD DATAS
1363	.$fcf	LASTVAR .WORD 0
1364	.$fd1	LASTVARP .WORD 0
1365	.$fd3	HIGHP .WORD STRBUF
1366	.$fd5	STRBUFP .WORD STRBUF
1367	.$fd7	ENDSTRBUF .WORD 0
1368	.$fd9	INPUTQUEUEP .BYTE 0
1369	.$fda	PROGRAMEND
1370	.$fda	INPUTQUEUE .ARRAY $0F
1371	.$fe9	FPSTACK .ARRAY 100
1372	.$104d	FORSTACK .ARRAY 340
1373	.$11a1	STRBUF .BYTE 0
