
10 PRINT"{clear}"
20 POKE 53280,0:POKE 53281,1
30 P=0:C=0:SA=32:CO=C:BL=0
40 GOSUB 1000
50 GET A$:IF A$="" THEN GOSUB3000
52 IF A$="" THEN 40
55 GOSUB 1010
60 IF A$="w" THEN IF P-40>=0 THEN P=P-40
70 IF A$="s" THEN IF P+40<=999 THEN P=P+40
80 IF A$="a" THEN IF P-1>=0 THEN P=P-1
90 IF A$="d" THEN IF P+1<=999 THEN P=P+1
100 IF A$>"0" AND A$<"9" THEN C=VAL(A$)-1:POKE 53280,C
110 IFA$=CHR$(13) THEN GOSUB 2000
120 IF A$=CHR$(135) THEN GOSUB 4000
130 IF A$=CHR$(136) THEN GOSUB 5000
140 IF A$="{clear}" THEN PRINT "{clear}"
900 GOTO 40
1000 IF BL=0 THEN SA=PEEK(1024+P):CO=PEEK(55296+P):BL=1:GOTO1050
1010 POKE 1024+P,SA:POKE 55296+P,CO:BL=0:RETURN
1050 POKE 1024+P,160:POKE 55296+P,RND(0)*16:RETURN
2000 POKE 1024+P,160:POKE 55296+P,C
2010 BL=0:GOSUB 1000
2020 RETURN
3000 J=PEEK(56320)
3010 IF(J AND127)=127 THEN RETURN
3020 IF(J AND1)=0 THEN A$="w":RETURN
3030 IF(J AND2)=0 THEN A$="s":RETURN
3040 IF(JAND4)=0 THEN A$="a":RETURN
3050 IF(J AND8)=0 THEN A$="d":RETURN
3060 IF(J AND16)=0 THEN A$=CHR$(13)
3070 RETURN
4000 GOSUB40000
4010 PRINT"{home}{black}";
4020 INPUT"speichername";N$
4030 GOSUB 40100
4035 IF N$="" THEN RETURN
4040 OPEN 2,8,2,"@:"+N$+",s,w"
4050 FOR I=0TO999
4060 PRINT#2,CHR$(PEEK(1024+I));
4070 PRINT#2,CHR$(PEEK(55296+I));
4080 NEXT
4090 CLOSE2
4100 RETURN
5000 GOSUB40000
5010 PRINT"{home}{black}";
5020 INPUT"dateiname";N$
5030 GOSUB 40100
5035 IF N$="" THEN RETURN
5040 OPEN2,8,2,N$+",s,r"
5050 FOR I=0TO999
5060 POKE 1024+I,0
5070 GET#2,C$:GET#2,FA$
5080 POKE 1024+I,ASC(C$)
5090 POKE 55296+I,ASC(FA$+CHR$(0))
5100 NEXT
5110 CLOSE2
5120 RETURN
40000 FOR I=0 TO80:POKE 49152+I,PEEK(1024+I):POKE 49252+I,PEEK(55296+I):NEXT
40010 RETURN
40100 FOR I=0 TO80:POKE 1024+I, PEEK(49152+I):POKE 55296+I,PEEK(49252+I):NEXT
40110 RETURN
